function W6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ra(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function are(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var jC={exports:{}},Rg={},DC={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4;function ore(){if(D4)return Dt;D4=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function p(G){return G===null||typeof G!="object"?null:(G=d&&G[d]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(G,Y,ae){this.props=G,this.context=Y,this.refs=x,this.updater=ae||g}v.prototype.isReactComponent={},v.prototype.setState=function(G,Y){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Y,"setState")},v.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function w(){}w.prototype=v.prototype;function k(G,Y,ae){this.props=G,this.context=Y,this.refs=x,this.updater=ae||g}var S=k.prototype=new w;S.constructor=k,y(S,v.prototype),S.isPureReactComponent=!0;var I=Array.isArray,E=Object.prototype.hasOwnProperty,j={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(G,Y,ae){var ye,xe={},Ce=null,fe=null;if(Y!=null)for(ye in Y.ref!==void 0&&(fe=Y.ref),Y.key!==void 0&&(Ce=""+Y.key),Y)E.call(Y,ye)&&!A.hasOwnProperty(ye)&&(xe[ye]=Y[ye]);var Te=arguments.length-2;if(Te===1)xe.children=ae;else if(1<Te){for(var ue=Array(Te),Ne=0;Ne<Te;Ne++)ue[Ne]=arguments[Ne+2];xe.children=ue}if(G&&G.defaultProps)for(ye in Te=G.defaultProps,Te)xe[ye]===void 0&&(xe[ye]=Te[ye]);return{$$typeof:t,type:G,key:Ce,ref:fe,props:xe,_owner:j.current}}function $(G,Y){return{$$typeof:t,type:G.type,key:Y,ref:G.ref,props:G.props,_owner:G._owner}}function D(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function R(G){var Y={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ae){return Y[ae]})}var F=/\/+/g;function L(G,Y){return typeof G=="object"&&G!==null&&G.key!=null?R(""+G.key):Y.toString(36)}function K(G,Y,ae,ye,xe){var Ce=typeof G;(Ce==="undefined"||Ce==="boolean")&&(G=null);var fe=!1;if(G===null)fe=!0;else switch(Ce){case"string":case"number":fe=!0;break;case"object":switch(G.$$typeof){case t:case e:fe=!0}}if(fe)return fe=G,xe=xe(fe),G=ye===""?"."+L(fe,0):ye,I(xe)?(ae="",G!=null&&(ae=G.replace(F,"$&/")+"/"),K(xe,Y,ae,"",function(Ne){return Ne})):xe!=null&&(D(xe)&&(xe=$(xe,ae+(!xe.key||fe&&fe.key===xe.key?"":(""+xe.key).replace(F,"$&/")+"/")+G)),Y.push(xe)),1;if(fe=0,ye=ye===""?".":ye+":",I(G))for(var Te=0;Te<G.length;Te++){Ce=G[Te];var ue=ye+L(Ce,Te);fe+=K(Ce,Y,ae,ue,xe)}else if(ue=p(G),typeof ue=="function")for(G=ue.call(G),Te=0;!(Ce=G.next()).done;)Ce=Ce.value,ue=ye+L(Ce,Te++),fe+=K(Ce,Y,ae,ue,xe);else if(Ce==="object")throw Y=String(G),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return fe}function X(G,Y,ae){if(G==null)return G;var ye=[],xe=0;return K(G,ye,"","",function(Ce){return Y.call(ae,Ce,xe++)}),ye}function q(G){if(G._status===-1){var Y=G._result;Y=Y(),Y.then(function(ae){(G._status===0||G._status===-1)&&(G._status=1,G._result=ae)},function(ae){(G._status===0||G._status===-1)&&(G._status=2,G._result=ae)}),G._status===-1&&(G._status=0,G._result=Y)}if(G._status===1)return G._result.default;throw G._result}var Q={current:null},z={transition:null},H={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:z,ReactCurrentOwner:j};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:X,forEach:function(G,Y,ae){X(G,function(){Y.apply(this,arguments)},ae)},count:function(G){var Y=0;return X(G,function(){Y++}),Y},toArray:function(G){return X(G,function(Y){return Y})||[]},only:function(G){if(!D(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Dt.Component=v,Dt.Fragment=n,Dt.Profiler=s,Dt.PureComponent=k,Dt.StrictMode=r,Dt.Suspense=l,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Dt.act=ee,Dt.cloneElement=function(G,Y,ae){if(G==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+G+".");var ye=y({},G.props),xe=G.key,Ce=G.ref,fe=G._owner;if(Y!=null){if(Y.ref!==void 0&&(Ce=Y.ref,fe=j.current),Y.key!==void 0&&(xe=""+Y.key),G.type&&G.type.defaultProps)var Te=G.type.defaultProps;for(ue in Y)E.call(Y,ue)&&!A.hasOwnProperty(ue)&&(ye[ue]=Y[ue]===void 0&&Te!==void 0?Te[ue]:Y[ue])}var ue=arguments.length-2;if(ue===1)ye.children=ae;else if(1<ue){Te=Array(ue);for(var Ne=0;Ne<ue;Ne++)Te[Ne]=arguments[Ne+2];ye.children=Te}return{$$typeof:t,type:G.type,key:xe,ref:Ce,props:ye,_owner:fe}},Dt.createContext=function(G){return G={$$typeof:a,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},G.Provider={$$typeof:i,_context:G},G.Consumer=G},Dt.createElement=T,Dt.createFactory=function(G){var Y=T.bind(null,G);return Y.type=G,Y},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(G){return{$$typeof:o,render:G}},Dt.isValidElement=D,Dt.lazy=function(G){return{$$typeof:u,_payload:{_status:-1,_result:G},_init:q}},Dt.memo=function(G,Y){return{$$typeof:c,type:G,compare:Y===void 0?null:Y}},Dt.startTransition=function(G){var Y=z.transition;z.transition={};try{G()}finally{z.transition=Y}},Dt.unstable_act=ee,Dt.useCallback=function(G,Y){return Q.current.useCallback(G,Y)},Dt.useContext=function(G){return Q.current.useContext(G)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(G){return Q.current.useDeferredValue(G)},Dt.useEffect=function(G,Y){return Q.current.useEffect(G,Y)},Dt.useId=function(){return Q.current.useId()},Dt.useImperativeHandle=function(G,Y,ae){return Q.current.useImperativeHandle(G,Y,ae)},Dt.useInsertionEffect=function(G,Y){return Q.current.useInsertionEffect(G,Y)},Dt.useLayoutEffect=function(G,Y){return Q.current.useLayoutEffect(G,Y)},Dt.useMemo=function(G,Y){return Q.current.useMemo(G,Y)},Dt.useReducer=function(G,Y,ae){return Q.current.useReducer(G,Y,ae)},Dt.useRef=function(G){return Q.current.useRef(G)},Dt.useState=function(G){return Q.current.useState(G)},Dt.useSyncExternalStore=function(G,Y,ae){return Q.current.useSyncExternalStore(G,Y,ae)},Dt.useTransition=function(){return Q.current.useTransition()},Dt.version="18.3.1",Dt}var O4;function rm(){return O4||(O4=1,DC.exports=ore()),DC.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M4;function lre(){if(M4)return Rg;M4=1;var t=rm(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,c){var u,d={},p=null,g=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!i.hasOwnProperty(u)&&(d[u]=l[u]);if(o&&o.defaultProps)for(u in l=o.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:o,key:p,ref:g,props:d,_owner:s.current}}return Rg.Fragment=n,Rg.jsx=a,Rg.jsxs=a,Rg}var F4;function cre(){return F4||(F4=1,jC.exports=lre()),jC.exports}var h=cre(),hb={},OC={exports:{}},ui={},MC={exports:{}},FC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4;function ure(){return L4||(L4=1,(function(t){function e(z,H){var ee=z.length;z.push(H);e:for(;0<ee;){var G=ee-1>>>1,Y=z[G];if(0<s(Y,H))z[G]=H,z[ee]=Y,ee=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],ee=z.pop();if(ee!==H){z[0]=ee;e:for(var G=0,Y=z.length,ae=Y>>>1;G<ae;){var ye=2*(G+1)-1,xe=z[ye],Ce=ye+1,fe=z[Ce];if(0>s(xe,ee))Ce<Y&&0>s(fe,xe)?(z[G]=fe,z[Ce]=ee,G=Ce):(z[G]=xe,z[ye]=ee,G=ye);else if(Ce<Y&&0>s(fe,ee))z[G]=fe,z[Ce]=ee,G=Ce;else break e}}return H}function s(z,H){var ee=z.sortIndex-H.sortIndex;return ee!==0?ee:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,p=3,g=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=z)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function I(z){if(x=!1,S(z),!y)if(n(l)!==null)y=!0,q(E);else{var H=n(c);H!==null&&Q(I,H.startTime-z)}}function E(z,H){y=!1,x&&(x=!1,w(T),T=-1),g=!0;var ee=p;try{for(S(H),d=n(l);d!==null&&(!(d.expirationTime>H)||z&&!R());){var G=d.callback;if(typeof G=="function"){d.callback=null,p=d.priorityLevel;var Y=G(d.expirationTime<=H);H=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(l)&&r(l),S(H)}else r(l);d=n(l)}if(d!==null)var ae=!0;else{var ye=n(c);ye!==null&&Q(I,ye.startTime-H),ae=!1}return ae}finally{d=null,p=ee,g=!1}}var j=!1,A=null,T=-1,$=5,D=-1;function R(){return!(t.unstable_now()-D<$)}function F(){if(A!==null){var z=t.unstable_now();D=z;var H=!0;try{H=A(!0,z)}finally{H?L():(j=!1,A=null)}}else j=!1}var L;if(typeof k=="function")L=function(){k(F)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,X=K.port2;K.port1.onmessage=F,L=function(){X.postMessage(null)}}else L=function(){v(F,0)};function q(z){A=z,j||(j=!0,L())}function Q(z,H){T=v(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,q(E))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var ee=p;p=H;try{return z()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ee=p;p=z;try{return H()}finally{p=ee}},t.unstable_scheduleCallback=function(z,H,ee){var G=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?G+ee:G):ee=G,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,z={id:u++,callback:H,priorityLevel:z,startTime:ee,expirationTime:Y,sortIndex:-1},ee>G?(z.sortIndex=ee,e(c,z),n(l)===null&&z===n(c)&&(x?(w(T),T=-1):x=!0,Q(I,ee-G))):(z.sortIndex=Y,e(l,z),y||g||(y=!0,q(E))),z},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(z){var H=p;return function(){var ee=p;p=H;try{return z.apply(this,arguments)}finally{p=ee}}}})(FC)),FC}var V4;function dre(){return V4||(V4=1,MC.exports=ure()),MC.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B4;function hre(){if(B4)return ui;B4=1;var t=rm(),e=dre();function n(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(f,m){a(f,m),a(f+"Capture",m)}function a(f,m){for(s[f]=m,f=0;f<m.length;f++)r.add(m[f])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function p(f){return l.call(d,f)?!0:l.call(u,f)?!1:c.test(f)?d[f]=!0:(u[f]=!0,!1)}function g(f,m,b,C){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return C?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function y(f,m,b,C){if(m===null||typeof m>"u"||g(f,m,b,C))return!0;if(C)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function x(f,m,b,C,P,M,B){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=C,this.attributeNamespace=P,this.mustUseProperty=b,this.propertyName=f,this.type=m,this.sanitizeURL=M,this.removeEmptyString=B}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];v[m]=new x(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function k(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(w,k);v[m]=new x(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(w,k);v[m]=new x(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(w,k);v[m]=new x(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function S(f,m,b,C){var P=v.hasOwnProperty(m)?v[m]:null;(P!==null?P.type!==0:C||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,b,P,C)&&(b=null),C||P===null?p(m)&&(b===null?f.removeAttribute(m):f.setAttribute(m,""+b)):P.mustUseProperty?f[P.propertyName]=b===null?P.type===3?!1:"":b:(m=P.attributeName,C=P.attributeNamespace,b===null?f.removeAttribute(m):(P=P.type,b=P===3||P===4&&b===!0?"":""+b,C?f.setAttributeNS(C,m,b):f.setAttribute(m,b))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),j=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),R=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),z=Symbol.iterator;function H(f){return f===null||typeof f!="object"?null:(f=z&&f[z]||f["@@iterator"],typeof f=="function"?f:null)}var ee=Object.assign,G;function Y(f){if(G===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);G=m&&m[1]||""}return`
`+G+f}var ae=!1;function ye(f,m){if(!f||ae)return"";ae=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(be){var C=be}Reflect.construct(f,[],m)}else{try{m.call()}catch(be){C=be}f.call(m.prototype)}else{try{throw Error()}catch(be){C=be}f()}}catch(be){if(be&&C&&typeof be.stack=="string"){for(var P=be.stack.split(`
`),M=C.stack.split(`
`),B=P.length-1,J=M.length-1;1<=B&&0<=J&&P[B]!==M[J];)J--;for(;1<=B&&0<=J;B--,J--)if(P[B]!==M[J]){if(B!==1||J!==1)do if(B--,J--,0>J||P[B]!==M[J]){var te=`
`+P[B].replace(" at new "," at ");return f.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",f.displayName)),te}while(1<=B&&0<=J);break}}}finally{ae=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?Y(f):""}function xe(f){switch(f.tag){case 5:return Y(f.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return f=ye(f.type,!1),f;case 11:return f=ye(f.type.render,!1),f;case 1:return f=ye(f.type,!0),f;default:return""}}function Ce(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case A:return"Fragment";case j:return"Portal";case $:return"Profiler";case T:return"StrictMode";case L:return"Suspense";case K:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case R:return(f.displayName||"Context")+".Consumer";case D:return(f._context.displayName||"Context")+".Provider";case F:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case X:return m=f.displayName||null,m!==null?m:Ce(f.type)||"Memo";case q:m=f._payload,f=f._init;try{return Ce(f(m))}catch{}}return null}function fe(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(m);case 8:return m===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Te(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ue(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ne(f){var m=ue(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),C=""+f[m];if(!f.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var P=b.get,M=b.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return P.call(this)},set:function(B){C=""+B,M.call(this,B)}}),Object.defineProperty(f,m,{enumerable:b.enumerable}),{getValue:function(){return C},setValue:function(B){C=""+B},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Ee(f){f._valueTracker||(f._valueTracker=Ne(f))}function me(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var b=m.getValue(),C="";return f&&(C=ue(f)?f.checked?"true":"false":f.value),f=C,f!==b?(m.setValue(f),!0):!1}function Ze(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Xe(f,m){var b=m.checked;return ee({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function pt(f,m){var b=m.defaultValue==null?"":m.defaultValue,C=m.checked!=null?m.checked:m.defaultChecked;b=Te(m.value!=null?m.value:b),f._wrapperState={initialChecked:C,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function ft(f,m){m=m.checked,m!=null&&S(f,"checked",m,!1)}function Et(f,m){ft(f,m);var b=Te(m.value),C=m.type;if(b!=null)C==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(C==="submit"||C==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?ks(f,m.type,b):m.hasOwnProperty("defaultValue")&&ks(f,m.type,Te(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function Qt(f,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var C=m.type;if(!(C!=="submit"&&C!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,b||m===f.value||(f.value=m),f.defaultValue=m}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function ks(f,m,b){(m!=="number"||Ze(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var hn=Array.isArray;function Br(f,m,b,C){if(f=f.options,m){m={};for(var P=0;P<b.length;P++)m["$"+b[P]]=!0;for(b=0;b<f.length;b++)P=m.hasOwnProperty("$"+f[b].value),f[b].selected!==P&&(f[b].selected=P),P&&C&&(f[b].defaultSelected=!0)}else{for(b=""+Te(b),m=null,P=0;P<f.length;P++){if(f[P].value===b){f[P].selected=!0,C&&(f[P].defaultSelected=!0);return}m!==null||f[P].disabled||(m=f[P])}m!==null&&(m.selected=!0)}}function Ir(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function ni(f,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(n(92));if(hn(b)){if(1<b.length)throw Error(n(93));b=b[0]}m=b}m==null&&(m=""),b=m}f._wrapperState={initialValue:Te(b)}}function zr(f,m){var b=Te(m.value),C=Te(m.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),m.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),C!=null&&(f.defaultValue=""+C)}function Bs(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function fn(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pn(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?fn(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Ur,Ma=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,C,P){MSApp.execUnsafeLocalFunction(function(){return f(m,b,C,P)})}:f})(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Ur=Ur||document.createElement("div"),Ur.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Ur.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function ra(f,m){if(m){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=m;return}}f.textContent=m}var Fa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bl=["Webkit","ms","Moz","O"];Object.keys(Fa).forEach(function(f){bl.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),Fa[m]=Fa[f]})});function _o(f,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||Fa.hasOwnProperty(f)&&Fa[f]?(""+m).trim():m+"px"}function td(f,m){f=f.style;for(var b in m)if(m.hasOwnProperty(b)){var C=b.indexOf("--")===0,P=_o(b,m[b],C);b==="float"&&(b="cssFloat"),C?f.setProperty(b,P):f[b]=P}}var nd=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(f,m){if(m){if(nd[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function Hm(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rd=null;function cf(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var uf=null,sa=null,Ao=null;function df(f){if(f=gg(f)){if(typeof uf!="function")throw Error(n(280));var m=f.stateNode;m&&(m=E0(m),uf(f.stateNode,f.type,m))}}function Ro(f){sa?Ao?Ao.push(f):Ao=[f]:sa=f}function qm(){if(sa){var f=sa,m=Ao;if(Ao=sa=null,df(f),m)for(f=0;f<m.length;f++)df(m[f])}}function sd(f,m){return f(m)}function Km(){}var wl=!1;function Xm(f,m,b){if(wl)return f(m,b);wl=!0;try{return sd(f,m,b)}finally{wl=!1,(sa!==null||Ao!==null)&&(Km(),qm())}}function ir(f,m){var b=f.stateNode;if(b===null)return null;var C=E0(b);if(C===null)return null;b=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(f=f.type,C=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!C;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(n(231,m,typeof b));return b}var hf=!1;if(o)try{var La={};Object.defineProperty(La,"passive",{get:function(){hf=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{hf=!1}function id(f,m,b,C,P,M,B,J,te){var be=Array.prototype.slice.call(arguments,3);try{m.apply(b,be)}catch($e){this.onError($e)}}var ad=!1,ff=null,Va=!1,Ym=null,l2={onError:function(f){ad=!0,ff=f}};function pf(f,m,b,C,P,M,B,J,te){ad=!1,ff=null,id.apply(l2,arguments)}function Jv(f,m,b,C,P,M,B,J,te){if(pf.apply(this,arguments),ad){if(ad){var be=ff;ad=!1,ff=null}else throw Error(n(198));Va||(Va=!0,Ym=be)}}function Ba(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function od(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function za(f){if(Ba(f)!==f)throw Error(n(188))}function Zv(f){var m=f.alternate;if(!m){if(m=Ba(f),m===null)throw Error(n(188));return m!==f?null:f}for(var b=f,C=m;;){var P=b.return;if(P===null)break;var M=P.alternate;if(M===null){if(C=P.return,C!==null){b=C;continue}break}if(P.child===M.child){for(M=P.child;M;){if(M===b)return za(P),f;if(M===C)return za(P),m;M=M.sibling}throw Error(n(188))}if(b.return!==C.return)b=P,C=M;else{for(var B=!1,J=P.child;J;){if(J===b){B=!0,b=P,C=M;break}if(J===C){B=!0,C=P,b=M;break}J=J.sibling}if(!B){for(J=M.child;J;){if(J===b){B=!0,b=M,C=P;break}if(J===C){B=!0,C=M,b=P;break}J=J.sibling}if(!B)throw Error(n(189))}}if(b.alternate!==C)throw Error(n(190))}if(b.tag!==3)throw Error(n(188));return b.stateNode.current===b?f:m}function Qm(f){return f=Zv(f),f!==null?mf(f):null}function mf(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=mf(f);if(m!==null)return m;f=f.sibling}return null}var gf=e.unstable_scheduleCallback,Jm=e.unstable_cancelCallback,e0=e.unstable_shouldYield,c2=e.unstable_requestPaint,Nn=e.unstable_now,t0=e.unstable_getCurrentPriorityLevel,ld=e.unstable_ImmediatePriority,wc=e.unstable_UserBlockingPriority,ia=e.unstable_NormalPriority,Zm=e.unstable_LowPriority,n0=e.unstable_IdlePriority,cd=null,Ei=null;function r0(f){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(cd,f,void 0,(f.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:i0,eg=Math.log,s0=Math.LN2;function i0(f){return f>>>=0,f===0?32:31-(eg(f)/s0|0)|0}var yf=64,xf=4194304;function kc(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function ud(f,m){var b=f.pendingLanes;if(b===0)return 0;var C=0,P=f.suspendedLanes,M=f.pingedLanes,B=b&268435455;if(B!==0){var J=B&~P;J!==0?C=kc(J):(M&=B,M!==0&&(C=kc(M)))}else B=b&~P,B!==0?C=kc(B):M!==0&&(C=kc(M));if(C===0)return 0;if(m!==0&&m!==C&&(m&P)===0&&(P=C&-C,M=m&-m,P>=M||P===16&&(M&4194240)!==0))return m;if((C&4)!==0&&(C|=b&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=C;0<m;)b=31-zs(m),P=1<<b,C|=f[b],m&=~P;return C}function u2(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kl(f,m){for(var b=f.suspendedLanes,C=f.pingedLanes,P=f.expirationTimes,M=f.pendingLanes;0<M;){var B=31-zs(M),J=1<<B,te=P[B];te===-1?((J&b)===0||(J&C)!==0)&&(P[B]=u2(J,m)):te<=m&&(f.expiredLanes|=J),M&=~J}}function Ti(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function dd(){var f=yf;return yf<<=1,(yf&4194240)===0&&(yf=64),f}function Sc(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function Nc(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-zs(m),f[m]=b}function yn(f,m){var b=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var C=f.eventTimes;for(f=f.expirationTimes;0<b;){var P=31-zs(b),M=1<<P;m[P]=0,C[P]=-1,f[P]=-1,b&=~M}}function Cc(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var C=31-zs(b),P=1<<C;P&m|f[C]&m&&(f[C]|=m),b&=~P}}var Vt=0;function Ic(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var a0,vf,o0,l0,c0,tg=!1,$o=[],cs=null,Ua=null,Wa=null,Ec=new Map,aa=new Map,Po=[],d2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u0(f,m){switch(f){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Ec.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":aa.delete(m.pointerId)}}function ri(f,m,b,C,P,M){return f===null||f.nativeEvent!==M?(f={blockedOn:m,domEventName:b,eventSystemFlags:C,nativeEvent:M,targetContainers:[P]},m!==null&&(m=gg(m),m!==null&&vf(m)),f):(f.eventSystemFlags|=C,m=f.targetContainers,P!==null&&m.indexOf(P)===-1&&m.push(P),f)}function h2(f,m,b,C,P){switch(m){case"focusin":return cs=ri(cs,f,m,b,C,P),!0;case"dragenter":return Ua=ri(Ua,f,m,b,C,P),!0;case"mouseover":return Wa=ri(Wa,f,m,b,C,P),!0;case"pointerover":var M=P.pointerId;return Ec.set(M,ri(Ec.get(M)||null,f,m,b,C,P)),!0;case"gotpointercapture":return M=P.pointerId,aa.set(M,ri(aa.get(M)||null,f,m,b,C,P)),!0}return!1}function d0(f){var m=gd(f.target);if(m!==null){var b=Ba(m);if(b!==null){if(m=b.tag,m===13){if(m=od(b),m!==null){f.blockedOn=m,c0(f.priority,function(){o0(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Sl(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var b=bf(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var C=new b.constructor(b.type,b);rd=C,b.target.dispatchEvent(C),rd=null}else return m=gg(b),m!==null&&vf(m),f.blockedOn=b,!1;m.shift()}return!0}function hd(f,m,b){Sl(f)&&b.delete(m)}function h0(){tg=!1,cs!==null&&Sl(cs)&&(cs=null),Ua!==null&&Sl(Ua)&&(Ua=null),Wa!==null&&Sl(Wa)&&(Wa=null),Ec.forEach(hd),aa.forEach(hd)}function Ga(f,m){f.blockedOn===m&&(f.blockedOn=null,tg||(tg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,h0)))}function Ha(f){function m(P){return Ga(P,f)}if(0<$o.length){Ga($o[0],f);for(var b=1;b<$o.length;b++){var C=$o[b];C.blockedOn===f&&(C.blockedOn=null)}}for(cs!==null&&Ga(cs,f),Ua!==null&&Ga(Ua,f),Wa!==null&&Ga(Wa,f),Ec.forEach(m),aa.forEach(m),b=0;b<Po.length;b++)C=Po[b],C.blockedOn===f&&(C.blockedOn=null);for(;0<Po.length&&(b=Po[0],b.blockedOn===null);)d0(b),b.blockedOn===null&&Po.shift()}var Nl=I.ReactCurrentBatchConfig,Tc=!0;function Mn(f,m,b,C){var P=Vt,M=Nl.transition;Nl.transition=null;try{Vt=1,ng(f,m,b,C)}finally{Vt=P,Nl.transition=M}}function f2(f,m,b,C){var P=Vt,M=Nl.transition;Nl.transition=null;try{Vt=4,ng(f,m,b,C)}finally{Vt=P,Nl.transition=M}}function ng(f,m,b,C){if(Tc){var P=bf(f,m,b,C);if(P===null)N2(f,m,C,fd,b),u0(f,C);else if(h2(P,f,m,b,C))C.stopPropagation();else if(u0(f,C),m&4&&-1<d2.indexOf(f)){for(;P!==null;){var M=gg(P);if(M!==null&&a0(M),M=bf(f,m,b,C),M===null&&N2(f,m,C,fd,b),M===P)break;P=M}P!==null&&C.stopPropagation()}else N2(f,m,C,null,b)}}var fd=null;function bf(f,m,b,C){if(fd=null,f=cf(C),f=gd(f),f!==null)if(m=Ba(f),m===null)f=null;else if(b=m.tag,b===13){if(f=od(m),f!==null)return f;f=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return fd=f,null}function rg(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(t0()){case ld:return 1;case wc:return 4;case ia:case Zm:return 16;case n0:return 536870912;default:return 16}default:return 16}}var _i=null,wf=null,si=null;function sg(){if(si)return si;var f,m=wf,b=m.length,C,P="value"in _i?_i.value:_i.textContent,M=P.length;for(f=0;f<b&&m[f]===P[f];f++);var B=b-f;for(C=1;C<=B&&m[b-C]===P[M-C];C++);return si=P.slice(f,1<C?1-C:void 0)}function kf(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function jo(){return!0}function ig(){return!1}function us(f){function m(b,C,P,M,B){this._reactName=b,this._targetInst=P,this.type=C,this.nativeEvent=M,this.target=B,this.currentTarget=null;for(var J in f)f.hasOwnProperty(J)&&(b=f[J],this[J]=b?b(M):M[J]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?jo:ig,this.isPropagationStopped=ig,this}return ee(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),m}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sf=us(qa),Do=ee({},qa,{view:0,detail:0}),p2=us(Do),Nf,Cl,_c,pd=ee({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==_c&&(_c&&f.type==="mousemove"?(Nf=f.screenX-_c.screenX,Cl=f.screenY-_c.screenY):Cl=Nf=0,_c=f),Nf)},movementY:function(f){return"movementY"in f?f.movementY:Cl}}),Cf=us(pd),ag=ee({},pd,{dataTransfer:0}),f0=us(ag),If=ee({},Do,{relatedTarget:0}),Ef=us(If),p0=ee({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),Il=us(p0),m0=ee({},qa,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),g0=us(m0),y0=ee({},qa,{data:0}),og=us(y0),Tf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=x0[f])?!!m[f]:!1}function Oo(){return v0}var N=ee({},Do,{key:function(f){if(f.key){var m=Tf[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=kf(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Us[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(f){return f.type==="keypress"?kf(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?kf(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),O=us(N),V=ee({},pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U=us(V),ce=ee({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),ke=us(ce),Ve=ee({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),cn=us(Ve),Er=ee({},pd,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Ht=us(Er),Wr=[9,13,27,32],hr=o&&"CompositionEvent"in window,oa=null;o&&"documentMode"in document&&(oa=document.documentMode);var Ai=o&&"TextEvent"in window&&!oa,md=o&&(!hr||oa&&8<oa&&11>=oa),_f=" ",_O=!1;function AO(f,m){switch(f){case"keyup":return Wr.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RO(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Af=!1;function rne(f,m){switch(f){case"compositionend":return RO(m);case"keypress":return m.which!==32?null:(_O=!0,_f);case"textInput":return f=m.data,f===_f&&_O?null:f;default:return null}}function sne(f,m){if(Af)return f==="compositionend"||!hr&&AO(f,m)?(f=sg(),si=wf=_i=null,Af=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return md&&m.locale!=="ko"?null:m.data;default:return null}}var ine={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $O(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!ine[f.type]:m==="textarea"}function PO(f,m,b,C){Ro(C),m=N0(m,"onChange"),0<m.length&&(b=new Sf("onChange","change",null,b,C),f.push({event:b,listeners:m}))}var lg=null,cg=null;function ane(f){QO(f,0)}function b0(f){var m=Df(f);if(me(m))return f}function one(f,m){if(f==="change")return m}var jO=!1;if(o){var m2;if(o){var g2="oninput"in document;if(!g2){var DO=document.createElement("div");DO.setAttribute("oninput","return;"),g2=typeof DO.oninput=="function"}m2=g2}else m2=!1;jO=m2&&(!document.documentMode||9<document.documentMode)}function OO(){lg&&(lg.detachEvent("onpropertychange",MO),cg=lg=null)}function MO(f){if(f.propertyName==="value"&&b0(cg)){var m=[];PO(m,cg,f,cf(f)),Xm(ane,m)}}function lne(f,m,b){f==="focusin"?(OO(),lg=m,cg=b,lg.attachEvent("onpropertychange",MO)):f==="focusout"&&OO()}function cne(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return b0(cg)}function une(f,m){if(f==="click")return b0(m)}function dne(f,m){if(f==="input"||f==="change")return b0(m)}function hne(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Ka=typeof Object.is=="function"?Object.is:hne;function ug(f,m){if(Ka(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),C=Object.keys(m);if(b.length!==C.length)return!1;for(C=0;C<b.length;C++){var P=b[C];if(!l.call(m,P)||!Ka(f[P],m[P]))return!1}return!0}function FO(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function LO(f,m){var b=FO(f);f=0;for(var C;b;){if(b.nodeType===3){if(C=f+b.textContent.length,f<=m&&C>=m)return{node:b,offset:m-f};f=C}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=FO(b)}}function VO(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?VO(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function BO(){for(var f=window,m=Ze();m instanceof f.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)f=m.contentWindow;else break;m=Ze(f.document)}return m}function y2(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function fne(f){var m=BO(),b=f.focusedElem,C=f.selectionRange;if(m!==b&&b&&b.ownerDocument&&VO(b.ownerDocument.documentElement,b)){if(C!==null&&y2(b)){if(m=C.start,f=C.end,f===void 0&&(f=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(f,b.value.length);else if(f=(m=b.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var P=b.textContent.length,M=Math.min(C.start,P);C=C.end===void 0?M:Math.min(C.end,P),!f.extend&&M>C&&(P=C,C=M,M=P),P=LO(b,M);var B=LO(b,C);P&&B&&(f.rangeCount!==1||f.anchorNode!==P.node||f.anchorOffset!==P.offset||f.focusNode!==B.node||f.focusOffset!==B.offset)&&(m=m.createRange(),m.setStart(P.node,P.offset),f.removeAllRanges(),M>C?(f.addRange(m),f.extend(B.node,B.offset)):(m.setEnd(B.node,B.offset),f.addRange(m)))}}for(m=[],f=b;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)f=m[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var pne=o&&"documentMode"in document&&11>=document.documentMode,Rf=null,x2=null,dg=null,v2=!1;function zO(f,m,b){var C=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;v2||Rf==null||Rf!==Ze(C)||(C=Rf,"selectionStart"in C&&y2(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),dg&&ug(dg,C)||(dg=C,C=N0(x2,"onSelect"),0<C.length&&(m=new Sf("onSelect","select",null,m,b),f.push({event:m,listeners:C}),m.target=Rf)))}function w0(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b}var $f={animationend:w0("Animation","AnimationEnd"),animationiteration:w0("Animation","AnimationIteration"),animationstart:w0("Animation","AnimationStart"),transitionend:w0("Transition","TransitionEnd")},b2={},UO={};o&&(UO=document.createElement("div").style,"AnimationEvent"in window||(delete $f.animationend.animation,delete $f.animationiteration.animation,delete $f.animationstart.animation),"TransitionEvent"in window||delete $f.transitionend.transition);function k0(f){if(b2[f])return b2[f];if(!$f[f])return f;var m=$f[f],b;for(b in m)if(m.hasOwnProperty(b)&&b in UO)return b2[f]=m[b];return f}var WO=k0("animationend"),GO=k0("animationiteration"),HO=k0("animationstart"),qO=k0("transitionend"),KO=new Map,XO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ac(f,m){KO.set(f,m),i(m,[f])}for(var w2=0;w2<XO.length;w2++){var k2=XO[w2],mne=k2.toLowerCase(),gne=k2[0].toUpperCase()+k2.slice(1);Ac(mne,"on"+gne)}Ac(WO,"onAnimationEnd"),Ac(GO,"onAnimationIteration"),Ac(HO,"onAnimationStart"),Ac("dblclick","onDoubleClick"),Ac("focusin","onFocus"),Ac("focusout","onBlur"),Ac(qO,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yne=new Set("cancel close invalid load scroll toggle".split(" ").concat(hg));function YO(f,m,b){var C=f.type||"unknown-event";f.currentTarget=b,Jv(C,m,void 0,f),f.currentTarget=null}function QO(f,m){m=(m&4)!==0;for(var b=0;b<f.length;b++){var C=f[b],P=C.event;C=C.listeners;e:{var M=void 0;if(m)for(var B=C.length-1;0<=B;B--){var J=C[B],te=J.instance,be=J.currentTarget;if(J=J.listener,te!==M&&P.isPropagationStopped())break e;YO(P,J,be),M=te}else for(B=0;B<C.length;B++){if(J=C[B],te=J.instance,be=J.currentTarget,J=J.listener,te!==M&&P.isPropagationStopped())break e;YO(P,J,be),M=te}}}if(Va)throw f=Ym,Va=!1,Ym=null,f}function Rn(f,m){var b=m[A2];b===void 0&&(b=m[A2]=new Set);var C=f+"__bubble";b.has(C)||(JO(m,f,2,!1),b.add(C))}function S2(f,m,b){var C=0;m&&(C|=4),JO(b,f,C,m)}var S0="_reactListening"+Math.random().toString(36).slice(2);function fg(f){if(!f[S0]){f[S0]=!0,r.forEach(function(b){b!=="selectionchange"&&(yne.has(b)||S2(b,!1,f),S2(b,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[S0]||(m[S0]=!0,S2("selectionchange",!1,m))}}function JO(f,m,b,C){switch(rg(m)){case 1:var P=Mn;break;case 4:P=f2;break;default:P=ng}b=P.bind(null,m,b,f),P=void 0,!hf||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(P=!0),C?P!==void 0?f.addEventListener(m,b,{capture:!0,passive:P}):f.addEventListener(m,b,!0):P!==void 0?f.addEventListener(m,b,{passive:P}):f.addEventListener(m,b,!1)}function N2(f,m,b,C,P){var M=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var B=C.tag;if(B===3||B===4){var J=C.stateNode.containerInfo;if(J===P||J.nodeType===8&&J.parentNode===P)break;if(B===4)for(B=C.return;B!==null;){var te=B.tag;if((te===3||te===4)&&(te=B.stateNode.containerInfo,te===P||te.nodeType===8&&te.parentNode===P))return;B=B.return}for(;J!==null;){if(B=gd(J),B===null)return;if(te=B.tag,te===5||te===6){C=M=B;continue e}J=J.parentNode}}C=C.return}Xm(function(){var be=M,$e=cf(b),je=[];e:{var Re=KO.get(f);if(Re!==void 0){var Ge=Sf,et=f;switch(f){case"keypress":if(kf(b)===0)break e;case"keydown":case"keyup":Ge=O;break;case"focusin":et="focus",Ge=Ef;break;case"focusout":et="blur",Ge=Ef;break;case"beforeblur":case"afterblur":Ge=Ef;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ge=Cf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ge=f0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ge=ke;break;case WO:case GO:case HO:Ge=Il;break;case qO:Ge=cn;break;case"scroll":Ge=p2;break;case"wheel":Ge=Ht;break;case"copy":case"cut":case"paste":Ge=g0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ge=U}var st=(m&4)!==0,ar=!st&&f==="scroll",de=st?Re!==null?Re+"Capture":null:Re;st=[];for(var se=be,pe;se!==null;){pe=se;var Fe=pe.stateNode;if(pe.tag===5&&Fe!==null&&(pe=Fe,de!==null&&(Fe=ir(se,de),Fe!=null&&st.push(pg(se,Fe,pe)))),ar)break;se=se.return}0<st.length&&(Re=new Ge(Re,et,null,b,$e),je.push({event:Re,listeners:st}))}}if((m&7)===0){e:{if(Re=f==="mouseover"||f==="pointerover",Ge=f==="mouseout"||f==="pointerout",Re&&b!==rd&&(et=b.relatedTarget||b.fromElement)&&(gd(et)||et[El]))break e;if((Ge||Re)&&(Re=$e.window===$e?$e:(Re=$e.ownerDocument)?Re.defaultView||Re.parentWindow:window,Ge?(et=b.relatedTarget||b.toElement,Ge=be,et=et?gd(et):null,et!==null&&(ar=Ba(et),et!==ar||et.tag!==5&&et.tag!==6)&&(et=null)):(Ge=null,et=be),Ge!==et)){if(st=Cf,Fe="onMouseLeave",de="onMouseEnter",se="mouse",(f==="pointerout"||f==="pointerover")&&(st=U,Fe="onPointerLeave",de="onPointerEnter",se="pointer"),ar=Ge==null?Re:Df(Ge),pe=et==null?Re:Df(et),Re=new st(Fe,se+"leave",Ge,b,$e),Re.target=ar,Re.relatedTarget=pe,Fe=null,gd($e)===be&&(st=new st(de,se+"enter",et,b,$e),st.target=pe,st.relatedTarget=ar,Fe=st),ar=Fe,Ge&&et)t:{for(st=Ge,de=et,se=0,pe=st;pe;pe=Pf(pe))se++;for(pe=0,Fe=de;Fe;Fe=Pf(Fe))pe++;for(;0<se-pe;)st=Pf(st),se--;for(;0<pe-se;)de=Pf(de),pe--;for(;se--;){if(st===de||de!==null&&st===de.alternate)break t;st=Pf(st),de=Pf(de)}st=null}else st=null;Ge!==null&&ZO(je,Re,Ge,st,!1),et!==null&&ar!==null&&ZO(je,ar,et,st,!0)}}e:{if(Re=be?Df(be):window,Ge=Re.nodeName&&Re.nodeName.toLowerCase(),Ge==="select"||Ge==="input"&&Re.type==="file")var at=one;else if($O(Re))if(jO)at=dne;else{at=cne;var mt=lne}else(Ge=Re.nodeName)&&Ge.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(at=une);if(at&&(at=at(f,be))){PO(je,at,b,$e);break e}mt&&mt(f,Re,be),f==="focusout"&&(mt=Re._wrapperState)&&mt.controlled&&Re.type==="number"&&ks(Re,"number",Re.value)}switch(mt=be?Df(be):window,f){case"focusin":($O(mt)||mt.contentEditable==="true")&&(Rf=mt,x2=be,dg=null);break;case"focusout":dg=x2=Rf=null;break;case"mousedown":v2=!0;break;case"contextmenu":case"mouseup":case"dragend":v2=!1,zO(je,b,$e);break;case"selectionchange":if(pne)break;case"keydown":case"keyup":zO(je,b,$e)}var gt;if(hr)e:{switch(f){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else Af?AO(f,b)&&(wt="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(wt="onCompositionStart");wt&&(md&&b.locale!=="ko"&&(Af||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Af&&(gt=sg()):(_i=$e,wf="value"in _i?_i.value:_i.textContent,Af=!0)),mt=N0(be,wt),0<mt.length&&(wt=new og(wt,f,null,b,$e),je.push({event:wt,listeners:mt}),gt?wt.data=gt:(gt=RO(b),gt!==null&&(wt.data=gt)))),(gt=Ai?rne(f,b):sne(f,b))&&(be=N0(be,"onBeforeInput"),0<be.length&&($e=new og("onBeforeInput","beforeinput",null,b,$e),je.push({event:$e,listeners:be}),$e.data=gt))}QO(je,m)})}function pg(f,m,b){return{instance:f,listener:m,currentTarget:b}}function N0(f,m){for(var b=m+"Capture",C=[];f!==null;){var P=f,M=P.stateNode;P.tag===5&&M!==null&&(P=M,M=ir(f,b),M!=null&&C.unshift(pg(f,M,P)),M=ir(f,m),M!=null&&C.push(pg(f,M,P))),f=f.return}return C}function Pf(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function ZO(f,m,b,C,P){for(var M=m._reactName,B=[];b!==null&&b!==C;){var J=b,te=J.alternate,be=J.stateNode;if(te!==null&&te===C)break;J.tag===5&&be!==null&&(J=be,P?(te=ir(b,M),te!=null&&B.unshift(pg(b,te,J))):P||(te=ir(b,M),te!=null&&B.push(pg(b,te,J)))),b=b.return}B.length!==0&&f.push({event:m,listeners:B})}var xne=/\r\n?/g,vne=/\u0000|\uFFFD/g;function eM(f){return(typeof f=="string"?f:""+f).replace(xne,`
`).replace(vne,"")}function C0(f,m,b){if(m=eM(m),eM(f)!==m&&b)throw Error(n(425))}function I0(){}var C2=null,I2=null;function E2(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var T2=typeof setTimeout=="function"?setTimeout:void 0,bne=typeof clearTimeout=="function"?clearTimeout:void 0,tM=typeof Promise=="function"?Promise:void 0,wne=typeof queueMicrotask=="function"?queueMicrotask:typeof tM<"u"?function(f){return tM.resolve(null).then(f).catch(kne)}:T2;function kne(f){setTimeout(function(){throw f})}function _2(f,m){var b=m,C=0;do{var P=b.nextSibling;if(f.removeChild(b),P&&P.nodeType===8)if(b=P.data,b==="/$"){if(C===0){f.removeChild(P),Ha(m);return}C--}else b!=="$"&&b!=="$?"&&b!=="$!"||C++;b=P}while(b);Ha(m)}function Rc(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function nM(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return f;m--}else b==="/$"&&m++}f=f.previousSibling}return null}var jf=Math.random().toString(36).slice(2),Mo="__reactFiber$"+jf,mg="__reactProps$"+jf,El="__reactContainer$"+jf,A2="__reactEvents$"+jf,Sne="__reactListeners$"+jf,Nne="__reactHandles$"+jf;function gd(f){var m=f[Mo];if(m)return m;for(var b=f.parentNode;b;){if(m=b[El]||b[Mo]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(f=nM(f);f!==null;){if(b=f[Mo])return b;f=nM(f)}return m}f=b,b=f.parentNode}return null}function gg(f){return f=f[Mo]||f[El],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function Df(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function E0(f){return f[mg]||null}var R2=[],Of=-1;function $c(f){return{current:f}}function $n(f){0>Of||(f.current=R2[Of],R2[Of]=null,Of--)}function Cn(f,m){Of++,R2[Of]=f.current,f.current=m}var Pc={},Ss=$c(Pc),ii=$c(!1),yd=Pc;function Mf(f,m){var b=f.type.contextTypes;if(!b)return Pc;var C=f.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===m)return C.__reactInternalMemoizedMaskedChildContext;var P={},M;for(M in b)P[M]=m[M];return C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=P),P}function ai(f){return f=f.childContextTypes,f!=null}function T0(){$n(ii),$n(Ss)}function rM(f,m,b){if(Ss.current!==Pc)throw Error(n(168));Cn(Ss,m),Cn(ii,b)}function sM(f,m,b){var C=f.stateNode;if(m=m.childContextTypes,typeof C.getChildContext!="function")return b;C=C.getChildContext();for(var P in C)if(!(P in m))throw Error(n(108,fe(f)||"Unknown",P));return ee({},b,C)}function _0(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Pc,yd=Ss.current,Cn(Ss,f),Cn(ii,ii.current),!0}function iM(f,m,b){var C=f.stateNode;if(!C)throw Error(n(169));b?(f=sM(f,m,yd),C.__reactInternalMemoizedMergedChildContext=f,$n(ii),$n(Ss),Cn(Ss,f)):$n(ii),Cn(ii,b)}var Tl=null,A0=!1,$2=!1;function aM(f){Tl===null?Tl=[f]:Tl.push(f)}function Cne(f){A0=!0,aM(f)}function jc(){if(!$2&&Tl!==null){$2=!0;var f=0,m=Vt;try{var b=Tl;for(Vt=1;f<b.length;f++){var C=b[f];do C=C(!0);while(C!==null)}Tl=null,A0=!1}catch(P){throw Tl!==null&&(Tl=Tl.slice(f+1)),gf(ld,jc),P}finally{Vt=m,$2=!1}}return null}var Ff=[],Lf=0,R0=null,$0=0,la=[],ca=0,xd=null,_l=1,Al="";function vd(f,m){Ff[Lf++]=$0,Ff[Lf++]=R0,R0=f,$0=m}function oM(f,m,b){la[ca++]=_l,la[ca++]=Al,la[ca++]=xd,xd=f;var C=_l;f=Al;var P=32-zs(C)-1;C&=~(1<<P),b+=1;var M=32-zs(m)+P;if(30<M){var B=P-P%5;M=(C&(1<<B)-1).toString(32),C>>=B,P-=B,_l=1<<32-zs(m)+P|b<<P|C,Al=M+f}else _l=1<<M|b<<P|C,Al=f}function P2(f){f.return!==null&&(vd(f,1),oM(f,1,0))}function j2(f){for(;f===R0;)R0=Ff[--Lf],Ff[Lf]=null,$0=Ff[--Lf],Ff[Lf]=null;for(;f===xd;)xd=la[--ca],la[ca]=null,Al=la[--ca],la[ca]=null,_l=la[--ca],la[ca]=null}var Ri=null,$i=null,Fn=!1,Xa=null;function lM(f,m){var b=fa(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,m=f.deletions,m===null?(f.deletions=[b],f.flags|=16):m.push(b)}function cM(f,m){switch(f.tag){case 5:var b=f.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,Ri=f,$i=Rc(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,Ri=f,$i=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=xd!==null?{id:_l,overflow:Al}:null,f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=fa(18,null,null,0),b.stateNode=m,b.return=f,f.child=b,Ri=f,$i=null,!0):!1;default:return!1}}function D2(f){return(f.mode&1)!==0&&(f.flags&128)===0}function O2(f){if(Fn){var m=$i;if(m){var b=m;if(!cM(f,m)){if(D2(f))throw Error(n(418));m=Rc(b.nextSibling);var C=Ri;m&&cM(f,m)?lM(C,b):(f.flags=f.flags&-4097|2,Fn=!1,Ri=f)}}else{if(D2(f))throw Error(n(418));f.flags=f.flags&-4097|2,Fn=!1,Ri=f}}}function uM(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Ri=f}function P0(f){if(f!==Ri)return!1;if(!Fn)return uM(f),Fn=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!E2(f.type,f.memoizedProps)),m&&(m=$i)){if(D2(f))throw dM(),Error(n(418));for(;m;)lM(f,m),m=Rc(m.nextSibling)}if(uM(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(m===0){$i=Rc(f.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}f=f.nextSibling}$i=null}}else $i=Ri?Rc(f.stateNode.nextSibling):null;return!0}function dM(){for(var f=$i;f;)f=Rc(f.nextSibling)}function Vf(){$i=Ri=null,Fn=!1}function M2(f){Xa===null?Xa=[f]:Xa.push(f)}var Ine=I.ReactCurrentBatchConfig;function yg(f,m,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(n(309));var C=b.stateNode}if(!C)throw Error(n(147,f));var P=C,M=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===M?m.ref:(m=function(B){var J=P.refs;B===null?delete J[M]:J[M]=B},m._stringRef=M,m)}if(typeof f!="string")throw Error(n(284));if(!b._owner)throw Error(n(290,f))}return f}function j0(f,m){throw f=Object.prototype.toString.call(m),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function hM(f){var m=f._init;return m(f._payload)}function fM(f){function m(de,se){if(f){var pe=de.deletions;pe===null?(de.deletions=[se],de.flags|=16):pe.push(se)}}function b(de,se){if(!f)return null;for(;se!==null;)m(de,se),se=se.sibling;return null}function C(de,se){for(de=new Map;se!==null;)se.key!==null?de.set(se.key,se):de.set(se.index,se),se=se.sibling;return de}function P(de,se){return de=zc(de,se),de.index=0,de.sibling=null,de}function M(de,se,pe){return de.index=pe,f?(pe=de.alternate,pe!==null?(pe=pe.index,pe<se?(de.flags|=2,se):pe):(de.flags|=2,se)):(de.flags|=1048576,se)}function B(de){return f&&de.alternate===null&&(de.flags|=2),de}function J(de,se,pe,Fe){return se===null||se.tag!==6?(se=TC(pe,de.mode,Fe),se.return=de,se):(se=P(se,pe),se.return=de,se)}function te(de,se,pe,Fe){var at=pe.type;return at===A?$e(de,se,pe.props.children,Fe,pe.key):se!==null&&(se.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&hM(at)===se.type)?(Fe=P(se,pe.props),Fe.ref=yg(de,se,pe),Fe.return=de,Fe):(Fe=sb(pe.type,pe.key,pe.props,null,de.mode,Fe),Fe.ref=yg(de,se,pe),Fe.return=de,Fe)}function be(de,se,pe,Fe){return se===null||se.tag!==4||se.stateNode.containerInfo!==pe.containerInfo||se.stateNode.implementation!==pe.implementation?(se=_C(pe,de.mode,Fe),se.return=de,se):(se=P(se,pe.children||[]),se.return=de,se)}function $e(de,se,pe,Fe,at){return se===null||se.tag!==7?(se=Ed(pe,de.mode,Fe,at),se.return=de,se):(se=P(se,pe),se.return=de,se)}function je(de,se,pe){if(typeof se=="string"&&se!==""||typeof se=="number")return se=TC(""+se,de.mode,pe),se.return=de,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return pe=sb(se.type,se.key,se.props,null,de.mode,pe),pe.ref=yg(de,null,se),pe.return=de,pe;case j:return se=_C(se,de.mode,pe),se.return=de,se;case q:var Fe=se._init;return je(de,Fe(se._payload),pe)}if(hn(se)||H(se))return se=Ed(se,de.mode,pe,null),se.return=de,se;j0(de,se)}return null}function Re(de,se,pe,Fe){var at=se!==null?se.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return at!==null?null:J(de,se,""+pe,Fe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case E:return pe.key===at?te(de,se,pe,Fe):null;case j:return pe.key===at?be(de,se,pe,Fe):null;case q:return at=pe._init,Re(de,se,at(pe._payload),Fe)}if(hn(pe)||H(pe))return at!==null?null:$e(de,se,pe,Fe,null);j0(de,pe)}return null}function Ge(de,se,pe,Fe,at){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return de=de.get(pe)||null,J(se,de,""+Fe,at);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case E:return de=de.get(Fe.key===null?pe:Fe.key)||null,te(se,de,Fe,at);case j:return de=de.get(Fe.key===null?pe:Fe.key)||null,be(se,de,Fe,at);case q:var mt=Fe._init;return Ge(de,se,pe,mt(Fe._payload),at)}if(hn(Fe)||H(Fe))return de=de.get(pe)||null,$e(se,de,Fe,at,null);j0(se,Fe)}return null}function et(de,se,pe,Fe){for(var at=null,mt=null,gt=se,wt=se=0,qr=null;gt!==null&&wt<pe.length;wt++){gt.index>wt?(qr=gt,gt=null):qr=gt.sibling;var Zt=Re(de,gt,pe[wt],Fe);if(Zt===null){gt===null&&(gt=qr);break}f&&gt&&Zt.alternate===null&&m(de,gt),se=M(Zt,se,wt),mt===null?at=Zt:mt.sibling=Zt,mt=Zt,gt=qr}if(wt===pe.length)return b(de,gt),Fn&&vd(de,wt),at;if(gt===null){for(;wt<pe.length;wt++)gt=je(de,pe[wt],Fe),gt!==null&&(se=M(gt,se,wt),mt===null?at=gt:mt.sibling=gt,mt=gt);return Fn&&vd(de,wt),at}for(gt=C(de,gt);wt<pe.length;wt++)qr=Ge(gt,de,wt,pe[wt],Fe),qr!==null&&(f&&qr.alternate!==null&&gt.delete(qr.key===null?wt:qr.key),se=M(qr,se,wt),mt===null?at=qr:mt.sibling=qr,mt=qr);return f&&gt.forEach(function(Uc){return m(de,Uc)}),Fn&&vd(de,wt),at}function st(de,se,pe,Fe){var at=H(pe);if(typeof at!="function")throw Error(n(150));if(pe=at.call(pe),pe==null)throw Error(n(151));for(var mt=at=null,gt=se,wt=se=0,qr=null,Zt=pe.next();gt!==null&&!Zt.done;wt++,Zt=pe.next()){gt.index>wt?(qr=gt,gt=null):qr=gt.sibling;var Uc=Re(de,gt,Zt.value,Fe);if(Uc===null){gt===null&&(gt=qr);break}f&&gt&&Uc.alternate===null&&m(de,gt),se=M(Uc,se,wt),mt===null?at=Uc:mt.sibling=Uc,mt=Uc,gt=qr}if(Zt.done)return b(de,gt),Fn&&vd(de,wt),at;if(gt===null){for(;!Zt.done;wt++,Zt=pe.next())Zt=je(de,Zt.value,Fe),Zt!==null&&(se=M(Zt,se,wt),mt===null?at=Zt:mt.sibling=Zt,mt=Zt);return Fn&&vd(de,wt),at}for(gt=C(de,gt);!Zt.done;wt++,Zt=pe.next())Zt=Ge(gt,de,wt,Zt.value,Fe),Zt!==null&&(f&&Zt.alternate!==null&&gt.delete(Zt.key===null?wt:Zt.key),se=M(Zt,se,wt),mt===null?at=Zt:mt.sibling=Zt,mt=Zt);return f&&gt.forEach(function(ire){return m(de,ire)}),Fn&&vd(de,wt),at}function ar(de,se,pe,Fe){if(typeof pe=="object"&&pe!==null&&pe.type===A&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case E:e:{for(var at=pe.key,mt=se;mt!==null;){if(mt.key===at){if(at=pe.type,at===A){if(mt.tag===7){b(de,mt.sibling),se=P(mt,pe.props.children),se.return=de,de=se;break e}}else if(mt.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===q&&hM(at)===mt.type){b(de,mt.sibling),se=P(mt,pe.props),se.ref=yg(de,mt,pe),se.return=de,de=se;break e}b(de,mt);break}else m(de,mt);mt=mt.sibling}pe.type===A?(se=Ed(pe.props.children,de.mode,Fe,pe.key),se.return=de,de=se):(Fe=sb(pe.type,pe.key,pe.props,null,de.mode,Fe),Fe.ref=yg(de,se,pe),Fe.return=de,de=Fe)}return B(de);case j:e:{for(mt=pe.key;se!==null;){if(se.key===mt)if(se.tag===4&&se.stateNode.containerInfo===pe.containerInfo&&se.stateNode.implementation===pe.implementation){b(de,se.sibling),se=P(se,pe.children||[]),se.return=de,de=se;break e}else{b(de,se);break}else m(de,se);se=se.sibling}se=_C(pe,de.mode,Fe),se.return=de,de=se}return B(de);case q:return mt=pe._init,ar(de,se,mt(pe._payload),Fe)}if(hn(pe))return et(de,se,pe,Fe);if(H(pe))return st(de,se,pe,Fe);j0(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,se!==null&&se.tag===6?(b(de,se.sibling),se=P(se,pe),se.return=de,de=se):(b(de,se),se=TC(pe,de.mode,Fe),se.return=de,de=se),B(de)):b(de,se)}return ar}var Bf=fM(!0),pM=fM(!1),D0=$c(null),O0=null,zf=null,F2=null;function L2(){F2=zf=O0=null}function V2(f){var m=D0.current;$n(D0),f._currentValue=m}function B2(f,m,b){for(;f!==null;){var C=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),f===b)break;f=f.return}}function Uf(f,m){O0=f,F2=zf=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(oi=!0),f.firstContext=null)}function ua(f){var m=f._currentValue;if(F2!==f)if(f={context:f,memoizedValue:m,next:null},zf===null){if(O0===null)throw Error(n(308));zf=f,O0.dependencies={lanes:0,firstContext:f}}else zf=zf.next=f;return m}var bd=null;function z2(f){bd===null?bd=[f]:bd.push(f)}function mM(f,m,b,C){var P=m.interleaved;return P===null?(b.next=b,z2(m)):(b.next=P.next,P.next=b),m.interleaved=b,Rl(f,C)}function Rl(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,b=f.alternate,b!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Dc=!1;function U2(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gM(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function $l(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Oc(f,m,b){var C=f.updateQueue;if(C===null)return null;if(C=C.shared,(Jt&2)!==0){var P=C.pending;return P===null?m.next=m:(m.next=P.next,P.next=m),C.pending=m,Rl(f,b)}return P=C.interleaved,P===null?(m.next=m,z2(C)):(m.next=P.next,P.next=m),C.interleaved=m,Rl(f,b)}function M0(f,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var C=m.lanes;C&=f.pendingLanes,b|=C,m.lanes=b,Cc(f,b)}}function yM(f,m){var b=f.updateQueue,C=f.alternate;if(C!==null&&(C=C.updateQueue,b===C)){var P=null,M=null;if(b=b.firstBaseUpdate,b!==null){do{var B={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};M===null?P=M=B:M=M.next=B,b=b.next}while(b!==null);M===null?P=M=m:M=M.next=m}else P=M=m;b={baseState:C.baseState,firstBaseUpdate:P,lastBaseUpdate:M,shared:C.shared,effects:C.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function F0(f,m,b,C){var P=f.updateQueue;Dc=!1;var M=P.firstBaseUpdate,B=P.lastBaseUpdate,J=P.shared.pending;if(J!==null){P.shared.pending=null;var te=J,be=te.next;te.next=null,B===null?M=be:B.next=be,B=te;var $e=f.alternate;$e!==null&&($e=$e.updateQueue,J=$e.lastBaseUpdate,J!==B&&(J===null?$e.firstBaseUpdate=be:J.next=be,$e.lastBaseUpdate=te))}if(M!==null){var je=P.baseState;B=0,$e=be=te=null,J=M;do{var Re=J.lane,Ge=J.eventTime;if((C&Re)===Re){$e!==null&&($e=$e.next={eventTime:Ge,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var et=f,st=J;switch(Re=m,Ge=b,st.tag){case 1:if(et=st.payload,typeof et=="function"){je=et.call(Ge,je,Re);break e}je=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=st.payload,Re=typeof et=="function"?et.call(Ge,je,Re):et,Re==null)break e;je=ee({},je,Re);break e;case 2:Dc=!0}}J.callback!==null&&J.lane!==0&&(f.flags|=64,Re=P.effects,Re===null?P.effects=[J]:Re.push(J))}else Ge={eventTime:Ge,lane:Re,tag:J.tag,payload:J.payload,callback:J.callback,next:null},$e===null?(be=$e=Ge,te=je):$e=$e.next=Ge,B|=Re;if(J=J.next,J===null){if(J=P.shared.pending,J===null)break;Re=J,J=Re.next,Re.next=null,P.lastBaseUpdate=Re,P.shared.pending=null}}while(!0);if($e===null&&(te=je),P.baseState=te,P.firstBaseUpdate=be,P.lastBaseUpdate=$e,m=P.shared.interleaved,m!==null){P=m;do B|=P.lane,P=P.next;while(P!==m)}else M===null&&(P.shared.lanes=0);Sd|=B,f.lanes=B,f.memoizedState=je}}function xM(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var C=f[m],P=C.callback;if(P!==null){if(C.callback=null,C=b,typeof P!="function")throw Error(n(191,P));P.call(C)}}}var xg={},Fo=$c(xg),vg=$c(xg),bg=$c(xg);function wd(f){if(f===xg)throw Error(n(174));return f}function W2(f,m){switch(Cn(bg,m),Cn(vg,f),Cn(Fo,xg),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:pn(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=pn(m,f)}$n(Fo),Cn(Fo,m)}function Wf(){$n(Fo),$n(vg),$n(bg)}function vM(f){wd(bg.current);var m=wd(Fo.current),b=pn(m,f.type);m!==b&&(Cn(vg,f),Cn(Fo,b))}function G2(f){vg.current===f&&($n(Fo),$n(vg))}var Hn=$c(0);function L0(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var H2=[];function q2(){for(var f=0;f<H2.length;f++)H2[f]._workInProgressVersionPrimary=null;H2.length=0}var V0=I.ReactCurrentDispatcher,K2=I.ReactCurrentBatchConfig,kd=0,qn=null,Tr=null,Gr=null,B0=!1,wg=!1,kg=0,Ene=0;function Ns(){throw Error(n(321))}function X2(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!Ka(f[b],m[b]))return!1;return!0}function Y2(f,m,b,C,P,M){if(kd=M,qn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,V0.current=f===null||f.memoizedState===null?Rne:$ne,f=b(C,P),wg){M=0;do{if(wg=!1,kg=0,25<=M)throw Error(n(301));M+=1,Gr=Tr=null,m.updateQueue=null,V0.current=Pne,f=b(C,P)}while(wg)}if(V0.current=W0,m=Tr!==null&&Tr.next!==null,kd=0,Gr=Tr=qn=null,B0=!1,m)throw Error(n(300));return f}function Q2(){var f=kg!==0;return kg=0,f}function Lo(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gr===null?qn.memoizedState=Gr=f:Gr=Gr.next=f,Gr}function da(){if(Tr===null){var f=qn.alternate;f=f!==null?f.memoizedState:null}else f=Tr.next;var m=Gr===null?qn.memoizedState:Gr.next;if(m!==null)Gr=m,Tr=f;else{if(f===null)throw Error(n(310));Tr=f,f={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},Gr===null?qn.memoizedState=Gr=f:Gr=Gr.next=f}return Gr}function Sg(f,m){return typeof m=="function"?m(f):m}function J2(f){var m=da(),b=m.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var C=Tr,P=C.baseQueue,M=b.pending;if(M!==null){if(P!==null){var B=P.next;P.next=M.next,M.next=B}C.baseQueue=P=M,b.pending=null}if(P!==null){M=P.next,C=C.baseState;var J=B=null,te=null,be=M;do{var $e=be.lane;if((kd&$e)===$e)te!==null&&(te=te.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),C=be.hasEagerState?be.eagerState:f(C,be.action);else{var je={lane:$e,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};te===null?(J=te=je,B=C):te=te.next=je,qn.lanes|=$e,Sd|=$e}be=be.next}while(be!==null&&be!==M);te===null?B=C:te.next=J,Ka(C,m.memoizedState)||(oi=!0),m.memoizedState=C,m.baseState=B,m.baseQueue=te,b.lastRenderedState=C}if(f=b.interleaved,f!==null){P=f;do M=P.lane,qn.lanes|=M,Sd|=M,P=P.next;while(P!==f)}else P===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function Z2(f){var m=da(),b=m.queue;if(b===null)throw Error(n(311));b.lastRenderedReducer=f;var C=b.dispatch,P=b.pending,M=m.memoizedState;if(P!==null){b.pending=null;var B=P=P.next;do M=f(M,B.action),B=B.next;while(B!==P);Ka(M,m.memoizedState)||(oi=!0),m.memoizedState=M,m.baseQueue===null&&(m.baseState=M),b.lastRenderedState=M}return[M,C]}function bM(){}function wM(f,m){var b=qn,C=da(),P=m(),M=!Ka(C.memoizedState,P);if(M&&(C.memoizedState=P,oi=!0),C=C.queue,eC(NM.bind(null,b,C,f),[f]),C.getSnapshot!==m||M||Gr!==null&&Gr.memoizedState.tag&1){if(b.flags|=2048,Ng(9,SM.bind(null,b,C,P,m),void 0,null),Hr===null)throw Error(n(349));(kd&30)!==0||kM(b,m,P)}return P}function kM(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},m=qn.updateQueue,m===null?(m={lastEffect:null,stores:null},qn.updateQueue=m,m.stores=[f]):(b=m.stores,b===null?m.stores=[f]:b.push(f))}function SM(f,m,b,C){m.value=b,m.getSnapshot=C,CM(m)&&IM(f)}function NM(f,m,b){return b(function(){CM(m)&&IM(f)})}function CM(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!Ka(f,b)}catch{return!0}}function IM(f){var m=Rl(f,1);m!==null&&Za(m,f,1,-1)}function EM(f){var m=Lo();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:f},m.queue=f,f=f.dispatch=Ane.bind(null,qn,f),[m.memoizedState,f]}function Ng(f,m,b,C){return f={tag:f,create:m,destroy:b,deps:C,next:null},m=qn.updateQueue,m===null?(m={lastEffect:null,stores:null},qn.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect,b===null?m.lastEffect=f.next=f:(C=b.next,b.next=f,f.next=C,m.lastEffect=f)),f}function TM(){return da().memoizedState}function z0(f,m,b,C){var P=Lo();qn.flags|=f,P.memoizedState=Ng(1|m,b,void 0,C===void 0?null:C)}function U0(f,m,b,C){var P=da();C=C===void 0?null:C;var M=void 0;if(Tr!==null){var B=Tr.memoizedState;if(M=B.destroy,C!==null&&X2(C,B.deps)){P.memoizedState=Ng(m,b,M,C);return}}qn.flags|=f,P.memoizedState=Ng(1|m,b,M,C)}function _M(f,m){return z0(8390656,8,f,m)}function eC(f,m){return U0(2048,8,f,m)}function AM(f,m){return U0(4,2,f,m)}function RM(f,m){return U0(4,4,f,m)}function $M(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function PM(f,m,b){return b=b!=null?b.concat([f]):null,U0(4,4,$M.bind(null,m,f),b)}function tC(){}function jM(f,m){var b=da();m=m===void 0?null:m;var C=b.memoizedState;return C!==null&&m!==null&&X2(m,C[1])?C[0]:(b.memoizedState=[f,m],f)}function DM(f,m){var b=da();m=m===void 0?null:m;var C=b.memoizedState;return C!==null&&m!==null&&X2(m,C[1])?C[0]:(f=f(),b.memoizedState=[f,m],f)}function OM(f,m,b){return(kd&21)===0?(f.baseState&&(f.baseState=!1,oi=!0),f.memoizedState=b):(Ka(b,m)||(b=dd(),qn.lanes|=b,Sd|=b,f.baseState=!0),m)}function Tne(f,m){var b=Vt;Vt=b!==0&&4>b?b:4,f(!0);var C=K2.transition;K2.transition={};try{f(!1),m()}finally{Vt=b,K2.transition=C}}function MM(){return da().memoizedState}function _ne(f,m,b){var C=Vc(f);if(b={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null},FM(f))LM(m,b);else if(b=mM(f,m,b,C),b!==null){var P=Gs();Za(b,f,C,P),VM(b,m,C)}}function Ane(f,m,b){var C=Vc(f),P={lane:C,action:b,hasEagerState:!1,eagerState:null,next:null};if(FM(f))LM(m,P);else{var M=f.alternate;if(f.lanes===0&&(M===null||M.lanes===0)&&(M=m.lastRenderedReducer,M!==null))try{var B=m.lastRenderedState,J=M(B,b);if(P.hasEagerState=!0,P.eagerState=J,Ka(J,B)){var te=m.interleaved;te===null?(P.next=P,z2(m)):(P.next=te.next,te.next=P),m.interleaved=P;return}}catch{}finally{}b=mM(f,m,P,C),b!==null&&(P=Gs(),Za(b,f,C,P),VM(b,m,C))}}function FM(f){var m=f.alternate;return f===qn||m!==null&&m===qn}function LM(f,m){wg=B0=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function VM(f,m,b){if((b&4194240)!==0){var C=m.lanes;C&=f.pendingLanes,b|=C,m.lanes=b,Cc(f,b)}}var W0={readContext:ua,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useInsertionEffect:Ns,useLayoutEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useMutableSource:Ns,useSyncExternalStore:Ns,useId:Ns,unstable_isNewReconciler:!1},Rne={readContext:ua,useCallback:function(f,m){return Lo().memoizedState=[f,m===void 0?null:m],f},useContext:ua,useEffect:_M,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,z0(4194308,4,$M.bind(null,m,f),b)},useLayoutEffect:function(f,m){return z0(4194308,4,f,m)},useInsertionEffect:function(f,m){return z0(4,2,f,m)},useMemo:function(f,m){var b=Lo();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var C=Lo();return m=b!==void 0?b(m):m,C.memoizedState=C.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},C.queue=f,f=f.dispatch=_ne.bind(null,qn,f),[C.memoizedState,f]},useRef:function(f){var m=Lo();return f={current:f},m.memoizedState=f},useState:EM,useDebugValue:tC,useDeferredValue:function(f){return Lo().memoizedState=f},useTransition:function(){var f=EM(!1),m=f[0];return f=Tne.bind(null,f[1]),Lo().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var C=qn,P=Lo();if(Fn){if(b===void 0)throw Error(n(407));b=b()}else{if(b=m(),Hr===null)throw Error(n(349));(kd&30)!==0||kM(C,m,b)}P.memoizedState=b;var M={value:b,getSnapshot:m};return P.queue=M,_M(NM.bind(null,C,M,f),[f]),C.flags|=2048,Ng(9,SM.bind(null,C,M,b,m),void 0,null),b},useId:function(){var f=Lo(),m=Hr.identifierPrefix;if(Fn){var b=Al,C=_l;b=(C&~(1<<32-zs(C)-1)).toString(32)+b,m=":"+m+"R"+b,b=kg++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=Ene++,m=":"+m+"r"+b.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},$ne={readContext:ua,useCallback:jM,useContext:ua,useEffect:eC,useImperativeHandle:PM,useInsertionEffect:AM,useLayoutEffect:RM,useMemo:DM,useReducer:J2,useRef:TM,useState:function(){return J2(Sg)},useDebugValue:tC,useDeferredValue:function(f){var m=da();return OM(m,Tr.memoizedState,f)},useTransition:function(){var f=J2(Sg)[0],m=da().memoizedState;return[f,m]},useMutableSource:bM,useSyncExternalStore:wM,useId:MM,unstable_isNewReconciler:!1},Pne={readContext:ua,useCallback:jM,useContext:ua,useEffect:eC,useImperativeHandle:PM,useInsertionEffect:AM,useLayoutEffect:RM,useMemo:DM,useReducer:Z2,useRef:TM,useState:function(){return Z2(Sg)},useDebugValue:tC,useDeferredValue:function(f){var m=da();return Tr===null?m.memoizedState=f:OM(m,Tr.memoizedState,f)},useTransition:function(){var f=Z2(Sg)[0],m=da().memoizedState;return[f,m]},useMutableSource:bM,useSyncExternalStore:wM,useId:MM,unstable_isNewReconciler:!1};function Ya(f,m){if(f&&f.defaultProps){m=ee({},m),f=f.defaultProps;for(var b in f)m[b]===void 0&&(m[b]=f[b]);return m}return m}function nC(f,m,b,C){m=f.memoizedState,b=b(C,m),b=b==null?m:ee({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var G0={isMounted:function(f){return(f=f._reactInternals)?Ba(f)===f:!1},enqueueSetState:function(f,m,b){f=f._reactInternals;var C=Gs(),P=Vc(f),M=$l(C,P);M.payload=m,b!=null&&(M.callback=b),m=Oc(f,M,P),m!==null&&(Za(m,f,P,C),M0(m,f,P))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var C=Gs(),P=Vc(f),M=$l(C,P);M.tag=1,M.payload=m,b!=null&&(M.callback=b),m=Oc(f,M,P),m!==null&&(Za(m,f,P,C),M0(m,f,P))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=Gs(),C=Vc(f),P=$l(b,C);P.tag=2,m!=null&&(P.callback=m),m=Oc(f,P,C),m!==null&&(Za(m,f,C,b),M0(m,f,C))}};function BM(f,m,b,C,P,M,B){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(C,M,B):m.prototype&&m.prototype.isPureReactComponent?!ug(b,C)||!ug(P,M):!0}function zM(f,m,b){var C=!1,P=Pc,M=m.contextType;return typeof M=="object"&&M!==null?M=ua(M):(P=ai(m)?yd:Ss.current,C=m.contextTypes,M=(C=C!=null)?Mf(f,P):Pc),m=new m(b,M),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=G0,f.stateNode=m,m._reactInternals=f,C&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=P,f.__reactInternalMemoizedMaskedChildContext=M),m}function UM(f,m,b,C){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,C),m.state!==f&&G0.enqueueReplaceState(m,m.state,null)}function rC(f,m,b,C){var P=f.stateNode;P.props=b,P.state=f.memoizedState,P.refs={},U2(f);var M=m.contextType;typeof M=="object"&&M!==null?P.context=ua(M):(M=ai(m)?yd:Ss.current,P.context=Mf(f,M)),P.state=f.memoizedState,M=m.getDerivedStateFromProps,typeof M=="function"&&(nC(f,m,M,b),P.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(m=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),m!==P.state&&G0.enqueueReplaceState(P,P.state,null),F0(f,b,P,C),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308)}function Gf(f,m){try{var b="",C=m;do b+=xe(C),C=C.return;while(C);var P=b}catch(M){P=`
Error generating stack: `+M.message+`
`+M.stack}return{value:f,source:m,stack:P,digest:null}}function sC(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function iC(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var jne=typeof WeakMap=="function"?WeakMap:Map;function WM(f,m,b){b=$l(-1,b),b.tag=3,b.payload={element:null};var C=m.value;return b.callback=function(){J0||(J0=!0,bC=C),iC(f,m)},b}function GM(f,m,b){b=$l(-1,b),b.tag=3;var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var P=m.value;b.payload=function(){return C(P)},b.callback=function(){iC(f,m)}}var M=f.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(b.callback=function(){iC(f,m),typeof C!="function"&&(Fc===null?Fc=new Set([this]):Fc.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})}),b}function HM(f,m,b){var C=f.pingCache;if(C===null){C=f.pingCache=new jne;var P=new Set;C.set(m,P)}else P=C.get(m),P===void 0&&(P=new Set,C.set(m,P));P.has(b)||(P.add(b),f=Kne.bind(null,f,m,b),m.then(f,f))}function qM(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function KM(f,m,b,C,P){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=$l(-1,1),m.tag=2,Oc(b,m,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=P,f)}var Dne=I.ReactCurrentOwner,oi=!1;function Ws(f,m,b,C){m.child=f===null?pM(m,null,b,C):Bf(m,f.child,b,C)}function XM(f,m,b,C,P){b=b.render;var M=m.ref;return Uf(m,P),C=Y2(f,m,b,C,M,P),b=Q2(),f!==null&&!oi?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~P,Pl(f,m,P)):(Fn&&b&&P2(m),m.flags|=1,Ws(f,m,C,P),m.child)}function YM(f,m,b,C,P){if(f===null){var M=b.type;return typeof M=="function"&&!EC(M)&&M.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=M,QM(f,m,M,C,P)):(f=sb(b.type,null,C,m,m.mode,P),f.ref=m.ref,f.return=m,m.child=f)}if(M=f.child,(f.lanes&P)===0){var B=M.memoizedProps;if(b=b.compare,b=b!==null?b:ug,b(B,C)&&f.ref===m.ref)return Pl(f,m,P)}return m.flags|=1,f=zc(M,C),f.ref=m.ref,f.return=m,m.child=f}function QM(f,m,b,C,P){if(f!==null){var M=f.memoizedProps;if(ug(M,C)&&f.ref===m.ref)if(oi=!1,m.pendingProps=C=M,(f.lanes&P)!==0)(f.flags&131072)!==0&&(oi=!0);else return m.lanes=f.lanes,Pl(f,m,P)}return aC(f,m,b,C,P)}function JM(f,m,b){var C=m.pendingProps,P=C.children,M=f!==null?f.memoizedState:null;if(C.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(qf,Pi),Pi|=b;else{if((b&1073741824)===0)return f=M!==null?M.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,Cn(qf,Pi),Pi|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},C=M!==null?M.baseLanes:b,Cn(qf,Pi),Pi|=C}else M!==null?(C=M.baseLanes|b,m.memoizedState=null):C=b,Cn(qf,Pi),Pi|=C;return Ws(f,m,P,b),m.child}function ZM(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function aC(f,m,b,C,P){var M=ai(b)?yd:Ss.current;return M=Mf(m,M),Uf(m,P),b=Y2(f,m,b,C,M,P),C=Q2(),f!==null&&!oi?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~P,Pl(f,m,P)):(Fn&&C&&P2(m),m.flags|=1,Ws(f,m,b,P),m.child)}function e4(f,m,b,C,P){if(ai(b)){var M=!0;_0(m)}else M=!1;if(Uf(m,P),m.stateNode===null)q0(f,m),zM(m,b,C),rC(m,b,C,P),C=!0;else if(f===null){var B=m.stateNode,J=m.memoizedProps;B.props=J;var te=B.context,be=b.contextType;typeof be=="object"&&be!==null?be=ua(be):(be=ai(b)?yd:Ss.current,be=Mf(m,be));var $e=b.getDerivedStateFromProps,je=typeof $e=="function"||typeof B.getSnapshotBeforeUpdate=="function";je||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==C||te!==be)&&UM(m,B,C,be),Dc=!1;var Re=m.memoizedState;B.state=Re,F0(m,C,B,P),te=m.memoizedState,J!==C||Re!==te||ii.current||Dc?(typeof $e=="function"&&(nC(m,b,$e,C),te=m.memoizedState),(J=Dc||BM(m,b,J,C,Re,te,be))?(je||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(m.flags|=4194308)):(typeof B.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=te),B.props=C,B.state=te,B.context=be,C=J):(typeof B.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{B=m.stateNode,gM(f,m),J=m.memoizedProps,be=m.type===m.elementType?J:Ya(m.type,J),B.props=be,je=m.pendingProps,Re=B.context,te=b.contextType,typeof te=="object"&&te!==null?te=ua(te):(te=ai(b)?yd:Ss.current,te=Mf(m,te));var Ge=b.getDerivedStateFromProps;($e=typeof Ge=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(J!==je||Re!==te)&&UM(m,B,C,te),Dc=!1,Re=m.memoizedState,B.state=Re,F0(m,C,B,P);var et=m.memoizedState;J!==je||Re!==et||ii.current||Dc?(typeof Ge=="function"&&(nC(m,b,Ge,C),et=m.memoizedState),(be=Dc||BM(m,b,be,C,Re,et,te)||!1)?($e||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(C,et,te),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(C,et,te)),typeof B.componentDidUpdate=="function"&&(m.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof B.componentDidUpdate!="function"||J===f.memoizedProps&&Re===f.memoizedState||(m.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===f.memoizedProps&&Re===f.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=et),B.props=C,B.state=et,B.context=te,C=be):(typeof B.componentDidUpdate!="function"||J===f.memoizedProps&&Re===f.memoizedState||(m.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||J===f.memoizedProps&&Re===f.memoizedState||(m.flags|=1024),C=!1)}return oC(f,m,b,C,M,P)}function oC(f,m,b,C,P,M){ZM(f,m);var B=(m.flags&128)!==0;if(!C&&!B)return P&&iM(m,b,!1),Pl(f,m,M);C=m.stateNode,Dne.current=m;var J=B&&typeof b.getDerivedStateFromError!="function"?null:C.render();return m.flags|=1,f!==null&&B?(m.child=Bf(m,f.child,null,M),m.child=Bf(m,null,J,M)):Ws(f,m,J,M),m.memoizedState=C.state,P&&iM(m,b,!0),m.child}function t4(f){var m=f.stateNode;m.pendingContext?rM(f,m.pendingContext,m.pendingContext!==m.context):m.context&&rM(f,m.context,!1),W2(f,m.containerInfo)}function n4(f,m,b,C,P){return Vf(),M2(P),m.flags|=256,Ws(f,m,b,C),m.child}var lC={dehydrated:null,treeContext:null,retryLane:0};function cC(f){return{baseLanes:f,cachePool:null,transitions:null}}function r4(f,m,b){var C=m.pendingProps,P=Hn.current,M=!1,B=(m.flags&128)!==0,J;if((J=B)||(J=f!==null&&f.memoizedState===null?!1:(P&2)!==0),J?(M=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(P|=1),Cn(Hn,P&1),f===null)return O2(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(B=C.children,f=C.fallback,M?(C=m.mode,M=m.child,B={mode:"hidden",children:B},(C&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=B):M=ib(B,C,0,null),f=Ed(f,C,b,null),M.return=m,f.return=m,M.sibling=f,m.child=M,m.child.memoizedState=cC(b),m.memoizedState=lC,f):uC(m,B));if(P=f.memoizedState,P!==null&&(J=P.dehydrated,J!==null))return One(f,m,B,C,J,P,b);if(M){M=C.fallback,B=m.mode,P=f.child,J=P.sibling;var te={mode:"hidden",children:C.children};return(B&1)===0&&m.child!==P?(C=m.child,C.childLanes=0,C.pendingProps=te,m.deletions=null):(C=zc(P,te),C.subtreeFlags=P.subtreeFlags&14680064),J!==null?M=zc(J,M):(M=Ed(M,B,b,null),M.flags|=2),M.return=m,C.return=m,C.sibling=M,m.child=C,C=M,M=m.child,B=f.child.memoizedState,B=B===null?cC(b):{baseLanes:B.baseLanes|b,cachePool:null,transitions:B.transitions},M.memoizedState=B,M.childLanes=f.childLanes&~b,m.memoizedState=lC,C}return M=f.child,f=M.sibling,C=zc(M,{mode:"visible",children:C.children}),(m.mode&1)===0&&(C.lanes=b),C.return=m,C.sibling=null,f!==null&&(b=m.deletions,b===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=C,m.memoizedState=null,C}function uC(f,m){return m=ib({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function H0(f,m,b,C){return C!==null&&M2(C),Bf(m,f.child,null,b),f=uC(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function One(f,m,b,C,P,M,B){if(b)return m.flags&256?(m.flags&=-257,C=sC(Error(n(422))),H0(f,m,B,C)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(M=C.fallback,P=m.mode,C=ib({mode:"visible",children:C.children},P,0,null),M=Ed(M,P,B,null),M.flags|=2,C.return=m,M.return=m,C.sibling=M,m.child=C,(m.mode&1)!==0&&Bf(m,f.child,null,B),m.child.memoizedState=cC(B),m.memoizedState=lC,M);if((m.mode&1)===0)return H0(f,m,B,null);if(P.data==="$!"){if(C=P.nextSibling&&P.nextSibling.dataset,C)var J=C.dgst;return C=J,M=Error(n(419)),C=sC(M,C,void 0),H0(f,m,B,C)}if(J=(B&f.childLanes)!==0,oi||J){if(C=Hr,C!==null){switch(B&-B){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(C.suspendedLanes|B))!==0?0:P,P!==0&&P!==M.retryLane&&(M.retryLane=P,Rl(f,P),Za(C,f,P,-1))}return IC(),C=sC(Error(n(421))),H0(f,m,B,C)}return P.data==="$?"?(m.flags|=128,m.child=f.child,m=Xne.bind(null,f),P._reactRetry=m,null):(f=M.treeContext,$i=Rc(P.nextSibling),Ri=m,Fn=!0,Xa=null,f!==null&&(la[ca++]=_l,la[ca++]=Al,la[ca++]=xd,_l=f.id,Al=f.overflow,xd=m),m=uC(m,C.children),m.flags|=4096,m)}function s4(f,m,b){f.lanes|=m;var C=f.alternate;C!==null&&(C.lanes|=m),B2(f.return,m,b)}function dC(f,m,b,C,P){var M=f.memoizedState;M===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:b,tailMode:P}:(M.isBackwards=m,M.rendering=null,M.renderingStartTime=0,M.last=C,M.tail=b,M.tailMode=P)}function i4(f,m,b){var C=m.pendingProps,P=C.revealOrder,M=C.tail;if(Ws(f,m,C.children,b),C=Hn.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&s4(f,b,m);else if(f.tag===19)s4(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}C&=1}if(Cn(Hn,C),(m.mode&1)===0)m.memoizedState=null;else switch(P){case"forwards":for(b=m.child,P=null;b!==null;)f=b.alternate,f!==null&&L0(f)===null&&(P=b),b=b.sibling;b=P,b===null?(P=m.child,m.child=null):(P=b.sibling,b.sibling=null),dC(m,!1,P,b,M);break;case"backwards":for(b=null,P=m.child,m.child=null;P!==null;){if(f=P.alternate,f!==null&&L0(f)===null){m.child=P;break}f=P.sibling,P.sibling=b,b=P,P=f}dC(m,!0,b,null,M);break;case"together":dC(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function q0(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function Pl(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),Sd|=m.lanes,(b&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(n(153));if(m.child!==null){for(f=m.child,b=zc(f,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,b=b.sibling=zc(f,f.pendingProps),b.return=m;b.sibling=null}return m.child}function Mne(f,m,b){switch(m.tag){case 3:t4(m),Vf();break;case 5:vM(m);break;case 1:ai(m.type)&&_0(m);break;case 4:W2(m,m.stateNode.containerInfo);break;case 10:var C=m.type._context,P=m.memoizedProps.value;Cn(D0,C._currentValue),C._currentValue=P;break;case 13:if(C=m.memoizedState,C!==null)return C.dehydrated!==null?(Cn(Hn,Hn.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?r4(f,m,b):(Cn(Hn,Hn.current&1),f=Pl(f,m,b),f!==null?f.sibling:null);Cn(Hn,Hn.current&1);break;case 19:if(C=(b&m.childLanes)!==0,(f.flags&128)!==0){if(C)return i4(f,m,b);m.flags|=128}if(P=m.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Cn(Hn,Hn.current),C)break;return null;case 22:case 23:return m.lanes=0,JM(f,m,b)}return Pl(f,m,b)}var a4,hC,o4,l4;a4=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},hC=function(){},o4=function(f,m,b,C){var P=f.memoizedProps;if(P!==C){f=m.stateNode,wd(Fo.current);var M=null;switch(b){case"input":P=Xe(f,P),C=Xe(f,C),M=[];break;case"select":P=ee({},P,{value:void 0}),C=ee({},C,{value:void 0}),M=[];break;case"textarea":P=Ir(f,P),C=Ir(f,C),M=[];break;default:typeof P.onClick!="function"&&typeof C.onClick=="function"&&(f.onclick=I0)}Gm(b,C);var B;b=null;for(be in P)if(!C.hasOwnProperty(be)&&P.hasOwnProperty(be)&&P[be]!=null)if(be==="style"){var J=P[be];for(B in J)J.hasOwnProperty(B)&&(b||(b={}),b[B]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(s.hasOwnProperty(be)?M||(M=[]):(M=M||[]).push(be,null));for(be in C){var te=C[be];if(J=P?.[be],C.hasOwnProperty(be)&&te!==J&&(te!=null||J!=null))if(be==="style")if(J){for(B in J)!J.hasOwnProperty(B)||te&&te.hasOwnProperty(B)||(b||(b={}),b[B]="");for(B in te)te.hasOwnProperty(B)&&J[B]!==te[B]&&(b||(b={}),b[B]=te[B])}else b||(M||(M=[]),M.push(be,b)),b=te;else be==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,J=J?J.__html:void 0,te!=null&&J!==te&&(M=M||[]).push(be,te)):be==="children"?typeof te!="string"&&typeof te!="number"||(M=M||[]).push(be,""+te):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(s.hasOwnProperty(be)?(te!=null&&be==="onScroll"&&Rn("scroll",f),M||J===te||(M=[])):(M=M||[]).push(be,te))}b&&(M=M||[]).push("style",b);var be=M;(m.updateQueue=be)&&(m.flags|=4)}},l4=function(f,m,b,C){b!==C&&(m.flags|=4)};function Cg(f,m){if(!Fn)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var C=null;b!==null;)b.alternate!==null&&(C=b),b=b.sibling;C===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:C.sibling=null}}function Cs(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,C=0;if(m)for(var P=f.child;P!==null;)b|=P.lanes|P.childLanes,C|=P.subtreeFlags&14680064,C|=P.flags&14680064,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)b|=P.lanes|P.childLanes,C|=P.subtreeFlags,C|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=C,f.childLanes=b,m}function Fne(f,m,b){var C=m.pendingProps;switch(j2(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(m),null;case 1:return ai(m.type)&&T0(),Cs(m),null;case 3:return C=m.stateNode,Wf(),$n(ii),$n(Ss),q2(),C.pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),(f===null||f.child===null)&&(P0(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Xa!==null&&(SC(Xa),Xa=null))),hC(f,m),Cs(m),null;case 5:G2(m);var P=wd(bg.current);if(b=m.type,f!==null&&m.stateNode!=null)o4(f,m,b,C,P),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!C){if(m.stateNode===null)throw Error(n(166));return Cs(m),null}if(f=wd(Fo.current),P0(m)){C=m.stateNode,b=m.type;var M=m.memoizedProps;switch(C[Mo]=m,C[mg]=M,f=(m.mode&1)!==0,b){case"dialog":Rn("cancel",C),Rn("close",C);break;case"iframe":case"object":case"embed":Rn("load",C);break;case"video":case"audio":for(P=0;P<hg.length;P++)Rn(hg[P],C);break;case"source":Rn("error",C);break;case"img":case"image":case"link":Rn("error",C),Rn("load",C);break;case"details":Rn("toggle",C);break;case"input":pt(C,M),Rn("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!M.multiple},Rn("invalid",C);break;case"textarea":ni(C,M),Rn("invalid",C)}Gm(b,M),P=null;for(var B in M)if(M.hasOwnProperty(B)){var J=M[B];B==="children"?typeof J=="string"?C.textContent!==J&&(M.suppressHydrationWarning!==!0&&C0(C.textContent,J,f),P=["children",J]):typeof J=="number"&&C.textContent!==""+J&&(M.suppressHydrationWarning!==!0&&C0(C.textContent,J,f),P=["children",""+J]):s.hasOwnProperty(B)&&J!=null&&B==="onScroll"&&Rn("scroll",C)}switch(b){case"input":Ee(C),Qt(C,M,!0);break;case"textarea":Ee(C),Bs(C);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(C.onclick=I0)}C=P,m.updateQueue=C,C!==null&&(m.flags|=4)}else{B=P.nodeType===9?P:P.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=fn(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=B.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof C.is=="string"?f=B.createElement(b,{is:C.is}):(f=B.createElement(b),b==="select"&&(B=f,C.multiple?B.multiple=!0:C.size&&(B.size=C.size))):f=B.createElementNS(f,b),f[Mo]=m,f[mg]=C,a4(f,m,!1,!1),m.stateNode=f;e:{switch(B=Hm(b,C),b){case"dialog":Rn("cancel",f),Rn("close",f),P=C;break;case"iframe":case"object":case"embed":Rn("load",f),P=C;break;case"video":case"audio":for(P=0;P<hg.length;P++)Rn(hg[P],f);P=C;break;case"source":Rn("error",f),P=C;break;case"img":case"image":case"link":Rn("error",f),Rn("load",f),P=C;break;case"details":Rn("toggle",f),P=C;break;case"input":pt(f,C),P=Xe(f,C),Rn("invalid",f);break;case"option":P=C;break;case"select":f._wrapperState={wasMultiple:!!C.multiple},P=ee({},C,{value:void 0}),Rn("invalid",f);break;case"textarea":ni(f,C),P=Ir(f,C),Rn("invalid",f);break;default:P=C}Gm(b,P),J=P;for(M in J)if(J.hasOwnProperty(M)){var te=J[M];M==="style"?td(f,te):M==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Ma(f,te)):M==="children"?typeof te=="string"?(b!=="textarea"||te!=="")&&ra(f,te):typeof te=="number"&&ra(f,""+te):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(s.hasOwnProperty(M)?te!=null&&M==="onScroll"&&Rn("scroll",f):te!=null&&S(f,M,te,B))}switch(b){case"input":Ee(f),Qt(f,C,!1);break;case"textarea":Ee(f),Bs(f);break;case"option":C.value!=null&&f.setAttribute("value",""+Te(C.value));break;case"select":f.multiple=!!C.multiple,M=C.value,M!=null?Br(f,!!C.multiple,M,!1):C.defaultValue!=null&&Br(f,!!C.multiple,C.defaultValue,!0);break;default:typeof P.onClick=="function"&&(f.onclick=I0)}switch(b){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}}C&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Cs(m),null;case 6:if(f&&m.stateNode!=null)l4(f,m,f.memoizedProps,C);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(b=wd(bg.current),wd(Fo.current),P0(m)){if(C=m.stateNode,b=m.memoizedProps,C[Mo]=m,(M=C.nodeValue!==b)&&(f=Ri,f!==null))switch(f.tag){case 3:C0(C.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&C0(C.nodeValue,b,(f.mode&1)!==0)}M&&(m.flags|=4)}else C=(b.nodeType===9?b:b.ownerDocument).createTextNode(C),C[Mo]=m,m.stateNode=C}return Cs(m),null;case 13:if($n(Hn),C=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(Fn&&$i!==null&&(m.mode&1)!==0&&(m.flags&128)===0)dM(),Vf(),m.flags|=98560,M=!1;else if(M=P0(m),C!==null&&C.dehydrated!==null){if(f===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Mo]=m}else Vf(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Cs(m),M=!1}else Xa!==null&&(SC(Xa),Xa=null),M=!0;if(!M)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(C=C!==null,C!==(f!==null&&f.memoizedState!==null)&&C&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(Hn.current&1)!==0?_r===0&&(_r=3):IC())),m.updateQueue!==null&&(m.flags|=4),Cs(m),null);case 4:return Wf(),hC(f,m),f===null&&fg(m.stateNode.containerInfo),Cs(m),null;case 10:return V2(m.type._context),Cs(m),null;case 17:return ai(m.type)&&T0(),Cs(m),null;case 19:if($n(Hn),M=m.memoizedState,M===null)return Cs(m),null;if(C=(m.flags&128)!==0,B=M.rendering,B===null)if(C)Cg(M,!1);else{if(_r!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(B=L0(f),B!==null){for(m.flags|=128,Cg(M,!1),C=B.updateQueue,C!==null&&(m.updateQueue=C,m.flags|=4),m.subtreeFlags=0,C=b,b=m.child;b!==null;)M=b,f=C,M.flags&=14680066,B=M.alternate,B===null?(M.childLanes=0,M.lanes=f,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=B.childLanes,M.lanes=B.lanes,M.child=B.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=B.memoizedProps,M.memoizedState=B.memoizedState,M.updateQueue=B.updateQueue,M.type=B.type,f=B.dependencies,M.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Cn(Hn,Hn.current&1|2),m.child}f=f.sibling}M.tail!==null&&Nn()>Kf&&(m.flags|=128,C=!0,Cg(M,!1),m.lanes=4194304)}else{if(!C)if(f=L0(B),f!==null){if(m.flags|=128,C=!0,b=f.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),Cg(M,!0),M.tail===null&&M.tailMode==="hidden"&&!B.alternate&&!Fn)return Cs(m),null}else 2*Nn()-M.renderingStartTime>Kf&&b!==1073741824&&(m.flags|=128,C=!0,Cg(M,!1),m.lanes=4194304);M.isBackwards?(B.sibling=m.child,m.child=B):(b=M.last,b!==null?b.sibling=B:m.child=B,M.last=B)}return M.tail!==null?(m=M.tail,M.rendering=m,M.tail=m.sibling,M.renderingStartTime=Nn(),m.sibling=null,b=Hn.current,Cn(Hn,C?b&1|2:b&1),m):(Cs(m),null);case 22:case 23:return CC(),C=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==C&&(m.flags|=8192),C&&(m.mode&1)!==0?(Pi&1073741824)!==0&&(Cs(m),m.subtreeFlags&6&&(m.flags|=8192)):Cs(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function Lne(f,m){switch(j2(m),m.tag){case 1:return ai(m.type)&&T0(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return Wf(),$n(ii),$n(Ss),q2(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return G2(m),null;case 13:if($n(Hn),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(n(340));Vf()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return $n(Hn),null;case 4:return Wf(),null;case 10:return V2(m.type._context),null;case 22:case 23:return CC(),null;case 24:return null;default:return null}}var K0=!1,Is=!1,Vne=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Hf(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(C){Yn(f,m,C)}else b.current=null}function fC(f,m,b){try{b()}catch(C){Yn(f,m,C)}}var c4=!1;function Bne(f,m){if(C2=Tc,f=BO(),y2(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var C=b.getSelection&&b.getSelection();if(C&&C.rangeCount!==0){b=C.anchorNode;var P=C.anchorOffset,M=C.focusNode;C=C.focusOffset;try{b.nodeType,M.nodeType}catch{b=null;break e}var B=0,J=-1,te=-1,be=0,$e=0,je=f,Re=null;t:for(;;){for(var Ge;je!==b||P!==0&&je.nodeType!==3||(J=B+P),je!==M||C!==0&&je.nodeType!==3||(te=B+C),je.nodeType===3&&(B+=je.nodeValue.length),(Ge=je.firstChild)!==null;)Re=je,je=Ge;for(;;){if(je===f)break t;if(Re===b&&++be===P&&(J=B),Re===M&&++$e===C&&(te=B),(Ge=je.nextSibling)!==null)break;je=Re,Re=je.parentNode}je=Ge}b=J===-1||te===-1?null:{start:J,end:te}}else b=null}b=b||{start:0,end:0}}else b=null;for(I2={focusedElem:f,selectionRange:b},Tc=!1,Ye=m;Ye!==null;)if(m=Ye,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,Ye=f;else for(;Ye!==null;){m=Ye;try{var et=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var st=et.memoizedProps,ar=et.memoizedState,de=m.stateNode,se=de.getSnapshotBeforeUpdate(m.elementType===m.type?st:Ya(m.type,st),ar);de.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var pe=m.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Fe){Yn(m,m.return,Fe)}if(f=m.sibling,f!==null){f.return=m.return,Ye=f;break}Ye=m.return}return et=c4,c4=!1,et}function Ig(f,m,b){var C=m.updateQueue;if(C=C!==null?C.lastEffect:null,C!==null){var P=C=C.next;do{if((P.tag&f)===f){var M=P.destroy;P.destroy=void 0,M!==void 0&&fC(m,b,M)}P=P.next}while(P!==C)}}function X0(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&f)===f){var C=b.create;b.destroy=C()}b=b.next}while(b!==m)}}function pC(f){var m=f.ref;if(m!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof m=="function"?m(f):m.current=f}}function u4(f){var m=f.alternate;m!==null&&(f.alternate=null,u4(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[Mo],delete m[mg],delete m[A2],delete m[Sne],delete m[Nne])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function d4(f){return f.tag===5||f.tag===3||f.tag===4}function h4(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||d4(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function mC(f,m,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(f,m):b.insertBefore(f,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(f,b)):(m=b,m.appendChild(f)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=I0));else if(C!==4&&(f=f.child,f!==null))for(mC(f,m,b),f=f.sibling;f!==null;)mC(f,m,b),f=f.sibling}function gC(f,m,b){var C=f.tag;if(C===5||C===6)f=f.stateNode,m?b.insertBefore(f,m):b.appendChild(f);else if(C!==4&&(f=f.child,f!==null))for(gC(f,m,b),f=f.sibling;f!==null;)gC(f,m,b),f=f.sibling}var ds=null,Qa=!1;function Mc(f,m,b){for(b=b.child;b!==null;)f4(f,m,b),b=b.sibling}function f4(f,m,b){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(cd,b)}catch{}switch(b.tag){case 5:Is||Hf(b,m);case 6:var C=ds,P=Qa;ds=null,Mc(f,m,b),ds=C,Qa=P,ds!==null&&(Qa?(f=ds,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):ds.removeChild(b.stateNode));break;case 18:ds!==null&&(Qa?(f=ds,b=b.stateNode,f.nodeType===8?_2(f.parentNode,b):f.nodeType===1&&_2(f,b),Ha(f)):_2(ds,b.stateNode));break;case 4:C=ds,P=Qa,ds=b.stateNode.containerInfo,Qa=!0,Mc(f,m,b),ds=C,Qa=P;break;case 0:case 11:case 14:case 15:if(!Is&&(C=b.updateQueue,C!==null&&(C=C.lastEffect,C!==null))){P=C=C.next;do{var M=P,B=M.destroy;M=M.tag,B!==void 0&&((M&2)!==0||(M&4)!==0)&&fC(b,m,B),P=P.next}while(P!==C)}Mc(f,m,b);break;case 1:if(!Is&&(Hf(b,m),C=b.stateNode,typeof C.componentWillUnmount=="function"))try{C.props=b.memoizedProps,C.state=b.memoizedState,C.componentWillUnmount()}catch(J){Yn(b,m,J)}Mc(f,m,b);break;case 21:Mc(f,m,b);break;case 22:b.mode&1?(Is=(C=Is)||b.memoizedState!==null,Mc(f,m,b),Is=C):Mc(f,m,b);break;default:Mc(f,m,b)}}function p4(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new Vne),m.forEach(function(C){var P=Yne.bind(null,f,C);b.has(C)||(b.add(C),C.then(P,P))})}}function Ja(f,m){var b=m.deletions;if(b!==null)for(var C=0;C<b.length;C++){var P=b[C];try{var M=f,B=m,J=B;e:for(;J!==null;){switch(J.tag){case 5:ds=J.stateNode,Qa=!1;break e;case 3:ds=J.stateNode.containerInfo,Qa=!0;break e;case 4:ds=J.stateNode.containerInfo,Qa=!0;break e}J=J.return}if(ds===null)throw Error(n(160));f4(M,B,P),ds=null,Qa=!1;var te=P.alternate;te!==null&&(te.return=null),P.return=null}catch(be){Yn(P,m,be)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)m4(m,f),m=m.sibling}function m4(f,m){var b=f.alternate,C=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Ja(m,f),Vo(f),C&4){try{Ig(3,f,f.return),X0(3,f)}catch(st){Yn(f,f.return,st)}try{Ig(5,f,f.return)}catch(st){Yn(f,f.return,st)}}break;case 1:Ja(m,f),Vo(f),C&512&&b!==null&&Hf(b,b.return);break;case 5:if(Ja(m,f),Vo(f),C&512&&b!==null&&Hf(b,b.return),f.flags&32){var P=f.stateNode;try{ra(P,"")}catch(st){Yn(f,f.return,st)}}if(C&4&&(P=f.stateNode,P!=null)){var M=f.memoizedProps,B=b!==null?b.memoizedProps:M,J=f.type,te=f.updateQueue;if(f.updateQueue=null,te!==null)try{J==="input"&&M.type==="radio"&&M.name!=null&&ft(P,M),Hm(J,B);var be=Hm(J,M);for(B=0;B<te.length;B+=2){var $e=te[B],je=te[B+1];$e==="style"?td(P,je):$e==="dangerouslySetInnerHTML"?Ma(P,je):$e==="children"?ra(P,je):S(P,$e,je,be)}switch(J){case"input":Et(P,M);break;case"textarea":zr(P,M);break;case"select":var Re=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!M.multiple;var Ge=M.value;Ge!=null?Br(P,!!M.multiple,Ge,!1):Re!==!!M.multiple&&(M.defaultValue!=null?Br(P,!!M.multiple,M.defaultValue,!0):Br(P,!!M.multiple,M.multiple?[]:"",!1))}P[mg]=M}catch(st){Yn(f,f.return,st)}}break;case 6:if(Ja(m,f),Vo(f),C&4){if(f.stateNode===null)throw Error(n(162));P=f.stateNode,M=f.memoizedProps;try{P.nodeValue=M}catch(st){Yn(f,f.return,st)}}break;case 3:if(Ja(m,f),Vo(f),C&4&&b!==null&&b.memoizedState.isDehydrated)try{Ha(m.containerInfo)}catch(st){Yn(f,f.return,st)}break;case 4:Ja(m,f),Vo(f);break;case 13:Ja(m,f),Vo(f),P=f.child,P.flags&8192&&(M=P.memoizedState!==null,P.stateNode.isHidden=M,!M||P.alternate!==null&&P.alternate.memoizedState!==null||(vC=Nn())),C&4&&p4(f);break;case 22:if($e=b!==null&&b.memoizedState!==null,f.mode&1?(Is=(be=Is)||$e,Ja(m,f),Is=be):Ja(m,f),Vo(f),C&8192){if(be=f.memoizedState!==null,(f.stateNode.isHidden=be)&&!$e&&(f.mode&1)!==0)for(Ye=f,$e=f.child;$e!==null;){for(je=Ye=$e;Ye!==null;){switch(Re=Ye,Ge=Re.child,Re.tag){case 0:case 11:case 14:case 15:Ig(4,Re,Re.return);break;case 1:Hf(Re,Re.return);var et=Re.stateNode;if(typeof et.componentWillUnmount=="function"){C=Re,b=Re.return;try{m=C,et.props=m.memoizedProps,et.state=m.memoizedState,et.componentWillUnmount()}catch(st){Yn(C,b,st)}}break;case 5:Hf(Re,Re.return);break;case 22:if(Re.memoizedState!==null){x4(je);continue}}Ge!==null?(Ge.return=Re,Ye=Ge):x4(je)}$e=$e.sibling}e:for($e=null,je=f;;){if(je.tag===5){if($e===null){$e=je;try{P=je.stateNode,be?(M=P.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(J=je.stateNode,te=je.memoizedProps.style,B=te!=null&&te.hasOwnProperty("display")?te.display:null,J.style.display=_o("display",B))}catch(st){Yn(f,f.return,st)}}}else if(je.tag===6){if($e===null)try{je.stateNode.nodeValue=be?"":je.memoizedProps}catch(st){Yn(f,f.return,st)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===f)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===f)break e;for(;je.sibling===null;){if(je.return===null||je.return===f)break e;$e===je&&($e=null),je=je.return}$e===je&&($e=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Ja(m,f),Vo(f),C&4&&p4(f);break;case 21:break;default:Ja(m,f),Vo(f)}}function Vo(f){var m=f.flags;if(m&2){try{e:{for(var b=f.return;b!==null;){if(d4(b)){var C=b;break e}b=b.return}throw Error(n(160))}switch(C.tag){case 5:var P=C.stateNode;C.flags&32&&(ra(P,""),C.flags&=-33);var M=h4(f);gC(f,M,P);break;case 3:case 4:var B=C.stateNode.containerInfo,J=h4(f);mC(f,J,B);break;default:throw Error(n(161))}}catch(te){Yn(f,f.return,te)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function zne(f,m,b){Ye=f,g4(f)}function g4(f,m,b){for(var C=(f.mode&1)!==0;Ye!==null;){var P=Ye,M=P.child;if(P.tag===22&&C){var B=P.memoizedState!==null||K0;if(!B){var J=P.alternate,te=J!==null&&J.memoizedState!==null||Is;J=K0;var be=Is;if(K0=B,(Is=te)&&!be)for(Ye=P;Ye!==null;)B=Ye,te=B.child,B.tag===22&&B.memoizedState!==null?v4(P):te!==null?(te.return=B,Ye=te):v4(P);for(;M!==null;)Ye=M,g4(M),M=M.sibling;Ye=P,K0=J,Is=be}y4(f)}else(P.subtreeFlags&8772)!==0&&M!==null?(M.return=P,Ye=M):y4(f)}}function y4(f){for(;Ye!==null;){var m=Ye;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Is||X0(5,m);break;case 1:var C=m.stateNode;if(m.flags&4&&!Is)if(b===null)C.componentDidMount();else{var P=m.elementType===m.type?b.memoizedProps:Ya(m.type,b.memoizedProps);C.componentDidUpdate(P,b.memoizedState,C.__reactInternalSnapshotBeforeUpdate)}var M=m.updateQueue;M!==null&&xM(m,M,C);break;case 3:var B=m.updateQueue;if(B!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}xM(m,B,b)}break;case 5:var J=m.stateNode;if(b===null&&m.flags&4){b=J;var te=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&b.focus();break;case"img":te.src&&(b.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var be=m.alternate;if(be!==null){var $e=be.memoizedState;if($e!==null){var je=$e.dehydrated;je!==null&&Ha(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Is||m.flags&512&&pC(m)}catch(Re){Yn(m,m.return,Re)}}if(m===f){Ye=null;break}if(b=m.sibling,b!==null){b.return=m.return,Ye=b;break}Ye=m.return}}function x4(f){for(;Ye!==null;){var m=Ye;if(m===f){Ye=null;break}var b=m.sibling;if(b!==null){b.return=m.return,Ye=b;break}Ye=m.return}}function v4(f){for(;Ye!==null;){var m=Ye;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{X0(4,m)}catch(te){Yn(m,b,te)}break;case 1:var C=m.stateNode;if(typeof C.componentDidMount=="function"){var P=m.return;try{C.componentDidMount()}catch(te){Yn(m,P,te)}}var M=m.return;try{pC(m)}catch(te){Yn(m,M,te)}break;case 5:var B=m.return;try{pC(m)}catch(te){Yn(m,B,te)}}}catch(te){Yn(m,m.return,te)}if(m===f){Ye=null;break}var J=m.sibling;if(J!==null){J.return=m.return,Ye=J;break}Ye=m.return}}var Une=Math.ceil,Y0=I.ReactCurrentDispatcher,yC=I.ReactCurrentOwner,ha=I.ReactCurrentBatchConfig,Jt=0,Hr=null,fr=null,hs=0,Pi=0,qf=$c(0),_r=0,Eg=null,Sd=0,Q0=0,xC=0,Tg=null,li=null,vC=0,Kf=1/0,jl=null,J0=!1,bC=null,Fc=null,Z0=!1,Lc=null,eb=0,_g=0,wC=null,tb=-1,nb=0;function Gs(){return(Jt&6)!==0?Nn():tb!==-1?tb:tb=Nn()}function Vc(f){return(f.mode&1)===0?1:(Jt&2)!==0&&hs!==0?hs&-hs:Ine.transition!==null?(nb===0&&(nb=dd()),nb):(f=Vt,f!==0||(f=window.event,f=f===void 0?16:rg(f.type)),f)}function Za(f,m,b,C){if(50<_g)throw _g=0,wC=null,Error(n(185));Nc(f,b,C),((Jt&2)===0||f!==Hr)&&(f===Hr&&((Jt&2)===0&&(Q0|=b),_r===4&&Bc(f,hs)),ci(f,C),b===1&&Jt===0&&(m.mode&1)===0&&(Kf=Nn()+500,A0&&jc()))}function ci(f,m){var b=f.callbackNode;kl(f,m);var C=ud(f,f===Hr?hs:0);if(C===0)b!==null&&Jm(b),f.callbackNode=null,f.callbackPriority=0;else if(m=C&-C,f.callbackPriority!==m){if(b!=null&&Jm(b),m===1)f.tag===0?Cne(w4.bind(null,f)):aM(w4.bind(null,f)),wne(function(){(Jt&6)===0&&jc()}),b=null;else{switch(Ic(C)){case 1:b=ld;break;case 4:b=wc;break;case 16:b=ia;break;case 536870912:b=n0;break;default:b=ia}b=_4(b,b4.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function b4(f,m){if(tb=-1,nb=0,(Jt&6)!==0)throw Error(n(327));var b=f.callbackNode;if(Xf()&&f.callbackNode!==b)return null;var C=ud(f,f===Hr?hs:0);if(C===0)return null;if((C&30)!==0||(C&f.expiredLanes)!==0||m)m=rb(f,C);else{m=C;var P=Jt;Jt|=2;var M=S4();(Hr!==f||hs!==m)&&(jl=null,Kf=Nn()+500,Cd(f,m));do try{Hne();break}catch(J){k4(f,J)}while(!0);L2(),Y0.current=M,Jt=P,fr!==null?m=0:(Hr=null,hs=0,m=_r)}if(m!==0){if(m===2&&(P=Ti(f),P!==0&&(C=P,m=kC(f,P))),m===1)throw b=Eg,Cd(f,0),Bc(f,C),ci(f,Nn()),b;if(m===6)Bc(f,C);else{if(P=f.current.alternate,(C&30)===0&&!Wne(P)&&(m=rb(f,C),m===2&&(M=Ti(f),M!==0&&(C=M,m=kC(f,M))),m===1))throw b=Eg,Cd(f,0),Bc(f,C),ci(f,Nn()),b;switch(f.finishedWork=P,f.finishedLanes=C,m){case 0:case 1:throw Error(n(345));case 2:Id(f,li,jl);break;case 3:if(Bc(f,C),(C&130023424)===C&&(m=vC+500-Nn(),10<m)){if(ud(f,0)!==0)break;if(P=f.suspendedLanes,(P&C)!==C){Gs(),f.pingedLanes|=f.suspendedLanes&P;break}f.timeoutHandle=T2(Id.bind(null,f,li,jl),m);break}Id(f,li,jl);break;case 4:if(Bc(f,C),(C&4194240)===C)break;for(m=f.eventTimes,P=-1;0<C;){var B=31-zs(C);M=1<<B,B=m[B],B>P&&(P=B),C&=~M}if(C=P,C=Nn()-C,C=(120>C?120:480>C?480:1080>C?1080:1920>C?1920:3e3>C?3e3:4320>C?4320:1960*Une(C/1960))-C,10<C){f.timeoutHandle=T2(Id.bind(null,f,li,jl),C);break}Id(f,li,jl);break;case 5:Id(f,li,jl);break;default:throw Error(n(329))}}}return ci(f,Nn()),f.callbackNode===b?b4.bind(null,f):null}function kC(f,m){var b=Tg;return f.current.memoizedState.isDehydrated&&(Cd(f,m).flags|=256),f=rb(f,m),f!==2&&(m=li,li=b,m!==null&&SC(m)),f}function SC(f){li===null?li=f:li.push.apply(li,f)}function Wne(f){for(var m=f;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var C=0;C<b.length;C++){var P=b[C],M=P.getSnapshot;P=P.value;try{if(!Ka(M(),P))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Bc(f,m){for(m&=~xC,m&=~Q0,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-zs(m),C=1<<b;f[b]=-1,m&=~C}}function w4(f){if((Jt&6)!==0)throw Error(n(327));Xf();var m=ud(f,0);if((m&1)===0)return ci(f,Nn()),null;var b=rb(f,m);if(f.tag!==0&&b===2){var C=Ti(f);C!==0&&(m=C,b=kC(f,C))}if(b===1)throw b=Eg,Cd(f,0),Bc(f,m),ci(f,Nn()),b;if(b===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Id(f,li,jl),ci(f,Nn()),null}function NC(f,m){var b=Jt;Jt|=1;try{return f(m)}finally{Jt=b,Jt===0&&(Kf=Nn()+500,A0&&jc())}}function Nd(f){Lc!==null&&Lc.tag===0&&(Jt&6)===0&&Xf();var m=Jt;Jt|=1;var b=ha.transition,C=Vt;try{if(ha.transition=null,Vt=1,f)return f()}finally{Vt=C,ha.transition=b,Jt=m,(Jt&6)===0&&jc()}}function CC(){Pi=qf.current,$n(qf)}function Cd(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,bne(b)),fr!==null)for(b=fr.return;b!==null;){var C=b;switch(j2(C),C.tag){case 1:C=C.type.childContextTypes,C!=null&&T0();break;case 3:Wf(),$n(ii),$n(Ss),q2();break;case 5:G2(C);break;case 4:Wf();break;case 13:$n(Hn);break;case 19:$n(Hn);break;case 10:V2(C.type._context);break;case 22:case 23:CC()}b=b.return}if(Hr=f,fr=f=zc(f.current,null),hs=Pi=m,_r=0,Eg=null,xC=Q0=Sd=0,li=Tg=null,bd!==null){for(m=0;m<bd.length;m++)if(b=bd[m],C=b.interleaved,C!==null){b.interleaved=null;var P=C.next,M=b.pending;if(M!==null){var B=M.next;M.next=P,C.next=B}b.pending=C}bd=null}return f}function k4(f,m){do{var b=fr;try{if(L2(),V0.current=W0,B0){for(var C=qn.memoizedState;C!==null;){var P=C.queue;P!==null&&(P.pending=null),C=C.next}B0=!1}if(kd=0,Gr=Tr=qn=null,wg=!1,kg=0,yC.current=null,b===null||b.return===null){_r=1,Eg=m,fr=null;break}e:{var M=f,B=b.return,J=b,te=m;if(m=hs,J.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var be=te,$e=J,je=$e.tag;if(($e.mode&1)===0&&(je===0||je===11||je===15)){var Re=$e.alternate;Re?($e.updateQueue=Re.updateQueue,$e.memoizedState=Re.memoizedState,$e.lanes=Re.lanes):($e.updateQueue=null,$e.memoizedState=null)}var Ge=qM(B);if(Ge!==null){Ge.flags&=-257,KM(Ge,B,J,M,m),Ge.mode&1&&HM(M,be,m),m=Ge,te=be;var et=m.updateQueue;if(et===null){var st=new Set;st.add(te),m.updateQueue=st}else et.add(te);break e}else{if((m&1)===0){HM(M,be,m),IC();break e}te=Error(n(426))}}else if(Fn&&J.mode&1){var ar=qM(B);if(ar!==null){(ar.flags&65536)===0&&(ar.flags|=256),KM(ar,B,J,M,m),M2(Gf(te,J));break e}}M=te=Gf(te,J),_r!==4&&(_r=2),Tg===null?Tg=[M]:Tg.push(M),M=B;do{switch(M.tag){case 3:M.flags|=65536,m&=-m,M.lanes|=m;var de=WM(M,te,m);yM(M,de);break e;case 1:J=te;var se=M.type,pe=M.stateNode;if((M.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Fc===null||!Fc.has(pe)))){M.flags|=65536,m&=-m,M.lanes|=m;var Fe=GM(M,J,m);yM(M,Fe);break e}}M=M.return}while(M!==null)}C4(b)}catch(at){m=at,fr===b&&b!==null&&(fr=b=b.return);continue}break}while(!0)}function S4(){var f=Y0.current;return Y0.current=W0,f===null?W0:f}function IC(){(_r===0||_r===3||_r===2)&&(_r=4),Hr===null||(Sd&268435455)===0&&(Q0&268435455)===0||Bc(Hr,hs)}function rb(f,m){var b=Jt;Jt|=2;var C=S4();(Hr!==f||hs!==m)&&(jl=null,Cd(f,m));do try{Gne();break}catch(P){k4(f,P)}while(!0);if(L2(),Jt=b,Y0.current=C,fr!==null)throw Error(n(261));return Hr=null,hs=0,_r}function Gne(){for(;fr!==null;)N4(fr)}function Hne(){for(;fr!==null&&!e0();)N4(fr)}function N4(f){var m=T4(f.alternate,f,Pi);f.memoizedProps=f.pendingProps,m===null?C4(f):fr=m,yC.current=null}function C4(f){var m=f;do{var b=m.alternate;if(f=m.return,(m.flags&32768)===0){if(b=Fne(b,m,Pi),b!==null){fr=b;return}}else{if(b=Lne(b,m),b!==null){b.flags&=32767,fr=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{_r=6,fr=null;return}}if(m=m.sibling,m!==null){fr=m;return}fr=m=f}while(m!==null);_r===0&&(_r=5)}function Id(f,m,b){var C=Vt,P=ha.transition;try{ha.transition=null,Vt=1,qne(f,m,b,C)}finally{ha.transition=P,Vt=C}return null}function qne(f,m,b,C){do Xf();while(Lc!==null);if((Jt&6)!==0)throw Error(n(327));b=f.finishedWork;var P=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var M=b.lanes|b.childLanes;if(yn(f,M),f===Hr&&(fr=Hr=null,hs=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Z0||(Z0=!0,_4(ia,function(){return Xf(),null})),M=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||M){M=ha.transition,ha.transition=null;var B=Vt;Vt=1;var J=Jt;Jt|=4,yC.current=null,Bne(f,b),m4(b,f),fne(I2),Tc=!!C2,I2=C2=null,f.current=b,zne(b),c2(),Jt=J,Vt=B,ha.transition=M}else f.current=b;if(Z0&&(Z0=!1,Lc=f,eb=P),M=f.pendingLanes,M===0&&(Fc=null),r0(b.stateNode),ci(f,Nn()),m!==null)for(C=f.onRecoverableError,b=0;b<m.length;b++)P=m[b],C(P.value,{componentStack:P.stack,digest:P.digest});if(J0)throw J0=!1,f=bC,bC=null,f;return(eb&1)!==0&&f.tag!==0&&Xf(),M=f.pendingLanes,(M&1)!==0?f===wC?_g++:(_g=0,wC=f):_g=0,jc(),null}function Xf(){if(Lc!==null){var f=Ic(eb),m=ha.transition,b=Vt;try{if(ha.transition=null,Vt=16>f?16:f,Lc===null)var C=!1;else{if(f=Lc,Lc=null,eb=0,(Jt&6)!==0)throw Error(n(331));var P=Jt;for(Jt|=4,Ye=f.current;Ye!==null;){var M=Ye,B=M.child;if((Ye.flags&16)!==0){var J=M.deletions;if(J!==null){for(var te=0;te<J.length;te++){var be=J[te];for(Ye=be;Ye!==null;){var $e=Ye;switch($e.tag){case 0:case 11:case 15:Ig(8,$e,M)}var je=$e.child;if(je!==null)je.return=$e,Ye=je;else for(;Ye!==null;){$e=Ye;var Re=$e.sibling,Ge=$e.return;if(u4($e),$e===be){Ye=null;break}if(Re!==null){Re.return=Ge,Ye=Re;break}Ye=Ge}}}var et=M.alternate;if(et!==null){var st=et.child;if(st!==null){et.child=null;do{var ar=st.sibling;st.sibling=null,st=ar}while(st!==null)}}Ye=M}}if((M.subtreeFlags&2064)!==0&&B!==null)B.return=M,Ye=B;else e:for(;Ye!==null;){if(M=Ye,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Ig(9,M,M.return)}var de=M.sibling;if(de!==null){de.return=M.return,Ye=de;break e}Ye=M.return}}var se=f.current;for(Ye=se;Ye!==null;){B=Ye;var pe=B.child;if((B.subtreeFlags&2064)!==0&&pe!==null)pe.return=B,Ye=pe;else e:for(B=se;Ye!==null;){if(J=Ye,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:X0(9,J)}}catch(at){Yn(J,J.return,at)}if(J===B){Ye=null;break e}var Fe=J.sibling;if(Fe!==null){Fe.return=J.return,Ye=Fe;break e}Ye=J.return}}if(Jt=P,jc(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(cd,f)}catch{}C=!0}return C}finally{Vt=b,ha.transition=m}}return!1}function I4(f,m,b){m=Gf(b,m),m=WM(f,m,1),f=Oc(f,m,1),m=Gs(),f!==null&&(Nc(f,1,m),ci(f,m))}function Yn(f,m,b){if(f.tag===3)I4(f,f,b);else for(;m!==null;){if(m.tag===3){I4(m,f,b);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Fc===null||!Fc.has(C))){f=Gf(b,f),f=GM(m,f,1),m=Oc(m,f,1),f=Gs(),m!==null&&(Nc(m,1,f),ci(m,f));break}}m=m.return}}function Kne(f,m,b){var C=f.pingCache;C!==null&&C.delete(m),m=Gs(),f.pingedLanes|=f.suspendedLanes&b,Hr===f&&(hs&b)===b&&(_r===4||_r===3&&(hs&130023424)===hs&&500>Nn()-vC?Cd(f,0):xC|=b),ci(f,m)}function E4(f,m){m===0&&((f.mode&1)===0?m=1:(m=xf,xf<<=1,(xf&130023424)===0&&(xf=4194304)));var b=Gs();f=Rl(f,m),f!==null&&(Nc(f,m,b),ci(f,b))}function Xne(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),E4(f,b)}function Yne(f,m){var b=0;switch(f.tag){case 13:var C=f.stateNode,P=f.memoizedState;P!==null&&(b=P.retryLane);break;case 19:C=f.stateNode;break;default:throw Error(n(314))}C!==null&&C.delete(m),E4(f,b)}var T4;T4=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||ii.current)oi=!0;else{if((f.lanes&b)===0&&(m.flags&128)===0)return oi=!1,Mne(f,m,b);oi=(f.flags&131072)!==0}else oi=!1,Fn&&(m.flags&1048576)!==0&&oM(m,$0,m.index);switch(m.lanes=0,m.tag){case 2:var C=m.type;q0(f,m),f=m.pendingProps;var P=Mf(m,Ss.current);Uf(m,b),P=Y2(null,m,C,f,P,b);var M=Q2();return m.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ai(C)?(M=!0,_0(m)):M=!1,m.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,U2(m),P.updater=G0,m.stateNode=P,P._reactInternals=m,rC(m,C,f,b),m=oC(null,m,C,!0,M,b)):(m.tag=0,Fn&&M&&P2(m),Ws(null,m,P,b),m=m.child),m;case 16:C=m.elementType;e:{switch(q0(f,m),f=m.pendingProps,P=C._init,C=P(C._payload),m.type=C,P=m.tag=Jne(C),f=Ya(C,f),P){case 0:m=aC(null,m,C,f,b);break e;case 1:m=e4(null,m,C,f,b);break e;case 11:m=XM(null,m,C,f,b);break e;case 14:m=YM(null,m,C,Ya(C.type,f),b);break e}throw Error(n(306,C,""))}return m;case 0:return C=m.type,P=m.pendingProps,P=m.elementType===C?P:Ya(C,P),aC(f,m,C,P,b);case 1:return C=m.type,P=m.pendingProps,P=m.elementType===C?P:Ya(C,P),e4(f,m,C,P,b);case 3:e:{if(t4(m),f===null)throw Error(n(387));C=m.pendingProps,M=m.memoizedState,P=M.element,gM(f,m),F0(m,C,null,b);var B=m.memoizedState;if(C=B.element,M.isDehydrated)if(M={element:C,isDehydrated:!1,cache:B.cache,pendingSuspenseBoundaries:B.pendingSuspenseBoundaries,transitions:B.transitions},m.updateQueue.baseState=M,m.memoizedState=M,m.flags&256){P=Gf(Error(n(423)),m),m=n4(f,m,C,b,P);break e}else if(C!==P){P=Gf(Error(n(424)),m),m=n4(f,m,C,b,P);break e}else for($i=Rc(m.stateNode.containerInfo.firstChild),Ri=m,Fn=!0,Xa=null,b=pM(m,null,C,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Vf(),C===P){m=Pl(f,m,b);break e}Ws(f,m,C,b)}m=m.child}return m;case 5:return vM(m),f===null&&O2(m),C=m.type,P=m.pendingProps,M=f!==null?f.memoizedProps:null,B=P.children,E2(C,P)?B=null:M!==null&&E2(C,M)&&(m.flags|=32),ZM(f,m),Ws(f,m,B,b),m.child;case 6:return f===null&&O2(m),null;case 13:return r4(f,m,b);case 4:return W2(m,m.stateNode.containerInfo),C=m.pendingProps,f===null?m.child=Bf(m,null,C,b):Ws(f,m,C,b),m.child;case 11:return C=m.type,P=m.pendingProps,P=m.elementType===C?P:Ya(C,P),XM(f,m,C,P,b);case 7:return Ws(f,m,m.pendingProps,b),m.child;case 8:return Ws(f,m,m.pendingProps.children,b),m.child;case 12:return Ws(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(C=m.type._context,P=m.pendingProps,M=m.memoizedProps,B=P.value,Cn(D0,C._currentValue),C._currentValue=B,M!==null)if(Ka(M.value,B)){if(M.children===P.children&&!ii.current){m=Pl(f,m,b);break e}}else for(M=m.child,M!==null&&(M.return=m);M!==null;){var J=M.dependencies;if(J!==null){B=M.child;for(var te=J.firstContext;te!==null;){if(te.context===C){if(M.tag===1){te=$l(-1,b&-b),te.tag=2;var be=M.updateQueue;if(be!==null){be=be.shared;var $e=be.pending;$e===null?te.next=te:(te.next=$e.next,$e.next=te),be.pending=te}}M.lanes|=b,te=M.alternate,te!==null&&(te.lanes|=b),B2(M.return,b,m),J.lanes|=b;break}te=te.next}}else if(M.tag===10)B=M.type===m.type?null:M.child;else if(M.tag===18){if(B=M.return,B===null)throw Error(n(341));B.lanes|=b,J=B.alternate,J!==null&&(J.lanes|=b),B2(B,b,m),B=M.sibling}else B=M.child;if(B!==null)B.return=M;else for(B=M;B!==null;){if(B===m){B=null;break}if(M=B.sibling,M!==null){M.return=B.return,B=M;break}B=B.return}M=B}Ws(f,m,P.children,b),m=m.child}return m;case 9:return P=m.type,C=m.pendingProps.children,Uf(m,b),P=ua(P),C=C(P),m.flags|=1,Ws(f,m,C,b),m.child;case 14:return C=m.type,P=Ya(C,m.pendingProps),P=Ya(C.type,P),YM(f,m,C,P,b);case 15:return QM(f,m,m.type,m.pendingProps,b);case 17:return C=m.type,P=m.pendingProps,P=m.elementType===C?P:Ya(C,P),q0(f,m),m.tag=1,ai(C)?(f=!0,_0(m)):f=!1,Uf(m,b),zM(m,C,P),rC(m,C,P,b),oC(null,m,C,!0,f,b);case 19:return i4(f,m,b);case 22:return JM(f,m,b)}throw Error(n(156,m.tag))};function _4(f,m){return gf(f,m)}function Qne(f,m,b,C){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(f,m,b,C){return new Qne(f,m,b,C)}function EC(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Jne(f){if(typeof f=="function")return EC(f)?1:0;if(f!=null){if(f=f.$$typeof,f===F)return 11;if(f===X)return 14}return 2}function zc(f,m){var b=f.alternate;return b===null?(b=fa(f.tag,m,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function sb(f,m,b,C,P,M){var B=2;if(C=f,typeof f=="function")EC(f)&&(B=1);else if(typeof f=="string")B=5;else e:switch(f){case A:return Ed(b.children,P,M,m);case T:B=8,P|=8;break;case $:return f=fa(12,b,m,P|2),f.elementType=$,f.lanes=M,f;case L:return f=fa(13,b,m,P),f.elementType=L,f.lanes=M,f;case K:return f=fa(19,b,m,P),f.elementType=K,f.lanes=M,f;case Q:return ib(b,P,M,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case D:B=10;break e;case R:B=9;break e;case F:B=11;break e;case X:B=14;break e;case q:B=16,C=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return m=fa(B,b,m,P),m.elementType=f,m.type=C,m.lanes=M,m}function Ed(f,m,b,C){return f=fa(7,f,C,m),f.lanes=b,f}function ib(f,m,b,C){return f=fa(22,f,C,m),f.elementType=Q,f.lanes=b,f.stateNode={isHidden:!1},f}function TC(f,m,b){return f=fa(6,f,null,m),f.lanes=b,f}function _C(f,m,b){return m=fa(4,f.children!==null?f.children:[],f.key,m),m.lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function Zne(f,m,b,C,P){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sc(0),this.expirationTimes=Sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sc(0),this.identifierPrefix=C,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function AC(f,m,b,C,P,M,B,J,te){return f=new Zne(f,m,b,J,te),m===1?(m=1,M===!0&&(m|=8)):m=0,M=fa(3,null,null,m),f.current=M,M.stateNode=f,M.memoizedState={element:C,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},U2(M),f}function ere(f,m,b){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:C==null?null:""+C,children:f,containerInfo:m,implementation:b}}function A4(f){if(!f)return Pc;f=f._reactInternals;e:{if(Ba(f)!==f||f.tag!==1)throw Error(n(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ai(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(f.tag===1){var b=f.type;if(ai(b))return sM(f,b,m)}return m}function R4(f,m,b,C,P,M,B,J,te){return f=AC(b,C,!0,f,P,M,B,J,te),f.context=A4(null),b=f.current,C=Gs(),P=Vc(b),M=$l(C,P),M.callback=m??null,Oc(b,M,P),f.current.lanes=P,Nc(f,P,C),ci(f,C),f}function ab(f,m,b,C){var P=m.current,M=Gs(),B=Vc(P);return b=A4(b),m.context===null?m.context=b:m.pendingContext=b,m=$l(M,B),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),f=Oc(P,m,B),f!==null&&(Za(f,P,B,M),M0(f,P,B)),B}function ob(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function $4(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function RC(f,m){$4(f,m),(f=f.alternate)&&$4(f,m)}function tre(){return null}var P4=typeof reportError=="function"?reportError:function(f){console.error(f)};function $C(f){this._internalRoot=f}lb.prototype.render=$C.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(n(409));ab(f,m,null,null)},lb.prototype.unmount=$C.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;Nd(function(){ab(null,f,null,null)}),m[El]=null}};function lb(f){this._internalRoot=f}lb.prototype.unstable_scheduleHydration=function(f){if(f){var m=l0();f={blockedOn:null,target:f,priority:m};for(var b=0;b<Po.length&&m!==0&&m<Po[b].priority;b++);Po.splice(b,0,f),b===0&&d0(f)}};function PC(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function cb(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function j4(){}function nre(f,m,b,C,P){if(P){if(typeof C=="function"){var M=C;C=function(){var be=ob(B);M.call(be)}}var B=R4(m,C,f,0,null,!1,!1,"",j4);return f._reactRootContainer=B,f[El]=B.current,fg(f.nodeType===8?f.parentNode:f),Nd(),B}for(;P=f.lastChild;)f.removeChild(P);if(typeof C=="function"){var J=C;C=function(){var be=ob(te);J.call(be)}}var te=AC(f,0,!1,null,null,!1,!1,"",j4);return f._reactRootContainer=te,f[El]=te.current,fg(f.nodeType===8?f.parentNode:f),Nd(function(){ab(m,te,b,C)}),te}function ub(f,m,b,C,P){var M=b._reactRootContainer;if(M){var B=M;if(typeof P=="function"){var J=P;P=function(){var te=ob(B);J.call(te)}}ab(m,B,f,P)}else B=nre(b,m,f,P,C);return ob(B)}a0=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=kc(m.pendingLanes);b!==0&&(Cc(m,b|1),ci(m,Nn()),(Jt&6)===0&&(Kf=Nn()+500,jc()))}break;case 13:Nd(function(){var C=Rl(f,1);if(C!==null){var P=Gs();Za(C,f,1,P)}}),RC(f,1)}},vf=function(f){if(f.tag===13){var m=Rl(f,134217728);if(m!==null){var b=Gs();Za(m,f,134217728,b)}RC(f,134217728)}},o0=function(f){if(f.tag===13){var m=Vc(f),b=Rl(f,m);if(b!==null){var C=Gs();Za(b,f,m,C)}RC(f,m)}},l0=function(){return Vt},c0=function(f,m){var b=Vt;try{return Vt=f,m()}finally{Vt=b}},uf=function(f,m,b){switch(m){case"input":if(Et(f,b),m=b.name,b.type==="radio"&&m!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var C=b[m];if(C!==f&&C.form===f.form){var P=E0(C);if(!P)throw Error(n(90));me(C),Et(C,P)}}}break;case"textarea":zr(f,b);break;case"select":m=b.value,m!=null&&Br(f,!!b.multiple,m,!1)}},sd=NC,Km=Nd;var rre={usingClientEntryPoint:!1,Events:[gg,Df,E0,Ro,qm,NC]},Ag={findFiberByHostInstance:gd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sre={bundleType:Ag.bundleType,version:Ag.version,rendererPackageName:Ag.rendererPackageName,rendererConfig:Ag.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Qm(f),f===null?null:f.stateNode},findFiberByHostInstance:Ag.findFiberByHostInstance||tre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var db=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!db.isDisabled&&db.supportsFiber)try{cd=db.inject(sre),Ei=db}catch{}}return ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rre,ui.createPortal=function(f,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PC(m))throw Error(n(200));return ere(f,m,null,b)},ui.createRoot=function(f,m){if(!PC(f))throw Error(n(299));var b=!1,C="",P=P4;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onRecoverableError!==void 0&&(P=m.onRecoverableError)),m=AC(f,1,!1,null,null,b,!1,C,P),f[El]=m.current,fg(f.nodeType===8?f.parentNode:f),new $C(m)},ui.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=Qm(m),f=f===null?null:f.stateNode,f},ui.flushSync=function(f){return Nd(f)},ui.hydrate=function(f,m,b){if(!cb(m))throw Error(n(200));return ub(null,f,m,!0,b)},ui.hydrateRoot=function(f,m,b){if(!PC(f))throw Error(n(405));var C=b!=null&&b.hydratedSources||null,P=!1,M="",B=P4;if(b!=null&&(b.unstable_strictMode===!0&&(P=!0),b.identifierPrefix!==void 0&&(M=b.identifierPrefix),b.onRecoverableError!==void 0&&(B=b.onRecoverableError)),m=R4(m,null,f,1,b??null,P,!1,M,B),f[El]=m.current,fg(f),C)for(f=0;f<C.length;f++)b=C[f],P=b._getVersion,P=P(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,P]:m.mutableSourceEagerHydrationData.push(b,P);return new lb(m)},ui.render=function(f,m,b){if(!cb(m))throw Error(n(200));return ub(null,f,m,!1,b)},ui.unmountComponentAtNode=function(f){if(!cb(f))throw Error(n(40));return f._reactRootContainer?(Nd(function(){ub(null,null,f,!1,function(){f._reactRootContainer=null,f[El]=null})}),!0):!1},ui.unstable_batchedUpdates=NC,ui.unstable_renderSubtreeIntoContainer=function(f,m,b,C){if(!cb(b))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return ub(f,m,b,!1,C)},ui.version="18.3.1-next-f1338f8080-20240426",ui}var z4;function G6(){if(z4)return OC.exports;z4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),OC.exports=hre(),OC.exports}var U4;function fre(){if(U4)return hb;U4=1;var t=G6();return hb.createRoot=t.createRoot,hb.hydrateRoot=t.hydrateRoot,hb}var pre=fre(),_=rm();const sn=Ra(_),TA=W6({__proto__:null,default:sn},[_]);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gre=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),W4=t=>{const e=gre(t);return e.charAt(0).toUpperCase()+e.slice(1)},H6=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),yre=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>_.createElement("svg",{ref:l,...xre,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:H6("lucide",s),...!i&&!yre(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>_.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(t,e)=>{const n=_.forwardRef(({className:r,...s},i)=>_.createElement(vre,{ref:i,iconNode:e,className:H6(`lucide-${mre(W4(t))}`,`lucide-${t}`,r),...s}));return n.displayName=W4(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bre=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fo=Me("activity",bre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Sw=Me("arrow-down",wre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kre=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],q6=Me("arrow-left",kre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sre=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],G4=Me("arrow-right",Sre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nre=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rw=Me("award",Nre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cre=[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]],uk=Me("battery",Cre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ire=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fp=Me("bell",Ire);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ere=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],K6=Me("book-open",Ere);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tre=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],wn=Me("bot",Tre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Nw=Me("brain",_re);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Are=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Rre=Me("building-2",Are);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $re=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sm=Me("chart-column",$re);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],my=Me("check",Pre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],dk=Me("chevron-down",jre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ore=Me("chevron-up",Dre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X6=Me("circle-alert",Mre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],En=Me("circle-check",Fre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lre=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wi=Me("clock",Lre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vre=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Bre=Me("cloud",Vre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ure=Me("coffee",zre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wre=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Gre=Me("cog",Wre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hre=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],qre=Me("cpu",Hre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],_A=Me("database",Kre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AA=Me("download",Xre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Zr=Me("droplets",Yre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qre=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],uT=Me("external-link",Qre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jre=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fb=Me("eye-off",Jre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gg=Me("eye",Zre);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],RA=Me("gauge",ese);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],nse=Me("gift",tse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Y6=Me("github",rse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],H4=Me("handshake",sse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],pp=Me("heart",ise);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ose=Me("history",ase);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],cse=Me("house",lse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const use=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],hh=Me("info",use);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dse=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Q6=Me("instagram",dse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hse=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],fse=Me("key",hse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pse=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],mse=Me("laptop",pse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gse=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],hk=Me("leaf",gse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yse=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],fk=Me("lightbulb",yse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xse=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],J6=Me("linkedin",xse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vse=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bse=Me("loader",vse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wse=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sy=Me("lock",wse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kse=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Sse=Me("log-in",kse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nse=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Cse=Me("log-out",Nse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ise=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gy=Me("mail",Ise);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ese=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$A=Me("map-pin",Ese);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tse=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Z6=Me("menu",Tse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _se=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],PA=Me("message-circle",_se);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ase=[["path",{d:"M5 12h14",key:"1ays0h"}]],q4=Me("minus",Ase);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rse=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],eU=Me("moon",Rse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $se=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],tU=Me("phone",$se);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pse=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],jse=Me("play",Pse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dse=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ose=Me("plus",Dse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mse=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fse=Me("radio",Mse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lse=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ki=Me("refresh-cw",Lse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vse=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],K4=Me("rocket",Vse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bse=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nU=Me("save",Bse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zse=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Use=Me("search",zse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wse=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],rU=Me("send",Wse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gse=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],sU=Me("server",Gse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hse=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pk=Me("settings",Hse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qse=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Kse=Me("share-2",qse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xse=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ki=Me("shield",Xse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yse=[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]],iU=Me("signal",Yse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qse=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],aU=Me("smartphone",Qse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jse=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Zse=Me("sparkles",Jse);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eie=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],LC=Me("square-pen",eie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],nie=Me("square",tie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rie=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],sie=Me("star",rie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iie=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jA=Me("sun",iie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aie=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],oie=Me("table",aie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],mk=Me("target",lie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cie=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],ix=Me("thermometer",cie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uie=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],X4=Me("timer",uie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const die=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hie=Me("trash-2",die);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fie=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],yy=Me("tree-pine",fie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pie=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],jd=Me("trending-down",pie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mie=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ro=Me("trending-up",mie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ts=Me("triangle-alert",gie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],oU=Me("twitter",yie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xie=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vie=Me("upload",xie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lU=Me("user-plus",bie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cw=Me("user",wie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xy=Me("users",kie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],DA=Me("wifi-off",Sie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nie=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],fh=Me("wifi",Nie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],fu=Me("wind",Cie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iie=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],OA=Me("wrench",Iie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zd=Me("x",Eie);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ep=Me("zap",Tie);function cU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=cU(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=cU(t))&&(r&&(r+=" "),r+=e);return r}const Y4=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Q4=Bt,MA=(t,e)=>n=>{var r;if(e?.variants==null)return Q4(t,n?.class,n?.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(c=>{const u=n?.[c],d=i?.[c];if(u===null)return null;const p=Y4(u)||Y4(d);return s[c][p]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:p,...g}=u;return Object.entries(g).every(y=>{let[x,v]=y;return Array.isArray(v)?v.includes({...i,...o}[x]):{...i,...o}[x]===v})?[...c,d,p]:c},[]);return Q4(t,a,l,n?.class,n?.className)},FA="-",_ie=t=>{const e=Rie(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const o=a.split(FA);return o[0]===""&&o.length!==1&&o.shift(),uU(o,e)||Aie(a)},getConflictingClassGroupIds:(a,o)=>{const l=n[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},uU=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?uU(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(FA);return e.validators.find(({validator:a})=>a(i))?.classGroupId},J4=/^\[(.+)\]$/,Aie=t=>{if(J4.test(t)){const e=J4.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Rie=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)dT(n[s],r,s,e);return r},dT=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Z4(e,s);i.classGroupId=n;return}if(typeof s=="function"){if($ie(s)){dT(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{dT(a,Z4(e,i),n,r)})})},Z4=(t,e)=>{let n=t;return e.split(FA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$ie=t=>t.isThemeGetter,Pie=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},hT="!",fT=":",jie=fT.length,Die=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let a=0,o=0,l=0,c;for(let y=0;y<s.length;y++){let x=s[y];if(a===0&&o===0){if(x===fT){i.push(s.slice(l,y)),l=y+jie;continue}if(x==="/"){c=y;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const u=i.length===0?s:s.substring(l),d=Oie(u),p=d!==u,g=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:g}};if(e){const s=e+fT,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},Oie=t=>t.endsWith(hT)?t.substring(0,t.length-1):t.startsWith(hT)?t.substring(1):t,Mie=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},Fie=t=>({cache:Pie(t.cacheSize),parseClassName:Die(t),sortModifiers:Mie(t),..._ie(t)}),Lie=/\s+/,Vie=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],o=t.trim().split(Lie);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:d,modifiers:p,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:x}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let v=!!x,w=r(v?y.substring(0,x):y);if(!w){if(!v){l=u+(l.length>0?" "+l:l);continue}if(w=r(y),!w){l=u+(l.length>0?" "+l:l);continue}v=!1}const k=i(p).join(":"),S=g?k+hT:k,I=S+w;if(a.includes(I))continue;a.push(I);const E=s(w,v);for(let j=0;j<E.length;++j){const A=E[j];a.push(S+A)}l=u+(l.length>0?" "+l:l)}return l};function Bie(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=dU(e))&&(r&&(r+=" "),r+=n);return r}const dU=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=dU(t[r]))&&(n&&(n+=" "),n+=e);return n};function zie(t,...e){let n,r,s,i=a;function a(l){const c=e.reduce((u,d)=>d(u),t());return n=Fie(c),r=n.cache.get,s=n.cache.set,i=o,o(l)}function o(l){const c=r(l);if(c)return c;const u=Vie(l,n);return s(l,u),u}return function(){return i(Bie.apply(null,arguments))}}const Ar=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},hU=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fU=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Uie=/^\d+\/\d+$/,Wie=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Gie=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Hie=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,qie=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kie=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Yf=t=>Uie.test(t),$t=t=>!!t&&!Number.isNaN(Number(t)),Wc=t=>!!t&&Number.isInteger(Number(t)),VC=t=>t.endsWith("%")&&$t(t.slice(0,-1)),Dl=t=>Wie.test(t),Xie=()=>!0,Yie=t=>Gie.test(t)&&!Hie.test(t),pU=()=>!1,Qie=t=>qie.test(t),Jie=t=>Kie.test(t),Zie=t=>!tt(t)&&!nt(t),eae=t=>im(t,yU,pU),tt=t=>hU.test(t),Td=t=>im(t,xU,Yie),BC=t=>im(t,iae,$t),e3=t=>im(t,mU,pU),tae=t=>im(t,gU,Jie),pb=t=>im(t,vU,Qie),nt=t=>fU.test(t),$g=t=>am(t,xU),nae=t=>am(t,aae),t3=t=>am(t,mU),rae=t=>am(t,yU),sae=t=>am(t,gU),mb=t=>am(t,vU,!0),im=(t,e,n)=>{const r=hU.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},am=(t,e,n=!1)=>{const r=fU.exec(t);return r?r[1]?e(r[1]):n:!1},mU=t=>t==="position"||t==="percentage",gU=t=>t==="image"||t==="url",yU=t=>t==="length"||t==="size"||t==="bg-size",xU=t=>t==="length",iae=t=>t==="number",aae=t=>t==="family-name",vU=t=>t==="shadow",oae=()=>{const t=Ar("color"),e=Ar("font"),n=Ar("text"),r=Ar("font-weight"),s=Ar("tracking"),i=Ar("leading"),a=Ar("breakpoint"),o=Ar("container"),l=Ar("spacing"),c=Ar("radius"),u=Ar("shadow"),d=Ar("inset-shadow"),p=Ar("text-shadow"),g=Ar("drop-shadow"),y=Ar("blur"),x=Ar("perspective"),v=Ar("aspect"),w=Ar("ease"),k=Ar("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...I(),nt,tt],j=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto","contain","none"],T=()=>[nt,tt,l],$=()=>[Yf,"full","auto",...T()],D=()=>[Wc,"none","subgrid",nt,tt],R=()=>["auto",{span:["full",Wc,nt,tt]},Wc,nt,tt],F=()=>[Wc,"auto",nt,tt],L=()=>["auto","min","max","fr",nt,tt],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],X=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...T()],Q=()=>[Yf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],z=()=>[t,nt,tt],H=()=>[...I(),t3,e3,{position:[nt,tt]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",rae,eae,{size:[nt,tt]}],Y=()=>[VC,$g,Td],ae=()=>["","none","full",c,nt,tt],ye=()=>["",$t,$g,Td],xe=()=>["solid","dashed","dotted","double"],Ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],fe=()=>[$t,VC,t3,e3],Te=()=>["","none",y,nt,tt],ue=()=>["none",$t,nt,tt],Ne=()=>["none",$t,nt,tt],Ee=()=>[$t,nt,tt],me=()=>[Yf,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Dl],breakpoint:[Dl],color:[Xie],container:[Dl],"drop-shadow":[Dl],ease:["in","out","in-out"],font:[Zie],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Dl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Dl],shadow:[Dl],spacing:["px",$t],text:[Dl],"text-shadow":[Dl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Yf,tt,nt,v]}],container:["container"],columns:[{columns:[$t,tt,nt,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[Wc,"auto",nt,tt]}],basis:[{basis:[Yf,"full","auto",o,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$t,Yf,"auto","initial","none",tt]}],grow:[{grow:["",$t,nt,tt]}],shrink:[{shrink:["",$t,nt,tt]}],order:[{order:[Wc,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...X(),"normal"]}],"justify-self":[{"justify-self":["auto",...X()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...X(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...X(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...X(),"baseline"]}],"place-self":[{"place-self":["auto",...X()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[o,"screen",...Q()]}],"min-w":[{"min-w":[o,"screen","none",...Q()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",n,$g,Td]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,nt,BC]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",VC,tt]}],"font-family":[{font:[nae,tt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,nt,tt]}],"line-clamp":[{"line-clamp":[$t,"none",nt,BC]}],leading:[{leading:[i,...T()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...xe(),"wavy"]}],"text-decoration-thickness":[{decoration:[$t,"from-font","auto",nt,Td]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[$t,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Wc,nt,tt],radial:["",nt,tt],conic:[Wc,nt,tt]},sae,tae]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:ye()}],"border-w-x":[{"border-x":ye()}],"border-w-y":[{"border-y":ye()}],"border-w-s":[{"border-s":ye()}],"border-w-e":[{"border-e":ye()}],"border-w-t":[{"border-t":ye()}],"border-w-r":[{"border-r":ye()}],"border-w-b":[{"border-b":ye()}],"border-w-l":[{"border-l":ye()}],"divide-x":[{"divide-x":ye()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ye()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...xe(),"hidden","none"]}],"divide-style":[{divide:[...xe(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...xe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$t,nt,tt]}],"outline-w":[{outline:["",$t,$g,Td]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,mb,pb]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",d,mb,pb]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[$t,Td]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ye()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",p,mb,pb]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[$t,nt,tt]}],"mix-blend":[{"mix-blend":[...Ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$t]}],"mask-image-linear-from-pos":[{"mask-linear-from":fe()}],"mask-image-linear-to-pos":[{"mask-linear-to":fe()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":fe()}],"mask-image-t-to-pos":[{"mask-t-to":fe()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":fe()}],"mask-image-r-to-pos":[{"mask-r-to":fe()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":fe()}],"mask-image-b-to-pos":[{"mask-b-to":fe()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":fe()}],"mask-image-l-to-pos":[{"mask-l-to":fe()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":fe()}],"mask-image-x-to-pos":[{"mask-x-to":fe()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":fe()}],"mask-image-y-to-pos":[{"mask-y-to":fe()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":fe()}],"mask-image-radial-to-pos":[{"mask-radial-to":fe()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[$t]}],"mask-image-conic-from-pos":[{"mask-conic-from":fe()}],"mask-image-conic-to-pos":[{"mask-conic-to":fe()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:Te()}],brightness:[{brightness:[$t,nt,tt]}],contrast:[{contrast:[$t,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",g,mb,pb]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",$t,nt,tt]}],"hue-rotate":[{"hue-rotate":[$t,nt,tt]}],invert:[{invert:["",$t,nt,tt]}],saturate:[{saturate:[$t,nt,tt]}],sepia:[{sepia:["",$t,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":Te()}],"backdrop-brightness":[{"backdrop-brightness":[$t,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[$t,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$t,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$t,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",$t,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[$t,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[$t,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",$t,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$t,"initial",nt,tt]}],ease:[{ease:["linear","initial",w,nt,tt]}],delay:[{delay:[$t,nt,tt]}],animate:[{animate:["none",k,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,nt,tt]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:ue()}],"rotate-x":[{"rotate-x":ue()}],"rotate-y":[{"rotate-y":ue()}],"rotate-z":[{"rotate-z":ue()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:Ee()}],"skew-x":[{"skew-x":Ee()}],"skew-y":[{"skew-y":Ee()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[$t,$g,Td,BC]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},bU=zie(oae);function It(...t){return bU(Bt(t))}typeof Bt>"u"&&(globalThis.clsx=(...t)=>t.flat().filter(e=>typeof e=="string").join(" ").trim());typeof bU>"u"&&(globalThis.twMerge=t=>t);const n3=MA("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Le=_.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>r?h.jsx("button",{className:It(n3({variant:e,size:n,className:t})),ref:i,...s}):h.jsx("button",{className:It(n3({variant:e,size:n,className:t})),ref:i,...s}));Le.displayName="Button";function wU(){const[t,e]=_.useState("light");return _.useEffect(()=>{const r=localStorage.getItem("theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches,i=r||(s?"dark":"light");e(i),i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),{theme:t,toggleTheme:()=>{const r=t==="light"?"dark":"light";e(r),localStorage.setItem("theme",r),r==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}}const lae=[{id:"home",icon:cse,label:"Home"},{id:"ask-greenova",icon:PA,label:"Ask GREENOVA"},{id:"air-quality",icon:fu,label:"Air Quality"},{id:"how-it-works",icon:Gre,label:"How It Works"},{id:"education",icon:K6,label:"Edukasi"},{id:"about",icon:hh,label:"About"},{id:"support",icon:pp,label:"Support"}];function cae({children:t,currentPage:e,onPageChange:n,onLogin:r}){const[s,i]=_.useState(!1),{theme:a,toggleTheme:o}=wU();return h.jsxs("div",{className:"flex h-screen bg-background",children:[h.jsx(Le,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden",onClick:()=>i(!s),children:s?h.jsx(Zd,{className:"h-6 w-6"}):h.jsx(Z6,{className:"h-6 w-6"})}),h.jsx("div",{className:`
        fixed inset-y-0 left-0 z-40 w-64 bg-card border-r border-border transform transition-transform duration-300 ease-in-out
        md:relative md:translate-x-0
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-border",children:[h.jsx("div",{className:"p-2 bg-primary rounded-lg",children:h.jsx(wn,{className:"h-6 w-6 text-primary-foreground"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-semibold text-primary",children:"GREENOVA"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Robot Monitoring"})]})]}),h.jsx("nav",{className:"flex-1 p-4",children:h.jsx("ul",{className:"space-y-2",children:lae.map(l=>{const c=e===l.id;return h.jsx("li",{children:h.jsxs(Le,{variant:c?"default":"ghost",className:`w-full justify-start gap-3 ${c?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>{n(l.id),i(!1)},children:[h.jsx(l.icon,{className:"h-4 w-4"}),l.label]})},l.id)})})}),h.jsxs("div",{className:"p-4 border-t border-border space-y-3",children:[h.jsxs(Le,{onClick:r,className:"w-full",variant:"outline",children:[h.jsx(Sse,{className:"h-4 w-4 mr-2"}),"Login Admin"]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Tema"}),h.jsx(Le,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8",children:a==="dark"?h.jsx(eU,{className:"h-4 w-4"}):h.jsx(jA,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx("div",{className:"w-2 h-2 bg-success rounded-full animate-pulse"}),h.jsx("span",{className:"text-muted-foreground",children:"Robot Aktif"})]})]})]})}),s&&h.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 md:hidden",onClick:()=>i(!1)}),h.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:h.jsx("main",{className:"flex-1 overflow-auto p-6 md:p-8",children:t})})]})}function De({className:t,...e}){return h.jsx("div",{"data-slot":"card",className:It("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function dt({className:t,...e}){return h.jsx("div",{"data-slot":"card-header",className:It("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...e})}function ht({className:t,...e}){return h.jsx("h4",{"data-slot":"card-title",className:It("leading-none",t),...e})}function Oe({className:t,...e}){return h.jsx("div",{"data-slot":"card-content",className:It("px-6 [&:last-child]:pb-6",t),...e})}function Pt({className:t,type:e,...n}){return h.jsx("input",{type:e,"data-slot":"input",className:It("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var Vh=G6();const uae=Ra(Vh);function r3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function kU(...t){return e=>{let n=!1;const r=t.map(s=>{const i=r3(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():r3(t[s],null)}}}}function Wt(...t){return _.useCallback(kU(...t),t)}function vy(t){const e=hae(t),n=_.forwardRef((r,s)=>{const{children:i,...a}=r,o=_.Children.toArray(i),l=o.find(pae);if(l){const c=l.props.children,u=o.map(d=>d===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...a,ref:s,children:_.isValidElement(c)?_.cloneElement(c,void 0,u):null})}return h.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var dae=vy("Slot");function hae(t){const e=_.forwardRef((n,r)=>{const{children:s,...i}=n;if(_.isValidElement(s)){const a=gae(s),o=mae(i,s.props);return s.type!==_.Fragment&&(o.ref=r?kU(r,a):a),_.cloneElement(s,o)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fae=Symbol("radix.slottable");function pae(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fae}function mae(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...o)=>{const l=i(...o);return s(...o),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function gae(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bt=yae.reduce((t,e)=>{const n=vy(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function xae(t,e){t&&Vh.flushSync(()=>t.dispatchEvent(e))}var vae="Label",SU=_.forwardRef((t,e)=>h.jsx(bt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));SU.displayName=vae;var bae=SU;function Ke({className:t,...e}){return h.jsx(bae,{"data-slot":"label",className:It("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}const wae=MA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function Iw({className:t,variant:e,...n}){return h.jsx("div",{"data-slot":"alert",role:"alert",className:It(wae({variant:e}),t),...n})}function Ew({className:t,...e}){return h.jsx("div",{"data-slot":"alert-description",className:It("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function kae({onLogin:t,onBack:e,onNavigate:n}){const[r,s]=_.useState({username:"",email:"",password:""}),[i,a]=_.useState(""),[o,l]=_.useState(""),[c,u]=_.useState(""),[d,p]=_.useState(!1),g=()=>{const v=["arithmetic","word_problem","algebra","sequence"],w=v[Math.floor(Math.random()*v.length)];let k="",S="";switch(w){case"arithmetic":{const I=["+","-","*"],E=I[Math.floor(Math.random()*I.length)],j=I[Math.floor(Math.random()*I.length)],A=Math.floor(Math.random()*15)+5,T=Math.floor(Math.random()*8)+3,$=Math.floor(Math.random()*6)+2;let D,R;E==="+"?D=A+T:E==="-"?D=A-T:D=A*T,j==="+"?R=D+$:j==="-"?R=D-$:R=D*$,k=`${A} ${E} ${T} ${j} ${$}`,S=R.toString();break}case"word_problem":{const I=[{q:"Jika sebuah taman memiliki 24 tanaman dan robot menyiram 1/3 dari tanaman tersebut, berapa tanaman yang disiram?",a:"8"},{q:"Sebuah robot bergerak 45 meter ke utara, lalu 30 meter ke timur. Berapa total jarak yang ditempuh?",a:"75"},{q:"Jika sensor membaca 85 g/m PM2.5 pada pagi hari dan 72 g/m pada sore hari, berapa selisihnya?",a:"13"},{q:"Tiga robot bekerja selama 4 jam. Jika setiap robot menggunakan 15% baterai per jam, berapa total persen baterai yang digunakan?",a:"180"}],E=I[Math.floor(Math.random()*I.length)];k=E.q,S=E.a;break}case"algebra":{const I=Math.floor(Math.random()*10)+3,E=Math.floor(Math.random()*15)+5,j=["+","-"],A=j[Math.floor(Math.random()*j.length)],T=I+E,$=A==="+"?T-E:T+E;k=`Jika x ${A} ${E} = ${T}, maka x = ?`,S=$.toString();break}case"sequence":{const I=[{type:"arithmetic",start:Math.floor(Math.random()*10)+2,diff:Math.floor(Math.random()*5)+2},{type:"geometric",start:Math.floor(Math.random()*3)+2,ratio:2},{type:"fibonacci_like",a:Math.floor(Math.random()*5)+1,b:Math.floor(Math.random()*5)+3}],E=I[Math.floor(Math.random()*I.length)];if(E.type==="arithmetic"&&typeof E.start=="number"&&typeof E.diff=="number"){const j=[E.start,E.start+E.diff,E.start+E.diff*2,E.start+E.diff*3],A=E.start+E.diff*4;k=`Lanjutkan deret: ${j.join(", ")}, ?`,S=A.toString()}else if(E.type==="geometric"&&typeof E.start=="number"&&typeof E.ratio=="number"){const j=[E.start,E.start*E.ratio,E.start*E.ratio**2,E.start*E.ratio**3],A=E.start*E.ratio**4;k=`Lanjutkan deret: ${j.join(", ")}, ?`,S=A.toString()}else if(E.type==="fibonacci_like"&&typeof E.a=="number"&&typeof E.b=="number"){const j=[E.a,E.b];for(let T=2;T<5;T++){const $=j[T-1],D=j[T-2];$!==void 0&&D!==void 0&&j.push($+D)}k=`Lanjutkan deret: ${j.slice(0,4).join(", ")}, ?`;const A=j[4];S=A!==void 0?A.toString():"0"}break}}a(k),l(S)};_.useState(()=>{g()});const y=(v,w)=>{s(k=>({...k,[v]:w})),c&&u("")},x=async v=>{if(v.preventDefault(),p(!0),u(""),!r.username||!r.email||!r.password){u("Semua field harus diisi"),p(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){u("Format email tidak valid"),p(!1);return}if(i!==o){u("Captcha tidak benar, silakan coba lagi"),g(),a(""),p(!1);return}await new Promise(k=>setTimeout(k,1500)),r.username&&r.email&&r.password?t({username:r.username,email:r.email}):(u("Akun tidak ditemukan. Silakan daftar terlebih dahulu melalui Support page."),g(),a("")),p(!1)};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-secondary/5 p-4",children:h.jsxs("div",{className:"w-full max-w-md space-y-6",children:[h.jsxs(Le,{variant:"ghost",onClick:e,className:"mb-4",children:[h.jsx(q6,{className:"h-4 w-4 mr-2"}),"Kembali ke Home"]}),h.jsxs(De,{className:"shadow-xl border-2",children:[h.jsxs(dt,{className:"text-center space-y-4",children:[h.jsx("div",{className:"flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:h.jsx(wn,{className:"h-8 w-8 text-white"})})}),h.jsxs("div",{children:[h.jsx(ht,{className:"text-2xl",children:"Admin Login"}),h.jsx("p",{className:"text-muted-foreground mt-2",children:"Masuk ke dashboard GREENOVA AI"})]})]}),h.jsxs(Oe,{className:"space-y-6",children:[c&&h.jsxs(Iw,{variant:"destructive",children:[h.jsx(X6,{className:"h-4 w-4"}),h.jsx(Ew,{children:c})]}),h.jsxs("form",{onSubmit:x,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"username",children:"Username"}),h.jsxs("div",{className:"relative",children:[h.jsx(Cw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"username",type:"text",placeholder:"Masukkan username",value:r.username,onChange:v=>y("username",v.target.value),className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(gy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"email",type:"email",placeholder:"Masukkan email",value:r.email,onChange:v=>y("email",v.target.value),className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"password",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"password",type:"password",placeholder:"Masukkan password",value:r.password,onChange:v=>y("password",v.target.value),className:"pl-10",required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"captcha",children:"Security Challenge"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"flex-1 bg-muted px-4 py-3 rounded-md border min-h-16 flex items-center",children:h.jsx("span",{className:"text-sm leading-relaxed",children:i})}),h.jsx(Le,{type:"button",variant:"outline",size:"icon",onClick:g,title:"Generate soal baru",children:h.jsx(ki,{className:"h-4 w-4"})})]}),h.jsx(Pt,{id:"captcha",type:"text",placeholder:"Masukkan jawaban",value:i,onChange:v=>a(v.target.value),required:!0}),h.jsx("p",{className:"text-xs text-muted-foreground",children:" Tip: Hapus soal, tulis jawabannya, tekan tombol 'Verifikasi'"})]}),h.jsx(Le,{type:"submit",className:"w-full",disabled:d,children:d?h.jsxs(h.Fragment,{children:[h.jsx(ki,{className:"h-4 w-4 mr-2 animate-spin"}),"Memverifikasi..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Ki,{className:"h-4 w-4 mr-2"}),"Verifikasi"]})})]}),h.jsxs("div",{className:"pt-4 border-t border-border space-y-3",children:[h.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Belum punya akun admin?"}),h.jsxs(Le,{variant:"outline",className:"w-full",onClick:()=>n("support"),children:[h.jsx(PA,{className:"h-4 w-4 mr-2"}),"Kontak kami untuk membuat akun admin"]})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-xs text-muted-foreground",children:" Koneksi aman dengan enkripsi end-to-end"})})]})})}const NU=_.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:It("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));NU.displayName="Avatar";const Sae=_.forwardRef(({className:t,...e},n)=>h.jsx("img",{ref:n,className:It("aspect-square h-full w-full",t),...e}));Sae.displayName="AvatarImage";const CU=_.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:It("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));CU.displayName="AvatarFallback";const Nae=MA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ft({className:t,variant:e,asChild:n=!1,...r}){const s=n?dae:"span";return h.jsx(s,{"data-slot":"badge",className:It(Nae({variant:e}),t),...r})}function St(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t?.(s),n===!1||!s.defaultPrevented)return e?.(s)}}function Co(t,e=[]){let n=[];function r(i,a){const o=_.createContext(a),l=n.length;n=[...n,a];const c=d=>{const{scope:p,children:g,...y}=d,x=p?.[t]?.[l]||o,v=_.useMemo(()=>y,Object.values(y));return h.jsx(x.Provider,{value:v,children:g})};c.displayName=i+"Provider";function u(d,p){const g=p?.[t]?.[l]||o,y=_.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const s=()=>{const i=n.map(a=>_.createContext(a));return function(o){const l=o?.[t]||i;return _.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return s.scopeName=t,[r,Cae(s,...e)]}function Cae(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...o,...d}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function gk(t){const e=t+"CollectionProvider",[n,r]=Co(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:v,children:w}=x,k=sn.useRef(null),S=sn.useRef(new Map).current;return h.jsx(s,{scope:v,itemMap:S,collectionRef:k,children:w})};a.displayName=e;const o=t+"CollectionSlot",l=vy(o),c=sn.forwardRef((x,v)=>{const{scope:w,children:k}=x,S=i(o,w),I=Wt(v,S.collectionRef);return h.jsx(l,{ref:I,children:k})});c.displayName=o;const u=t+"CollectionItemSlot",d="data-radix-collection-item",p=vy(u),g=sn.forwardRef((x,v)=>{const{scope:w,children:k,...S}=x,I=sn.useRef(null),E=Wt(v,I),j=i(u,w);return sn.useEffect(()=>(j.itemMap.set(I,{ref:I,...S}),()=>void j.itemMap.delete(I))),h.jsx(p,{[d]:"",ref:E,children:k})});g.displayName=u;function y(x){const v=i(t+"CollectionConsumer",x);return sn.useCallback(()=>{const k=v.collectionRef.current;if(!k)return[];const S=Array.from(k.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((j,A)=>S.indexOf(j.ref.current)-S.indexOf(A.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:g},y,r]}var rs=globalThis?.document?_.useLayoutEffect:()=>{},Iae=TA[" useId ".trim().toString()]||(()=>{}),Eae=0;function Bh(t){const[e,n]=_.useState(Iae());return rs(()=>{n(r=>r??String(Eae++))},[t]),t||(e?`radix-${e}`:"")}function Xs(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>e.current?.(...n),[])}var Tae=TA[" useInsertionEffect ".trim().toString()]||rs;function Kl({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=_ae({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:s;{const u=_.useRef(t!==void 0);_.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=_.useCallback(u=>{if(o){const d=Aae(u)?u(t):u;d!==t&&a.current?.(d)}else i(u)},[o,t,i,a]);return[l,c]}function _ae({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),s=_.useRef(n),i=_.useRef(e);return Tae(()=>{i.current=e},[e]),_.useEffect(()=>{s.current!==n&&(i.current?.(n),s.current=n)},[n,s]),[n,r,i]}function Aae(t){return typeof t=="function"}var Rae=_.createContext(void 0);function om(t){const e=_.useContext(Rae);return t||e||"ltr"}var zC="rovingFocusGroup.onEntryFocus",$ae={bubbles:!1,cancelable:!0},ax="RovingFocusGroup",[pT,IU,Pae]=gk(ax),[jae,EU]=Co(ax,[Pae]),[Dae,Oae]=jae(ax),TU=_.forwardRef((t,e)=>h.jsx(pT.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(pT.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Mae,{...t,ref:e})})}));TU.displayName=ax;var Mae=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,p=_.useRef(null),g=Wt(e,p),y=om(i),[x,v]=Kl({prop:a,defaultProp:o??null,onChange:l,caller:ax}),[w,k]=_.useState(!1),S=Xs(c),I=IU(n),E=_.useRef(!1),[j,A]=_.useState(0);return _.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(zC,S),()=>T.removeEventListener(zC,S)},[S]),h.jsx(Dae,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:x,onItemFocus:_.useCallback(T=>v(T),[v]),onItemShiftTab:_.useCallback(()=>k(!0),[]),onFocusableItemAdd:_.useCallback(()=>A(T=>T+1),[]),onFocusableItemRemove:_.useCallback(()=>A(T=>T-1),[]),children:h.jsx(bt.div,{tabIndex:w||j===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...t.style},onMouseDown:St(t.onMouseDown,()=>{E.current=!0}),onFocus:St(t.onFocus,T=>{const $=!E.current;if(T.target===T.currentTarget&&$&&!w){const D=new CustomEvent(zC,$ae);if(T.currentTarget.dispatchEvent(D),!D.defaultPrevented){const R=I().filter(q=>q.focusable),F=R.find(q=>q.active),L=R.find(q=>q.id===x),X=[F,L,...R].filter(Boolean).map(q=>q.ref.current);RU(X,u)}}E.current=!1}),onBlur:St(t.onBlur,()=>k(!1))})})}),_U="RovingFocusGroupItem",AU=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=t,l=Bh(),c=i||l,u=Oae(_U,n),d=u.currentTabStopId===c,p=IU(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:x}=u;return _.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),h.jsx(pT.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:h.jsx(bt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:St(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:St(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:St(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const w=Vae(v,u.orientation,u.dir);if(w!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let S=p().filter(I=>I.focusable).map(I=>I.ref.current);if(w==="last")S.reverse();else if(w==="prev"||w==="next"){w==="prev"&&S.reverse();const I=S.indexOf(v.currentTarget);S=u.loop?Bae(S,I+1):S.slice(I+1)}setTimeout(()=>RU(S))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:x!=null}):a})})});AU.displayName=_U;var Fae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lae(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Vae(t,e,n){const r=Lae(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Fae[r]}function RU(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Bae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zae=TU,Uae=AU;function Wae(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var zh=t=>{const{present:e,children:n}=t,r=Gae(e),s=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=Wt(r.ref,Hae(s));return typeof n=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};zh.displayName="Presence";function Gae(t){const[e,n]=_.useState(),r=_.useRef(null),s=_.useRef(t),i=_.useRef("none"),a=t?"mounted":"unmounted",[o,l]=Wae(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=gb(r.current);i.current=o==="mounted"?c:"none"},[o]),rs(()=>{const c=r.current,u=s.current;if(u!==t){const p=i.current,g=gb(c);t?l("MOUNT"):g==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),rs(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=g=>{const x=gb(r.current).includes(CSS.escape(g.animationName));if(g.target===e&&x&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=g=>{g.target===e&&(i.current=gb(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function gb(t){return t?.animationName||"none"}function Hae(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var yk="Tabs",[qae,JZe]=Co(yk,[EU]),$U=EU(),[Kae,LA]=qae(yk),PU=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=t,u=om(o),[d,p]=Kl({prop:r,onChange:s,defaultProp:i??"",caller:yk});return h.jsx(Kae,{scope:n,baseId:Bh(),value:d,onValueChange:p,orientation:a,dir:u,activationMode:l,children:h.jsx(bt.div,{dir:u,"data-orientation":a,...c,ref:e})})});PU.displayName=yk;var jU="TabsList",DU=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=LA(jU,n),a=$U(n);return h.jsx(zae,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:h.jsx(bt.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});DU.displayName=jU;var OU="TabsTrigger",MU=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=LA(OU,n),o=$U(n),l=VU(a.baseId,r),c=BU(a.baseId,r),u=r===a.value;return h.jsx(Uae,{asChild:!0,...o,focusable:!s,active:u,children:h.jsx(bt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:St(t.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:St(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:St(t.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!s&&d&&a.onValueChange(r)})})})});MU.displayName=OU;var FU="TabsContent",LU=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,o=LA(FU,n),l=VU(o.baseId,r),c=BU(o.baseId,r),u=r===o.value,d=_.useRef(u);return _.useEffect(()=>{const p=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(p)},[]),h.jsx(zh,{present:s||u,children:({present:p})=>h.jsx(bt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:p&&i})})});LU.displayName=FU;function VU(t,e){return`${t}-trigger-${e}`}function BU(t,e){return`${t}-content-${e}`}var Xae=PU,Yae=DU,Qae=MU,Jae=LU;function Uh({className:t,...e}){return h.jsx(Xae,{"data-slot":"tabs",className:It("flex flex-col gap-2",t),...e})}function Wh({className:t,...e}){return h.jsx(Yae,{"data-slot":"tabs-list",className:It("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function Ln({className:t,...e}){return h.jsx(Qae,{"data-slot":"tabs-trigger",className:It("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function Vn({className:t,...e}){return h.jsx(Jae,{"data-slot":"tabs-content",className:It("flex-1 outline-none",t),...e})}function Zae({isOpen:t,onClose:e,userInfo:n,onUserUpdate:r}){const[s,i]=_.useState("profile"),[a,o]=_.useState({current:!1,new:!1,confirm:!1}),[l,c]=_.useState({username:n.username,email:n.email,currentPassword:""}),[u,d]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[p,g]=_.useState([]),[y,x]=_.useState(""),[v,w]=_.useState(!1),k=T=>T.includes("admin")?"Super Admin":T.includes("manager")?"Manager":"Operator",S=()=>{const T=[];return l.username.trim()||T.push("Username tidak boleh kosong"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||T.push("Format email tidak valid"):T.push("Email tidak boleh kosong"),l.currentPassword||T.push("Password saat ini wajib diisi untuk verifikasi"),T},I=()=>{const T=[];return u.currentPassword||T.push("Password saat ini wajib diisi"),u.newPassword?u.newPassword.length<6&&T.push("Password baru minimal 6 karakter"):T.push("Password baru wajib diisi"),u.newPassword!==u.confirmPassword&&T.push("Konfirmasi password tidak cocok"),u.currentPassword===u.newPassword&&T.push("Password baru harus berbeda dari password saat ini"),T},E=async T=>{T.preventDefault(),w(!0),g([]),x("");const $=S();if($.length>0){g($),w(!1);return}if(await new Promise(D=>setTimeout(D,1500)),l.currentPassword!=="greenova123"&&l.currentPassword!=="manager456"&&l.currentPassword!=="operator789"){g(["Password saat ini salah"]),w(!1);return}r({username:l.username,email:l.email}),x("Profil berhasil diperbarui! Email verifikasi telah dikirim."),w(!1),c(D=>({...D,currentPassword:""}))},j=async T=>{T.preventDefault(),w(!0),g([]),x("");const $=I();if($.length>0){g($),w(!1);return}if(await new Promise(D=>setTimeout(D,2e3)),u.currentPassword!=="greenova123"&&u.currentPassword!=="manager456"&&u.currentPassword!=="operator789"){g(["Password saat ini salah"]),w(!1);return}x("Password berhasil diubah! Silakan login ulang dengan password baru."),w(!1),d({currentPassword:"",newPassword:"",confirmPassword:""})},A=T=>{o($=>({...$,[T]:!$[T]}))};return t?h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:h.jsxs(De,{className:"w-full max-w-2xl shadow-2xl",children:[h.jsx(dt,{className:"pb-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Cw,{className:"h-5 w-5"}),"User Profile"]}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account settings and preferences"})]}),h.jsx(Le,{variant:"ghost",size:"icon",onClick:e,children:h.jsx(Zd,{className:"h-4 w-4"})})]})}),h.jsxs(Oe,{children:[h.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/30 rounded-lg mb-6",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-primary text-primary-foreground flex items-center justify-center font-semibold text-xl",children:n.username.slice(0,2).toUpperCase()}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg",children:n.username}),h.jsx("p",{className:"text-muted-foreground",children:n.email}),h.jsx(Ft,{variant:"secondary",className:"mt-1",children:k(n.email)})]})]}),p.length>0&&h.jsxs(Iw,{variant:"destructive",className:"mb-4",children:[h.jsx(X6,{className:"h-4 w-4"}),h.jsx(Ew,{children:h.jsx("ul",{className:"list-disc list-inside",children:p.map((T,$)=>h.jsx("li",{children:T},$))})})]}),y&&h.jsxs(Iw,{className:"mb-4 border-green-200 bg-green-50 dark:bg-green-950/20",children:[h.jsx(my,{className:"h-4 w-4 text-green-600"}),h.jsx(Ew,{className:"text-green-700 dark:text-green-400",children:y})]}),h.jsxs(Uh,{value:s,onValueChange:i,children:[h.jsxs(Wh,{className:"grid w-full grid-cols-3",children:[h.jsx(Ln,{value:"profile",children:"Profile"}),h.jsx(Ln,{value:"security",children:"Security"}),h.jsx(Ln,{value:"preferences",children:"Preferences"})]}),h.jsx(Vn,{value:"profile",className:"space-y-4",children:h.jsxs("form",{onSubmit:E,className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"username",children:"Username"}),h.jsxs("div",{className:"relative",children:[h.jsx(Cw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"username",value:l.username,onChange:T=>c($=>({...$,username:T.target.value})),className:"pl-10",placeholder:"Enter username"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(gy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"email",type:"email",value:l.email,onChange:T=>c($=>({...$,email:T.target.value})),className:"pl-10",placeholder:"Enter email"})]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"currentPassword",children:"Current Password (untuk verifikasi)"}),h.jsxs("div",{className:"relative",children:[h.jsx(sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"currentPassword",type:a.current?"text":"password",value:l.currentPassword,onChange:T=>c($=>({...$,currentPassword:T.target.value})),className:"pl-10 pr-10",placeholder:"Enter current password"}),h.jsx(Le,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>A("current"),children:a.current?h.jsx(fb,{className:"h-3 w-3"}):h.jsx(Gg,{className:"h-3 w-3"})})]})]}),h.jsx(Le,{type:"submit",className:"w-full",disabled:v,children:v?h.jsxs(h.Fragment,{children:[h.jsx(ki,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating Profile..."]}):h.jsxs(h.Fragment,{children:[h.jsx(my,{className:"h-4 w-4 mr-2"}),"Update Profile"]})})]})}),h.jsx(Vn,{value:"security",className:"space-y-4",children:h.jsxs("form",{onSubmit:j,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"currentPass",children:"Current Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(sy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"currentPass",type:a.current?"text":"password",value:u.currentPassword,onChange:T=>d($=>({...$,currentPassword:T.target.value})),className:"pl-10 pr-10",placeholder:"Enter current password"}),h.jsx(Le,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>A("current"),children:a.current?h.jsx(fb,{className:"h-3 w-3"}):h.jsx(Gg,{className:"h-3 w-3"})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"newPass",children:"New Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(fse,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"newPass",type:a.new?"text":"password",value:u.newPassword,onChange:T=>d($=>({...$,newPassword:T.target.value})),className:"pl-10 pr-10",placeholder:"Enter new password"}),h.jsx(Le,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>A("new"),children:a.new?h.jsx(fb,{className:"h-3 w-3"}):h.jsx(Gg,{className:"h-3 w-3"})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ke,{htmlFor:"confirmPass",children:"Confirm New Password"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{id:"confirmPass",type:a.confirm?"text":"password",value:u.confirmPassword,onChange:T=>d($=>({...$,confirmPassword:T.target.value})),className:"pl-10 pr-10",placeholder:"Confirm new password"}),h.jsx(Le,{type:"button",variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6",onClick:()=>A("confirm"),children:a.confirm?h.jsx(fb,{className:"h-3 w-3"}):h.jsx(Gg,{className:"h-3 w-3"})})]})]}),h.jsx(Le,{type:"submit",className:"w-full",disabled:v,children:v?h.jsxs(h.Fragment,{children:[h.jsx(ki,{className:"h-4 w-4 mr-2 animate-spin"}),"Changing Password..."]}):h.jsxs(h.Fragment,{children:[h.jsx(sy,{className:"h-4 w-4 mr-2"}),"Change Password"]})})]})}),h.jsx(Vn,{value:"preferences",className:"space-y-4",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[h.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[h.jsx(fp,{className:"h-4 w-4"}),"Notification Preferences"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"Email notifications"}),h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"SMS alerts for critical issues"}),h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"Weekly summary reports"}),h.jsx("input",{type:"checkbox",className:"rounded"})]})]})]}),h.jsxs("div",{className:"p-4 border border-border rounded-lg",children:[h.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[h.jsx(pk,{className:"h-4 w-4"}),"Dashboard Preferences"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"Auto-refresh data every 30 seconds"}),h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"Show detailed sensor readings"}),h.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),h.jsxs("label",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm",children:"Enable sound alerts"}),h.jsx("input",{type:"checkbox",className:"rounded"})]})]})]})]})})]})]})]})}):null}function by(t,[e,n]){return Math.min(n,Math.max(e,t))}function eoe(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var VA="ScrollArea",[zU,ZZe]=Co(VA),[toe,$a]=zU(VA),UU=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[o,l]=_.useState(null),[c,u]=_.useState(null),[d,p]=_.useState(null),[g,y]=_.useState(null),[x,v]=_.useState(null),[w,k]=_.useState(0),[S,I]=_.useState(0),[E,j]=_.useState(!1),[A,T]=_.useState(!1),$=Wt(e,R=>l(R)),D=om(s);return h.jsx(toe,{scope:n,type:r,dir:D,scrollHideDelay:i,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:p,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:j,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:A,onScrollbarYEnabledChange:T,onCornerWidthChange:k,onCornerHeightChange:I,children:h.jsx(bt.div,{dir:D,...a,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});UU.displayName=VA;var WU="ScrollAreaViewport",GU=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=$a(WU,n),o=_.useRef(null),l=Wt(e,o,a.onViewportChange);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),h.jsx(bt.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:h.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});GU.displayName=WU;var gl="ScrollAreaScrollbar",HU=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(gl,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o=t.orientation==="horizontal";return _.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),s.type==="hover"?h.jsx(noe,{...r,ref:e,forceMount:n}):s.type==="scroll"?h.jsx(roe,{...r,ref:e,forceMount:n}):s.type==="auto"?h.jsx(qU,{...r,ref:e,forceMount:n}):s.type==="always"?h.jsx(BA,{...r,ref:e}):null});HU.displayName=gl;var noe=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(gl,t.__scopeScrollArea),[i,a]=_.useState(!1);return _.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),h.jsx(zh,{present:n||i,children:h.jsx(qU,{"data-state":i?"visible":"hidden",...r,ref:e})})}),roe=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=$a(gl,t.__scopeScrollArea),i=t.orientation==="horizontal",a=vk(()=>l("SCROLL_END"),100),[o,l]=eoe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,s.scrollHideDelay,l]),_.useEffect(()=>{const c=s.viewport,u=i?"scrollLeft":"scrollTop";if(c){let d=c[u];const p=()=>{const g=c[u];d!==g&&(l("SCROLL"),a()),d=g};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[s.viewport,i,l,a]),h.jsx(zh,{present:n||o!=="hidden",children:h.jsx(BA,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:St(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:St(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),qU=_.forwardRef((t,e)=>{const n=$a(gl,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=_.useState(!1),o=t.orientation==="horizontal",l=vk(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;a(o?c:u)}},10);return Tp(n.viewport,l),Tp(n.content,l),h.jsx(zh,{present:r||i,children:h.jsx(BA,{"data-state":i?"visible":"hidden",...s,ref:e})})}),BA=_.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=$a(gl,t.__scopeScrollArea),i=_.useRef(null),a=_.useRef(0),[o,l]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=JU(o.viewport,o.content),u={...r,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function d(p,g){return coe(p,a.current,o,g)}return n==="horizontal"?h.jsx(soe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=s3(p,o,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=d(p,s.dir))}}):n==="vertical"?h.jsx(ioe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=s3(p,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=d(p))}}):null}),soe=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=$a(gl,t.__scopeScrollArea),[a,o]=_.useState(),l=_.useRef(null),c=Wt(e,l,i.onScrollbarXChange);return _.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),h.jsx(XU,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":xk(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(i.viewport){const p=i.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),eW(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:_w(a.paddingLeft),paddingEnd:_w(a.paddingRight)}})}})}),ioe=_.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=$a(gl,t.__scopeScrollArea),[a,o]=_.useState(),l=_.useRef(null),c=Wt(e,l,i.onScrollbarYChange);return _.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),h.jsx(XU,{"data-orientation":"vertical",...s,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":xk(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(i.viewport){const p=i.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),eW(p,d)&&u.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:_w(a.paddingTop),paddingEnd:_w(a.paddingBottom)}})}})}),[aoe,KU]=zU(gl),XU=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...p}=t,g=$a(gl,n),[y,x]=_.useState(null),v=Wt(e,$=>x($)),w=_.useRef(null),k=_.useRef(""),S=g.viewport,I=r.content-r.viewport,E=Xs(u),j=Xs(l),A=vk(d,10);function T($){if(w.current){const D=$.clientX-w.current.left,R=$.clientY-w.current.top;c({x:D,y:R})}}return _.useEffect(()=>{const $=D=>{const R=D.target;y?.contains(R)&&E(D,I)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[S,y,I,E]),_.useEffect(j,[r,j]),Tp(y,A),Tp(g.content,A),h.jsx(aoe,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:Xs(i),onThumbPointerUp:Xs(a),onThumbPositionChange:j,onThumbPointerDown:Xs(o),children:h.jsx(bt.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:St(t.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),w.current=y.getBoundingClientRect(),k.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),T($))}),onPointerMove:St(t.onPointerMove,T),onPointerUp:St(t.onPointerUp,$=>{const D=$.target;D.hasPointerCapture($.pointerId)&&D.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=k.current,g.viewport&&(g.viewport.style.scrollBehavior=""),w.current=null})})})}),Tw="ScrollAreaThumb",YU=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=KU(Tw,t.__scopeScrollArea);return h.jsx(zh,{present:n||s.hasThumb,children:h.jsx(ooe,{ref:e,...r})})}),ooe=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=$a(Tw,n),a=KU(Tw,n),{onThumbPositionChange:o}=a,l=Wt(e,d=>a.onThumbChange(d)),c=_.useRef(void 0),u=vk(()=>{c.current&&(c.current(),c.current=void 0)},100);return _.useEffect(()=>{const d=i.viewport;if(d){const p=()=>{if(u(),!c.current){const g=uoe(d,o);c.current=g,o()}};return o(),d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[i.viewport,u,o]),h.jsx(bt.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:St(t.onPointerDownCapture,d=>{const g=d.target.getBoundingClientRect(),y=d.clientX-g.left,x=d.clientY-g.top;a.onThumbPointerDown({x:y,y:x})}),onPointerUp:St(t.onPointerUp,a.onThumbPointerUp)})});YU.displayName=Tw;var zA="ScrollAreaCorner",QU=_.forwardRef((t,e)=>{const n=$a(zA,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?h.jsx(loe,{...t,ref:e}):null});QU.displayName=zA;var loe=_.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=$a(zA,n),[i,a]=_.useState(0),[o,l]=_.useState(0),c=!!(i&&o);return Tp(s.scrollbarX,()=>{const u=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(u),l(u)}),Tp(s.scrollbarY,()=>{const u=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(u),a(u)}),c?h.jsx(bt.div,{...r,ref:e,style:{width:i,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function _w(t){return t?parseInt(t,10):0}function JU(t,e){const n=t/e;return isNaN(n)?0:n}function xk(t){const e=JU(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function coe(t,e,n,r="ltr"){const s=xk(n),i=s/2,a=e||i,o=s-a,l=n.scrollbar.paddingStart+a,c=n.scrollbar.size-n.scrollbar.paddingEnd-o,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return ZU([l,c],d)(t)}function s3(t,e,n="ltr"){const r=xk(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,o=i-r,l=n==="ltr"?[0,a]:[a*-1,0],c=by(t,l);return ZU([0,a],[0,o])(c)}function ZU(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function eW(t,e){return t>0&&t<e}var uoe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return(function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,o=n.top!==i.top;(a||o)&&e(),n=i,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function vk(t,e){const n=Xs(t),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Tp(t,e){const n=Xs(e);rs(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var doe=UU,hoe=GU,foe=QU;function tW({className:t,children:e,...n}){return h.jsxs(doe,{"data-slot":"scroll-area",className:It("relative",t),...n,children:[h.jsx(hoe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),h.jsx(poe,{}),h.jsx(foe,{})]})}function poe({className:t,orientation:e="vertical",...n}){return h.jsx(HU,{"data-slot":"scroll-area-scrollbar",orientation:e,className:It("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:h.jsx(YU,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const moe=[{id:"1",type:"warning",title:"Battery Low - GRN-001",message:"Robot GREENOVA Alpha battery level is at 15%. Charging recommended.",timestamp:new Date(Date.now()-3e5),robotId:"GRN-001",isRead:!1},{id:"2",type:"error",title:"Sensor Malfunction - GRN-002",message:"Soil moisture sensor not responding. Manual check required.",timestamp:new Date(Date.now()-9e5),robotId:"GRN-002",isRead:!1},{id:"3",type:"success",title:"Watering Completed",message:"Successfully watered 12 plants in Zone A. All plants optimal.",timestamp:new Date(Date.now()-18e5),robotId:"GRN-001",isRead:!1},{id:"4",type:"info",title:"Air Quality Alert",message:"PM2.5 levels increased to 85 g/m. Activating enhanced filtration.",timestamp:new Date(Date.now()-36e5),isRead:!0},{id:"5",type:"warning",title:"Weather Warning",message:"Heavy rain predicted in 2 hours. Robots returning to shelter.",timestamp:new Date(Date.now()-72e5),isRead:!0}];function goe({isOpen:t,onClose:e}){const[n,r]=_.useState(moe),s=p=>{switch(p){case"warning":return ts;case"error":return Zd;case"success":return En;case"info":return hh;default:return fp}},i=p=>{switch(p){case"warning":return"text-yellow-500";case"error":return"text-red-500";case"success":return"text-green-500";case"info":return"text-blue-500";default:return"text-gray-500"}},a=p=>{r(g=>g.map(y=>y.id===p?{...y,isRead:!0}:y))},o=p=>{r(g=>g.filter(y=>y.id!==p))},l=()=>{r(p=>p.map(g=>({...g,isRead:!0})))},c=()=>{r([])},u=p=>{const y=new Date().getTime()-p.getTime(),x=Math.floor(y/6e4),v=Math.floor(y/36e5),w=Math.floor(y/864e5);return x<1?"Just now":x<60?`${x}m ago`:v<24?`${v}h ago`:`${w}d ago`},d=n.filter(p=>!p.isRead).length;return t?h.jsx("div",{className:"fixed inset-0 z-50 bg-black/20 backdrop-blur-sm",children:h.jsx("div",{className:"fixed top-16 right-4 w-96 max-w-[calc(100vw-2rem)]",children:h.jsxs(De,{className:"shadow-2xl border-2",children:[h.jsxs("div",{className:"p-4 border-b border-border",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fp,{className:"h-5 w-5"}),h.jsx("h3",{className:"font-semibold",children:"Notifications"}),d>0&&h.jsx(Ft,{variant:"destructive",className:"ml-2",children:d})]}),h.jsx(Le,{variant:"ghost",size:"icon",onClick:e,children:h.jsx(Zd,{className:"h-4 w-4"})})]}),n.length>0&&h.jsxs("div",{className:"flex gap-2 mt-3",children:[h.jsxs(Le,{variant:"outline",size:"sm",onClick:l,disabled:d===0,children:[h.jsx(my,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),h.jsx(Le,{variant:"outline",size:"sm",onClick:c,children:"Clear all"})]})]}),h.jsx(tW,{className:"max-h-96",children:h.jsx(Oe,{className:"p-0",children:n.length===0?h.jsxs("div",{className:"p-8 text-center",children:[h.jsx(fp,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),h.jsx("p",{className:"text-muted-foreground",children:"No notifications"})]}):h.jsx("div",{className:"divide-y divide-border",children:n.map(p=>{const g=s(p.type),y=i(p.type);return h.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors ${p.isRead?"":"bg-muted/30"}`,children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:`mt-0.5 ${y}`,children:h.jsx(g,{className:"h-4 w-4"})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:"flex items-start justify-between gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`text-sm font-medium ${p.isRead?"text-muted-foreground":"text-foreground"}`,children:p.title}),h.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:p.message}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[h.jsx(Wi,{className:"h-3 w-3"}),u(p.timestamp)]}),p.robotId&&h.jsxs(Ft,{variant:"outline",className:"text-xs",children:[h.jsx(wn,{className:"h-2 w-2 mr-1"}),p.robotId]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[!p.isRead&&h.jsx(Le,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>a(p.id),children:h.jsx(my,{className:"h-3 w-3"})}),h.jsx(Le,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>o(p.id),children:h.jsx(Zd,{className:"h-3 w-3"})})]})]})})]})},p.id)})})})}),h.jsx("div",{className:"p-4 border-t border-border",children:h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[h.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[h.jsx(uk,{className:"h-3 w-3 text-yellow-500"}),h.jsx("span",{children:"2 Alerts"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[h.jsx(fh,{className:"h-3 w-3 text-green-500"}),h.jsx("span",{children:"All Online"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[h.jsx(wn,{className:"h-3 w-3 text-blue-500"}),h.jsx("span",{children:"3 Robots"})]})]})})]})})}):null}const yoe=()=>{};var i3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xoe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(i&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},rW={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|o>>4;let p=(o&15)<<2|c>>6,g=c&63;l||(g=64,a||(p=64)),r.push(n[u],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xoe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||o==null||c==null||d==null)throw new voe;const p=i<<2|o>>4;if(r.push(p),c!==64){const g=o<<4&240|c>>2;if(r.push(g),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class voe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const boe=function(t){const e=nW(t);return rW.encodeByteArray(e,!0)},Aw=function(t){return boe(t).replace(/\./g,"")},woe=function(t){try{return rW.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function koe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe=()=>koe().__FIREBASE_DEFAULTS__,Noe=()=>{if(typeof process>"u"||typeof i3>"u")return;const t=i3.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Coe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&woe(t[1]);return e&&JSON.parse(e)},UA=()=>{try{return yoe()||Soe()||Noe()||Coe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ioe=t=>UA()?.emulatorHosts?.[t],Eoe=t=>{const e=Ioe(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sW=()=>UA()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _oe(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aoe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Aw(JSON.stringify(n)),Aw(JSON.stringify(a)),""].join(".")}const iy={};function Roe(){const t={prod:[],emulator:[]};for(const e of Object.keys(iy))iy[e]?t.emulator.push(e):t.prod.push(e);return t}function $oe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let a3=!1;function Poe(t,e){if(typeof window>"u"||typeof document>"u"||!WA(window.location.host)||iy[t]===e||iy[t]||a3)return;iy[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=Roe().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function o(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{a3=!0,a()},p}function u(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function d(){const p=$oe(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),v=document.getElementById(x)||document.createElement("a"),w=n("preprendIcon"),k=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;o(S),u(v,x);const I=c();l(k,w),S.append(k,y,v,I),document.body.appendChild(S)}i?(y.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function joe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Doe(){const t=UA()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ooe(){return!Doe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Moe(){try{return typeof indexedDB=="object"}catch{return!1}}function Foe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe="FirebaseError";class lm extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Loe,Object.setPrototypeOf(this,lm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iW.prototype.create)}}class iW{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Voe(i,r):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new lm(s,o,r)}}function Voe(t,e){return t.replace(Boe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Boe=/\{\$([^}]+)}/g;function Rw(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(o3(i)&&o3(a)){if(!Rw(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function o3(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){return t&&t._delegate?t._delegate:t}class wy{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zoe=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Toe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Woe(e))try{this.getOrInitializeService({instanceIdentifier:Dd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Dd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dd){return this.instances.has(e)}getOptions(e=Dd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);r===o&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uoe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dd){return this.component?this.component.multipleInstances?e:Dd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uoe(t){return t===Dd?void 0:t}function Woe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Goe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zoe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Kt||(Kt={}));const Hoe={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},qoe=Kt.INFO,Koe={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},Xoe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Koe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let aW=class{constructor(e){this.name=e,this._logLevel=qoe,this._logHandler=Xoe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hoe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}};const Yoe=(t,e)=>e.some(n=>t instanceof n);let l3,c3;function Qoe(){return l3||(l3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Joe(){return c3||(c3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oW=new WeakMap,mT=new WeakMap,lW=new WeakMap,UC=new WeakMap,GA=new WeakMap;function Zoe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(nu(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&oW.set(n,t)}).catch(()=>{}),GA.set(e,t),e}function ele(t){if(mT.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});mT.set(t,e)}let gT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lW.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tle(t){gT=t(gT)}function nle(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(WC(this),e,...n);return lW.set(r,e.sort?e.sort():[e]),nu(r)}:Joe().includes(t)?function(...e){return t.apply(WC(this),e),nu(oW.get(this))}:function(...e){return nu(t.apply(WC(this),e))}}function rle(t){return typeof t=="function"?nle(t):(t instanceof IDBTransaction&&ele(t),Yoe(t,Qoe())?new Proxy(t,gT):t)}function nu(t){if(t instanceof IDBRequest)return Zoe(t);if(UC.has(t))return UC.get(t);const e=rle(t);return e!==t&&(UC.set(t,e),GA.set(e,t)),e}const WC=t=>GA.get(t);function sle(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),o=nu(a);return r&&a.addEventListener("upgradeneeded",l=>{r(nu(a.result),l.oldVersion,l.newVersion,nu(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const ile=["get","getKey","getAll","getAllKeys","count"],ale=["put","add","delete","clear"],GC=new Map;function u3(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(GC.get(e))return GC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ale.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ile.includes(n)))return;const i=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),s&&l.done]))[0]};return GC.set(e,i),i}tle(t=>({...t,get:(e,n,r)=>u3(e,n)||t.get(e,n,r),has:(e,n)=>!!u3(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lle(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lle(t){return t.getComponent()?.type==="VERSION"}const yT="@firebase/app",d3="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new aW("@firebase/app"),cle="@firebase/app-compat",ule="@firebase/analytics-compat",dle="@firebase/analytics",hle="@firebase/app-check-compat",fle="@firebase/app-check",ple="@firebase/auth",mle="@firebase/auth-compat",gle="@firebase/database",yle="@firebase/data-connect",xle="@firebase/database-compat",vle="@firebase/functions",ble="@firebase/functions-compat",wle="@firebase/installations",kle="@firebase/installations-compat",Sle="@firebase/messaging",Nle="@firebase/messaging-compat",Cle="@firebase/performance",Ile="@firebase/performance-compat",Ele="@firebase/remote-config",Tle="@firebase/remote-config-compat",_le="@firebase/storage",Ale="@firebase/storage-compat",Rle="@firebase/firestore",$le="@firebase/ai",Ple="@firebase/firestore-compat",jle="firebase",Dle="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="[DEFAULT]",Ole={[yT]:"fire-core",[cle]:"fire-core-compat",[dle]:"fire-analytics",[ule]:"fire-analytics-compat",[fle]:"fire-app-check",[hle]:"fire-app-check-compat",[ple]:"fire-auth",[mle]:"fire-auth-compat",[gle]:"fire-rtdb",[yle]:"fire-data-connect",[xle]:"fire-rtdb-compat",[vle]:"fire-fn",[ble]:"fire-fn-compat",[wle]:"fire-iid",[kle]:"fire-iid-compat",[Sle]:"fire-fcm",[Nle]:"fire-fcm-compat",[Cle]:"fire-perf",[Ile]:"fire-perf-compat",[Ele]:"fire-rc",[Tle]:"fire-rc-compat",[_le]:"fire-gcs",[Ale]:"fire-gcs-compat",[Rle]:"fire-fst",[Ple]:"fire-fst-compat",[$le]:"fire-vertex","fire-js":"fire-js",[jle]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new Map,Mle=new Map,vT=new Map;function h3(t,e){try{t.container.addComponent(e)}catch(n){Xl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pw(t){const e=t.name;if(vT.has(e))return Xl.debug(`There were multiple attempts to register component ${e}.`),!1;vT.set(e,t);for(const n of $w.values())h3(n,t);for(const n of Mle.values())h3(n,t);return!0}function Fle(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lle(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vle={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ru=new iW("app","Firebase",Vle);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ble{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ru.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle=Dle;function cW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xT,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ru.create("bad-app-name",{appName:String(s)});if(n||(n=sW()),!n)throw ru.create("no-options");const i=$w.get(s);if(i){if(Rw(n,i.options)&&Rw(r,i.config))return i;throw ru.create("duplicate-app",{appName:s})}const a=new Goe(s);for(const l of vT.values())a.addComponent(l);const o=new Ble(n,r,a);return $w.set(s,o),o}function Ule(t=xT){const e=$w.get(t);if(!e&&t===xT&&sW())return cW();if(!e)throw ru.create("no-app",{appName:t});return e}function mp(t,e,n){let r=Ole[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xl.warn(a.join(" "));return}Pw(new wy(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wle="firebase-heartbeat-database",Gle=1,ky="firebase-heartbeat-store";let HC=null;function uW(){return HC||(HC=sle(Wle,Gle,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ky)}catch(n){console.warn(n)}}}}).catch(t=>{throw ru.create("idb-open",{originalErrorMessage:t.message})})),HC}async function Hle(t){try{const n=(await uW()).transaction(ky),r=await n.objectStore(ky).get(dW(t));return await n.done,r}catch(e){if(e instanceof lm)Xl.warn(e.message);else{const n=ru.create("idb-get",{originalErrorMessage:e?.message});Xl.warn(n.message)}}}async function f3(t,e){try{const r=(await uW()).transaction(ky,"readwrite");await r.objectStore(ky).put(e,dW(t)),await r.done}catch(n){if(n instanceof lm)Xl.warn(n.message);else{const r=ru.create("idb-set",{originalErrorMessage:n?.message});Xl.warn(r.message)}}}function dW(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qle=1024,Kle=30;class Xle{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=p3();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Kle){const s=Jle(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=p3(),{heartbeatsToSend:n,unsentEntries:r}=Yle(this._heartbeatsCache.heartbeats),s=Aw(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Xl.warn(e),""}}}function p3(){return new Date().toISOString().substring(0,10)}function Yle(t,e=qle){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),m3(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),m3(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Moe()?Foe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Hle(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return f3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return f3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function m3(t){return Aw(JSON.stringify({version:2,heartbeats:t})).length}function Jle(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zle(t){Pw(new wy("platform-logger",e=>new ole(e),"PRIVATE")),Pw(new wy("heartbeat",e=>new Xle(e),"PRIVATE")),mp(yT,d3,t),mp(yT,d3,"esm2020"),mp("fire-js","")}Zle("");var ece="firebase",tce="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mp(ece,tce,"app");var g3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var su,hW;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,T){function $(){}$.prototype=T.prototype,A.D=T.prototype,A.prototype=new $,A.prototype.constructor=A,A.C=function(D,R,F){for(var L=Array(arguments.length-2),K=2;K<arguments.length;K++)L[K-2]=arguments[K];return T.prototype[R].apply(D,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,T,$){$||($=0);var D=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)D[R]=T.charCodeAt($++)|T.charCodeAt($++)<<8|T.charCodeAt($++)<<16|T.charCodeAt($++)<<24;else for(R=0;16>R;++R)D[R]=T[$++]|T[$++]<<8|T[$++]<<16|T[$++]<<24;T=A.g[0],$=A.g[1],R=A.g[2];var F=A.g[3],L=T+(F^$&(R^F))+D[0]+3614090360&4294967295;T=$+(L<<7&4294967295|L>>>25),L=F+(R^T&($^R))+D[1]+3905402710&4294967295,F=T+(L<<12&4294967295|L>>>20),L=R+($^F&(T^$))+D[2]+606105819&4294967295,R=F+(L<<17&4294967295|L>>>15),L=$+(T^R&(F^T))+D[3]+3250441966&4294967295,$=R+(L<<22&4294967295|L>>>10),L=T+(F^$&(R^F))+D[4]+4118548399&4294967295,T=$+(L<<7&4294967295|L>>>25),L=F+(R^T&($^R))+D[5]+1200080426&4294967295,F=T+(L<<12&4294967295|L>>>20),L=R+($^F&(T^$))+D[6]+2821735955&4294967295,R=F+(L<<17&4294967295|L>>>15),L=$+(T^R&(F^T))+D[7]+4249261313&4294967295,$=R+(L<<22&4294967295|L>>>10),L=T+(F^$&(R^F))+D[8]+1770035416&4294967295,T=$+(L<<7&4294967295|L>>>25),L=F+(R^T&($^R))+D[9]+2336552879&4294967295,F=T+(L<<12&4294967295|L>>>20),L=R+($^F&(T^$))+D[10]+4294925233&4294967295,R=F+(L<<17&4294967295|L>>>15),L=$+(T^R&(F^T))+D[11]+2304563134&4294967295,$=R+(L<<22&4294967295|L>>>10),L=T+(F^$&(R^F))+D[12]+1804603682&4294967295,T=$+(L<<7&4294967295|L>>>25),L=F+(R^T&($^R))+D[13]+4254626195&4294967295,F=T+(L<<12&4294967295|L>>>20),L=R+($^F&(T^$))+D[14]+2792965006&4294967295,R=F+(L<<17&4294967295|L>>>15),L=$+(T^R&(F^T))+D[15]+1236535329&4294967295,$=R+(L<<22&4294967295|L>>>10),L=T+(R^F&($^R))+D[1]+4129170786&4294967295,T=$+(L<<5&4294967295|L>>>27),L=F+($^R&(T^$))+D[6]+3225465664&4294967295,F=T+(L<<9&4294967295|L>>>23),L=R+(T^$&(F^T))+D[11]+643717713&4294967295,R=F+(L<<14&4294967295|L>>>18),L=$+(F^T&(R^F))+D[0]+3921069994&4294967295,$=R+(L<<20&4294967295|L>>>12),L=T+(R^F&($^R))+D[5]+3593408605&4294967295,T=$+(L<<5&4294967295|L>>>27),L=F+($^R&(T^$))+D[10]+38016083&4294967295,F=T+(L<<9&4294967295|L>>>23),L=R+(T^$&(F^T))+D[15]+3634488961&4294967295,R=F+(L<<14&4294967295|L>>>18),L=$+(F^T&(R^F))+D[4]+3889429448&4294967295,$=R+(L<<20&4294967295|L>>>12),L=T+(R^F&($^R))+D[9]+568446438&4294967295,T=$+(L<<5&4294967295|L>>>27),L=F+($^R&(T^$))+D[14]+3275163606&4294967295,F=T+(L<<9&4294967295|L>>>23),L=R+(T^$&(F^T))+D[3]+4107603335&4294967295,R=F+(L<<14&4294967295|L>>>18),L=$+(F^T&(R^F))+D[8]+1163531501&4294967295,$=R+(L<<20&4294967295|L>>>12),L=T+(R^F&($^R))+D[13]+2850285829&4294967295,T=$+(L<<5&4294967295|L>>>27),L=F+($^R&(T^$))+D[2]+4243563512&4294967295,F=T+(L<<9&4294967295|L>>>23),L=R+(T^$&(F^T))+D[7]+1735328473&4294967295,R=F+(L<<14&4294967295|L>>>18),L=$+(F^T&(R^F))+D[12]+2368359562&4294967295,$=R+(L<<20&4294967295|L>>>12),L=T+($^R^F)+D[5]+4294588738&4294967295,T=$+(L<<4&4294967295|L>>>28),L=F+(T^$^R)+D[8]+2272392833&4294967295,F=T+(L<<11&4294967295|L>>>21),L=R+(F^T^$)+D[11]+1839030562&4294967295,R=F+(L<<16&4294967295|L>>>16),L=$+(R^F^T)+D[14]+4259657740&4294967295,$=R+(L<<23&4294967295|L>>>9),L=T+($^R^F)+D[1]+2763975236&4294967295,T=$+(L<<4&4294967295|L>>>28),L=F+(T^$^R)+D[4]+1272893353&4294967295,F=T+(L<<11&4294967295|L>>>21),L=R+(F^T^$)+D[7]+4139469664&4294967295,R=F+(L<<16&4294967295|L>>>16),L=$+(R^F^T)+D[10]+3200236656&4294967295,$=R+(L<<23&4294967295|L>>>9),L=T+($^R^F)+D[13]+681279174&4294967295,T=$+(L<<4&4294967295|L>>>28),L=F+(T^$^R)+D[0]+3936430074&4294967295,F=T+(L<<11&4294967295|L>>>21),L=R+(F^T^$)+D[3]+3572445317&4294967295,R=F+(L<<16&4294967295|L>>>16),L=$+(R^F^T)+D[6]+76029189&4294967295,$=R+(L<<23&4294967295|L>>>9),L=T+($^R^F)+D[9]+3654602809&4294967295,T=$+(L<<4&4294967295|L>>>28),L=F+(T^$^R)+D[12]+3873151461&4294967295,F=T+(L<<11&4294967295|L>>>21),L=R+(F^T^$)+D[15]+530742520&4294967295,R=F+(L<<16&4294967295|L>>>16),L=$+(R^F^T)+D[2]+3299628645&4294967295,$=R+(L<<23&4294967295|L>>>9),L=T+(R^($|~F))+D[0]+4096336452&4294967295,T=$+(L<<6&4294967295|L>>>26),L=F+($^(T|~R))+D[7]+1126891415&4294967295,F=T+(L<<10&4294967295|L>>>22),L=R+(T^(F|~$))+D[14]+2878612391&4294967295,R=F+(L<<15&4294967295|L>>>17),L=$+(F^(R|~T))+D[5]+4237533241&4294967295,$=R+(L<<21&4294967295|L>>>11),L=T+(R^($|~F))+D[12]+1700485571&4294967295,T=$+(L<<6&4294967295|L>>>26),L=F+($^(T|~R))+D[3]+2399980690&4294967295,F=T+(L<<10&4294967295|L>>>22),L=R+(T^(F|~$))+D[10]+4293915773&4294967295,R=F+(L<<15&4294967295|L>>>17),L=$+(F^(R|~T))+D[1]+2240044497&4294967295,$=R+(L<<21&4294967295|L>>>11),L=T+(R^($|~F))+D[8]+1873313359&4294967295,T=$+(L<<6&4294967295|L>>>26),L=F+($^(T|~R))+D[15]+4264355552&4294967295,F=T+(L<<10&4294967295|L>>>22),L=R+(T^(F|~$))+D[6]+2734768916&4294967295,R=F+(L<<15&4294967295|L>>>17),L=$+(F^(R|~T))+D[13]+1309151649&4294967295,$=R+(L<<21&4294967295|L>>>11),L=T+(R^($|~F))+D[4]+4149444226&4294967295,T=$+(L<<6&4294967295|L>>>26),L=F+($^(T|~R))+D[11]+3174756917&4294967295,F=T+(L<<10&4294967295|L>>>22),L=R+(T^(F|~$))+D[2]+718787259&4294967295,R=F+(L<<15&4294967295|L>>>17),L=$+(F^(R|~T))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+T&4294967295,A.g[1]=A.g[1]+(R+(L<<21&4294967295|L>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+F&4294967295}r.prototype.u=function(A,T){T===void 0&&(T=A.length);for(var $=T-this.blockSize,D=this.B,R=this.h,F=0;F<T;){if(R==0)for(;F<=$;)s(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<T;)if(D[R++]=A.charCodeAt(F++),R==this.blockSize){s(this,D),R=0;break}}else for(;F<T;)if(D[R++]=A[F++],R==this.blockSize){s(this,D),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var T=1;T<A.length-8;++T)A[T]=0;var $=8*this.o;for(T=A.length-8;T<A.length;++T)A[T]=$&255,$/=256;for(this.u(A),A=Array(16),T=$=0;4>T;++T)for(var D=0;32>D;D+=8)A[$++]=this.g[T]>>>D&255;return A};function i(A,T){var $=o;return Object.prototype.hasOwnProperty.call($,A)?$[A]:$[A]=T(A)}function a(A,T){this.h=T;for(var $=[],D=!0,R=A.length-1;0<=R;R--){var F=A[R]|0;D&&F==T||($[R]=F,D=!1)}this.g=$}var o={};function l(A){return-128<=A&&128>A?i(A,function(T){return new a([T|0],0>T?-1:0)}):new a([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return v(c(-A));for(var T=[],$=1,D=0;A>=$;D++)T[D]=A/$|0,$*=4294967296;return new a(T,0)}function u(A,T){if(A.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A.charAt(0)=="-")return v(u(A.substring(1),T));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var $=c(Math.pow(T,8)),D=d,R=0;R<A.length;R+=8){var F=Math.min(8,A.length-R),L=parseInt(A.substring(R,R+F),T);8>F?(F=c(Math.pow(T,F)),D=D.j(F).add(c(L))):(D=D.j($),D=D.add(c(L)))}return D}var d=l(0),p=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(x(this))return-v(this).m();for(var A=0,T=1,$=0;$<this.g.length;$++){var D=this.i($);A+=(0<=D?D:4294967296+D)*T,T*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(y(this))return"0";if(x(this))return"-"+v(this).toString(A);for(var T=c(Math.pow(A,6)),$=this,D="";;){var R=I($,T).g;$=w($,R.j(T));var F=((0<$.g.length?$.g[0]:$.h)>>>0).toString(A);if($=R,y($))return F+D;for(;6>F.length;)F="0"+F;D=F+D}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function y(A){if(A.h!=0)return!1;for(var T=0;T<A.g.length;T++)if(A.g[T]!=0)return!1;return!0}function x(A){return A.h==-1}t.l=function(A){return A=w(this,A),x(A)?-1:y(A)?0:1};function v(A){for(var T=A.g.length,$=[],D=0;D<T;D++)$[D]=~A.g[D];return new a($,~A.h).add(p)}t.abs=function(){return x(this)?v(this):this},t.add=function(A){for(var T=Math.max(this.g.length,A.g.length),$=[],D=0,R=0;R<=T;R++){var F=D+(this.i(R)&65535)+(A.i(R)&65535),L=(F>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);D=L>>>16,F&=65535,L&=65535,$[R]=L<<16|F}return new a($,$[$.length-1]&-2147483648?-1:0)};function w(A,T){return A.add(v(T))}t.j=function(A){if(y(this)||y(A))return d;if(x(this))return x(A)?v(this).j(v(A)):v(v(this).j(A));if(x(A))return v(this.j(v(A)));if(0>this.l(g)&&0>A.l(g))return c(this.m()*A.m());for(var T=this.g.length+A.g.length,$=[],D=0;D<2*T;D++)$[D]=0;for(D=0;D<this.g.length;D++)for(var R=0;R<A.g.length;R++){var F=this.i(D)>>>16,L=this.i(D)&65535,K=A.i(R)>>>16,X=A.i(R)&65535;$[2*D+2*R]+=L*X,k($,2*D+2*R),$[2*D+2*R+1]+=F*X,k($,2*D+2*R+1),$[2*D+2*R+1]+=L*K,k($,2*D+2*R+1),$[2*D+2*R+2]+=F*K,k($,2*D+2*R+2)}for(D=0;D<T;D++)$[D]=$[2*D+1]<<16|$[2*D];for(D=T;D<2*T;D++)$[D]=0;return new a($,0)};function k(A,T){for(;(A[T]&65535)!=A[T];)A[T+1]+=A[T]>>>16,A[T]&=65535,T++}function S(A,T){this.g=A,this.h=T}function I(A,T){if(y(T))throw Error("division by zero");if(y(A))return new S(d,d);if(x(A))return T=I(v(A),T),new S(v(T.g),v(T.h));if(x(T))return T=I(A,v(T)),new S(v(T.g),T.h);if(30<A.g.length){if(x(A)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var $=p,D=T;0>=D.l(A);)$=E($),D=E(D);var R=j($,1),F=j(D,1);for(D=j(D,2),$=j($,2);!y(D);){var L=F.add(D);0>=L.l(A)&&(R=R.add($),F=L),D=j(D,1),$=j($,1)}return T=w(A,R.j(T)),new S(R,T)}for(R=d;0<=A.l(T);){for($=Math.max(1,Math.floor(A.m()/T.m())),D=Math.ceil(Math.log($)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),F=c($),L=F.j(T);x(L)||0<L.l(A);)$-=D,F=c($),L=F.j(T);y(F)&&(F=p),R=R.add(F),A=w(A,L)}return new S(R,A)}t.A=function(A){return I(this,A).h},t.and=function(A){for(var T=Math.max(this.g.length,A.g.length),$=[],D=0;D<T;D++)$[D]=this.i(D)&A.i(D);return new a($,this.h&A.h)},t.or=function(A){for(var T=Math.max(this.g.length,A.g.length),$=[],D=0;D<T;D++)$[D]=this.i(D)|A.i(D);return new a($,this.h|A.h)},t.xor=function(A){for(var T=Math.max(this.g.length,A.g.length),$=[],D=0;D<T;D++)$[D]=this.i(D)^A.i(D);return new a($,this.h^A.h)};function E(A){for(var T=A.g.length+1,$=[],D=0;D<T;D++)$[D]=A.i(D)<<1|A.i(D-1)>>>31;return new a($,A.h)}function j(A,T){var $=T>>5;T%=32;for(var D=A.g.length-$,R=[],F=0;F<D;F++)R[F]=0<T?A.i(F+$)>>>T|A.i(F+$+1)<<32-T:A.i(F+$);return new a(R,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hW=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,su=a}).apply(typeof g3<"u"?g3:typeof self<"u"?self:typeof window<"u"?window:{});var yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fW,Hg,pW,sw,bT,mW,gW,yW;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,O,V){return N==Array.prototype||N==Object.prototype||(N[O]=V.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof yb=="object"&&yb];for(var O=0;O<N.length;++O){var V=N[O];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function s(N,O){if(O)e:{var V=r;N=N.split(".");for(var U=0;U<N.length-1;U++){var ce=N[U];if(!(ce in V))break e;V=V[ce]}N=N[N.length-1],U=V[N],O=O(U),O!=U&&O!=null&&e(V,N,{configurable:!0,writable:!0,value:O})}}function i(N,O){N instanceof String&&(N+="");var V=0,U=!1,ce={next:function(){if(!U&&V<N.length){var ke=V++;return{value:O(ke,N[ke]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}s("Array.prototype.values",function(N){return N||function(){return i(this,function(O,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(N){var O=typeof N;return O=O!="object"?O:N?Array.isArray(N)?"array":O:"null",O=="array"||O=="object"&&typeof N.length=="number"}function c(N){var O=typeof N;return O=="object"&&N!=null||O=="function"}function u(N,O,V){return N.call.apply(N.bind,arguments)}function d(N,O,V){if(!N)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,U),N.apply(O,ce)}}return function(){return N.apply(O,arguments)}}function p(N,O,V){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function g(N,O){var V=Array.prototype.slice.call(arguments,1);return function(){var U=V.slice();return U.push.apply(U,arguments),N.apply(this,U)}}function y(N,O){function V(){}V.prototype=O.prototype,N.aa=O.prototype,N.prototype=new V,N.prototype.constructor=N,N.Qb=function(U,ce,ke){for(var Ve=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)Ve[cn-2]=arguments[cn];return O.prototype[ce].apply(U,Ve)}}function x(N){const O=N.length;if(0<O){const V=Array(O);for(let U=0;U<O;U++)V[U]=N[U];return V}return[]}function v(N,O){for(let V=1;V<arguments.length;V++){const U=arguments[V];if(l(U)){const ce=N.length||0,ke=U.length||0;N.length=ce+ke;for(let Ve=0;Ve<ke;Ve++)N[ce+Ve]=U[Ve]}else N.push(U)}}class w{constructor(O,V){this.i=O,this.j=V,this.h=0,this.g=null}get(){let O;return 0<this.h?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function k(N){return/^[\s\xa0]*$/.test(N)}function S(){var N=o.navigator;return N&&(N=N.userAgent)?N:""}function I(N){return I[" "](N),N}I[" "]=function(){};var E=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(N,O,V){for(const U in N)O.call(V,N[U],U,N)}function A(N,O){for(const V in N)O.call(void 0,N[V],V,N)}function T(N){const O={};for(const V in N)O[V]=N[V];return O}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(N,O){let V,U;for(let ce=1;ce<arguments.length;ce++){U=arguments[ce];for(V in U)N[V]=U[V];for(let ke=0;ke<$.length;ke++)V=$[ke],Object.prototype.hasOwnProperty.call(U,V)&&(N[V]=U[V])}}function R(N){var O=1;N=N.split(":");const V=[];for(;0<O&&N.length;)V.push(N.shift()),O--;return N.length&&V.push(N.join(":")),V}function F(N){o.setTimeout(()=>{throw N},0)}function L(){var N=H;let O=null;return N.g&&(O=N.g,N.g=N.g.next,N.g||(N.h=null),O.next=null),O}class K{constructor(){this.h=this.g=null}add(O,V){const U=X.get();U.set(O,V),this.h?this.h.next=U:this.g=U,this.h=U}}var X=new w(()=>new q,N=>N.reset());class q{constructor(){this.next=this.g=this.h=null}set(O,V){this.h=O,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,z=!1,H=new K,ee=()=>{const N=o.Promise.resolve(void 0);Q=()=>{N.then(G)}};var G=()=>{for(var N;N=L();){try{N.h.call(N.g)}catch(V){F(V)}var O=X;O.j(N),100>O.h&&(O.h++,N.next=O.g,O.g=N)}z=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(N,O){this.type=N,this.g=this.target=O,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ye=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var N=!1,O=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const V=()=>{};o.addEventListener("test",V,O),o.removeEventListener("test",V,O)}catch{}return N})();function xe(N,O){if(ae.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var V=this.type=N.type,U=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=O,O=N.relatedTarget){if(E){e:{try{I(O.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(O=null)}}else V=="mouseover"?O=N.fromElement:V=="mouseout"&&(O=N.toElement);this.relatedTarget=O,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:Ce[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&xe.aa.h.call(this)}}y(xe,ae);var Ce={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),Te=0;function ue(N,O,V,U,ce){this.listener=N,this.proxy=null,this.src=O,this.type=V,this.capture=!!U,this.ha=ce,this.key=++Te,this.da=this.fa=!1}function Ne(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function Ee(N){this.src=N,this.g={},this.h=0}Ee.prototype.add=function(N,O,V,U,ce){var ke=N.toString();N=this.g[ke],N||(N=this.g[ke]=[],this.h++);var Ve=Ze(N,O,U,ce);return-1<Ve?(O=N[Ve],V||(O.fa=!1)):(O=new ue(O,this.src,ke,!!U,ce),O.fa=V,N.push(O)),O};function me(N,O){var V=O.type;if(V in N.g){var U=N.g[V],ce=Array.prototype.indexOf.call(U,O,void 0),ke;(ke=0<=ce)&&Array.prototype.splice.call(U,ce,1),ke&&(Ne(O),N.g[V].length==0&&(delete N.g[V],N.h--))}}function Ze(N,O,V,U){for(var ce=0;ce<N.length;++ce){var ke=N[ce];if(!ke.da&&ke.listener==O&&ke.capture==!!V&&ke.ha==U)return ce}return-1}var Xe="closure_lm_"+(1e6*Math.random()|0),pt={};function ft(N,O,V,U,ce){if(Array.isArray(O)){for(var ke=0;ke<O.length;ke++)ft(N,O[ke],V,U,ce);return null}return V=Bs(V),N&&N[fe]?N.K(O,V,c(U)?!!U.capture:!1,ce):Et(N,O,V,!1,U,ce)}function Et(N,O,V,U,ce,ke){if(!O)throw Error("Invalid event type");var Ve=c(ce)?!!ce.capture:!!ce,cn=ni(N);if(cn||(N[Xe]=cn=new Ee(N)),V=cn.add(O,V,U,Ve,ke),V.proxy)return V;if(U=Qt(),V.proxy=U,U.src=N,U.listener=V,N.addEventListener)ye||(ce=Ve),ce===void 0&&(ce=!1),N.addEventListener(O.toString(),U,ce);else if(N.attachEvent)N.attachEvent(Br(O.toString()),U);else if(N.addListener&&N.removeListener)N.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Qt(){function N(V){return O.call(N.src,N.listener,V)}const O=Ir;return N}function ks(N,O,V,U,ce){if(Array.isArray(O))for(var ke=0;ke<O.length;ke++)ks(N,O[ke],V,U,ce);else U=c(U)?!!U.capture:!!U,V=Bs(V),N&&N[fe]?(N=N.i,O=String(O).toString(),O in N.g&&(ke=N.g[O],V=Ze(ke,V,U,ce),-1<V&&(Ne(ke[V]),Array.prototype.splice.call(ke,V,1),ke.length==0&&(delete N.g[O],N.h--)))):N&&(N=ni(N))&&(O=N.g[O.toString()],N=-1,O&&(N=Ze(O,V,U,ce)),(V=-1<N?O[N]:null)&&hn(V))}function hn(N){if(typeof N!="number"&&N&&!N.da){var O=N.src;if(O&&O[fe])me(O.i,N);else{var V=N.type,U=N.proxy;O.removeEventListener?O.removeEventListener(V,U,N.capture):O.detachEvent?O.detachEvent(Br(V),U):O.addListener&&O.removeListener&&O.removeListener(U),(V=ni(O))?(me(V,N),V.h==0&&(V.src=null,O[Xe]=null)):Ne(N)}}}function Br(N){return N in pt?pt[N]:pt[N]="on"+N}function Ir(N,O){if(N.da)N=!0;else{O=new xe(O,this);var V=N.listener,U=N.ha||N.src;N.fa&&hn(N),N=V.call(U,O)}return N}function ni(N){return N=N[Xe],N instanceof Ee?N:null}var zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bs(N){return typeof N=="function"?N:(N[zr]||(N[zr]=function(O){return N.handleEvent(O)}),N[zr])}function fn(){Y.call(this),this.i=new Ee(this),this.M=this,this.F=null}y(fn,Y),fn.prototype[fe]=!0,fn.prototype.removeEventListener=function(N,O,V,U){ks(this,N,O,V,U)};function pn(N,O){var V,U=N.F;if(U)for(V=[];U;U=U.F)V.push(U);if(N=N.M,U=O.type||O,typeof O=="string")O=new ae(O,N);else if(O instanceof ae)O.target=O.target||N;else{var ce=O;O=new ae(U,N),D(O,ce)}if(ce=!0,V)for(var ke=V.length-1;0<=ke;ke--){var Ve=O.g=V[ke];ce=Ur(Ve,U,!0,O)&&ce}if(Ve=O.g=N,ce=Ur(Ve,U,!0,O)&&ce,ce=Ur(Ve,U,!1,O)&&ce,V)for(ke=0;ke<V.length;ke++)Ve=O.g=V[ke],ce=Ur(Ve,U,!1,O)&&ce}fn.prototype.N=function(){if(fn.aa.N.call(this),this.i){var N=this.i,O;for(O in N.g){for(var V=N.g[O],U=0;U<V.length;U++)Ne(V[U]);delete N.g[O],N.h--}}this.F=null},fn.prototype.K=function(N,O,V,U){return this.i.add(String(N),O,!1,V,U)},fn.prototype.L=function(N,O,V,U){return this.i.add(String(N),O,!0,V,U)};function Ur(N,O,V,U){if(O=N.i.g[String(O)],!O)return!0;O=O.concat();for(var ce=!0,ke=0;ke<O.length;++ke){var Ve=O[ke];if(Ve&&!Ve.da&&Ve.capture==V){var cn=Ve.listener,Er=Ve.ha||Ve.src;Ve.fa&&me(N.i,Ve),ce=cn.call(Er,U)!==!1&&ce}}return ce&&!U.defaultPrevented}function Ma(N,O,V){if(typeof N=="function")V&&(N=p(N,V));else if(N&&typeof N.handleEvent=="function")N=p(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(O)?-1:o.setTimeout(N,O||0)}function ra(N){N.g=Ma(()=>{N.g=null,N.i&&(N.i=!1,ra(N))},N.l);const O=N.h;N.h=null,N.m.apply(null,O)}class Fa extends Y{constructor(O,V){super(),this.m=O,this.l=V,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:ra(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bl(N){Y.call(this),this.h=N,this.g={}}y(bl,Y);var _o=[];function td(N){j(N.g,function(O,V){this.g.hasOwnProperty(V)&&hn(O)},N),N.g={}}bl.prototype.N=function(){bl.aa.N.call(this),td(this)},bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nd=o.JSON.stringify,Gm=o.JSON.parse,Hm=class{stringify(N){return o.JSON.stringify(N,void 0)}parse(N){return o.JSON.parse(N,void 0)}};function rd(){}rd.prototype.h=null;function cf(N){return N.h||(N.h=N.i())}function uf(){}var sa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ao(){ae.call(this,"d")}y(Ao,ae);function df(){ae.call(this,"c")}y(df,ae);var Ro={},qm=null;function sd(){return qm=qm||new fn}Ro.La="serverreachability";function Km(N){ae.call(this,Ro.La,N)}y(Km,ae);function wl(N){const O=sd();pn(O,new Km(O))}Ro.STAT_EVENT="statevent";function Xm(N,O){ae.call(this,Ro.STAT_EVENT,N),this.stat=O}y(Xm,ae);function ir(N){const O=sd();pn(O,new Xm(O,N))}Ro.Ma="timingevent";function hf(N,O){ae.call(this,Ro.Ma,N),this.size=O}y(hf,ae);function La(N,O){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){N()},O)}function id(){this.g=!0}id.prototype.xa=function(){this.g=!1};function ad(N,O,V,U,ce,ke){N.info(function(){if(N.g)if(ke)for(var Ve="",cn=ke.split("&"),Er=0;Er<cn.length;Er++){var Ht=cn[Er].split("=");if(1<Ht.length){var Wr=Ht[0];Ht=Ht[1];var hr=Wr.split("_");Ve=2<=hr.length&&hr[1]=="type"?Ve+(Wr+"="+Ht+"&"):Ve+(Wr+"=redacted&")}}else Ve=null;else Ve=ke;return"XMLHTTP REQ ("+U+") [attempt "+ce+"]: "+O+`
`+V+`
`+Ve})}function ff(N,O,V,U,ce,ke,Ve){N.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ce+"]: "+O+`
`+V+`
`+ke+" "+Ve})}function Va(N,O,V,U){N.info(function(){return"XMLHTTP TEXT ("+O+"): "+l2(N,V)+(U?" "+U:"")})}function Ym(N,O){N.info(function(){return"TIMEOUT: "+O})}id.prototype.info=function(){};function l2(N,O){if(!N.g)return O;if(!O)return null;try{var V=JSON.parse(O);if(V){for(N=0;N<V.length;N++)if(Array.isArray(V[N])){var U=V[N];if(!(2>U.length)){var ce=U[1];if(Array.isArray(ce)&&!(1>ce.length)){var ke=ce[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(var Ve=1;Ve<ce.length;Ve++)ce[Ve]=""}}}}return nd(V)}catch{return O}}var pf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ba;function od(){}y(od,rd),od.prototype.g=function(){return new XMLHttpRequest},od.prototype.i=function(){return{}},Ba=new od;function za(N,O,V,U){this.j=N,this.i=O,this.l=V,this.R=U||1,this.U=new bl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zv}function Zv(){this.i=null,this.g="",this.h=!1}var Qm={},mf={};function gf(N,O,V){N.L=1,N.v=Cc(Ti(O)),N.m=V,N.P=!0,Jm(N,null)}function Jm(N,O){N.F=Date.now(),Nn(N),N.A=Ti(N.v);var V=N.A,U=N.R;Array.isArray(U)||(U=[String(U)]),Ec(V.i,"t",U),N.C=0,V=N.j.J,N.h=new Zv,N.g=y0(N.j,V?O:null,!N.m),0<N.O&&(N.M=new Fa(p(N.Y,N,N.g),N.O)),O=N.U,V=N.g,U=N.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(_o[0]=ce.toString()),ce=_o);for(var ke=0;ke<ce.length;ke++){var Ve=ft(V,ce[ke],U||O.handleEvent,!1,O.h||O);if(!Ve)break;O.g[Ve.key]=Ve}O=N.H?T(N.H):{},N.m?(N.u||(N.u="POST"),O["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,O)):(N.u="GET",N.g.ea(N.A,N.u,null,O)),wl(),ad(N.i,N.u,N.A,N.l,N.R,N.m)}za.prototype.ca=function(N){N=N.target;const O=this.M;O&&si(N)==3?O.j():this.Y(N)},za.prototype.Y=function(N){try{if(N==this.g)e:{const hr=si(this.g);var O=this.g.Ba();const oa=this.g.Z();if(!(3>hr)&&(hr!=3||this.g&&(this.h.h||this.g.oa()||sg(this.g)))){this.J||hr!=4||O==7||(O==8||0>=oa?wl(3):wl(2)),ld(this);var V=this.g.Z();this.X=V;t:if(e0(this)){var U=sg(this.g);N="";var ce=U.length,ke=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ia(this),wc(this);var Ve="";break t}this.h.i=new o.TextDecoder}for(O=0;O<ce;O++)this.h.h=!0,N+=this.h.i.decode(U[O],{stream:!(ke&&O==ce-1)});U.length=0,this.h.g+=N,this.C=0,Ve=this.h.g}else Ve=this.g.oa();if(this.o=V==200,ff(this.i,this.u,this.A,this.l,this.R,hr,V),this.o){if(this.T&&!this.K){t:{if(this.g){var cn,Er=this.g;if((cn=Er.g?Er.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(cn)){var Ht=cn;break t}}Ht=null}if(V=Ht)Va(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zm(this,V);else{this.o=!1,this.s=3,ir(12),ia(this),wc(this);break e}}if(this.P){V=!0;let Ai;for(;!this.J&&this.C<Ve.length;)if(Ai=c2(this,Ve),Ai==mf){hr==4&&(this.s=4,ir(14),V=!1),Va(this.i,this.l,null,"[Incomplete Response]");break}else if(Ai==Qm){this.s=4,ir(15),Va(this.i,this.l,Ve,"[Invalid Chunk]"),V=!1;break}else Va(this.i,this.l,Ai,null),Zm(this,Ai);if(e0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hr!=4||Ve.length!=0||this.h.h||(this.s=1,ir(16),V=!1),this.o=this.o&&V,!V)Va(this.i,this.l,Ve,"[Invalid Chunked Response]"),ia(this),wc(this);else if(0<Ve.length&&!this.W){this.W=!0;var Wr=this.j;Wr.g==this&&Wr.ba&&!Wr.M&&(Wr.j.info("Great, no buffering proxy detected. Bytes received: "+Ve.length),ag(Wr),Wr.M=!0,ir(11))}}else Va(this.i,this.l,Ve,null),Zm(this,Ve);hr==4&&ia(this),this.o&&!this.J&&(hr==4?Ef(this.j,this):(this.o=!1,Nn(this)))}else kf(this.g),V==400&&0<Ve.indexOf("Unknown SID")?(this.s=3,ir(12)):(this.s=0,ir(13)),ia(this),wc(this)}}}catch{}finally{}};function e0(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function c2(N,O){var V=N.C,U=O.indexOf(`
`,V);return U==-1?mf:(V=Number(O.substring(V,U)),isNaN(V)?Qm:(U+=1,U+V>O.length?mf:(O=O.slice(U,U+V),N.C=U+V,O)))}za.prototype.cancel=function(){this.J=!0,ia(this)};function Nn(N){N.S=Date.now()+N.I,t0(N,N.I)}function t0(N,O){if(N.B!=null)throw Error("WatchDog timer not null");N.B=La(p(N.ba,N),O)}function ld(N){N.B&&(o.clearTimeout(N.B),N.B=null)}za.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Ym(this.i,this.A),this.L!=2&&(wl(),ir(17)),ia(this),this.s=2,wc(this)):t0(this,this.S-N)};function wc(N){N.j.G==0||N.J||Ef(N.j,N)}function ia(N){ld(N);var O=N.M;O&&typeof O.ma=="function"&&O.ma(),N.M=null,td(N.U),N.g&&(O=N.g,N.g=null,O.abort(),O.ma())}function Zm(N,O){try{var V=N.j;if(V.G!=0&&(V.g==N||zs(V.h,N))){if(!N.K&&zs(V.h,N)&&V.G==3){try{var U=V.Da.g.parse(O)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ce=U;if(ce[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<N.F)If(V),qa(V);else break e;Cf(V),ir(18)}}else V.za=ce[1],0<V.za-V.T&&37500>ce[2]&&V.F&&V.v==0&&!V.C&&(V.C=La(p(V.Za,V),6e3));if(1>=r0(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Il(V,11)}else if((N.K||V.g==N)&&If(V),!k(O))for(ce=V.Da.g.parse(O),O=0;O<ce.length;O++){let Ht=ce[O];if(V.T=Ht[0],Ht=Ht[1],V.G==2)if(Ht[0]=="c"){V.K=Ht[1],V.ia=Ht[2];const Wr=Ht[3];Wr!=null&&(V.la=Wr,V.j.info("VER="+V.la));const hr=Ht[4];hr!=null&&(V.Aa=hr,V.j.info("SVER="+V.Aa));const oa=Ht[5];oa!=null&&typeof oa=="number"&&0<oa&&(U=1.5*oa,V.L=U,V.j.info("backChannelRequestTimeoutMs_="+U)),U=V;const Ai=N.g;if(Ai){const md=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(md){var ke=U.h;ke.g||md.indexOf("spdy")==-1&&md.indexOf("quic")==-1&&md.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(eg(ke,ke.h),ke.h=null))}if(U.D){const _f=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;_f&&(U.ya=_f,yn(U.I,U.D,_f))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-N.F,V.j.info("Handshake RTT: "+V.R+"ms")),U=V;var Ve=N;if(U.qa=g0(U,U.J?U.ia:null,U.W),Ve.K){s0(U.h,Ve);var cn=Ve,Er=U.L;Er&&(cn.I=Er),cn.B&&(ld(cn),Nn(cn)),U.g=Ve}else pd(U);0<V.i.length&&Do(V)}else Ht[0]!="stop"&&Ht[0]!="close"||Il(V,7);else V.G==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Il(V,7):us(V):Ht[0]!="noop"&&V.l&&V.l.ta(Ht),V.v=0)}}wl(4)}catch{}}var n0=class{constructor(N,O){this.g=N,this.map=O}};function cd(N){this.l=N||10,o.PerformanceNavigationTiming?(N=o.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ei(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function r0(N){return N.h?1:N.g?N.g.size:0}function zs(N,O){return N.h?N.h==O:N.g?N.g.has(O):!1}function eg(N,O){N.g?N.g.add(O):N.h=O}function s0(N,O){N.h&&N.h==O?N.h=null:N.g&&N.g.has(O)&&N.g.delete(O)}cd.prototype.cancel=function(){if(this.i=i0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function i0(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let O=N.i;for(const V of N.g.values())O=O.concat(V.D);return O}return x(N.i)}function yf(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(l(N)){for(var O=[],V=N.length,U=0;U<V;U++)O.push(N[U]);return O}O=[],V=0;for(U in N)O[V++]=N[U];return O}function xf(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(l(N)||typeof N=="string"){var O=[];N=N.length;for(var V=0;V<N;V++)O.push(V);return O}O=[],V=0;for(const U in N)O[V++]=U;return O}}}function kc(N,O){if(N.forEach&&typeof N.forEach=="function")N.forEach(O,void 0);else if(l(N)||typeof N=="string")Array.prototype.forEach.call(N,O,void 0);else for(var V=xf(N),U=yf(N),ce=U.length,ke=0;ke<ce;ke++)O.call(void 0,U[ke],V&&V[ke],N)}var ud=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function u2(N,O){if(N){N=N.split("&");for(var V=0;V<N.length;V++){var U=N[V].indexOf("="),ce=null;if(0<=U){var ke=N[V].substring(0,U);ce=N[V].substring(U+1)}else ke=N[V];O(ke,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function kl(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof kl){this.h=N.h,dd(this,N.j),this.o=N.o,this.g=N.g,Sc(this,N.s),this.l=N.l;var O=N.i,V=new $o;V.i=O.i,O.g&&(V.g=new Map(O.g),V.h=O.h),Nc(this,V),this.m=N.m}else N&&(O=String(N).match(ud))?(this.h=!1,dd(this,O[1]||"",!0),this.o=Vt(O[2]||""),this.g=Vt(O[3]||"",!0),Sc(this,O[4]),this.l=Vt(O[5]||"",!0),Nc(this,O[6]||"",!0),this.m=Vt(O[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}kl.prototype.toString=function(){var N=[],O=this.j;O&&N.push(Ic(O,vf,!0),":");var V=this.g;return(V||O=="file")&&(N.push("//"),(O=this.o)&&N.push(Ic(O,vf,!0),"@"),N.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&N.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&N.push("/"),N.push(Ic(V,V.charAt(0)=="/"?l0:o0,!0))),(V=this.i.toString())&&N.push("?",V),(V=this.m)&&N.push("#",Ic(V,tg)),N.join("")};function Ti(N){return new kl(N)}function dd(N,O,V){N.j=V?Vt(O,!0):O,N.j&&(N.j=N.j.replace(/:$/,""))}function Sc(N,O){if(O){if(O=Number(O),isNaN(O)||0>O)throw Error("Bad port number "+O);N.s=O}else N.s=null}function Nc(N,O,V){O instanceof $o?(N.i=O,Po(N.i,N.h)):(V||(O=Ic(O,c0)),N.i=new $o(O,N.h))}function yn(N,O,V){N.i.set(O,V)}function Cc(N){return yn(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function Vt(N,O){return N?O?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Ic(N,O,V){return typeof N=="string"?(N=encodeURI(N).replace(O,a0),V&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function a0(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var vf=/[#\/\?@]/g,o0=/[#\?:]/g,l0=/[#\?]/g,c0=/[#\?@]/g,tg=/#/g;function $o(N,O){this.h=this.g=null,this.i=N||null,this.j=!!O}function cs(N){N.g||(N.g=new Map,N.h=0,N.i&&u2(N.i,function(O,V){N.add(decodeURIComponent(O.replace(/\+/g," ")),V)}))}t=$o.prototype,t.add=function(N,O){cs(this),this.i=null,N=aa(this,N);var V=this.g.get(N);return V||this.g.set(N,V=[]),V.push(O),this.h+=1,this};function Ua(N,O){cs(N),O=aa(N,O),N.g.has(O)&&(N.i=null,N.h-=N.g.get(O).length,N.g.delete(O))}function Wa(N,O){return cs(N),O=aa(N,O),N.g.has(O)}t.forEach=function(N,O){cs(this),this.g.forEach(function(V,U){V.forEach(function(ce){N.call(O,ce,U,this)},this)},this)},t.na=function(){cs(this);const N=Array.from(this.g.values()),O=Array.from(this.g.keys()),V=[];for(let U=0;U<O.length;U++){const ce=N[U];for(let ke=0;ke<ce.length;ke++)V.push(O[U])}return V},t.V=function(N){cs(this);let O=[];if(typeof N=="string")Wa(this,N)&&(O=O.concat(this.g.get(aa(this,N))));else{N=Array.from(this.g.values());for(let V=0;V<N.length;V++)O=O.concat(N[V])}return O},t.set=function(N,O){return cs(this),this.i=null,N=aa(this,N),Wa(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[O]),this.h+=1,this},t.get=function(N,O){return N?(N=this.V(N),0<N.length?String(N[0]):O):O};function Ec(N,O,V){Ua(N,O),0<V.length&&(N.i=null,N.g.set(aa(N,O),x(V)),N.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],O=Array.from(this.g.keys());for(var V=0;V<O.length;V++){var U=O[V];const ke=encodeURIComponent(String(U)),Ve=this.V(U);for(U=0;U<Ve.length;U++){var ce=ke;Ve[U]!==""&&(ce+="="+encodeURIComponent(String(Ve[U]))),N.push(ce)}}return this.i=N.join("&")};function aa(N,O){return O=String(O),N.j&&(O=O.toLowerCase()),O}function Po(N,O){O&&!N.j&&(cs(N),N.i=null,N.g.forEach(function(V,U){var ce=U.toLowerCase();U!=ce&&(Ua(this,U),Ec(this,ce,V))},N)),N.j=O}function d2(N,O){const V=new id;if(o.Image){const U=new Image;U.onload=g(ri,V,"TestLoadImage: loaded",!0,O,U),U.onerror=g(ri,V,"TestLoadImage: error",!1,O,U),U.onabort=g(ri,V,"TestLoadImage: abort",!1,O,U),U.ontimeout=g(ri,V,"TestLoadImage: timeout",!1,O,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=N}else O(!1)}function u0(N,O){const V=new id,U=new AbortController,ce=setTimeout(()=>{U.abort(),ri(V,"TestPingServer: timeout",!1,O)},1e4);fetch(N,{signal:U.signal}).then(ke=>{clearTimeout(ce),ke.ok?ri(V,"TestPingServer: ok",!0,O):ri(V,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(ce),ri(V,"TestPingServer: error",!1,O)})}function ri(N,O,V,U,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),U(V)}catch{}}function h2(){this.g=new Hm}function d0(N,O,V){const U=V||"";try{kc(N,function(ce,ke){let Ve=ce;c(ce)&&(Ve=nd(ce)),O.push(U+ke+"="+encodeURIComponent(Ve))})}catch(ce){throw O.push(U+"type="+encodeURIComponent("_badmap")),ce}}function Sl(N){this.l=N.Ub||null,this.j=N.eb||!1}y(Sl,rd),Sl.prototype.g=function(){return new hd(this.l,this.j)},Sl.prototype.i=(function(N){return function(){return N}})({});function hd(N,O){fn.call(this),this.D=N,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(hd,fn),t=hd.prototype,t.open=function(N,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=O,this.readyState=1,Ha(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const O={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(O.body=N),(this.D||o).fetch(new Request(this.A,O)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ga(this)),this.readyState=0},t.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h0(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function h0(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}t.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var O=N.value?N.value:new Uint8Array(0);(O=this.v.decode(O,{stream:!N.done}))&&(this.response=this.responseText+=O)}N.done?Ga(this):Ha(this),this.readyState==3&&h0(this)}},t.Ra=function(N){this.g&&(this.response=this.responseText=N,Ga(this))},t.Qa=function(N){this.g&&(this.response=N,Ga(this))},t.ga=function(){this.g&&Ga(this)};function Ga(N){N.readyState=4,N.l=null,N.j=null,N.v=null,Ha(N)}t.setRequestHeader=function(N,O){this.u.append(N,O)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],O=this.h.entries();for(var V=O.next();!V.done;)V=V.value,N.push(V[0]+": "+V[1]),V=O.next();return N.join(`\r
`)};function Ha(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(hd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function Nl(N){let O="";return j(N,function(V,U){O+=U,O+=":",O+=V,O+=`\r
`}),O}function Tc(N,O,V){e:{for(U in V){var U=!1;break e}U=!0}U||(V=Nl(V),typeof N=="string"?V!=null&&encodeURIComponent(String(V)):yn(N,O,V))}function Mn(N){fn.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Mn,fn);var f2=/^https?$/i,ng=["POST","PUT"];t=Mn.prototype,t.Ha=function(N){this.J=N},t.ea=function(N,O,V,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);O=O?O.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ba.g(),this.v=this.o?cf(this.o):cf(Ba),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(O,String(N),!0),this.B=!1}catch(ke){fd(this,ke);return}if(N=V||"",V=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ce in U)V.set(ce,U[ce]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const ke of U.keys())V.set(ke,U.get(ke));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(V.keys()).find(ke=>ke.toLowerCase()=="content-type"),ce=o.FormData&&N instanceof o.FormData,!(0<=Array.prototype.indexOf.call(ng,O,void 0))||U||ce||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,Ve]of V)this.g.setRequestHeader(ke,Ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wf(this),this.u=!0,this.g.send(N),this.u=!1}catch(ke){fd(this,ke)}};function fd(N,O){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=O,N.m=5,bf(N),_i(N)}function bf(N){N.A||(N.A=!0,pn(N,"complete"),pn(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,pn(this,"complete"),pn(this,"abort"),_i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),Mn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rg(this):this.bb())},t.bb=function(){rg(this)};function rg(N){if(N.h&&typeof a<"u"&&(!N.v[1]||si(N)!=4||N.Z()!=2)){if(N.u&&si(N)==4)Ma(N.Ea,0,N);else if(pn(N,"readystatechange"),si(N)==4){N.h=!1;try{const Ve=N.Z();e:switch(Ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var V;if(!(V=O)){var U;if(U=Ve===0){var ce=String(N.D).match(ud)[1]||null;!ce&&o.self&&o.self.location&&(ce=o.self.location.protocol.slice(0,-1)),U=!f2.test(ce?ce.toLowerCase():"")}V=U}if(V)pn(N,"complete"),pn(N,"success");else{N.m=6;try{var ke=2<si(N)?N.g.statusText:""}catch{ke=""}N.l=ke+" ["+N.Z()+"]",bf(N)}}finally{_i(N)}}}}function _i(N,O){if(N.g){wf(N);const V=N.g,U=N.v[0]?()=>{}:null;N.g=null,N.v=null,O||pn(N,"ready");try{V.onreadystatechange=U}catch{}}}function wf(N){N.I&&(o.clearTimeout(N.I),N.I=null)}t.isActive=function(){return!!this.g};function si(N){return N.g?N.g.readyState:0}t.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(N){if(this.g){var O=this.g.responseText;return N&&O.indexOf(N)==0&&(O=O.substring(N.length)),Gm(O)}};function sg(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(N){const O={};N=(N.g&&2<=si(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<N.length;U++){if(k(N[U]))continue;var V=R(N[U]);const ce=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const ke=O[ce]||[];O[ce]=ke,ke.push(V)}A(O,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jo(N,O,V){return V&&V.internalChannelParams&&V.internalChannelParams[N]||O}function ig(N){this.Aa=0,this.i=[],this.j=new id,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jo("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jo("baseRetryDelayMs",5e3,N),this.cb=jo("retryDelaySeedMs",1e4,N),this.Wa=jo("forwardChannelMaxRetries",2,N),this.wa=jo("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new cd(N&&N.concurrentRequestLimit),this.Da=new h2,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ig.prototype,t.la=8,t.G=1,t.connect=function(N,O,V,U){ir(0),this.W=N,this.H=O||{},V&&U!==void 0&&(this.H.OSID=V,this.H.OAID=U),this.F=this.X,this.I=g0(this,null,this.W),Do(this)};function us(N){if(Sf(N),N.G==3){var O=N.U++,V=Ti(N.I);if(yn(V,"SID",N.K),yn(V,"RID",O),yn(V,"TYPE","terminate"),Cl(N,V),O=new za(N,N.j,O),O.L=2,O.v=Cc(Ti(V)),V=!1,o.navigator&&o.navigator.sendBeacon)try{V=o.navigator.sendBeacon(O.v.toString(),"")}catch{}!V&&o.Image&&(new Image().src=O.v,V=!0),V||(O.g=y0(O.j,null),O.g.ea(O.v)),O.F=Date.now(),Nn(O)}m0(N)}function qa(N){N.g&&(ag(N),N.g.cancel(),N.g=null)}function Sf(N){qa(N),N.u&&(o.clearTimeout(N.u),N.u=null),If(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&o.clearTimeout(N.s),N.s=null)}function Do(N){if(!Ei(N.h)&&!N.s){N.s=!0;var O=N.Ga;Q||ee(),z||(Q(),z=!0),H.add(O,N),N.B=0}}function p2(N,O){return r0(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=O.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=La(p(N.Ga,N,O),p0(N,N.B)),N.B++,!0)}t.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const ce=new za(this,this.j,N);let ke=this.o;if(this.S&&(ke?(ke=T(ke),D(ke,this.S)):ke=this.S),this.m!==null||this.O||(ce.H=ke,ke=null),this.P)e:{for(var O=0,V=0;V<this.i.length;V++){t:{var U=this.i[V];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(O+=U,4096<O){O=V;break e}if(O===4096||V===this.i.length-1){O=V+1;break e}}O=1e3}else O=1e3;O=_c(this,ce,O),V=Ti(this.I),yn(V,"RID",N),yn(V,"CVER",22),this.D&&yn(V,"X-HTTP-Session-Id",this.D),Cl(this,V),ke&&(this.O?O="headers="+encodeURIComponent(String(Nl(ke)))+"&"+O:this.m&&Tc(V,this.m,ke)),eg(this.h,ce),this.Ua&&yn(V,"TYPE","init"),this.P?(yn(V,"$req",O),yn(V,"SID","null"),ce.T=!0,gf(ce,V,null)):gf(ce,V,O),this.G=2}}else this.G==3&&(N?Nf(this,N):this.i.length==0||Ei(this.h)||Nf(this))};function Nf(N,O){var V;O?V=O.l:V=N.U++;const U=Ti(N.I);yn(U,"SID",N.K),yn(U,"RID",V),yn(U,"AID",N.T),Cl(N,U),N.m&&N.o&&Tc(U,N.m,N.o),V=new za(N,N.j,V,N.B+1),N.m===null&&(V.H=N.o),O&&(N.i=O.D.concat(N.i)),O=_c(N,V,1e3),V.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),eg(N.h,V),gf(V,U,O)}function Cl(N,O){N.H&&j(N.H,function(V,U){yn(O,U,V)}),N.l&&kc({},function(V,U){yn(O,U,V)})}function _c(N,O,V){V=Math.min(N.i.length,V);var U=N.l?p(N.l.Na,N.l,N):null;e:{var ce=N.i;let ke=-1;for(;;){const Ve=["count="+V];ke==-1?0<V?(ke=ce[0].g,Ve.push("ofs="+ke)):ke=0:Ve.push("ofs="+ke);let cn=!0;for(let Er=0;Er<V;Er++){let Ht=ce[Er].g;const Wr=ce[Er].map;if(Ht-=ke,0>Ht)ke=Math.max(0,ce[Er].g-100),cn=!1;else try{d0(Wr,Ve,"req"+Ht+"_")}catch{U&&U(Wr)}}if(cn){U=Ve.join("&");break e}}}return N=N.i.splice(0,V),O.D=N,U}function pd(N){if(!N.g&&!N.u){N.Y=1;var O=N.Fa;Q||ee(),z||(Q(),z=!0),H.add(O,N),N.v=0}}function Cf(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=La(p(N.Fa,N),p0(N,N.v)),N.v++,!0)}t.Fa=function(){if(this.u=null,f0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=La(p(this.ab,this),N)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ir(10),qa(this),f0(this))};function ag(N){N.A!=null&&(o.clearTimeout(N.A),N.A=null)}function f0(N){N.g=new za(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var O=Ti(N.qa);yn(O,"RID","rpc"),yn(O,"SID",N.K),yn(O,"AID",N.T),yn(O,"CI",N.F?"0":"1"),!N.F&&N.ja&&yn(O,"TO",N.ja),yn(O,"TYPE","xmlhttp"),Cl(N,O),N.m&&N.o&&Tc(O,N.m,N.o),N.L&&(N.g.I=N.L);var V=N.g;N=N.ia,V.L=1,V.v=Cc(Ti(O)),V.m=null,V.P=!0,Jm(V,N)}t.Za=function(){this.C!=null&&(this.C=null,qa(this),Cf(this),ir(19))};function If(N){N.C!=null&&(o.clearTimeout(N.C),N.C=null)}function Ef(N,O){var V=null;if(N.g==O){If(N),ag(N),N.g=null;var U=2}else if(zs(N.h,O))V=O.D,s0(N.h,O),U=1;else return;if(N.G!=0){if(O.o)if(U==1){V=O.m?O.m.length:0,O=Date.now()-O.F;var ce=N.B;U=sd(),pn(U,new hf(U,V)),Do(N)}else pd(N);else if(ce=O.s,ce==3||ce==0&&0<O.X||!(U==1&&p2(N,O)||U==2&&Cf(N)))switch(V&&0<V.length&&(O=N.h,O.i=O.i.concat(V)),ce){case 1:Il(N,5);break;case 4:Il(N,10);break;case 3:Il(N,6);break;default:Il(N,2)}}}function p0(N,O){let V=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(V*=2),V*O}function Il(N,O){if(N.j.info("Error code "+O),O==2){var V=p(N.fb,N),U=N.Xa;const ce=!U;U=new kl(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||dd(U,"https"),Cc(U),ce?d2(U.toString(),V):u0(U.toString(),V)}else ir(2);N.G=0,N.l&&N.l.sa(O),m0(N),Sf(N)}t.fb=function(N){N?(this.j.info("Successfully pinged google.com"),ir(2)):(this.j.info("Failed to ping google.com"),ir(1))};function m0(N){if(N.G=0,N.ka=[],N.l){const O=i0(N.h);(O.length!=0||N.i.length!=0)&&(v(N.ka,O),v(N.ka,N.i),N.h.i.length=0,x(N.i),N.i.length=0),N.l.ra()}}function g0(N,O,V){var U=V instanceof kl?Ti(V):new kl(V);if(U.g!="")O&&(U.g=O+"."+U.g),Sc(U,U.s);else{var ce=o.location;U=ce.protocol,O=O?O+"."+ce.hostname:ce.hostname,ce=+ce.port;var ke=new kl(null);U&&dd(ke,U),O&&(ke.g=O),ce&&Sc(ke,ce),V&&(ke.l=V),U=ke}return V=N.D,O=N.ya,V&&O&&yn(U,V,O),yn(U,"VER",N.la),Cl(N,U),U}function y0(N,O,V){if(O&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return O=N.Ca&&!N.pa?new Mn(new Sl({eb:V})):new Mn(N.pa),O.Ha(N.J),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function og(){}t=og.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tf(){}Tf.prototype.g=function(N,O){return new Us(N,O)};function Us(N,O){fn.call(this),this.g=new ig(O),this.l=N,this.h=O&&O.messageUrlParams||null,N=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(N?N["X-WebChannel-Content-Type"]=O.messageContentType:N={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.va&&(N?N["X-WebChannel-Client-Profile"]=O.va:N={"X-WebChannel-Client-Profile":O.va}),this.g.S=N,(N=O&&O.Sb)&&!k(N)&&(this.g.m=N),this.v=O&&O.supportsCrossDomainXhr||!1,this.u=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!k(O)&&(this.g.D=O,N=this.h,N!==null&&O in N&&(N=this.h,O in N&&delete N[O])),this.j=new Oo(this)}y(Us,fn),Us.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Us.prototype.close=function(){us(this.g)},Us.prototype.o=function(N){var O=this.g;if(typeof N=="string"){var V={};V.__data__=N,N=V}else this.u&&(V={},V.__data__=nd(N),N=V);O.i.push(new n0(O.Ya++,N)),O.G==3&&Do(O)},Us.prototype.N=function(){this.g.l=null,delete this.j,us(this.g),delete this.g,Us.aa.N.call(this)};function x0(N){Ao.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var O=N.__sm__;if(O){e:{for(const V in O){N=V;break e}N=void 0}(this.i=N)&&(N=this.i,O=O!==null&&N in O?O[N]:void 0),this.data=O}else this.data=N}y(x0,Ao);function v0(){df.call(this),this.status=1}y(v0,df);function Oo(N){this.g=N}y(Oo,og),Oo.prototype.ua=function(){pn(this.g,"a")},Oo.prototype.ta=function(N){pn(this.g,new x0(N))},Oo.prototype.sa=function(N){pn(this.g,new v0)},Oo.prototype.ra=function(){pn(this.g,"b")},Tf.prototype.createWebChannel=Tf.prototype.g,Us.prototype.send=Us.prototype.o,Us.prototype.open=Us.prototype.m,Us.prototype.close=Us.prototype.close,yW=function(){return new Tf},gW=function(){return sd()},mW=Ro,bT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pf.NO_ERROR=0,pf.TIMEOUT=8,pf.HTTP_ERROR=6,sw=pf,Jv.COMPLETE="complete",pW=Jv,uf.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",fn.prototype.listen=fn.prototype.K,Hg=uf,Mn.prototype.listenOnce=Mn.prototype.L,Mn.prototype.getLastError=Mn.prototype.Ka,Mn.prototype.getLastErrorCode=Mn.prototype.Ba,Mn.prototype.getStatus=Mn.prototype.Z,Mn.prototype.getResponseJson=Mn.prototype.Oa,Mn.prototype.getResponseText=Mn.prototype.oa,Mn.prototype.send=Mn.prototype.ea,Mn.prototype.setWithCredentials=Mn.prototype.Ha,fW=Mn}).apply(typeof yb<"u"?yb:typeof self<"u"?self:typeof window<"u"?window:{});const y3="@firebase/firestore",x3="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new aW("@firebase/firestore");function rp(){return ph.logLevel}function He(t,...e){if(ph.logLevel<=Kt.DEBUG){const n=e.map(HA);ph.debug(`Firestore (${cm}): ${t}`,...n)}}function Yl(t,...e){if(ph.logLevel<=Kt.ERROR){const n=e.map(HA);ph.error(`Firestore (${cm}): ${t}`,...n)}}function mh(t,...e){if(ph.logLevel<=Kt.WARN){const n=e.map(HA);ph.warn(`Firestore (${cm}): ${t}`,...n)}}function HA(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xW(t,r,n)}function xW(t,e,n){let r=`FIRESTORE (${cm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yl(r),new Error(r)}function on(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||xW(e,s,r)}function Ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends lm{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(As.UNAUTHENTICATED)))}shutdown(){}}class nce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rce{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){on(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new eh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new eh,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},o=l=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new eh)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(on(typeof r.accessToken=="string",31837,{l:r}),new vW(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return on(e===null||typeof e=="string",2055,{h:e}),new As(e)}}class sce{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=As.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ice{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sce(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class v3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ace{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lle(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){on(this.o===void 0,3512);const r=i=>{i.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,He("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new v3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(on(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v3(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=oce(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Mt(t,e){return t<e?-1:t>e?1:0}function wT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return qC(s)===qC(i)?Mt(s,i):qC(s)?1:-1}return Mt(t.length,e.length)}const lce=55296,cce=57343;function qC(t){const e=t.charCodeAt(0);return e>=lce&&e<=cce}function _p(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="__name__";class zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&vt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&vt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=zo.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Mt(e.length,n.length)}static compareSegments(e,n){const r=zo.isNumericId(e),s=zo.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?zo.extractNumericId(e).compare(zo.extractNumericId(n)):wT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return su.fromString(e.substring(4,e.length-2))}}class Tn extends zo{construct(e,n,r){return new Tn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(Ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Tn(n)}static emptyPath(){return new Tn([])}}const uce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends zo{construct(e,n,r){return new Qr(e,n,r)}static isValidIdentifier(e){return uce.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===b3}static keyField(){return new Qr([b3])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new We(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new We(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new We(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(r+=o,s++):(i(),s++)}if(i(),a)throw new We(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(n)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Tn.fromString(e))}static fromName(e){return new ct(Tn.fromString(e).popFirst(5))}static empty(){return new ct(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Tn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t,e,n){if(!n)throw new We(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kW(t,e,n,r){if(e===!0&&r===!0)throw new We(Ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w3(t){if(!ct.isDocumentKey(t))throw new We(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function k3(t){if(ct.isDocumentKey(t))throw new We(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SW(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function wk(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":vt(12329,{type:typeof t})}function th(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wk(t);throw new We(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dce(t,e){if(e<=0)throw new We(Ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t,e){const n={typeString:t};return e&&(n.value=e),n}function ox(t,e){if(!SW(t))throw new We(Ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new We(Ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=-62135596800,N3=1e6;class _n{static now(){return _n.fromMillis(Date.now())}static fromDate(e){return _n.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*N3);return new _n(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new We(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new We(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S3)throw new We(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N3}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ox(e,_n._jsonSchema))return new _n(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_n._jsonSchemaVersion="firestore/timestamp/1.0",_n._jsonSchema={type:yr("string",_n._jsonSchemaVersion),seconds:yr("number"),nanoseconds:yr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static fromTimestamp(e){return new kt(e)}static min(){return new kt(new _n(0,0))}static max(){return new kt(new _n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-1;function hce(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(r===1e9?new _n(n+1,0):new _n(n,r));return new pu(s,ct.empty(),e)}function fce(t){return new pu(t.readTime,t.key,Sy)}class pu{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pu(kt.min(),ct.empty(),Sy)}static max(){return new pu(kt.max(),ct.empty(),Sy)}}function pce(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ct.comparator(t.documentKey,e.documentKey),n!==0?n:Mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function um(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==mce)throw t;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):_e.reject(n)}static resolve(e){return new _e(((n,r)=>{n(e)}))}static reject(e){return new _e(((n,r)=>{r(e)}))}static waitFor(e){return new _e(((n,r)=>{let s=0,i=0,a=!1;e.forEach((o=>{++s,o.next((()=>{++i,a&&i===s&&n()}),(l=>r(l)))})),a=!0,i===s&&n()}))}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next((s=>s?_e.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new _e(((r,s)=>{const i=e.length,a=new Array(i);let o=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next((u=>{a[c]=u,++o,o===i&&r(a)}),(u=>s(u)))}}))}static doWhile(e,n){return new _e(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function yce(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kk.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=-1;function Sk(t){return t==null}function jw(t){return t===0&&1/t==-1/0}function xce(t){return typeof t=="number"&&Number.isInteger(t)&&!jw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="";function vce(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=C3(e)),e=bce(t.get(n),e);return C3(e)}function bce(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case NW:n+="";break;default:n+=i}}return n}function C3(t){return t+NW+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ou(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){this.comparator=e,this.root=n||ps.EMPTY}insert(e,n){return new Kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xb(this.root,e,this.comparator,!1)}getReverseIterator(){return new xb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xb(this.root,e,this.comparator,!0)}}class xb{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ps.RED,this.left=s??ps.EMPTY,this.right=i??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ps(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ps.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw vt(27949);return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1;ps.EMPTY=new class{constructor(){this.size=0}get key(){throw vt(57766)}get value(){throw vt(16141)}get color(){throw vt(16727)}get left(){throw vt(29726)}get right(){throw vt(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ps(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new E3(this.data.getIterator())}getIteratorFrom(e){return new E3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Dr(this.comparator);return n.data=e,n}}class E3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new uo([])}unionWith(e){let n=new Dr(Qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new uo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _p(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new IW("Invalid base64 string: "+i):i}})(e);return new ss(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new ss(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ss.EMPTY_BYTE_STRING=new ss("");const wce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mu(t){if(on(!!t,39018),typeof t=="string"){let e=0;const n=wce.exec(t);if(on(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:or(t.seconds),nanos:or(t.nanos)}}function or(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gu(t){return typeof t=="string"?ss.fromBase64String(t):ss.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW="server_timestamp",TW="__type__",_W="__previous_value__",AW="__local_write_time__";function KA(t){return(t?.mapValue?.fields||{})[TW]?.stringValue===EW}function Nk(t){const e=t.mapValue.fields[_W];return KA(e)?Nk(e):e}function Ny(t){const e=mu(t.mapValue.fields[AW].timestampValue);return new _n(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kce{constructor(e,n,r,s,i,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Dw="(default)";class Ap{constructor(e,n){this.projectId=e,this.database=n||Dw}static empty(){return new Ap("","")}get isDefaultDatabase(){return this.database===Dw}isEqual(e){return e instanceof Ap&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RW="__type__",Sce="__max__",vb={mapValue:{}},$W="__vector__",Ow="value";function yu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KA(t)?4:Cce(t)?9007199254740991:Nce(t)?10:11:vt(28295,{value:t})}function ol(t,e){if(t===e)return!0;const n=yu(t);if(n!==yu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ny(t).isEqual(Ny(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=mu(s.timestampValue),o=mu(i.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return gu(s.bytesValue).isEqual(gu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return or(s.geoPointValue.latitude)===or(i.geoPointValue.latitude)&&or(s.geoPointValue.longitude)===or(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return or(s.integerValue)===or(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=or(s.doubleValue),o=or(i.doubleValue);return a===o?jw(a)===jw(o):isNaN(a)&&isNaN(o)}return!1})(t,e);case 9:return _p(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},o=i.mapValue.fields||{};if(I3(a)!==I3(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ol(a[l],o[l])))return!1;return!0})(t,e);default:return vt(52216,{left:t})}}function Cy(t,e){return(t.values||[]).find((n=>ol(n,e)))!==void 0}function Rp(t,e){if(t===e)return 0;const n=yu(t),r=yu(e);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const o=or(i.integerValue||i.doubleValue),l=or(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(t,e);case 3:return T3(t.timestampValue,e.timestampValue);case 4:return T3(Ny(t),Ny(e));case 5:return wT(t.stringValue,e.stringValue);case 6:return(function(i,a){const o=gu(i),l=gu(a);return o.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const o=i.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=Mt(o[c],l[c]);if(u!==0)return u}return Mt(o.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const o=Mt(or(i.latitude),or(a.latitude));return o!==0?o:Mt(or(i.longitude),or(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return _3(t.arrayValue,e.arrayValue);case 10:return(function(i,a){const o=i.fields||{},l=a.fields||{},c=o[Ow]?.arrayValue,u=l[Ow]?.arrayValue,d=Mt(c?.values?.length||0,u?.values?.length||0);return d!==0?d:_3(c,u)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===vb.mapValue&&a===vb.mapValue)return 0;if(i===vb.mapValue)return 1;if(a===vb.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const p=wT(l[d],u[d]);if(p!==0)return p;const g=Rp(o[l[d]],c[u[d]]);if(g!==0)return g}return Mt(l.length,u.length)})(t.mapValue,e.mapValue);default:throw vt(23264,{he:n})}}function T3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Mt(t,e);const n=mu(t),r=mu(e),s=Mt(n.seconds,r.seconds);return s!==0?s:Mt(n.nanos,r.nanos)}function _3(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Rp(n[s],r[s]);if(i)return i}return Mt(n.length,r.length)}function $p(t){return kT(t)}function kT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=mu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return gu(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ct.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=kT(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${kT(n.fields[a])}`;return s+"}"})(t.mapValue):vt(61005,{value:t})}function iw(t){switch(yu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nk(t);return e?16+iw(e):16;case 5:return 2*t.stringValue.length;case 6:return gu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+iw(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ou(r.fields,((i,a)=>{s+=i.length+iw(a)})),s})(t.mapValue);default:throw vt(13486,{value:t})}}function A3(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ST(t){return!!t&&"integerValue"in t}function XA(t){return!!t&&"arrayValue"in t}function R3(t){return!!t&&"nullValue"in t}function $3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aw(t){return!!t&&"mapValue"in t}function Nce(t){return(t?.mapValue?.fields||{})[RW]?.stringValue===$W}function ay(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ou(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ay(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ay(t.arrayValue.values[n]);return e}return{...t}}function Cce(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Sce}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!aw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ay(n)}setAll(e){let n=Qr.emptyPath(),r={},s=[];e.forEach(((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=o.popLast()}a?r[o.lastSegment()]=ay(a):s.push(o.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());aw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];aw(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ou(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Li(ay(this.value))}}function PW(t){const e=[];return Ou(t.fields,((n,r)=>{const s=new Qr([n]);if(aw(r)){const i=PW(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new uo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r,s,i,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new $s(e,0,kt.min(),kt.min(),kt.min(),Li.empty(),0)}static newFoundDocument(e,n,r,s){return new $s(e,1,n,kt.min(),r,s,0)}static newNoDocument(e,n){return new $s(e,2,n,kt.min(),kt.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new $s(e,3,n,kt.min(),kt.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $s&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $s(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.position=e,this.inclusive=n}}function P3(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ct.comparator(ct.fromName(a.referenceValue),n.key):r=Rp(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function j3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ol(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ice(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{}class gr extends jW{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Tce(e,n,r):n==="array-contains"?new Rce(e,r):n==="in"?new $ce(e,r):n==="not-in"?new Pce(e,r):n==="array-contains-any"?new jce(e,r):new gr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _ce(e,r):new Ace(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rp(n,this.value)):n!==null&&yu(this.value)===yu(n)&&this.matchesComparison(Rp(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vo extends jW{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vo(e,n)}matches(e){return DW(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DW(t){return t.op==="and"}function OW(t){return Ece(t)&&DW(t)}function Ece(t){for(const e of t.filters)if(e instanceof vo)return!1;return!0}function NT(t){if(t instanceof gr)return t.field.canonicalString()+t.op.toString()+$p(t.value);if(OW(t))return t.filters.map((e=>NT(e))).join(",");{const e=t.filters.map((n=>NT(n))).join(",");return`${t.op}(${e})`}}function MW(t,e){return t instanceof gr?(function(r,s){return s instanceof gr&&r.op===s.op&&r.field.isEqual(s.field)&&ol(r.value,s.value)})(t,e):t instanceof vo?(function(r,s){return s instanceof vo&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,o)=>i&&MW(a,s.filters[o])),!0):!1})(t,e):void vt(19439)}function FW(t){return t instanceof gr?(function(n){return`${n.field.canonicalString()} ${n.op} ${$p(n.value)}`})(t):t instanceof vo?(function(n){return n.op.toString()+" {"+n.getFilters().map(FW).join(" ,")+"}"})(t):"Filter"}class Tce extends gr{constructor(e,n,r){super(e,n,r),this.key=ct.fromName(r.referenceValue)}matches(e){const n=ct.comparator(e.key,this.key);return this.matchesComparison(n)}}class _ce extends gr{constructor(e,n){super(e,"in",n),this.keys=LW("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Ace extends gr{constructor(e,n){super(e,"not-in",n),this.keys=LW("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function LW(t,e){return(e.arrayValue?.values||[]).map((n=>ct.fromName(n.referenceValue)))}class Rce extends gr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return XA(n)&&Cy(n.arrayValue,this.value)}}class $ce extends gr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cy(this.value.arrayValue,n)}}class Pce extends gr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cy(this.value.arrayValue,n)}}class jce extends gr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!XA(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Cy(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dce{constructor(e,n=null,r=[],s=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function D3(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Dce(t,e,n,r,s,i,a)}function YA(t){const e=Ct(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>NT(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Sk(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>$p(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>$p(r))).join(",")),e.Te=n}return e.Te}function QA(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ice(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MW(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j3(t.startAt,e.startAt)&&j3(t.endAt,e.endAt)}function CT(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n=null,r=[],s=[],i=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Oce(t,e,n,r,s,i,a,o){return new hm(t,e,n,r,s,i,a,o)}function JA(t){return new hm(t)}function O3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VW(t){return t.collectionGroup!==null}function oy(t){const e=Ct(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Dr(Qr.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(o=o.add(c.field))}))})),o})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Iy(i,r))})),n.has(Qr.keyField().canonicalString())||e.Ie.push(new Iy(Qr.keyField(),r))}return e.Ie}function Qo(t){const e=Ct(t);return e.Ee||(e.Ee=Mce(e,oy(t))),e.Ee}function Mce(t,e){if(t.limitType==="F")return D3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Iy(s.field,i)}));const n=t.endAt?new Mw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mw(t.startAt.position,t.startAt.inclusive):null;return D3(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function IT(t,e){const n=t.filters.concat([e]);return new hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fw(t,e,n){return new hm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ck(t,e){return QA(Qo(t),Qo(e))&&t.limitType===e.limitType}function BW(t){return`${YA(Qo(t))}|lt:${t.limitType}`}function sp(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>FW(s))).join(", ")}]`),Sk(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>$p(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>$p(s))).join(",")),`Target(${r})`})(Qo(t))}; limitType=${t.limitType})`}function Ik(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ct.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of oy(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,o,l){const c=P3(a,o,l);return a.inclusive?c<=0:c<0})(r.startAt,oy(r),s)||r.endAt&&!(function(a,o,l){const c=P3(a,o,l);return a.inclusive?c>=0:c>0})(r.endAt,oy(r),s))})(t,e)}function Fce(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zW(t){return(e,n)=>{let r=!1;for(const s of oy(t)){const i=Lce(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Lce(t,e,n){const r=t.field.isKeyField()?ct.comparator(e.key,n.key):(function(i,a,o){const l=a.data.field(i),c=o.data.field(i);return l!==null&&c!==null?Rp(l,c):vt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return CW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vce=new Kn(ct.comparator);function Ql(){return Vce}const UW=new Kn(ct.comparator);function qg(...t){let e=UW;for(const n of t)e=e.insert(n.key,n);return e}function WW(t){let e=UW;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Wd(){return ly()}function GW(){return ly()}function ly(){return new Gh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Bce=new Kn(ct.comparator),zce=new Dr(ct.comparator);function Lt(...t){let e=zce;for(const n of t)e=e.add(n);return e}const Uce=new Dr(Mt);function Wce(){return Uce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jw(e)?"-0":e}}function HW(t){return{integerValue:""+t}}function Gce(t,e){return xce(e)?HW(e):ZA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this._=void 0}}function Hce(t,e,n){return t instanceof Lw?(function(s,i){const a={fields:{[TW]:{stringValue:EW},[AW]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&KA(i)&&(i=Nk(i)),i&&(a.fields[_W]=i),{mapValue:a}})(n,e):t instanceof Ey?KW(t,e):t instanceof Ty?XW(t,e):(function(s,i){const a=qW(s,i),o=M3(a)+M3(s.Ae);return ST(a)&&ST(s.Ae)?HW(o):ZA(s.serializer,o)})(t,e)}function qce(t,e,n){return t instanceof Ey?KW(t,e):t instanceof Ty?XW(t,e):n}function qW(t,e){return t instanceof Vw?(function(r){return ST(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Lw extends Ek{}class Ey extends Ek{constructor(e){super(),this.elements=e}}function KW(t,e){const n=YW(e);for(const r of t.elements)n.some((s=>ol(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ty extends Ek{constructor(e){super(),this.elements=e}}function XW(t,e){let n=YW(e);for(const r of t.elements)n=n.filter((s=>!ol(s,r)));return{arrayValue:{values:n}}}class Vw extends Ek{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function M3(t){return or(t.integerValue||t.doubleValue)}function YW(t){return XA(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Kce(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Ey&&s instanceof Ey||r instanceof Ty&&s instanceof Ty?_p(r.elements,s.elements,ol):r instanceof Vw&&s instanceof Vw?ol(r.Ae,s.Ae):r instanceof Lw&&s instanceof Lw})(t.transform,e.transform)}class Xce{constructor(e,n){this.version=e,this.transformResults=n}}class Ul{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ul}static exists(e){return new Ul(void 0,e)}static updateTime(e){return new Ul(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ow(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tk{}function QW(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ZW(t.key,Ul.none()):new _k(t.key,t.data,Ul.none());{const n=t.data,r=Li.empty();let s=new Dr(Qr.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Hh(t.key,r,new uo(s.toArray()),Ul.none())}}function Yce(t,e,n){t instanceof _k?(function(s,i,a){const o=s.value.clone(),l=L3(s.fieldTransforms,i,a.transformResults);o.setAll(l),i.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(t,e,n):t instanceof Hh?(function(s,i,a){if(!ow(s.precondition,i))return void i.convertToUnknownDocument(a.version);const o=L3(s.fieldTransforms,i,a.transformResults),l=i.data;l.setAll(JW(s)),l.setAll(o),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function cy(t,e,n,r){return t instanceof _k?(function(i,a,o,l){if(!ow(i.precondition,a))return o;const c=i.value.clone(),u=V3(i.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Hh?(function(i,a,o,l){if(!ow(i.precondition,a))return o;const c=V3(i.fieldTransforms,l,a),u=a.data;return u.setAll(JW(i)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,r):(function(i,a,o){return ow(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(t,e,n)}function Qce(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=qW(r.transform,s||null);i!=null&&(n===null&&(n=Li.empty()),n.set(r.field,i))}return n||null}function F3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_p(r,s,((i,a)=>Kce(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _k extends Tk{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hh extends Tk{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JW(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function L3(t,e,n){const r=new Map;on(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,o=e.data.field(i.field);r.set(i.field,qce(a,o,n[s]))}return r}function V3(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Hce(i,a,e))}return r}class ZW extends Tk{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jce extends Tk{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zce{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Yce(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cy(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cy(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GW();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let o=this.applyToLocalView(a,i.mutatedFields);o=n.has(s.key)?null:o;const l=QW(a,o);l!==null&&r.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(kt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Lt())}isEqual(e){return this.batchId===e.batchId&&_p(this.mutations,e.mutations,((n,r)=>F3(n,r)))&&_p(this.baseMutations,e.baseMutations,((n,r)=>F3(n,r)))}}class eR{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){on(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Bce})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new eR(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eue{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tue{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,qt;function nue(t){switch(t){case Ie.OK:return vt(64938);case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0;default:return vt(15467,{code:t})}}function eG(t){if(t===void 0)return Yl("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case pr.OK:return Ie.OK;case pr.CANCELLED:return Ie.CANCELLED;case pr.UNKNOWN:return Ie.UNKNOWN;case pr.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case pr.INTERNAL:return Ie.INTERNAL;case pr.UNAVAILABLE:return Ie.UNAVAILABLE;case pr.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case pr.NOT_FOUND:return Ie.NOT_FOUND;case pr.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case pr.ABORTED:return Ie.ABORTED;case pr.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case pr.DATA_LOSS:return Ie.DATA_LOSS;default:return vt(39323,{code:t})}}(qt=pr||(pr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sue=new su([4294967295,4294967295],0);function B3(t){const e=rue().encode(t),n=new hW;return n.update(e),new Uint8Array(n.digest())}function z3(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new su([n,r],0),new su([s,i],0)]}class tR{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kg(`Invalid padding: ${n}`);if(r<0)throw new Kg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=su.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(su.fromNumber(r)));return s.compare(sue)===1&&(s=new su([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=B3(e),[r,s]=z3(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new tR(i,s,n);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const n=B3(e),[r,s]=z3(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,lx.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ak(kt.min(),s,new Kn(Mt),Ql(),Lt())}}class lx{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lx(r,n,Lt(),Lt(),Lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class tG{constructor(e,n){this.targetId=e,this.Ce=n}}class nG{constructor(e,n,r=ss.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U3{constructor(){this.ve=0,this.Fe=W3(),this.Me=ss.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Lt(),n=Lt(),r=Lt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:vt(38017,{changeType:i})}})),new lx(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=W3()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,on(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iue{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ql(),this.Je=bb(),this.He=bb(),this.Ye=new Kn(Mt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:vt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(CT(i))if(r===0){const a=new ct(i.path);this.et(n,a,$s.newNoDocument(a,kt.min()))}else on(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,o;try{a=gu(r).toUint8Array()}catch(l){if(l instanceof IW)return mh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new tR(a,s,i)}catch(l){return mh(l instanceof Kg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(o)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,a)=>{const o=this.ot(a);if(o){if(i.current&&CT(o.target)){const l=new ct(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,$s.newNoDocument(l,e))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=Lt();this.He.forEach(((i,a)=>{let o=!0;a.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Ak(e,n,this.Ye,this.je,r);return this.je=Ql(),this.Je=bb(),this.He=bb(),this.Ye=new Kn(Mt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new U3,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Dr(Mt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Dr(Mt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U3),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bb(){return new Kn(ct.comparator)}function W3(){return new Kn(ct.comparator)}const aue={asc:"ASCENDING",desc:"DESCENDING"},oue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lue={and:"AND",or:"OR"};class cue{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ET(t,e){return t.useProto3Json||Sk(e)?e:{value:e}}function Bw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rG(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uue(t,e){return Bw(t,e.toTimestamp())}function Jo(t){return on(!!t,49232),kt.fromTimestamp((function(n){const r=mu(n);return new _n(r.seconds,r.nanos)})(t))}function nR(t,e){return TT(t,e).canonicalString()}function TT(t,e){const n=(function(s){return new Tn(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function sG(t){const e=Tn.fromString(t);return on(cG(e),10190,{key:e.toString()}),e}function _T(t,e){return nR(t.databaseId,e.path)}function KC(t,e){const n=sG(e);if(n.get(1)!==t.databaseId.projectId)throw new We(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new We(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ct(aG(n))}function iG(t,e){return nR(t.databaseId,e)}function due(t){const e=sG(t);return e.length===4?Tn.emptyPath():aG(e)}function AT(t){return new Tn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aG(t){return on(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function G3(t,e,n){return{name:_T(t,e),fields:n.value.mapValue.fields}}function hue(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:vt(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(c,u){return c.useProto3Json?(on(u===void 0||typeof u=="string",58123),ss.fromBase64String(u||"")):(on(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ss.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(c){const u=c.code===void 0?Ie.UNKNOWN:eG(c.code);return new We(u,c.message||"")})(a);n=new nG(r,s,i,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=KC(t,r.document.name),i=Jo(r.document.updateTime),a=r.document.createTime?Jo(r.document.createTime):kt.min(),o=new Li({mapValue:{fields:r.document.fields}}),l=$s.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new lw(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=KC(t,r.document),i=r.readTime?Jo(r.readTime):kt.min(),a=$s.newNoDocument(s,i),o=r.removedTargetIds||[];n=new lw([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=KC(t,r.document),i=r.removedTargetIds||[];n=new lw([],i,s,null)}else{if(!("filter"in e))return vt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new tue(s,i),o=r.targetId;n=new tG(o,a)}}return n}function fue(t,e){let n;if(e instanceof _k)n={update:G3(t,e.key,e.value)};else if(e instanceof ZW)n={delete:_T(t,e.key)};else if(e instanceof Hh)n={update:G3(t,e.key,e.data),updateMask:kue(e.fieldMask)};else{if(!(e instanceof Jce))return vt(16599,{Vt:e.type});n={verify:_T(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const o=a.transform;if(o instanceof Lw)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ey)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ty)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Vw)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw vt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:uue(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:vt(27497)})(t,e.precondition)),n}function pue(t,e){return t&&t.length>0?(on(e!==void 0,14353),t.map((n=>(function(s,i){let a=s.updateTime?Jo(s.updateTime):Jo(i);return a.isEqual(kt.min())&&(a=Jo(i)),new Xce(a,s.transformResults||[])})(n,e)))):[]}function mue(t,e){return{documents:[iG(t,e.path)]}}function gue(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iG(t,s);const i=(function(c){if(c.length!==0)return lG(vo.create(c,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const a=(function(c){if(c.length!==0)return c.map((u=>(function(p){return{field:ip(p.field),direction:vue(p.dir)}})(u)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ET(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:s}}function yue(t){let e=due(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){on(r===1,65062);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=(function(d){const p=oG(d);return p instanceof vo&&OW(p)?p.getFilters():[p]})(n.where));let a=[];n.orderBy&&(a=(function(d){return d.map((p=>(function(y){return new Iy(ap(y.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(p)))})(n.orderBy));let o=null;n.limit&&(o=(function(d){let p;return p=typeof d=="object"?d.value:d,Sk(p)?null:p})(n.limit));let l=null;n.startAt&&(l=(function(d){const p=!!d.before,g=d.values||[];return new Mw(g,p)})(n.startAt));let c=null;return n.endAt&&(c=(function(d){const p=!d.before,g=d.values||[];return new Mw(g,p)})(n.endAt)),Oce(e,s,a,i,o,"F",l,c)}function xue(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function oG(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ap(n.unaryFilter.field);return gr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ap(n.unaryFilter.field);return gr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ap(n.unaryFilter.field);return gr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ap(n.unaryFilter.field);return gr.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return vt(61313);default:return vt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return gr.create(ap(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return vt(58110);default:return vt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return vo.create(n.compositeFilter.filters.map((r=>oG(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return vt(1026)}})(n.compositeFilter.op))})(t):vt(30097,{filter:t})}function vue(t){return aue[t]}function bue(t){return oue[t]}function wue(t){return lue[t]}function ip(t){return{fieldPath:t.canonicalString()}}function ap(t){return Qr.fromServerFormat(t.fieldPath)}function lG(t){return t instanceof gr?(function(n){if(n.op==="=="){if($3(n.value))return{unaryFilter:{field:ip(n.field),op:"IS_NAN"}};if(R3(n.value))return{unaryFilter:{field:ip(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($3(n.value))return{unaryFilter:{field:ip(n.field),op:"IS_NOT_NAN"}};if(R3(n.value))return{unaryFilter:{field:ip(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ip(n.field),op:bue(n.op),value:n.value}}})(t):t instanceof vo?(function(n){const r=n.getFilters().map((s=>lG(s)));return r.length===1?r[0]:{compositeFilter:{op:wue(n.op),filters:r}}})(t):vt(54877,{filter:t})}function kue(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function cG(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,s,i=kt.min(),a=kt.min(),o=ss.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Jc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(e){this.yt=e}}function Nue(t){const e=yue({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(){this.Cn=new Iue}addToCollectionParentIndex(e,n){return this.Cn.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(pu.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(pu.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class Iue{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Dr(Tn.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Dr(Tn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uG=41943040;class yi{static withCacheSize(e){return new yi(e,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi.DEFAULT_COLLECTION_PERCENTILE=10,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yi.DEFAULT=new yi(uG,yi.DEFAULT_COLLECTION_PERCENTILE,yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yi.DISABLED=new yi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pp(0)}static cr(){return new Pp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="LruGarbageCollector",Eue=1048576;function K3([t,e],[n,r]){const s=Mt(t,n);return s===0?Mt(e,r):s}class Tue{constructor(e){this.Ir=e,this.buffer=new Dr(K3),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();K3(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _ue{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(q3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dm(n)?He(q3,"Ignoring IndexedDB error during garbage collection: ",n):await um(n)}await this.Vr(3e5)}))}}class Aue{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return _e.resolve(kk.ce);const r=new Tue(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(H3)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),H3):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s)))).next((d=>(r=d,o=Date.now(),this.removeTargets(e,r,n)))).next((d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(c=Date.now(),rp()<=Kt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${i} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d}))))}}function Rue(t,e){return new Aue(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ue{constructor(){this.changes=new Gh((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$s.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&cy(r.mutation,s,uo.empty(),_n.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Lt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Lt()){const s=Wd();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let a=qg();return i.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Wd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Lt())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,o)=>{n.set(a,o)}))}))}computeViews(e,n,r,s){let i=Ql();const a=ly(),o=(function(){return ly()})();return n.forEach(((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Hh)?i=i.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),cy(u.mutation,c,u.mutation.getFieldMask(),_n.now())):a.set(c.key,uo.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((c,u)=>a.set(c,u))),n.forEach(((c,u)=>o.set(c,new Pue(u,a.get(c)??null)))),o)))}recalculateAndSaveOverlays(e,n){const r=ly();let s=new Kn(((a,o)=>a-o)),i=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const o of a)o.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||uo.empty();u=o.applyToLocalView(c,u),r.set(l,u);const d=(s.get(o.batchId)||Lt()).add(l);s=s.insert(o.batchId,d)}))})).next((()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=GW();u.forEach((p=>{if(!i.has(p)){const g=QW(n.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}})),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return _e.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(a){return ct.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VW(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):_e.resolve(Wd());let o=Sy,l=i;return a.next((c=>_e.forEach(c,((u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),i.get(u)?_e.resolve():this.remoteDocumentCache.getEntry(e,u).next((p=>{l=l.insert(u,p)}))))).next((()=>this.populateOverlays(e,c,i))).next((()=>this.computeViews(e,l,c,Lt()))).next((u=>({batchId:o,changes:WW(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ct(n)).next((r=>{let s=qg();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=qg();return this.indexManager.getCollectionParents(e,i).next((o=>_e.forEach(o,(l=>{const c=(function(d,p){return new hm(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next((u=>{u.forEach(((d,p)=>{a=a.insert(d,p)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((a=>{i.forEach(((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,$s.newInvalidDocument(u)))}));let o=qg();return a.forEach(((l,c)=>{const u=i.get(l);u!==void 0&&cy(u.mutation,c,uo.empty(),_n.now()),Ik(n,c)&&(o=o.insert(l,c))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return _e.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Jo(s.createTime)}})(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:Nue(s.bundledQuery),readTime:Jo(s.readTime)}})(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{constructor(){this.overlays=new Kn(ct.comparator),this.qr=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wd();return _e.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),_e.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const s=Wd(),i=n.length+1,a=new ct(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return _e.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Kn(((c,u)=>c-u));const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Wd(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=Wd(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>o.set(c,u))),!(o.size()>=s)););return _e.resolve(o)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new eue(n,r));let i=this.qr.get(n);i===void 0&&(i=Lt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(){this.sessionToken=ss.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Qr=new Dr(Xr.$r),this.Ur=new Dr(Xr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Xr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Xr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ct(new Tn([])),r=new Xr(n,e),s=new Xr(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ct(new Tn([])),r=new Xr(n,e),s=new Xr(n,e+1);let i=Lt();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const n=new Xr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ct.comparator(e.key,n.key)||Mt(e.Yr,n.Yr)}static Kr(e,n){return Mt(e.Yr,n.Yr)||ct.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Dr(Xr.$r)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Zce(i,n,r,s);this.mutationQueue.push(a);for(const o of s)this.Zr=this.Zr.add(new Xr(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return _e.resolve(a)}lookupMutationBatch(e,n){return _e.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return _e.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?qA:this.tr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xr(n,0),s=new Xr(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const o=this.Xr(a.Yr);i.push(o)})),_e.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dr(Mt);return n.forEach((s=>{const i=new Xr(s,0),a=new Xr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(o=>{r=r.add(o.Yr)}))})),_e.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ct.isDocumentKey(i)||(i=i.child(""));const a=new Xr(new ct(i),0);let o=new Dr(Mt);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(o=o.add(l.Yr)),!0)}),a),_e.resolve(this.ti(o))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){on(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return _e.forEach(n.mutations,(s=>{const i=new Xr(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Xr(n,0),s=this.Zr.firstAfterOrEqual(r);return _e.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lue{constructor(e){this.ri=e,this.docs=(function(){return new Kn(ct.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():$s.newInvalidDocument(n))}getEntries(e,n){let r=Ql();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$s.newInvalidDocument(s))})),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ql();const a=n.path,o=new ct(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||pce(fce(u),r)<=0||(s.has(u.key)||Ik(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return _e.resolve(i)}getAllFromCollectionGroup(e,n,r,s){vt(9500)}ii(e,n){return _e.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Vue(this)}getSize(e){return _e.resolve(this.size)}}class Vue extends $ue{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),_e.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bue{constructor(e){this.persistence=e,this.si=new Gh((n=>YA(n)),QA),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.oi=0,this._i=new rR,this.targetCount=0,this.ai=Pp.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),_e.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Pr(n),_e.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)})),_e.waitFor(i).next((()=>s))}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),_e.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e,n){this.ui={},this.overlays={},this.ci=new kk(0),this.li=!1,this.li=!0,this.hi=new Mue,this.referenceDelegate=e(this),this.Pi=new Bue(this),this.indexManager=new Cue,this.remoteDocumentCache=(function(s){return new Lue(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Sue(n),this.Ii=new Due(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Oue,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Fue(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){He("MemoryPersistence","Starting transaction:",e);const s=new zue(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return _e.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class zue extends gce{constructor(e){super(),this.currentSequenceNumber=e}}class sR{constructor(e){this.persistence=e,this.Ri=new rR,this.Vi=null}static mi(e){return new sR(e)}get fi(){if(this.Vi)return this.Vi;throw vt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.fi,(r=>{const s=ct.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,kt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return _e.or([()=>_e.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zw{constructor(e,n){this.persistence=e,this.pi=new Gh((r=>vce(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Rue(this,n)}static mi(e,n){return new zw(e,n)}Ei(){}di(e){return _e.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return _e.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?_e.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,n).next((o=>{o||(r++,i.removeEntry(a,kt.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),_e.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),_e.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=iw(e.data.value)),n}br(e,n,r){return _e.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return _e.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Lt(),s=Lt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new iR(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wue{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ooe()?8:yce(joe())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new Uue;return this.Ss(e,n,a).next((o=>{if(i.result=o,this.Vs)return this.bs(e,n,a,o.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(rp()<=Kt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",sp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),_e.resolve()):(rp()<=Kt.DEBUG&&He("QueryEngine","Query:",sp(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(rp()<=Kt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",sp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qo(n))):_e.resolve())}ys(e,n){if(O3(n))return _e.resolve(null);let r=Qo(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Fw(n,null,"F"),r=Qo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=Lt(...i);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,Fw(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,s){return O3(n)||s.isEqual(kt.min())?_e.resolve(null):this.ps.getDocuments(e,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?_e.resolve(null):(rp()<=Kt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sp(n)),this.vs(e,a,n,hce(s,Sy)).next((o=>o)))}))}Ds(e,n){let r=new Dr(zW(e));return n.forEach(((s,i)=>{Ik(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return rp()<=Kt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",sp(n)),this.ps.getDocumentsMatchingQuery(e,n,pu.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="LocalStore",Gue=3e8;class Hue{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Kn(Mt),this.xs=new Gh((i=>YA(i)),QA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jue(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function que(t,e,n,r){return new Hue(t,e,n,r)}async function hG(t,e){const n=Ct(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],o=[];let l=Lt();for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:a,addedBatchIds:o})))}))}))}function Kue(t,e){const n=Ct(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,c,u){const d=c.batch,p=d.keys();let g=_e.resolve();return p.forEach((y=>{g=g.next((()=>u.getEntry(l,y))).next((x=>{const v=c.docVersions.get(y);on(v!==null,48541),x.version.compareTo(v)<0&&(d.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),u.addEntry(x)))}))})),g.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=Lt();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function fG(t){const e=Ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Xue(t,e){const n=Ct(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];e.targetChanges.forEach(((u,d)=>{const p=s.get(d);if(!p)return;o.push(n.Pi.removeMatchingKeys(i,u.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,u.addedDocuments,d))));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(ss.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),s=s.insert(d,g),(function(x,v,w){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Gue?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0})(p,g,u)&&o.push(n.Pi.updateTargetData(i,g))}));let l=Ql(),c=Lt();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})),o.push(Yue(i,a,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(kt.min())){const u=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));o.push(u)}return _e.waitFor(o).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,c))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function Yue(t,e,n){let r=Lt(),s=Lt();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let a=Ql();return n.forEach(((o,l)=>{const c=i.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(kt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):He(aR,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)})),{ks:a,qs:s}}))}function Que(t,e){const n=Ct(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=qA),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Jue(t,e){const n=Ct(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,_e.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new Jc(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function RT(t,e,n){const r=Ct(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!dm(a))throw a;He(aR,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function X3(t,e,n){const r=Ct(t);let s=kt.min(),i=Lt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,c,u){const d=Ct(l),p=d.xs.get(u);return p!==void 0?_e.resolve(d.Ms.get(p)):d.Pi.getTargetData(c,u)})(r,a,Qo(e)).next((o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:kt.min(),n?i:Lt()))).next((o=>(Zue(r,Fce(e),o),{documents:o,Qs:i})))))}function Zue(t,e,n){let r=t.Os.get(e)||kt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Y3{constructor(){this.activeTargetIds=Wce()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ede{constructor(){this.Mo=new Y3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Y3,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="ConnectivityMonitor";class J3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(Q3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(Q3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wb=null;function $T(){return wb===null?wb=(function(){return 268435456+Math.round(2147483648*Math.random())})():wb++,"0x"+wb.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="RestConnection",nde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rde{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Dw?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=$T(),o=this.zo(e,n.toUriEncodedString());He(XC,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:c}=new URL(o),u=WA(c);return this.Jo(e,o,l,r,u).then((d=>(He(XC,`Received RPC '${e}' ${a}: `,d),d)),(d=>{throw mh(XC,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d}))}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cm})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=nde[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="WebChannelConnection";class ide extends rde{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=$T();return new Promise(((o,l)=>{const c=new fW;c.setWithCredentials(!0),c.listenOnce(pW.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case sw.NO_ERROR:const d=c.getResponseJson();He(Es,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case sw.TIMEOUT:He(Es,`RPC '${e}' ${a} timed out`),l(new We(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case sw.HTTP_ERROR:const p=c.getStatus();if(He(Es,`RPC '${e}' ${a} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const x=(function(w){const k=w.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(k)>=0?k:Ie.UNKNOWN})(y.status);l(new We(x,y.message))}else l(new We(Ie.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new We(Ie.UNAVAILABLE,"Connection failed."));break;default:vt(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{He(Es,`RPC '${e}' ${a} completed.`)}}));const u=JSON.stringify(s);He(Es,`RPC '${e}' ${a} sending request:`,s),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const s=$T(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yW(),o=gW(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");He(Es,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=a.createWebChannel(u,l);this.I_(d);let p=!1,g=!1;const y=new sde({Yo:v=>{g?He(Es,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(p||(He(Es,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),He(Es,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},Zo:()=>d.close()}),x=(v,w,k)=>{v.listen(w,(S=>{try{k(S)}catch(I){setTimeout((()=>{throw I}),0)}}))};return x(d,Hg.EventType.OPEN,(()=>{g||(He(Es,`RPC '${e}' stream ${s} transport opened.`),y.o_())})),x(d,Hg.EventType.CLOSE,(()=>{g||(g=!0,He(Es,`RPC '${e}' stream ${s} transport closed`),y.a_(),this.E_(d))})),x(d,Hg.EventType.ERROR,(v=>{g||(g=!0,mh(Es,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),y.a_(new We(Ie.UNAVAILABLE,"The operation could not be completed")))})),x(d,Hg.EventType.MESSAGE,(v=>{if(!g){const w=v.data[0];on(!!w,16349);const k=w,S=k?.error||k[0]?.error;if(S){He(Es,`RPC '${e}' stream ${s} received error:`,S);const I=S.status;let E=(function(T){const $=pr[T];if($!==void 0)return eG($)})(I),j=S.message;E===void 0&&(E=Ie.INTERNAL,j="Unknown error status: "+I+" with message "+S.message),g=!0,y.a_(new We(E,j)),d.close()}else He(Es,`RPC '${e}' stream ${s} received:`,w),y.u_(w)}})),x(o,mW.STAT_EVENT,(v=>{v.stat===bT.PROXY?He(Es,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===bT.NOPROXY&&He(Es,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function YC(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){return new cue(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&He("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3="PersistentStream";class mG{constructor(e,n,r,s,i,a,o,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pG(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ie.RESOURCE_EXHAUSTED?(Yl(n.toString()),Yl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new We(Ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(Z3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(Z3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ade extends mG{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hue(this.serializer,e),r=(function(i){if(!("targetChange"in i))return kt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?kt.min():a.readTime?Jo(a.readTime):kt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=AT(this.serializer),n.addTarget=(function(i,a){let o;const l=a.target;if(o=CT(l)?{documents:mue(i,l)}:{query:gue(i,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=rG(i,a.resumeToken);const c=ET(i,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(kt.min())>0){o.readTime=Bw(i,a.snapshotVersion.toTimestamp());const c=ET(i,a.expectedCount);c!==null&&(o.expectedCount=c)}return o})(this.serializer,e);const r=xue(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=AT(this.serializer),n.removeTarget=e,this.q_(n)}}class ode extends mG{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return on(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,on(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){on(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pue(e.writeResults,e.commitTime),r=Jo(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=AT(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>fue(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lde{}class cde extends lde{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new We(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(e,TT(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new We(Ie.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,TT(n,r),s,a,o,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(Ie.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ude{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yl(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RemoteStore";class dde{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{qh(this)&&(He(gh,"Restarting streams for network reachability change."),await(async function(l){const c=Ct(l);c.Ea.add(4),await cx(c),c.Ra.set("Unknown"),c.Ea.delete(4),await $k(c)})(this))}))})),this.Ra=new ude(r,s)}}async function $k(t){if(qh(t))for(const e of t.da)await e(!0)}async function cx(t){for(const e of t.da)await e(!1)}function gG(t,e){const n=Ct(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),uR(n)?cR(n):fm(n).O_()&&lR(n,e))}function oR(t,e){const n=Ct(t),r=fm(n);n.Ia.delete(e),r.O_()&&yG(n,e),n.Ia.size===0&&(r.O_()?r.L_():qh(n)&&n.Ra.set("Unknown"))}function lR(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(kt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fm(t).Y_(e)}function yG(t,e){t.Va.Ue(e),fm(t).Z_(e)}function cR(t){t.Va=new iue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),fm(t).start(),t.Ra.ua()}function uR(t){return qh(t)&&!fm(t).x_()&&t.Ia.size>0}function qh(t){return Ct(t).Ea.size===0}function xG(t){t.Va=void 0}async function hde(t){t.Ra.set("Online")}async function fde(t){t.Ia.forEach(((e,n)=>{lR(t,e)}))}async function pde(t,e){xG(t),uR(t)?(t.Ra.ha(e),cR(t)):t.Ra.set("Unknown")}async function mde(t,e,n){if(t.Ra.set("Online"),e instanceof nG&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const o of i.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.Ia.delete(o),s.Va.removeTarget(o))})(t,e)}catch(r){He(gh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uw(t,r)}else if(e instanceof lw?t.Va.Ze(e):e instanceof tG?t.Va.st(e):t.Va.tt(e),!n.isEqual(kt.min()))try{const r=await fG(t.localStore);n.compareTo(r)>=0&&await(function(i,a){const o=i.Va.Tt(a);return o.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Ia.get(c);u&&i.Ia.set(c,u.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,c)=>{const u=i.Ia.get(l);if(!u)return;i.Ia.set(l,u.withResumeToken(ss.EMPTY_BYTE_STRING,u.snapshotVersion)),yG(i,l);const d=new Jc(u.target,l,c,u.sequenceNumber);lR(i,d)})),i.remoteSyncer.applyRemoteEvent(o)})(t,n)}catch(r){He(gh,"Failed to raise snapshot:",r),await Uw(t,r)}}async function Uw(t,e,n){if(!dm(e))throw e;t.Ea.add(1),await cx(t),t.Ra.set("Offline"),n||(n=()=>fG(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{He(gh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await $k(t)}))}function vG(t,e){return e().catch((n=>Uw(t,n,e)))}async function Pk(t){const e=Ct(t),n=xu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qA;for(;gde(e);)try{const s=await Que(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,yde(e,s)}catch(s){await Uw(e,s)}bG(e)&&wG(e)}function gde(t){return qh(t)&&t.Ta.length<10}function yde(t,e){t.Ta.push(e);const n=xu(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bG(t){return qh(t)&&!xu(t).x_()&&t.Ta.length>0}function wG(t){xu(t).start()}async function xde(t){xu(t).ra()}async function vde(t){const e=xu(t);for(const n of t.Ta)e.ea(n.mutations)}async function bde(t,e,n){const r=t.Ta.shift(),s=eR.from(r,e,n);await vG(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Pk(t)}async function wde(t,e){e&&xu(t).X_&&await(async function(r,s){if((function(a){return nue(a)&&a!==Ie.ABORTED})(s.code)){const i=r.Ta.shift();xu(r).B_(),await vG(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Pk(r)}})(t,e),bG(t)&&wG(t)}async function eF(t,e){const n=Ct(t);n.asyncQueue.verifyOperationInProgress(),He(gh,"RemoteStore received new credentials");const r=qh(n);n.Ea.add(3),await cx(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $k(n)}async function kde(t,e){const n=Ct(t);e?(n.Ea.delete(2),await $k(n)):e||(n.Ea.add(2),await cx(n),n.Ra.set("Unknown"))}function fm(t){return t.ma||(t.ma=(function(n,r,s){const i=Ct(n);return i.sa(),new ade(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:hde.bind(null,t),t_:fde.bind(null,t),r_:pde.bind(null,t),H_:mde.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),uR(t)?cR(t):t.Ra.set("Unknown")):(await t.ma.stop(),xG(t))}))),t.ma}function xu(t){return t.fa||(t.fa=(function(n,r,s){const i=Ct(n);return i.sa(),new ode(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xde.bind(null,t),r_:wde.bind(null,t),ta:vde.bind(null,t),na:bde.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Pk(t)):(await t.fa.stop(),t.Ta.length>0&&(He(gh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new eh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,o=new dR(e,n,a,s,i);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hR(t,e){if(Yl("AsyncQueue",`${e}: ${t}`),dm(t))return new We(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static emptySet(e){return new gp(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ct.comparator(n.key,r.key):(n,r)=>ct.comparator(n.key,r.key),this.keyedMap=qg(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.ga=new Kn(ct.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):vt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class jp{constructor(e,n,r,s,i,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach((o=>{a.push({type:0,doc:o})})),new jp(e,n,gp.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ck(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Nde{constructor(){this.queries=nF(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ct(n),i=s.queries;s.queries=nF(),i.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new We(Ie.ABORTED,"Firestore shutting down"))}}function nF(){return new Gh((t=>BW(t)),Ck)}async function Cde(t,e){const n=Ct(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new Sde,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=hR(a,`Initialization of query '${sp(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&fR(n)}async function Ide(t,e){const n=Ct(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ede(t,e){const n=Ct(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const o of a.Sa)o.Fa(s)&&(r=!0);a.wa=s}}r&&fR(n)}function Tde(t,e,n){const r=Ct(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function fR(t){t.Ca.forEach((e=>{e.next()}))}var PT,rF;(rF=PT||(PT={})).Ma="default",rF.Cache="cache";class _de{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new jp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==PT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e){this.key=e}}class SG{constructor(e){this.key=e}}class Ade{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Lt(),this.mutatedKeys=Lt(),this.eu=zW(e),this.tu=new gp(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new tF,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((u,d)=>{const p=s.get(u),g=Ik(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;p&&g?p.data.isEqual(g.data)?y!==x&&(r.track({type:3,doc:g}),v=!0):this.su(p,g)||(r.track({type:2,doc:g}),v=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(o=!0)):!p&&g?(r.track({type:0,doc:g}),v=!0):p&&!g&&(r.track({type:1,doc:p}),v=!0,(l||c)&&(o=!0)),v&&(g?(a=a.add(g),i=x?i.add(u):i.delete(u)):(a=a.delete(u),i=i.delete(u)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{tu:a,iu:r,Cs:o,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((u,d)=>(function(g,y){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt(20277,{Rt:v})}};return x(g)-x(y)})(u.type,d.type)||this.eu(u.doc,d.doc))),this.ou(r),s=s??!1;const o=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new jp(this.query,e.tu,i,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tF,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Lt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new SG(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new kG(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return jp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pR="SyncEngine";class Rde{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $de{constructor(e){this.key=e,this.hu=!1}}class Pde{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gh((o=>BW(o)),Ck),this.Iu=new Map,this.Eu=new Set,this.du=new Kn(ct.comparator),this.Au=new Map,this.Ru=new rR,this.Vu={},this.mu=new Map,this.fu=Pp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jde(t,e,n=!0){const r=_G(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await NG(r,e,n,!0),s}async function Dde(t,e){const n=_G(t);await NG(n,e,!0,!1)}async function NG(t,e,n,r){const s=await Jue(t.localStore,Qo(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await Ode(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&gG(t.remoteStore,s),o}async function Ode(t,e,n,r,s){t.pu=(d,p,g)=>(async function(x,v,w,k){let S=v.view.ru(w);S.Cs&&(S=await X3(x.localStore,v.query,!1).then((({documents:A})=>v.view.ru(A,S))));const I=k&&k.targetChanges.get(v.targetId),E=k&&k.targetMismatches.get(v.targetId)!=null,j=v.view.applyChanges(S,x.isPrimaryClient,I,E);return iF(x,v.targetId,j.au),j.snapshot})(t,d,p,g);const i=await X3(t.localStore,e,!0),a=new Ade(e,i.Qs),o=a.ru(i.documents),l=lx.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=a.applyChanges(o,t.isPrimaryClient,l);iF(t,n,c.au);const u=new Rde(e,n,a);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Mde(t,e,n){const r=Ct(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Ck(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await RT(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&oR(r.remoteStore,s.targetId),jT(r,s.targetId)})).catch(um)):(jT(r,s.targetId),await RT(r.localStore,s.targetId,!0))}async function Fde(t,e){const n=Ct(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oR(n.remoteStore,r.targetId))}async function Lde(t,e,n){const r=Hde(t);try{const s=await(function(a,o){const l=Ct(a),c=_n.now(),u=o.reduce(((g,y)=>g.add(y.key)),Lt());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let y=Ql(),x=Lt();return l.Ns.getEntries(g,u).next((v=>{y=v,y.forEach(((w,k)=>{k.isValidDocument()||(x=x.add(w))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,y))).next((v=>{d=v;const w=[];for(const k of o){const S=Qce(k,d.get(k.key).overlayedDocument);S!=null&&w.push(new Hh(k.key,S,PW(S.value.mapValue),Ul.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,o)})).next((v=>{p=v;const w=v.applyToLocalDocumentSet(d,x);return l.documentOverlayCache.saveOverlays(g,v.batchId,w)}))})).then((()=>({batchId:p.batchId,changes:WW(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Kn(Mt)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c})(r,s.batchId,n),await ux(r,s.changes),await Pk(r.remoteStore)}catch(s){const i=hR(s,"Failed to persist write");n.reject(i)}}async function CG(t,e){const n=Ct(t);try{const r=await Xue(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(on(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?on(a.hu,14607):s.removedDocuments.size>0&&(on(a.hu,42227),a.hu=!1))})),await ux(n,r,e)}catch(r){await um(r)}}function sF(t,e,n){const r=Ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const o=a.view.va(e);o.snapshot&&s.push(o.snapshot)})),(function(a,o){const l=Ct(a);l.onlineState=o;let c=!1;l.queries.forEach(((u,d)=>{for(const p of d.Sa)p.va(o)&&(c=!0)})),c&&fR(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vde(t,e,n){const r=Ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Kn(ct.comparator);a=a.insert(i,$s.newNoDocument(i,kt.min()));const o=Lt().add(i),l=new Ak(kt.min(),new Map,new Kn(Mt),a,o);await CG(r,l),r.du=r.du.remove(i),r.Au.delete(e),mR(r)}else await RT(r.localStore,e,!1).then((()=>jT(r,e,n))).catch(um)}async function Bde(t,e){const n=Ct(t),r=e.batch.batchId;try{const s=await Kue(n.localStore,e);EG(n,r,null),IG(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ux(n,s)}catch(s){await um(s)}}async function zde(t,e,n){const r=Ct(t);try{const s=await(function(a,o){const l=Ct(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next((d=>(on(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);EG(r,e,n),IG(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ux(r,s)}catch(s){await um(s)}}function IG(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function EG(t,e,n){const r=Ct(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function jT(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||TG(t,r)}))}function TG(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(oR(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mR(t))}function iF(t,e,n){for(const r of n)r instanceof kG?(t.Ru.addReference(r.key,e),Ude(t,r)):r instanceof SG?(He(pR,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||TG(t,r.key)):vt(19791,{wu:r})}function Ude(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(He(pR,"New document in limbo: "+n),t.Eu.add(r),mR(t))}function mR(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ct(Tn.fromString(e)),r=t.fu.next();t.Au.set(r,new $de(n)),t.du=t.du.insert(n,r),gG(t.remoteStore,new Jc(Qo(JA(n.path)),r,"TargetPurposeLimboResolution",kk.ce))}}async function ux(t,e,n){const r=Ct(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,n).then((c=>{if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){s.push(c);const u=iR.As(l.targetId,c);i.push(u)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(l,c){const u=Ct(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>_e.forEach(c,(p=>_e.forEach(p.Es,(g=>u.persistence.referenceDelegate.addReference(d,p.targetId,g))).next((()=>_e.forEach(p.ds,(g=>u.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))))))}catch(d){if(!dm(d))throw d;He(aR,"Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=u.Ms.get(p),y=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(p,x)}}})(r.localStore,i))}async function Wde(t,e){const n=Ct(t);if(!n.currentUser.isEqual(e)){He(pR,"User change. New user:",e.toKey());const r=await hG(n.localStore,e);n.currentUser=e,(function(i,a){i.mu.forEach((o=>{o.forEach((l=>{l.reject(new We(Ie.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ux(n,r.Ls)}}function Gde(t,e){const n=Ct(t),r=n.Au.get(e);if(r&&r.hu)return Lt().add(r.key);{let s=Lt();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const o=n.Tu.get(a);s=s.unionWith(o.view.nu)}return s}}function _G(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CG.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vde.bind(null,e),e.Pu.H_=Ede.bind(null,e.eventManager),e.Pu.yu=Tde.bind(null,e.eventManager),e}function Hde(t){const e=Ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zde.bind(null,e),e}class Ww{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rk(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return que(this.persistence,new Wue,e.initialUser,this.serializer)}Cu(e){return new dG(sR.mi,this.serializer)}Du(e){return new ede}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ww.provider={build:()=>new Ww};class qde extends Ww{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){on(this.persistence.referenceDelegate instanceof zw,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _ue(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yi.withCacheSize(this.cacheSizeBytes):yi.DEFAULT;return new dG((r=>zw.mi(r,n)),this.serializer)}}class DT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sF(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Wde.bind(null,this.syncEngine),await kde(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Nde})()}createDatastore(e){const n=Rk(e.databaseInfo.databaseId),r=(function(i){return new ide(i)})(e.databaseInfo);return(function(i,a,o,l){return new cde(i,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,a,o){return new dde(r,s,i,a,o)})(this.localStore,this.datastore,e.asyncQueue,(n=>sF(this.syncEngine,n,0)),(function(){return J3.v()?new J3:new tde})())}createSyncEngine(e,n){return(function(s,i,a,o,l,c,u){const d=new Pde(s,i,a,o,l,c);return u&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ct(n);He(gh,"RemoteStore shutting down."),r.Ea.add(5),await cx(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}DT.provider={build:()=>new DT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="FirestoreClient";class Xde{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=As.UNAUTHENTICATED,this.clientId=bk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{He(vu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(He(vu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hR(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function QC(t,e){t.asyncQueue.verifyOperationInProgress(),He(vu,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await hG(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function aF(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Yde(t);He(vu,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>eF(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>eF(e.remoteStore,s))),t._onlineComponents=e}async function Yde(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){He(vu,"Using user provided OfflineComponentProvider");try{await QC(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Ie.FAILED_PRECONDITION||s.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;mh("Error using user provided cache. Falling back to memory cache: "+n),await QC(t,new Ww)}}else He(vu,"Using default OfflineComponentProvider"),await QC(t,new qde(void 0));return t._offlineComponents}async function AG(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(He(vu,"Using user provided OnlineComponentProvider"),await aF(t,t._uninitializedComponentsProvider._online)):(He(vu,"Using default OnlineComponentProvider"),await aF(t,new DT))),t._onlineComponents}function Qde(t){return AG(t).then((e=>e.syncEngine))}async function oF(t){const e=await AG(t),n=e.eventManager;return n.onListen=jde.bind(null,e.syncEngine),n.onUnlisten=Mde.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dde.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Fde.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G="firestore.googleapis.com",cF=!0;class uF{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new We(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$G,this.ssl=cF}else this.host=e.host,this.ssl=e.ssl??cF;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uG;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Eue)throw new We(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RG(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new We(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jk{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uF({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uF(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bW;switch(r.type){case"firstParty":return new ice(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=lF.get(n);r&&(He("ComponentProvider","Removing Datastore"),lF.delete(n),r.terminate())})(this),Promise.resolve()}}function PG(t,e,n,r={}){t=th(t,jk);const s=WA(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;s&&(_oe(`https://${o}`),Poe("Firestore",!0)),i.host!==$G&&i.host!==o&&mh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:o,ssl:s,emulatorOptions:r};if(!Rw(l,a)&&(t._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=As.MOCK_USER;else{c=Aoe(r.mockUserToken,t._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new We(Ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new As(d)}t._authCredentials=new nce(new vW(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new uc(this.firestore,e,this._query)}}class cr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}toJSON(){return{type:cr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ox(n,cr._jsonSchema))return new cr(e,r||null,new ct(Tn.fromString(n.referencePath)))}}cr._jsonSchemaVersion="firestore/documentReference/1.0",cr._jsonSchema={type:yr("string",cr._jsonSchemaVersion),referencePath:yr("string")};class Wl extends uc{constructor(e,n,r){super(e,n,JA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new ct(e))}withConverter(e){return new Wl(this.firestore,e,this._path)}}function yh(t,e,...n){if(t=al(t),wW("collection","path",e),t instanceof jk){const r=Tn.fromString(e,...n);return k3(r),new Wl(t,null,r)}{if(!(t instanceof cr||t instanceof Wl))throw new We(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tn.fromString(e,...n));return k3(r),new Wl(t.firestore,null,r)}}function gR(t,e,...n){if(t=al(t),arguments.length===1&&(e=bk.newId()),wW("doc","path",e),t instanceof jk){const r=Tn.fromString(e,...n);return w3(r),new cr(t,null,new ct(r))}{if(!(t instanceof cr||t instanceof Wl))throw new We(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tn.fromString(e,...n));return w3(r),new cr(t.firestore,t instanceof Wl?t.converter:null,new ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF="AsyncQueue";class hF{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pG(this,"async_queue_retry"),this._c=()=>{const r=YC();r&&He(dF,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=YC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=YC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new eh;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dm(e))throw e;He(dF,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Yl("INTERNAL UNHANDLED ERROR: ",fF(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=dR.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&vt(47125,{Pc:fF(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fF(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class _y extends jk{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hF,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hF(e),this._firestoreClient=void 0,await e}}}function jG(t,e){const n=typeof t=="object"?t:Ule(),r=typeof t=="string"?t:e||Dw,s=Fle(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Eoe("firestore");i&&PG(s,...i)}return s}function yR(t){if(t._terminated)throw new We(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jde(t),t._firestoreClient}function Jde(t){const e=t._freezeSettings(),n=(function(s,i,a,o){return new kce(s,i,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,RG(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Xde(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vi(ss.fromBase64String(e))}catch(n){throw new We(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vi(ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ox(e,Vi._jsonSchema))return Vi.fromBase64String(e.bytes)}}Vi._jsonSchemaVersion="firestore/bytes/1.0",Vi._jsonSchema={type:yr("string",Vi._jsonSchemaVersion),bytes:yr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new We(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new We(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new We(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:po._jsonSchemaVersion}}static fromJSON(e){if(ox(e,po._jsonSchema))return new po(e.latitude,e.longitude)}}po._jsonSchemaVersion="firestore/geoPoint/1.0",po._jsonSchema={type:yr("string",po._jsonSchemaVersion),latitude:yr("number"),longitude:yr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ox(e,mo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mo(e.vectorValues);throw new We(Ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mo._jsonSchemaVersion="firestore/vectorValue/1.0",mo._jsonSchema={type:yr("string",mo._jsonSchemaVersion),vectorValues:yr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zde=/^__.*__$/;class DG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hh(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OG(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt(40011,{Ac:t})}}class xR{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gw(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(OG(this.Ac)&&Zde.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ehe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rk(e)}Cc(e,n,r,s=!1){return new xR({Ac:e,methodName:n,Dc:r,path:Qr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MG(t){const e=t._freezeSettings(),n=Rk(t._databaseId);return new ehe(t._databaseId,!!e.ignoreUndefinedProperties,n)}class Ok extends Dk{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ok}}function the(t,e,n,r){const s=t.Cc(1,e,n);LG("Data must be an object, but it was:",s,r);const i=[],a=Li.empty();Ou(r,((l,c)=>{const u=vR(e,l,n);c=al(c);const d=s.yc(u);if(c instanceof Ok)i.push(u);else{const p=hx(c,d);p!=null&&(i.push(u),a.set(u,p))}}));const o=new uo(i);return new DG(a,o,s.fieldTransforms)}function nhe(t,e,n,r,s,i){const a=t.Cc(1,e,n),o=[mF(e,r,n)],l=[s];if(i.length%2!=0)throw new We(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)o.push(mF(e,i[p])),l.push(i[p+1]);const c=[],u=Li.empty();for(let p=o.length-1;p>=0;--p)if(!ahe(c,o[p])){const g=o[p];let y=l[p];y=al(y);const x=a.yc(g);if(y instanceof Ok)c.push(g);else{const v=hx(y,x);v!=null&&(c.push(g),u.set(g,v))}}const d=new uo(c);return new DG(u,d,a.fieldTransforms)}function rhe(t,e,n,r=!1){return hx(n,t.Cc(r?4:3,e))}function hx(t,e){if(FG(t=al(t)))return LG("Unsupported field value:",e,t),she(t,e);if(t instanceof Dk)return(function(r,s){if(!OG(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const o of r){let l=hx(o,s.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),a++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=al(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gce(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_n.fromDate(r);return{timestampValue:Bw(s.serializer,i)}}if(r instanceof _n){const i=new _n(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bw(s.serializer,i)}}if(r instanceof po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vi)return{bytesValue:rG(s.serializer,r._byteString)};if(r instanceof cr){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:nR(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mo)return(function(a,o){return{mapValue:{fields:{[RW]:{stringValue:$W},[Ow]:{arrayValue:{values:a.toArray().map((c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return ZA(o.serializer,c)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${wk(r)}`)})(t,e)}function she(t,e){const n={};return CW(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(t,((r,s)=>{const i=hx(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function FG(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _n||t instanceof po||t instanceof Vi||t instanceof cr||t instanceof Dk||t instanceof mo)}function LG(t,e,n){if(!FG(n)||!SW(n)){const r=wk(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function mF(t,e,n){if((e=al(e))instanceof dx)return e._internalPath;if(typeof e=="string")return vR(t,e);throw Gw("Field path arguments must be of type string or ",t,!1,void 0,n)}const ihe=new RegExp("[~\\*/\\[\\]]");function vR(t,e,n){if(e.search(ihe)>=0)throw Gw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dx(...e.split("."))._internalPath}catch{throw Gw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gw(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new We(Ie.INVALID_ARGUMENT,o+t+l)}function ahe(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ohe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mk("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ohe extends VG{data(){return super.data()}}function Mk(t,e){return typeof e=="string"?vR(t,e):e instanceof dx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lhe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new We(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bR{}class Fk extends bR{}function Ay(t,e,...n){let r=[];e instanceof bR&&r.push(e),r=r.concat(n),(function(i){const a=i.filter((l=>l instanceof Lk)).length,o=i.filter((l=>l instanceof fx)).length;if(a>1||a>0&&o>0)throw new We(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class fx extends Fk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fx(e,n,r)}_apply(e){const n=this._parse(e);return BG(e._query,n),new uc(e.firestore,e.converter,IT(e._query,n))}_parse(e){const n=MG(e.firestore);return(function(i,a,o,l,c,u,d){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new We(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){yF(d,u);const y=[];for(const x of d)y.push(gF(l,i,x));p={arrayValue:{values:y}}}else p=gF(l,i,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||yF(d,u),p=rhe(o,a,d,u==="in"||u==="not-in");return gr.create(c,u,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wR(t,e,n){const r=e,s=Mk("where",t);return fx._create(s,r,n)}class Lk extends bR{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lk(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:vo.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let a=s;const o=i.getFlattenedFilters();for(const l of o)BG(a,l),a=IT(a,l)})(e._query,n),new uc(e.firestore,e.converter,IT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vk extends Fk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vk(e,n)}_apply(e){const n=(function(s,i,a){if(s.startAt!==null)throw new We(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new We(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iy(i,a)})(e._query,this._field,this._direction);return new uc(e.firestore,e.converter,(function(s,i){const a=s.explicitOrderBy.concat([i]);return new hm(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function Ry(t,e="asc"){const n=e,r=Mk("orderBy",t);return Vk._create(r,n)}class Bk extends Fk{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bk(e,n,r)}_apply(e){return new uc(e.firestore,e.converter,Fw(e._query,this._limit,this._limitType))}}function $y(t){return dce("limit",t),Bk._create("limit",t,"F")}function gF(t,e,n){if(typeof(n=al(n))=="string"){if(n==="")throw new We(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VW(e)&&n.indexOf("/")!==-1)throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Tn.fromString(n));if(!ct.isDocumentKey(r))throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return A3(t,new ct(r))}if(n instanceof cr)return A3(t,n._key);throw new We(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wk(n)}.`)}function yF(t,e){if(!Array.isArray(t)||t.length===0)throw new We(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BG(t,e){const n=(function(s,i){for(const a of s)for(const o of a.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new We(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class zG{convertValue(e,n="none"){switch(yu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw vt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ou(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Ow].arrayValue?.values?.map((r=>or(r.doubleValue)));return new mo(n)}convertGeoPoint(e){return new po(or(e.latitude),or(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nk(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ny(e));default:return null}}convertTimestamp(e){const n=mu(e);return new _n(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tn.fromString(e);on(cG(r),9688,{name:e});const s=new Ap(r.get(1),r.get(3)),i=new ct(r.popFirst(5));return s.isEqual(n)||Yl(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class up{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iu extends VG{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new We(Ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=iu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}iu._jsonSchemaVersion="firestore/documentSnapshot/1.0",iu._jsonSchema={type:yr("string",iu._jsonSchemaVersion),bundleSource:yr("string","DocumentSnapshot"),bundleName:yr("string"),bundle:yr("string")};class uy extends iu{data(e={}){return super.data(e)}}class nh{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new up(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new uy(this._firestore,this._userDataWriter,r.key,r,new up(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new We(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((o=>{const l=new uy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new up(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((o=>i||o.type!==3)).map((o=>{const l=new uy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new up(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:che(o.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new We(Ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function che(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt(61501,{type:t})}}nh._jsonSchemaVersion="firestore/querySnapshot/1.0",nh._jsonSchema={type:yr("string",nh._jsonSchemaVersion),bundleSource:yr("string","QuerySnapshot"),bundleName:yr("string"),bundle:yr("string")};class UG extends zG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,n)}}function uhe(t,e,n,...r){t=th(t,cr);const s=th(t.firestore,_y),i=MG(s);let a;return a=typeof(e=al(e))=="string"||e instanceof dx?nhe(i,"updateDoc",t._key,e,n,r):the(i,"updateDoc",t._key,e),WG(s,[a.toMutation(t._key,Ul.exists(!0))])}function Jl(t,...e){t=al(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pF(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(pF(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,a,o;if(t instanceof cr)a=th(t.firestore,_y),o=JA(t._key.path),i={next:l=>{e[r]&&e[r](dhe(a,t,l))},error:e[r+1],complete:e[r+2]};else{const l=th(t,uc);a=th(l.firestore,_y),o=l._query;const c=new UG(a);i={next:u=>{e[r]&&e[r](new nh(a,c,l,u))},error:e[r+1],complete:e[r+2]},lhe(t._query)}return(function(c,u,d,p){const g=new Kde(p),y=new _de(u,g,d);return c.asyncQueue.enqueueAndForget((async()=>Cde(await oF(c),y))),()=>{g.Nu(),c.asyncQueue.enqueueAndForget((async()=>Ide(await oF(c),y)))}})(yR(a),o,s,i)}function WG(t,e){return(function(r,s){const i=new eh;return r.asyncQueue.enqueueAndForget((async()=>Lde(await Qde(r),s,i))),i.promise})(yR(t),e)}function dhe(t,e,n){const r=n.docs.get(e._key),s=new UG(t);return new iu(t,s,e._key,r,new up(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){cm=s})(zle),Pw(new wy("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),o=new _y(new rce(r.getProvider("auth-internal")),new ace(a,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new We(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ap(c.options.projectId,u)})(a,s),a);return i={useFetchStreams:n,...i},o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),mp(y3,x3,e),mp(y3,x3,"esm2020")})();const hhe=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:zG,Bytes:Vi,CollectionReference:Wl,DocumentReference:cr,DocumentSnapshot:iu,FieldPath:dx,FieldValue:Dk,Firestore:_y,FirestoreError:We,GeoPoint:po,Query:uc,QueryCompositeFilterConstraint:Lk,QueryConstraint:Fk,QueryDocumentSnapshot:uy,QueryFieldFilterConstraint:fx,QueryLimitConstraint:Bk,QueryOrderByConstraint:Vk,QuerySnapshot:nh,SnapshotMetadata:up,Timestamp:_n,VectorValue:mo,_AutoId:bk,_ByteString:ss,_DatabaseId:Ap,_DocumentKey:ct,_EmptyAuthCredentialsProvider:bW,_FieldPath:Qr,_cast:th,_logWarn:mh,_validateIsNotUsedTogether:kW,collection:yh,connectFirestoreEmulator:PG,doc:gR,ensureFirestoreConfigured:yR,executeWrite:WG,getFirestore:jG,limit:$y,onSnapshot:Jl,orderBy:Ry,query:Ay,updateDoc:uhe,where:wR},Symbol.toStringTag,{value:"Module"})),fhe={apiKey:"AIzaSyCjGcz4kBFwmFlv_1qeSHMp93EqhNt9fvM",authDomain:"greenova-app.firebaseapp.com",projectId:"greenova-app",storageBucket:"greenova-app.firebasestorage.app",messagingSenderId:"883705279570",appId:"1:883705279570:web:78610b1820a2688fd91b8b"},phe=cW(fhe),bu=jG(phe),wu={STATION_STATUS:"stationStatus",PLANT_READINGS:"plantReadings",ROBOT_STATUS:"robotStatus",AIR_READINGS:"airReadings"};class mhe{static subscribeToStations(e){const n=yh(bu,wu.STATION_STATUS);return Jl(n,r=>{const s=[];r.forEach(i=>{s.push({id:i.id,...i.data()})}),e(s)})}static subscribeToStation(e,n){const r=gR(bu,wu.STATION_STATUS,e);return Jl(r,s=>{s.exists()?n(s.data()):n(null)})}}class ghe{static subscribeToPlantReadings(e,n){const r=yh(bu,wu.PLANT_READINGS),s=Ay(r,wR("station_id","==",e),Ry("timestamp","desc"),$y(100));return Jl(s,i=>{const a=[];i.forEach(o=>{a.push({id:o.id,...o.data()})}),n(a)})}static subscribeToAllPlantReadings(e){const n=yh(bu,wu.PLANT_READINGS),r=Ay(n,Ry("timestamp","desc"),$y(50));return Jl(r,s=>{const i=[];s.forEach(a=>{i.push({id:a.id,...a.data()})}),e(i)})}}class yhe{static subscribeToRobots(e){const n=yh(bu,wu.ROBOT_STATUS);return Jl(n,r=>{const s=[];r.forEach(i=>{s.push({id:i.id,...i.data()})}),e(s)})}static subscribeToRobot(e,n){const r=gR(bu,wu.ROBOT_STATUS,e);return Jl(r,s=>{s.exists()?n(s.data()):n(null)})}}class xhe{static subscribeToAirReadings(e,n){const r=yh(bu,wu.AIR_READINGS),s=Ay(r,wR("robot_id","==",e),Ry("timestamp","desc"),$y(100));return Jl(s,i=>{const a=[];i.forEach(o=>{a.push({id:o.id,...o.data()})}),n(a)})}static subscribeToAllAirReadings(e){const n=yh(bu,wu.AIR_READINGS),r=Ay(n,Ry("timestamp","desc"),$y(50));return Jl(r,s=>{const i=[];s.forEach(a=>{i.push({id:a.id,...a.data()})}),e(i)})}}const yl=()=>{const[t,e]=_.useState([]),[n,r]=_.useState([]),[s,i]=_.useState([]),[a,o]=_.useState([]),[l,c]=_.useState(!0),[u,d]=_.useState(null);return _.useEffect(()=>{const p=[];try{const g=yhe.subscribeToRobots(w=>{const k=w.map(S=>({robot_id:S.robot_id||"N/A",battery:S.battery??0,city_loc:S.city_loc||"N/A",last_seen:S.last_seen||null,location:S.location||{latitude:0,longitude:0},signal_strength:S.signal_strength??0,fan_status:S.fan_status??!1}));e(k)});p.push(g);const y=mhe.subscribeToStations(w=>{const k=w.map(S=>({station_id:S.station_id||"N/A",battery:S.battery??0,city_loc:S.city_loc||"N/A",last_seen:S.last_seen||null,location:S.location||{latitude:0,longitude:0},signal_strength:S.signal_strength??0,watering_status:S.watering_status??!1,last_plant_watering:S.last_plant_watering||"N/A"}));r(k)});p.push(y);const x=xhe.subscribeToAllAirReadings(w=>{const k=w.map(S=>({robot_id:S.robot_id||"N/A",aq_status:S.aq_status||"N/A",distance:S.distance??0,dust_pm25:S.dust_pm25??0,gas_ppm:S.gas_ppm??0,humidity:S.humidity??0,temperature:S.temperature??0,timestamp:S.timestamp||null}));i(k)});p.push(x);const v=ghe.subscribeToAllPlantReadings(w=>{const k=w.map(S=>({station_id:S.station_id||"N/A",timestamp:S.timestamp||null,...S}));o(k)});p.push(v),console.log("Successfully connected to Firebase database"),c(!1)}catch(g){console.error("Firebase connection failed:",g),d("Failed to connect to Firebase database"),c(!1),e([]),r([]),i([]),o([])}return()=>{p.forEach(g=>{try{g()}catch(y){console.warn("Error during cleanup:",y)}})}},[]),{robots:t,stations:n,airReadings:s,plantReadings:a,loading:l,error:u}},xF=[{id:"admin-dashboard",icon:wn,label:"Robot Dashboard"},{id:"admin-station-dashboard",icon:Zr,label:"Station Dashboard"},{id:"admin-history",icon:ose,label:"Riwayat"},{id:"admin-settings",icon:pk,label:"Pengaturan"}];function vhe({children:t,currentPage:e,onPageChange:n,onLogout:r,userInfo:s,onUserUpdate:i,selectedRobotId:a,onRobotSelect:o,selectedStationId:l,onStationSelect:c}){const[u,d]=_.useState(!1),[p,g]=_.useState(!1),[y,x]=_.useState(!1),[v,w]=_.useState(""),[k,S]=_.useState(""),[I,E]=_.useState("robots"),{theme:j,toggleTheme:A}=wU(),{robots:T,stations:$,loading:D}=yl();if(D)return h.jsx("div",{className:"flex items-center justify-center h-screen",children:h.jsxs("div",{className:"text-center",children:[h.jsx(wn,{className:"h-8 w-8 animate-pulse mx-auto mb-2"}),h.jsx("p",{className:"text-muted-foreground",children:"Loading admin dashboard..."})]})});const R=(T||[]).filter(H=>H.robot_id.toLowerCase().includes(v.toLowerCase())||H.city_loc.toLowerCase().includes(v.toLowerCase())),F=($||[]).filter(H=>H.station_id.toLowerCase().includes(k.toLowerCase())||H.city_loc.toLowerCase().includes(k.toLowerCase())),L=(H=!0)=>H?h.jsx(fh,{className:"h-3 w-3 text-green-500"}):h.jsx(DA,{className:"h-3 w-3 text-red-500"}),K=(H=!0)=>H?"bg-green-500":"bg-red-500",X=(H=!1)=>H?h.jsx(Zr,{className:"h-3 w-3 text-blue-500"}):h.jsx(Zr,{className:"h-3 w-3 text-gray-500"}),q=(H=!1)=>H?"bg-blue-500":"bg-gray-500",Q={online:T?.length||0,offline:0,maintenance:0,total:T?.length||0},z={active:$?.filter(H=>H.watering_status).length||0,inactive:$?.filter(H=>!H.watering_status).length||0,maintenance:0,offline:0,total:$?.length||0};return h.jsxs("div",{className:"flex h-screen bg-background",children:[h.jsx(Le,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden",onClick:()=>d(!u),children:u?h.jsx(Zd,{className:"h-6 w-6"}):h.jsx(Z6,{className:"h-6 w-6"})}),h.jsx("div",{className:`
        fixed inset-y-0 left-0 z-40 w-80 bg-card border-r border-border transform transition-transform duration-300 ease-in-out overflow-y-auto
        md:relative md:translate-x-0
        ${u?"translate-x-0":"-translate-x-full"}
      `,children:h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-border",children:[h.jsx("div",{className:"p-2 bg-primary rounded-lg",children:h.jsx(wn,{className:"h-6 w-6 text-primary-foreground"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"font-semibold text-primary",children:"GREENOVA"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin Panel"})]})]}),h.jsx("div",{className:"p-4 border-b border-border",children:h.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[h.jsx("button",{className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${I==="robots"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,onClick:()=>E("robots"),children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(wn,{className:"h-3 w-3"}),h.jsxs("span",{children:["Robots (",Q.total,")"]})]})}),h.jsx("button",{className:`flex-1 px-3 py-2 text-xs font-medium transition-colors ${I==="stations"?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,onClick:()=>E("stations"),children:h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Zr,{className:"h-3 w-3"}),h.jsxs("span",{children:["Stations (",z.total,")"]})]})})]})}),h.jsxs("div",{className:"p-4 border-b border-border",children:[h.jsx("h3",{className:"text-sm font-medium mb-3",children:I==="robots"?"Robot Status":"Station Status"}),I==="robots"?h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),h.jsxs("span",{children:["Online: ",Q.online]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),h.jsxs("span",{children:["Offline: ",Q.offline]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),h.jsxs("span",{children:["Maintenance: ",Q.maintenance]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),h.jsxs("span",{children:["Total: ",Q.total]})]})]}):h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),h.jsxs("span",{children:["Active: ",z.active]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),h.jsxs("span",{children:["Inactive: ",z.inactive]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),h.jsxs("span",{children:["Maintenance: ",z.maintenance]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),h.jsxs("span",{children:["Offline: ",z.offline]})]})]})]}),h.jsx("div",{className:"p-4 border-b border-border",children:h.jsxs("div",{className:"relative",children:[h.jsx(Use,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Pt,{placeholder:I==="robots"?"Cari robot...":"Cari station...",value:I==="robots"?v:k,onChange:H=>I==="robots"?w(H.target.value):S(H.target.value),className:"pl-10"})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto",children:h.jsx("div",{className:"p-4",children:I==="robots"?h.jsxs(h.Fragment,{children:[h.jsxs("h3",{className:"text-sm font-medium mb-3",children:["Daftar Robot (",R.length,")"]}),h.jsx("div",{className:"space-y-2",children:R.map(H=>h.jsx(Le,{variant:a===H.robot_id?"default":"ghost",className:`w-full justify-start p-3 h-auto ${a===H.robot_id?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>{o(H.robot_id),d(!1)},children:h.jsxs("div",{className:"flex items-start gap-3 w-full",children:[h.jsxs("div",{className:"relative",children:[h.jsx(wn,{className:"h-5 w-5"}),h.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 ${K(!0)} rounded-full animate-pulse`})]}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"font-medium text-sm",children:H.robot_id}),L(!0)]}),h.jsx("p",{className:"text-xs opacity-60 mt-1",children:H.city_loc}),h.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[h.jsxs("span",{children:[" ",H.battery,"%"]}),h.jsxs("span",{children:[" ",H.signal_strength,"%"]})]})]})]})},H.robot_id))})]}):h.jsxs(h.Fragment,{children:[h.jsxs("h3",{className:"text-sm font-medium mb-3",children:["Daftar Station (",F.length,")"]}),h.jsx("div",{className:"space-y-2",children:F.map(H=>h.jsx(Le,{variant:l===H.station_id?"default":"ghost",className:`w-full justify-start p-3 h-auto ${l===H.station_id?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>{c(H.station_id),d(!1)},children:h.jsxs("div",{className:"flex items-start gap-3 w-full",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Zr,{className:"h-5 w-5"}),h.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 ${q(H.watering_status)} rounded-full animate-pulse`})]}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"font-medium text-sm",children:H.station_id}),X(H.watering_status)]}),h.jsx("p",{className:"text-xs opacity-60 mt-1",children:H.city_loc}),h.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs",children:[h.jsxs("span",{children:[" ",H.battery,"%"]}),h.jsxs("span",{children:[" ",H.signal_strength,"%"]})]})]})]})},H.station_id))})]})})}),h.jsx("div",{className:"p-4 border-t border-border",children:h.jsx("nav",{className:"space-y-2",children:xF.map(H=>{const ee=e===H.id;return h.jsxs(Le,{variant:ee?"default":"ghost",className:`w-full justify-start gap-3 ${ee?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"}`,onClick:()=>{n(H.id),d(!1)},children:[h.jsx(H.icon,{className:"h-4 w-4"}),H.label]},H.id)})})})]})}),u&&h.jsx("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50 md:hidden",onClick:()=>d(!1)}),h.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[h.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-border bg-card",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:xF.find(H=>H.id===e)?.label||"Dashboard"}),a&&h.jsx(Ft,{variant:"outline",className:"text-xs",children:T?.find(H=>H.robot_id===a)?.robot_id||a}),l&&h.jsx(Ft,{variant:"outline",className:"text-xs",children:$?.find(H=>H.station_id===l)?.station_id||l})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Le,{variant:"ghost",size:"icon",onClick:A,className:"h-9 w-9",children:j==="dark"?h.jsx(jA,{className:"h-4 w-4"}):h.jsx(eU,{className:"h-4 w-4"})}),h.jsxs(Le,{variant:"ghost",size:"icon",onClick:()=>x(!0),className:"relative h-9 w-9",children:[h.jsx(fp,{className:"h-4 w-4"}),h.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]}),h.jsxs(Le,{variant:"ghost",className:"flex items-center gap-2 h-9 px-3",onClick:()=>g(!0),children:[h.jsx(NU,{className:"h-7 w-7",children:h.jsx(CU,{className:"text-xs",children:s.username.slice(0,2).toUpperCase()})}),h.jsx("span",{className:"hidden md:block text-sm",children:s.username}),h.jsx(dk,{className:"h-3 w-3"})]}),h.jsx(Le,{variant:"ghost",size:"icon",onClick:r,className:"h-9 w-9 text-red-500 hover:text-red-600 hover:bg-red-50",children:h.jsx(Cse,{className:"h-4 w-4"})})]})]}),h.jsx("main",{className:"flex-1 overflow-auto p-6",children:t})]}),h.jsx(Zae,{isOpen:p,onClose:()=>g(!1),userInfo:s,onUserUpdate:i}),h.jsx(goe,{isOpen:y,onClose:()=>x(!1)})]})}var kR="Progress",SR=100,[bhe,ret]=Co(kR),[whe,khe]=bhe(kR),GG=_.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=She,...a}=t;(s||s===0)&&!vF(s)&&console.error(Nhe(`${s}`,"Progress"));const o=vF(s)?s:SR;r!==null&&!bF(r,o)&&console.error(Che(`${r}`,"Progress"));const l=bF(r,o)?r:null,c=Hw(l)?i(l,o):void 0;return h.jsx(whe,{scope:n,value:l,max:o,children:h.jsx(bt.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Hw(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":KG(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});GG.displayName=kR;var HG="ProgressIndicator",qG=_.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=khe(HG,n);return h.jsx(bt.div,{"data-state":KG(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});qG.displayName=HG;function She(t,e){return`${Math.round(t/e*100)}%`}function KG(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Hw(t){return typeof t=="number"}function vF(t){return Hw(t)&&!isNaN(t)&&t>0}function bF(t,e){return Hw(t)&&!isNaN(t)&&t<=e&&t>=0}function Nhe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${SR}\`.`}function Che(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${SR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ihe=GG,Ehe=qG;function au({className:t,value:e,...n}){return h.jsx(Ihe,{"data-slot":"progress",className:It("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...n,children:h.jsx(Ehe,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function The(t,e=globalThis?.document){const n=Xs(t);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var _he="DismissableLayer",OT="dismissableLayer.update",Ahe="dismissableLayer.pointerDownOutside",Rhe="dismissableLayer.focusOutside",wF,XG=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),YG=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=t,c=_.useContext(XG),[u,d]=_.useState(null),p=u?.ownerDocument??globalThis?.document,[,g]=_.useState({}),y=Wt(e,A=>d(A)),x=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(v),k=u?x.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,I=k>=w,E=jhe(A=>{const T=A.target,$=[...c.branches].some(D=>D.contains(T));!I||$||(s?.(A),a?.(A),A.defaultPrevented||o?.())},p),j=Dhe(A=>{const T=A.target;[...c.branches].some(D=>D.contains(T))||(i?.(A),a?.(A),A.defaultPrevented||o?.())},p);return The(A=>{k===c.layers.size-1&&(r?.(A),!A.defaultPrevented&&o&&(A.preventDefault(),o()))},p),_.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(wF=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),kF(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=wF)}},[u,p,n,c]),_.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),kF())},[u,c]),_.useEffect(()=>{const A=()=>g({});return document.addEventListener(OT,A),()=>document.removeEventListener(OT,A)},[]),h.jsx(bt.div,{...l,ref:y,style:{pointerEvents:S?I?"auto":"none":void 0,...t.style},onFocusCapture:St(t.onFocusCapture,j.onFocusCapture),onBlurCapture:St(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:St(t.onPointerDownCapture,E.onPointerDownCapture)})});YG.displayName=_he;var $he="DismissableLayerBranch",Phe=_.forwardRef((t,e)=>{const n=_.useContext(XG),r=_.useRef(null),s=Wt(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),h.jsx(bt.div,{...t,ref:s})});Phe.displayName=$he;function jhe(t,e=globalThis?.document){const n=Xs(t),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){QG(Ahe,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Dhe(t,e=globalThis?.document){const n=Xs(t),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&QG(Rhe,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function kF(){const t=new CustomEvent(OT);document.dispatchEvent(t)}function QG(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?xae(s,i):s.dispatchEvent(i)}var JC=0;function Ohe(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??SF()),document.body.insertAdjacentElement("beforeend",t[1]??SF()),JC++,()=>{JC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),JC--}},[])}function SF(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ZC="focusScope.autoFocusOnMount",eI="focusScope.autoFocusOnUnmount",NF={bubbles:!1,cancelable:!0},Mhe="FocusScope",JG=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[o,l]=_.useState(null),c=Xs(s),u=Xs(i),d=_.useRef(null),p=Wt(e,x=>l(x)),g=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let x=function(S){if(g.paused||!o)return;const I=S.target;o.contains(I)?d.current=I:qc(d.current,{select:!0})},v=function(S){if(g.paused||!o)return;const I=S.relatedTarget;I!==null&&(o.contains(I)||qc(d.current,{select:!0}))},w=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&qc(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const k=new MutationObserver(w);return o&&k.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),k.disconnect()}}},[r,o,g.paused]),_.useEffect(()=>{if(o){IF.add(g);const x=document.activeElement;if(!o.contains(x)){const w=new CustomEvent(ZC,NF);o.addEventListener(ZC,c),o.dispatchEvent(w),w.defaultPrevented||(Fhe(Uhe(ZG(o)),{select:!0}),document.activeElement===x&&qc(o))}return()=>{o.removeEventListener(ZC,c),setTimeout(()=>{const w=new CustomEvent(eI,NF);o.addEventListener(eI,u),o.dispatchEvent(w),w.defaultPrevented||qc(x??document.body,{select:!0}),o.removeEventListener(eI,u),IF.remove(g)},0)}}},[o,c,u,g]);const y=_.useCallback(x=>{if(!n&&!r||g.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(v&&w){const k=x.currentTarget,[S,I]=Lhe(k);S&&I?!x.shiftKey&&w===I?(x.preventDefault(),n&&qc(S,{select:!0})):x.shiftKey&&w===S&&(x.preventDefault(),n&&qc(I,{select:!0})):w===k&&x.preventDefault()}},[n,r,g.paused]);return h.jsx(bt.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});JG.displayName=Mhe;function Fhe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(qc(r,{select:e}),document.activeElement!==n)return}function Lhe(t){const e=ZG(t),n=CF(e,t),r=CF(e.reverse(),t);return[n,r]}function ZG(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function CF(t,e){for(const n of t)if(!Vhe(n,{upTo:e}))return n}function Vhe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Bhe(t){return t instanceof HTMLInputElement&&"select"in t}function qc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Bhe(t)&&e&&t.select()}}var IF=zhe();function zhe(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=EF(t,e),t.unshift(e)},remove(e){t=EF(t,e),t[0]?.resume()}}}function EF(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Uhe(t){return t.filter(e=>e.tagName!=="A")}const Whe=["top","right","bottom","left"],ku=Math.min,Mi=Math.max,qw=Math.round,kb=Math.floor,Zo=t=>({x:t,y:t}),Ghe={left:"right",right:"left",bottom:"top",top:"bottom"},Hhe={start:"end",end:"start"};function MT(t,e,n){return Mi(t,ku(e,n))}function Zl(t,e){return typeof t=="function"?t(e):t}function ec(t){return t.split("-")[0]}function pm(t){return t.split("-")[1]}function NR(t){return t==="x"?"y":"x"}function CR(t){return t==="y"?"height":"width"}const qhe=new Set(["top","bottom"]);function Ko(t){return qhe.has(ec(t))?"y":"x"}function IR(t){return NR(Ko(t))}function Khe(t,e,n){n===void 0&&(n=!1);const r=pm(t),s=IR(t),i=CR(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Kw(a)),[a,Kw(a)]}function Xhe(t){const e=Kw(t);return[FT(t),e,FT(e)]}function FT(t){return t.replace(/start|end/g,e=>Hhe[e])}const TF=["left","right"],_F=["right","left"],Yhe=["top","bottom"],Qhe=["bottom","top"];function Jhe(t,e,n){switch(t){case"top":case"bottom":return n?e?_F:TF:e?TF:_F;case"left":case"right":return e?Yhe:Qhe;default:return[]}}function Zhe(t,e,n,r){const s=pm(t);let i=Jhe(ec(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(FT)))),i}function Kw(t){return t.replace(/left|right|bottom|top/g,e=>Ghe[e])}function efe(t){return{top:0,right:0,bottom:0,left:0,...t}}function e8(t){return typeof t!="number"?efe(t):{top:t,right:t,bottom:t,left:t}}function Xw(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function AF(t,e,n){let{reference:r,floating:s}=t;const i=Ko(e),a=IR(e),o=CR(a),l=ec(e),c=i==="y",u=r.x+r.width/2-s.width/2,d=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let g;switch(l){case"top":g={x:u,y:r.y-s.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-s.width,y:d};break;default:g={x:r.x,y:r.y}}switch(pm(e)){case"start":g[a]-=p*(n&&c?-1:1);break;case"end":g[a]+=p*(n&&c?-1:1);break}return g}const tfe=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:d}=AF(c,r,l),p=r,g={},y=0;for(let x=0;x<o.length;x++){const{name:v,fn:w}=o[x],{x:k,y:S,data:I,reset:E}=await w({x:u,y:d,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:c,platform:a,elements:{reference:t,floating:e}});u=k??u,d=S??d,g={...g,[v]:{...g[v],...I}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(c=E.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):E.rects),{x:u,y:d}=AF(c,p,l)),x=-1)}return{x:u,y:d,placement:p,strategy:s,middlewareData:g}};async function Py(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:g=0}=Zl(e,t),y=e8(g),v=o[p?d==="floating"?"reference":"floating":d],w=Xw(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),k=d==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),I=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},E=Xw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:k,offsetParent:S,strategy:l}):k);return{top:(w.top-E.top+y.top)/I.y,bottom:(E.bottom-w.bottom+y.bottom)/I.y,left:(w.left-E.left+y.left)/I.x,right:(E.right-w.right+y.right)/I.x}}const nfe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=Zl(t,e)||{};if(c==null)return{};const d=e8(u),p={x:n,y:r},g=IR(s),y=CR(g),x=await a.getDimensions(c),v=g==="y",w=v?"top":"left",k=v?"bottom":"right",S=v?"clientHeight":"clientWidth",I=i.reference[y]+i.reference[g]-p[g]-i.floating[y],E=p[g]-i.reference[g],j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let A=j?j[S]:0;(!A||!await(a.isElement==null?void 0:a.isElement(j)))&&(A=o.floating[S]||i.floating[y]);const T=I/2-E/2,$=A/2-x[y]/2-1,D=ku(d[w],$),R=ku(d[k],$),F=D,L=A-x[y]-R,K=A/2-x[y]/2+T,X=MT(F,K,L),q=!l.arrow&&pm(s)!=null&&K!==X&&i.reference[y]/2-(K<F?D:R)-x[y]/2<0,Q=q?K<F?K-F:K-L:0;return{[g]:p[g]+Q,data:{[g]:X,centerOffset:K-X-Q,...q&&{alignmentOffset:Q}},reset:q}}}),rfe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...v}=Zl(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=ec(s),k=Ko(o),S=ec(o)===o,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=p||(S||!x?[Kw(o)]:Xhe(o)),j=y!=="none";!p&&j&&E.push(...Zhe(o,x,y,I));const A=[o,...E],T=await Py(e,v),$=[];let D=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&$.push(T[w]),d){const K=Khe(s,a,I);$.push(T[K[0]],T[K[1]])}if(D=[...D,{placement:s,overflows:$}],!$.every(K=>K<=0)){var R,F;const K=(((R=i.flip)==null?void 0:R.index)||0)+1,X=A[K];if(X&&(!(d==="alignment"?k!==Ko(X):!1)||D.every(z=>Ko(z.placement)===k?z.overflows[0]>0:!0)))return{data:{index:K,overflows:D},reset:{placement:X}};let q=(F=D.filter(Q=>Q.overflows[0]<=0).sort((Q,z)=>Q.overflows[1]-z.overflows[1])[0])==null?void 0:F.placement;if(!q)switch(g){case"bestFit":{var L;const Q=(L=D.filter(z=>{if(j){const H=Ko(z.placement);return H===k||H==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(H=>H>0).reduce((H,ee)=>H+ee,0)]).sort((z,H)=>z[1]-H[1])[0])==null?void 0:L[0];Q&&(q=Q);break}case"initialPlacement":q=o;break}if(s!==q)return{reset:{placement:q}}}return{}}}};function RF(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $F(t){return Whe.some(e=>t[e]>=0)}const sfe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Zl(t,e);switch(r){case"referenceHidden":{const i=await Py(e,{...s,elementContext:"reference"}),a=RF(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:$F(a)}}}case"escaped":{const i=await Py(e,{...s,altBoundary:!0}),a=RF(i,n.floating);return{data:{escapedOffsets:a,escaped:$F(a)}}}default:return{}}}}},t8=new Set(["left","top"]);async function ife(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ec(n),o=pm(n),l=Ko(n)==="y",c=t8.has(a)?-1:1,u=i&&l?-1:1,d=Zl(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof y=="number"&&(g=o==="end"?y*-1:y),l?{x:g*u,y:p*c}:{x:p*c,y:g*u}}const afe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:o}=e,l=await ife(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},ofe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:w,y:k}=v;return{x:w,y:k}}},...l}=Zl(t,e),c={x:n,y:r},u=await Py(e,l),d=Ko(ec(s)),p=NR(d);let g=c[p],y=c[d];if(i){const v=p==="y"?"top":"left",w=p==="y"?"bottom":"right",k=g+u[v],S=g-u[w];g=MT(k,g,S)}if(a){const v=d==="y"?"top":"left",w=d==="y"?"bottom":"right",k=y+u[v],S=y-u[w];y=MT(k,y,S)}const x=o.fn({...e,[p]:g,[d]:y});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[d]:a}}}}}},lfe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=Zl(t,e),u={x:n,y:r},d=Ko(s),p=NR(d);let g=u[p],y=u[d];const x=Zl(o,e),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const S=p==="y"?"height":"width",I=i.reference[p]-i.floating[S]+v.mainAxis,E=i.reference[p]+i.reference[S]-v.mainAxis;g<I?g=I:g>E&&(g=E)}if(c){var w,k;const S=p==="y"?"width":"height",I=t8.has(ec(s)),E=i.reference[d]-i.floating[S]+(I&&((w=a.offset)==null?void 0:w[d])||0)+(I?0:v.crossAxis),j=i.reference[d]+i.reference[S]+(I?0:((k=a.offset)==null?void 0:k[d])||0)-(I?v.crossAxis:0);y<E?y=E:y>j&&(y=j)}return{[p]:g,[d]:y}}}},cfe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...c}=Zl(t,e),u=await Py(e,c),d=ec(s),p=pm(s),g=Ko(s)==="y",{width:y,height:x}=i.floating;let v,w;d==="top"||d==="bottom"?(v=d,w=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(w=d,v=p==="end"?"top":"bottom");const k=x-u.top-u.bottom,S=y-u.left-u.right,I=ku(x-u[v],k),E=ku(y-u[w],S),j=!e.middlewareData.shift;let A=I,T=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=k),j&&!p){const D=Mi(u.left,0),R=Mi(u.right,0),F=Mi(u.top,0),L=Mi(u.bottom,0);g?T=y-2*(D!==0||R!==0?D+R:Mi(u.left,u.right)):A=x-2*(F!==0||L!==0?F+L:Mi(u.top,u.bottom))}await l({...e,availableWidth:T,availableHeight:A});const $=await a.getDimensions(o.floating);return y!==$.width||x!==$.height?{reset:{rects:!0}}:{}}}};function zk(){return typeof window<"u"}function mm(t){return n8(t)?(t.nodeName||"").toLowerCase():"#document"}function Gi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xl(t){var e;return(e=(n8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function n8(t){return zk()?t instanceof Node||t instanceof Gi(t).Node:!1}function bo(t){return zk()?t instanceof Element||t instanceof Gi(t).Element:!1}function ll(t){return zk()?t instanceof HTMLElement||t instanceof Gi(t).HTMLElement:!1}function PF(t){return!zk()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Gi(t).ShadowRoot}const ufe=new Set(["inline","contents"]);function px(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=wo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!ufe.has(s)}const dfe=new Set(["table","td","th"]);function hfe(t){return dfe.has(mm(t))}const ffe=[":popover-open",":modal"];function Uk(t){return ffe.some(e=>{try{return t.matches(e)}catch{return!1}})}const pfe=["transform","translate","scale","rotate","perspective"],mfe=["transform","translate","scale","rotate","perspective","filter"],gfe=["paint","layout","strict","content"];function ER(t){const e=TR(),n=bo(t)?wo(t):t;return pfe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||mfe.some(r=>(n.willChange||"").includes(r))||gfe.some(r=>(n.contain||"").includes(r))}function yfe(t){let e=Su(t);for(;ll(e)&&!Dp(e);){if(ER(e))return e;if(Uk(e))return null;e=Su(e)}return null}function TR(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xfe=new Set(["html","body","#document"]);function Dp(t){return xfe.has(mm(t))}function wo(t){return Gi(t).getComputedStyle(t)}function Wk(t){return bo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Su(t){if(mm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||PF(t)&&t.host||xl(t);return PF(e)?e.host:e}function r8(t){const e=Su(t);return Dp(e)?t.ownerDocument?t.ownerDocument.body:t.body:ll(e)&&px(e)?e:r8(e)}function jy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=r8(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Gi(s);if(i){const o=LT(a);return e.concat(a,a.visualViewport||[],px(s)?s:[],o&&n?jy(o):[])}return e.concat(s,jy(s,[],n))}function LT(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function s8(t){const e=wo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ll(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,o=qw(n)!==i||qw(r)!==a;return o&&(n=i,r=a),{width:n,height:r,$:o}}function _R(t){return bo(t)?t:t.contextElement}function yp(t){const e=_R(t);if(!ll(e))return Zo(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=s8(e);let a=(i?qw(n.width):n.width)/r,o=(i?qw(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const vfe=Zo(0);function i8(t){const e=Gi(t);return!TR()||!e.visualViewport?vfe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bfe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Gi(t)?!1:e}function xh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=_R(t);let a=Zo(1);e&&(r?bo(r)&&(a=yp(r)):a=yp(t));const o=bfe(i,n,r)?i8(i):Zo(0);let l=(s.left+o.x)/a.x,c=(s.top+o.y)/a.y,u=s.width/a.x,d=s.height/a.y;if(i){const p=Gi(i),g=r&&bo(r)?Gi(r):r;let y=p,x=LT(y);for(;x&&r&&g!==y;){const v=yp(x),w=x.getBoundingClientRect(),k=wo(x),S=w.left+(x.clientLeft+parseFloat(k.paddingLeft))*v.x,I=w.top+(x.clientTop+parseFloat(k.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=S,c+=I,y=Gi(x),x=LT(y)}}return Xw({width:u,height:d,x:l,y:c})}function Gk(t,e){const n=Wk(t).scrollLeft;return e?e.left+n:xh(xl(t)).left+n}function a8(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Gk(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function wfe(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=xl(r),o=e?Uk(e.floating):!1;if(r===a||o&&i)return n;let l={scrollLeft:0,scrollTop:0},c=Zo(1);const u=Zo(0),d=ll(r);if((d||!d&&!i)&&((mm(r)!=="body"||px(a))&&(l=Wk(r)),ll(r))){const g=xh(r);c=yp(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const p=a&&!d&&!i?a8(a,l):Zo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function kfe(t){return Array.from(t.getClientRects())}function Sfe(t){const e=xl(t),n=Wk(t),r=t.ownerDocument.body,s=Mi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Mi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Gk(t);const o=-n.scrollTop;return wo(r).direction==="rtl"&&(a+=Mi(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}const jF=25;function Nfe(t,e){const n=Gi(t),r=xl(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const u=TR();(!u||u&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}const c=Gk(r);if(c<=0){const u=r.ownerDocument,d=u.body,p=getComputedStyle(d),g=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(r.clientWidth-d.clientWidth-g);y<=jF&&(i-=y)}else c<=jF&&(i+=c);return{width:i,height:a,x:o,y:l}}const Cfe=new Set(["absolute","fixed"]);function Ife(t,e){const n=xh(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ll(t)?yp(t):Zo(1),a=t.clientWidth*i.x,o=t.clientHeight*i.y,l=s*i.x,c=r*i.y;return{width:a,height:o,x:l,y:c}}function DF(t,e,n){let r;if(e==="viewport")r=Nfe(t,n);else if(e==="document")r=Sfe(xl(t));else if(bo(e))r=Ife(e,n);else{const s=i8(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Xw(r)}function o8(t,e){const n=Su(t);return n===e||!bo(n)||Dp(n)?!1:wo(n).position==="fixed"||o8(n,e)}function Efe(t,e){const n=e.get(t);if(n)return n;let r=jy(t,[],!1).filter(o=>bo(o)&&mm(o)!=="body"),s=null;const i=wo(t).position==="fixed";let a=i?Su(t):t;for(;bo(a)&&!Dp(a);){const o=wo(a),l=ER(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&Cfe.has(s.position)||px(a)&&!l&&o8(t,a))?r=r.filter(u=>u!==a):s=o,a=Su(a)}return e.set(t,r),r}function Tfe(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Uk(e)?[]:Efe(e,this._c):[].concat(n),r],o=a[0],l=a.reduce((c,u)=>{const d=DF(e,u,s);return c.top=Mi(d.top,c.top),c.right=ku(d.right,c.right),c.bottom=ku(d.bottom,c.bottom),c.left=Mi(d.left,c.left),c},DF(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function _fe(t){const{width:e,height:n}=s8(t);return{width:e,height:n}}function Afe(t,e,n){const r=ll(e),s=xl(e),i=n==="fixed",a=xh(t,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=Zo(0);function c(){l.x=Gk(s)}if(r||!r&&!i)if((mm(e)!=="body"||px(s))&&(o=Wk(e)),r){const g=xh(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else s&&c();i&&!r&&s&&c();const u=s&&!r&&!i?a8(s,o):Zo(0),d=a.left+o.scrollLeft-l.x-u.x,p=a.top+o.scrollTop-l.y-u.y;return{x:d,y:p,width:a.width,height:a.height}}function tI(t){return wo(t).position==="static"}function OF(t,e){if(!ll(t)||wo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xl(t)===n&&(n=n.ownerDocument.body),n}function l8(t,e){const n=Gi(t);if(Uk(t))return n;if(!ll(t)){let s=Su(t);for(;s&&!Dp(s);){if(bo(s)&&!tI(s))return s;s=Su(s)}return n}let r=OF(t,e);for(;r&&hfe(r)&&tI(r);)r=OF(r,e);return r&&Dp(r)&&tI(r)&&!ER(r)?n:r||yfe(t)||n}const Rfe=async function(t){const e=this.getOffsetParent||l8,n=this.getDimensions,r=await n(t.floating);return{reference:Afe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function $fe(t){return wo(t).direction==="rtl"}const Pfe={convertOffsetParentRelativeRectToViewportRelativeRect:wfe,getDocumentElement:xl,getClippingRect:Tfe,getOffsetParent:l8,getElementRects:Rfe,getClientRects:kfe,getDimensions:_fe,getScale:yp,isElement:bo,isRTL:$fe};function c8(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function jfe(t,e){let n=null,r;const s=xl(t);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:p,height:g}=c;if(o||e(),!p||!g)return;const y=kb(d),x=kb(s.clientWidth-(u+p)),v=kb(s.clientHeight-(d+g)),w=kb(u),S={rootMargin:-y+"px "+-x+"px "+-v+"px "+-w+"px",threshold:Mi(0,ku(1,l))||1};let I=!0;function E(j){const A=j[0].intersectionRatio;if(A!==l){if(!I)return a();A?a(!1,A):r=setTimeout(()=>{a(!1,1e-7)},1e3)}A===1&&!c8(c,t.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(E,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(E,S)}n.observe(t)}return a(!0),i}function Dfe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=_R(t),u=s||i?[...c?jy(c):[],...jy(e)]:[];u.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const d=c&&o?jfe(c,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(w=>{let[k]=w;k&&k.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let y,x=l?xh(t):null;l&&v();function v(){const w=xh(t);x&&!c8(x,w)&&n(),x=w,y=requestAnimationFrame(v)}return n(),()=>{var w;u.forEach(k=>{s&&k.removeEventListener("scroll",n),i&&k.removeEventListener("resize",n)}),d?.(),(w=g)==null||w.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const Ofe=afe,Mfe=ofe,Ffe=rfe,Lfe=cfe,Vfe=sfe,MF=nfe,Bfe=lfe,zfe=(t,e,n)=>{const r=new Map,s={platform:Pfe,...n},i={...s.platform,_c:r};return tfe(t,e,{...s,platform:i})};var Ufe=typeof document<"u",Wfe=function(){},cw=Ufe?_.useLayoutEffect:Wfe;function Yw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yw(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Yw(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function u8(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function FF(t,e){const n=u8(t);return Math.round(e*n)/n}function nI(t){const e=_.useRef(t);return cw(()=>{e.current=t}),e}function Gfe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,d]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=_.useState(r);Yw(p,r)||g(r);const[y,x]=_.useState(null),[v,w]=_.useState(null),k=_.useCallback(z=>{z!==j.current&&(j.current=z,x(z))},[]),S=_.useCallback(z=>{z!==A.current&&(A.current=z,w(z))},[]),I=i||y,E=a||v,j=_.useRef(null),A=_.useRef(null),T=_.useRef(u),$=l!=null,D=nI(l),R=nI(s),F=nI(c),L=_.useCallback(()=>{if(!j.current||!A.current)return;const z={placement:e,strategy:n,middleware:p};R.current&&(z.platform=R.current),zfe(j.current,A.current,z).then(H=>{const ee={...H,isPositioned:F.current!==!1};K.current&&!Yw(T.current,ee)&&(T.current=ee,Vh.flushSync(()=>{d(ee)}))})},[p,e,n,R,F]);cw(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const K=_.useRef(!1);cw(()=>(K.current=!0,()=>{K.current=!1}),[]),cw(()=>{if(I&&(j.current=I),E&&(A.current=E),I&&E){if(D.current)return D.current(I,E,L);L()}},[I,E,L,D,$]);const X=_.useMemo(()=>({reference:j,floating:A,setReference:k,setFloating:S}),[k,S]),q=_.useMemo(()=>({reference:I,floating:E}),[I,E]),Q=_.useMemo(()=>{const z={position:n,left:0,top:0};if(!q.floating)return z;const H=FF(q.floating,u.x),ee=FF(q.floating,u.y);return o?{...z,transform:"translate("+H+"px, "+ee+"px)",...u8(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:ee}},[n,o,q.floating,u.x,u.y]);return _.useMemo(()=>({...u,update:L,refs:X,elements:q,floatingStyles:Q}),[u,L,X,q,Q])}const Hfe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?MF({element:r.current,padding:s}).fn(n):{}:r?MF({element:r,padding:s}).fn(n):{}}}},qfe=(t,e)=>({...Ofe(t),options:[t,e]}),Kfe=(t,e)=>({...Mfe(t),options:[t,e]}),Xfe=(t,e)=>({...Bfe(t),options:[t,e]}),Yfe=(t,e)=>({...Ffe(t),options:[t,e]}),Qfe=(t,e)=>({...Lfe(t),options:[t,e]}),Jfe=(t,e)=>({...Vfe(t),options:[t,e]}),Zfe=(t,e)=>({...Hfe(t),options:[t,e]});var epe="Arrow",d8=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return h.jsx(bt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});d8.displayName=epe;var tpe=d8;function AR(t){const[e,n]=_.useState(void 0);return rs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var RR="Popper",[h8,f8]=Co(RR),[npe,p8]=h8(RR),m8=t=>{const{__scopePopper:e,children:n}=t,[r,s]=_.useState(null);return h.jsx(npe,{scope:e,anchor:r,onAnchorChange:s,children:n})};m8.displayName=RR;var g8="PopperAnchor",y8=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=p8(g8,n),a=_.useRef(null),o=Wt(e,a),l=_.useRef(null);return _.useEffect(()=>{const c=l.current;l.current=r?.current||a.current,c!==l.current&&i.onAnchorChange(l.current)}),r?null:h.jsx(bt.div,{...s,ref:o})});y8.displayName=g8;var $R="PopperContent",[rpe,spe]=h8($R),x8=_.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...x}=t,v=p8($R,n),[w,k]=_.useState(null),S=Wt(e,fe=>k(fe)),[I,E]=_.useState(null),j=AR(I),A=j?.width??0,T=j?.height??0,$=r+(i!=="center"?"-"+i:""),D=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},R=Array.isArray(c)?c:[c],F=R.length>0,L={padding:D,boundary:R.filter(ape),altBoundary:F},{refs:K,floatingStyles:X,placement:q,isPositioned:Q,middlewareData:z}=Gfe({strategy:"fixed",placement:$,whileElementsMounted:(...fe)=>Dfe(...fe,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[qfe({mainAxis:s+T,alignmentAxis:a}),l&&Kfe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Xfe():void 0,...L}),l&&Yfe({...L}),Qfe({...L,apply:({elements:fe,rects:Te,availableWidth:ue,availableHeight:Ne})=>{const{width:Ee,height:me}=Te.reference,Ze=fe.floating.style;Ze.setProperty("--radix-popper-available-width",`${ue}px`),Ze.setProperty("--radix-popper-available-height",`${Ne}px`),Ze.setProperty("--radix-popper-anchor-width",`${Ee}px`),Ze.setProperty("--radix-popper-anchor-height",`${me}px`)}}),I&&Zfe({element:I,padding:o}),ope({arrowWidth:A,arrowHeight:T}),p&&Jfe({strategy:"referenceHidden",...L})]}),[H,ee]=w8(q),G=Xs(y);rs(()=>{Q&&G?.()},[Q,G]);const Y=z.arrow?.x,ae=z.arrow?.y,ye=z.arrow?.centerOffset!==0,[xe,Ce]=_.useState();return rs(()=>{w&&Ce(window.getComputedStyle(w).zIndex)},[w]),h.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:Q?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(rpe,{scope:n,placedSide:H,onArrowChange:E,arrowX:Y,arrowY:ae,shouldHideArrow:ye,children:h.jsx(bt.div,{"data-side":H,"data-align":ee,...x,ref:S,style:{...x.style,animation:Q?void 0:"none"}})})})});x8.displayName=$R;var v8="PopperArrow",ipe={top:"bottom",right:"left",bottom:"top",left:"right"},b8=_.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=spe(v8,r),a=ipe[i.placedSide];return h.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:h.jsx(tpe,{...s,ref:n,style:{...s.style,display:"block"}})})});b8.displayName=v8;function ape(t){return t!==null}var ope=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,a=s.arrow?.centerOffset!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,u]=w8(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(s.arrow?.x??0)+o/2,g=(s.arrow?.y??0)+l/2;let y="",x="";return c==="bottom"?(y=a?d:`${p}px`,x=`${-l}px`):c==="top"?(y=a?d:`${p}px`,x=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,x=a?d:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,x=a?d:`${g}px`),{data:{x:y,y:x}}}});function w8(t){const[e,n="center"]=t.split("-");return[e,n]}var lpe=m8,cpe=y8,upe=x8,dpe=b8,hpe="Portal",k8=_.forwardRef((t,e)=>{const{container:n,...r}=t,[s,i]=_.useState(!1);rs(()=>i(!0),[]);const a=n||s&&globalThis?.document?.body;return a?uae.createPortal(h.jsx(bt.div,{...r,ref:e}),a):null});k8.displayName=hpe;function PR(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var S8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),fpe="VisuallyHidden",ppe=_.forwardRef((t,e)=>h.jsx(bt.span,{...t,ref:e,style:{...S8,...t.style}}));ppe.displayName=fpe;var mpe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Qf=new WeakMap,Sb=new WeakMap,Nb={},rI=0,N8=function(t){return t&&(t.host||N8(t.parentNode))},gpe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=N8(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},ype=function(t,e,n,r){var s=gpe(e,Array.isArray(t)?t:[t]);Nb[n]||(Nb[n]=new WeakMap);var i=Nb[n],a=[],o=new Set,l=new Set(s),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(p){if(o.has(p))u(p);else try{var g=p.getAttribute(r),y=g!==null&&g!=="false",x=(Qf.get(p)||0)+1,v=(i.get(p)||0)+1;Qf.set(p,x),i.set(p,v),a.push(p),x===1&&y&&Sb.set(p,!0),v===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return u(e),o.clear(),rI++,function(){a.forEach(function(d){var p=Qf.get(d)-1,g=i.get(d)-1;Qf.set(d,p),i.set(d,g),p||(Sb.has(d)||d.removeAttribute(r),Sb.delete(d)),g||d.removeAttribute(n)}),rI--,rI||(Qf=new WeakMap,Qf=new WeakMap,Sb=new WeakMap,Nb={})}},xpe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=mpe(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),ype(r,s,n,"aria-hidden")):function(){return null}},qo=function(){return qo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qo.apply(this,arguments)};function C8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function vpe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var uw="right-scroll-bar-position",dw="width-before-scroll-bar",bpe="with-scroll-bars-hidden",wpe="--removed-body-scroll-bar-size";function sI(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function kpe(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Spe=typeof window<"u"?_.useLayoutEffect:_.useEffect,LF=new WeakMap;function Npe(t,e){var n=kpe(null,function(r){return t.forEach(function(s){return sI(s,r)})});return Spe(function(){var r=LF.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(o){i.has(o)||sI(o,null)}),i.forEach(function(o){s.has(o)||sI(o,a)})}LF.set(n,t)},[t]),n}function Cpe(t){return t}function Ipe(t,e){e===void 0&&(e=Cpe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(i),a=n}var l=function(){var u=a;a=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return s}function Epe(t){t===void 0&&(t={});var e=Ipe(null);return e.options=qo({async:!0,ssr:!1},t),e}var I8=function(t){var e=t.sideCar,n=C8(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,qo({},n))};I8.isSideCarExport=!0;function Tpe(t,e){return t.useMedium(e),I8}var E8=Epe(),iI=function(){},Hk=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:iI,onWheelCapture:iI,onTouchMoveCapture:iI}),s=r[0],i=r[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,p=t.sideCar,g=t.noRelative,y=t.noIsolation,x=t.inert,v=t.allowPinchZoom,w=t.as,k=w===void 0?"div":w,S=t.gapMode,I=C8(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,j=Npe([n,e]),A=qo(qo({},I),s);return _.createElement(_.Fragment,null,u&&_.createElement(E,{sideCar:E8,removeScrollBar:c,shards:d,noRelative:g,noIsolation:y,inert:x,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:S}),a?_.cloneElement(_.Children.only(o),qo(qo({},A),{ref:j})):_.createElement(k,qo({},A,{className:l,ref:j}),o))});Hk.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hk.classNames={fullWidth:dw,zeroRight:uw};var _pe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ape(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=_pe();return e&&t.setAttribute("nonce",e),t}function Rpe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function $pe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Ppe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Ape())&&(Rpe(e,n),$pe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jpe=function(){var t=Ppe();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},T8=function(){var t=jpe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Dpe={left:0,top:0,right:0,gap:0},aI=function(t){return parseInt(t||"",10)||0},Ope=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[aI(n),aI(r),aI(s)]},Mpe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Dpe;var e=Ope(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Fpe=T8(),xp="data-scroll-locked",Lpe=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(bpe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(xp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(uw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(dw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(uw," .").concat(uw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dw," .").concat(dw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(xp,`] {
    `).concat(wpe,": ").concat(o,`px;
  }
`)},VF=function(){var t=parseInt(document.body.getAttribute(xp)||"0",10);return isFinite(t)?t:0},Vpe=function(){_.useEffect(function(){return document.body.setAttribute(xp,(VF()+1).toString()),function(){var t=VF()-1;t<=0?document.body.removeAttribute(xp):document.body.setAttribute(xp,t.toString())}},[])},Bpe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Vpe();var i=_.useMemo(function(){return Mpe(s)},[s]);return _.createElement(Fpe,{styles:Lpe(i,!e,s,n?"":"!important")})},VT=!1;if(typeof window<"u")try{var Cb=Object.defineProperty({},"passive",{get:function(){return VT=!0,!0}});window.addEventListener("test",Cb,Cb),window.removeEventListener("test",Cb,Cb)}catch{VT=!1}var Jf=VT?{passive:!1}:!1,zpe=function(t){return t.tagName==="TEXTAREA"},_8=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!zpe(t)&&n[e]==="visible")},Upe=function(t){return _8(t,"overflowY")},Wpe=function(t){return _8(t,"overflowX")},BF=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=A8(t,r);if(s){var i=R8(t,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Gpe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Hpe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},A8=function(t,e){return t==="v"?Upe(e):Wpe(e)},R8=function(t,e){return t==="v"?Gpe(e):Hpe(e)},qpe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Kpe=function(t,e,n,r,s){var i=qpe(t,window.getComputedStyle(e).direction),a=i*r,o=n.target,l=e.contains(o),c=!1,u=a>0,d=0,p=0;do{if(!o)break;var g=R8(t,o),y=g[0],x=g[1],v=g[2],w=x-v-i*y;(y||w)&&A8(t,o)&&(d+=w,p+=y);var k=o.parentNode;o=k&&k.nodeType===Node.DOCUMENT_FRAGMENT_NODE?k.host:k}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(p)<1)&&(c=!0),c},Ib=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zF=function(t){return[t.deltaX,t.deltaY]},UF=function(t){return t&&"current"in t?t.current:t},Xpe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ype=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Qpe=0,Zf=[];function Jpe(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),s=_.useState(Qpe++)[0],i=_.useState(T8)[0],a=_.useRef(t);_.useEffect(function(){a.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=vpe([t.lockRef.current],(t.shards||[]).map(UF),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var o=_.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var w=Ib(x),k=n.current,S="deltaX"in x?x.deltaX:k[0]-w[0],I="deltaY"in x?x.deltaY:k[1]-w[1],E,j=x.target,A=Math.abs(S)>Math.abs(I)?"h":"v";if("touches"in x&&A==="h"&&j.type==="range")return!1;var T=BF(A,j);if(!T)return!0;if(T?E=A:(E=A==="v"?"h":"v",T=BF(A,j)),!T)return!1;if(!r.current&&"changedTouches"in x&&(S||I)&&(r.current=E),!E)return!0;var $=r.current||E;return Kpe($,v,x,$==="h"?S:I)},[]),l=_.useCallback(function(x){var v=x;if(!(!Zf.length||Zf[Zf.length-1]!==i)){var w="deltaY"in v?zF(v):Ib(v),k=e.current.filter(function(E){return E.name===v.type&&(E.target===v.target||v.target===E.shadowParent)&&Xpe(E.delta,w)})[0];if(k&&k.should){v.cancelable&&v.preventDefault();return}if(!k){var S=(a.current.shards||[]).map(UF).filter(Boolean).filter(function(E){return E.contains(v.target)}),I=S.length>0?o(v,S[0]):!a.current.noIsolation;I&&v.cancelable&&v.preventDefault()}}},[]),c=_.useCallback(function(x,v,w,k){var S={name:x,delta:v,target:w,should:k,shadowParent:Zpe(w)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(I){return I!==S})},1)},[]),u=_.useCallback(function(x){n.current=Ib(x),r.current=void 0},[]),d=_.useCallback(function(x){c(x.type,zF(x),x.target,o(x,t.lockRef.current))},[]),p=_.useCallback(function(x){c(x.type,Ib(x),x.target,o(x,t.lockRef.current))},[]);_.useEffect(function(){return Zf.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Jf),document.addEventListener("touchmove",l,Jf),document.addEventListener("touchstart",u,Jf),function(){Zf=Zf.filter(function(x){return x!==i}),document.removeEventListener("wheel",l,Jf),document.removeEventListener("touchmove",l,Jf),document.removeEventListener("touchstart",u,Jf)}},[]);var g=t.removeScrollBar,y=t.inert;return _.createElement(_.Fragment,null,y?_.createElement(i,{styles:Ype(s)}):null,g?_.createElement(Bpe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Zpe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const eme=Tpe(E8,Jpe);var $8=_.forwardRef(function(t,e){return _.createElement(Hk,qo({},t,{ref:e,sideCar:eme}))});$8.classNames=Hk.classNames;var tme=[" ","Enter","ArrowUp","ArrowDown"],nme=[" ","Enter"],vh="Select",[qk,Kk,rme]=gk(vh),[gm,set]=Co(vh,[rme,f8]),Xk=f8(),[sme,Mu]=gm(vh),[ime,ame]=gm(vh),P8=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:p,required:g,form:y}=t,x=Xk(e),[v,w]=_.useState(null),[k,S]=_.useState(null),[I,E]=_.useState(!1),j=om(c),[A,T]=Kl({prop:r,defaultProp:s??!1,onChange:i,caller:vh}),[$,D]=Kl({prop:a,defaultProp:o,onChange:l,caller:vh}),R=_.useRef(null),F=v?y||!!v.closest("form"):!0,[L,K]=_.useState(new Set),X=Array.from(L).map(q=>q.props.value).join(";");return h.jsx(lpe,{...x,children:h.jsxs(sme,{required:g,scope:e,trigger:v,onTriggerChange:w,valueNode:k,onValueNodeChange:S,valueNodeHasChildren:I,onValueNodeHasChildrenChange:E,contentId:Bh(),value:$,onValueChange:D,open:A,onOpenChange:T,dir:j,triggerPointerDownPosRef:R,disabled:p,children:[h.jsx(qk.Provider,{scope:e,children:h.jsx(ime,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(q=>{K(Q=>new Set(Q).add(q))},[]),onNativeOptionRemove:_.useCallback(q=>{K(Q=>{const z=new Set(Q);return z.delete(q),z})},[]),children:n})}),F?h.jsxs(t9,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:d,value:$,onChange:q=>D(q.target.value),disabled:p,form:y,children:[$===void 0?h.jsx("option",{value:""}):null,Array.from(L)]},X):null]})})};P8.displayName=vh;var j8="SelectTrigger",D8=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Xk(n),a=Mu(j8,n),o=a.disabled||r,l=Wt(e,a.onTriggerChange),c=Kk(n),u=_.useRef("touch"),[d,p,g]=r9(x=>{const v=c().filter(S=>!S.disabled),w=v.find(S=>S.value===a.value),k=s9(v,x,w);k!==void 0&&a.onValueChange(k.value)}),y=x=>{o||(a.onOpenChange(!0),g()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return h.jsx(cpe,{asChild:!0,...i,children:h.jsx(bt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":n9(a.value)?"":void 0,...s,ref:l,onClick:St(s.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&y(x)}),onPointerDown:St(s.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(y(x),x.preventDefault())}),onKeyDown:St(s.onKeyDown,x=>{const v=d.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(v&&x.key===" ")&&tme.includes(x.key)&&(y(),x.preventDefault())})})})});D8.displayName=j8;var O8="SelectValue",M8=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...o}=t,l=Mu(O8,n),{onValueNodeHasChildrenChange:c}=l,u=i!==void 0,d=Wt(e,l.onValueNodeChange);return rs(()=>{c(u)},[c,u]),h.jsx(bt.span,{...o,ref:d,style:{pointerEvents:"none"},children:n9(l.value)?h.jsx(h.Fragment,{children:a}):i})});M8.displayName=O8;var ome="SelectIcon",F8=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return h.jsx(bt.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});F8.displayName=ome;var lme="SelectPortal",L8=t=>h.jsx(k8,{asChild:!0,...t});L8.displayName=lme;var bh="SelectContent",V8=_.forwardRef((t,e)=>{const n=Mu(bh,t.__scopeSelect),[r,s]=_.useState();if(rs(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Vh.createPortal(h.jsx(B8,{scope:t.__scopeSelect,children:h.jsx(qk.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),i):null}return h.jsx(z8,{...t,ref:e})});V8.displayName=bh;var to=10,[B8,Fu]=gm(bh),cme="SelectContentImpl",ume=vy("SelectContent.RemoveScroll"),z8=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:x,avoidCollisions:v,...w}=t,k=Mu(bh,n),[S,I]=_.useState(null),[E,j]=_.useState(null),A=Wt(e,fe=>I(fe)),[T,$]=_.useState(null),[D,R]=_.useState(null),F=Kk(n),[L,K]=_.useState(!1),X=_.useRef(!1);_.useEffect(()=>{if(S)return xpe(S)},[S]),Ohe();const q=_.useCallback(fe=>{const[Te,...ue]=F().map(me=>me.ref.current),[Ne]=ue.slice(-1),Ee=document.activeElement;for(const me of fe)if(me===Ee||(me?.scrollIntoView({block:"nearest"}),me===Te&&E&&(E.scrollTop=0),me===Ne&&E&&(E.scrollTop=E.scrollHeight),me?.focus(),document.activeElement!==Ee))return},[F,E]),Q=_.useCallback(()=>q([T,S]),[q,T,S]);_.useEffect(()=>{L&&Q()},[L,Q]);const{onOpenChange:z,triggerPointerDownPosRef:H}=k;_.useEffect(()=>{if(S){let fe={x:0,y:0};const Te=Ne=>{fe={x:Math.abs(Math.round(Ne.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(H.current?.y??0))}},ue=Ne=>{fe.x<=10&&fe.y<=10?Ne.preventDefault():S.contains(Ne.target)||z(!1),document.removeEventListener("pointermove",Te),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ue,{capture:!0})}}},[S,z,H]),_.useEffect(()=>{const fe=()=>z(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[z]);const[ee,G]=r9(fe=>{const Te=F().filter(Ee=>!Ee.disabled),ue=Te.find(Ee=>Ee.ref.current===document.activeElement),Ne=s9(Te,fe,ue);Ne&&setTimeout(()=>Ne.ref.current.focus())}),Y=_.useCallback((fe,Te,ue)=>{const Ne=!X.current&&!ue;(k.value!==void 0&&k.value===Te||Ne)&&($(fe),Ne&&(X.current=!0))},[k.value]),ae=_.useCallback(()=>S?.focus(),[S]),ye=_.useCallback((fe,Te,ue)=>{const Ne=!X.current&&!ue;(k.value!==void 0&&k.value===Te||Ne)&&R(fe)},[k.value]),xe=r==="popper"?BT:U8,Ce=xe===BT?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:x,avoidCollisions:v}:{};return h.jsx(B8,{scope:n,content:S,viewport:E,onViewportChange:j,itemRefCallback:Y,selectedItem:T,onItemLeave:ae,itemTextRefCallback:ye,focusSelectedItem:Q,selectedItemText:D,position:r,isPositioned:L,searchRef:ee,children:h.jsx($8,{as:ume,allowPinchZoom:!0,children:h.jsx(JG,{asChild:!0,trapped:k.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:St(s,fe=>{k.trigger?.focus({preventScroll:!0}),fe.preventDefault()}),children:h.jsx(YG,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>k.onOpenChange(!1),children:h.jsx(xe,{role:"listbox",id:k.contentId,"data-state":k.open?"open":"closed",dir:k.dir,onContextMenu:fe=>fe.preventDefault(),...w,...Ce,onPlaced:()=>K(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:St(w.onKeyDown,fe=>{const Te=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!Te&&fe.key.length===1&&G(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let Ne=F().filter(Ee=>!Ee.disabled).map(Ee=>Ee.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const Ee=fe.target,me=Ne.indexOf(Ee);Ne=Ne.slice(me+1)}setTimeout(()=>q(Ne)),fe.preventDefault()}})})})})})})});z8.displayName=cme;var dme="SelectItemAlignedPosition",U8=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Mu(bh,n),a=Fu(bh,n),[o,l]=_.useState(null),[c,u]=_.useState(null),d=Wt(e,A=>u(A)),p=Kk(n),g=_.useRef(!1),y=_.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:w,focusSelectedItem:k}=a,S=_.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&x&&v&&w){const A=i.trigger.getBoundingClientRect(),T=c.getBoundingClientRect(),$=i.valueNode.getBoundingClientRect(),D=w.getBoundingClientRect();if(i.dir!=="rtl"){const Ee=D.left-T.left,me=$.left-Ee,Ze=A.left-me,Xe=A.width+Ze,pt=Math.max(Xe,T.width),ft=window.innerWidth-to,Et=by(me,[to,Math.max(to,ft-pt)]);o.style.minWidth=Xe+"px",o.style.left=Et+"px"}else{const Ee=T.right-D.right,me=window.innerWidth-$.right-Ee,Ze=window.innerWidth-A.right-me,Xe=A.width+Ze,pt=Math.max(Xe,T.width),ft=window.innerWidth-to,Et=by(me,[to,Math.max(to,ft-pt)]);o.style.minWidth=Xe+"px",o.style.right=Et+"px"}const R=p(),F=window.innerHeight-to*2,L=x.scrollHeight,K=window.getComputedStyle(c),X=parseInt(K.borderTopWidth,10),q=parseInt(K.paddingTop,10),Q=parseInt(K.borderBottomWidth,10),z=parseInt(K.paddingBottom,10),H=X+q+L+z+Q,ee=Math.min(v.offsetHeight*5,H),G=window.getComputedStyle(x),Y=parseInt(G.paddingTop,10),ae=parseInt(G.paddingBottom,10),ye=A.top+A.height/2-to,xe=F-ye,Ce=v.offsetHeight/2,fe=v.offsetTop+Ce,Te=X+q+fe,ue=H-Te;if(Te<=ye){const Ee=R.length>0&&v===R[R.length-1].ref.current;o.style.bottom="0px";const me=c.clientHeight-x.offsetTop-x.offsetHeight,Ze=Math.max(xe,Ce+(Ee?ae:0)+me+Q),Xe=Te+Ze;o.style.height=Xe+"px"}else{const Ee=R.length>0&&v===R[0].ref.current;o.style.top="0px";const Ze=Math.max(ye,X+x.offsetTop+(Ee?Y:0)+Ce)+ue;o.style.height=Ze+"px",x.scrollTop=Te-ye+x.offsetTop}o.style.margin=`${to}px 0`,o.style.minHeight=ee+"px",o.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,o,c,x,v,w,i.dir,r]);rs(()=>S(),[S]);const[I,E]=_.useState();rs(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const j=_.useCallback(A=>{A&&y.current===!0&&(S(),k?.(),y.current=!1)},[S,k]);return h.jsx(fme,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:j,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:h.jsx(bt.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});U8.displayName=dme;var hme="SelectPopperPosition",BT=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=to,...i}=t,a=Xk(n);return h.jsx(upe,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});BT.displayName=hme;var[fme,jR]=gm(bh,{}),zT="SelectViewport",W8=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Fu(zT,n),a=jR(zT,n),o=Wt(e,i.onViewportChange),l=_.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(qk.Slot,{scope:n,children:h.jsx(bt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:St(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=a;if(p?.current&&d){const g=Math.abs(l.current-u.scrollTop);if(g>0){const y=window.innerHeight-to*2,x=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),w=Math.max(x,v);if(w<y){const k=w+g,S=Math.min(y,k),I=k-S;d.style.height=S+"px",d.style.bottom==="0px"&&(u.scrollTop=I>0?I:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});W8.displayName=zT;var G8="SelectGroup",[pme,mme]=gm(G8),gme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Bh();return h.jsx(pme,{scope:n,id:s,children:h.jsx(bt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});gme.displayName=G8;var H8="SelectLabel",yme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=mme(H8,n);return h.jsx(bt.div,{id:s.id,...r,ref:e})});yme.displayName=H8;var Qw="SelectItem",[xme,q8]=gm(Qw),K8=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,o=Mu(Qw,n),l=Fu(Qw,n),c=o.value===r,[u,d]=_.useState(i??""),[p,g]=_.useState(!1),y=Wt(e,k=>l.itemRefCallback?.(k,r,s)),x=Bh(),v=_.useRef("touch"),w=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(xme,{scope:n,value:r,disabled:s,textId:x,isSelected:c,onItemTextChange:_.useCallback(k=>{d(S=>S||(k?.textContent??"").trim())},[]),children:h.jsx(qk.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:h.jsx(bt.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:St(a.onFocus,()=>g(!0)),onBlur:St(a.onBlur,()=>g(!1)),onClick:St(a.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:St(a.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:St(a.onPointerDown,k=>{v.current=k.pointerType}),onPointerMove:St(a.onPointerMove,k=>{v.current=k.pointerType,s?l.onItemLeave?.():v.current==="mouse"&&k.currentTarget.focus({preventScroll:!0})}),onPointerLeave:St(a.onPointerLeave,k=>{k.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:St(a.onKeyDown,k=>{l.searchRef?.current!==""&&k.key===" "||(nme.includes(k.key)&&w(),k.key===" "&&k.preventDefault())})})})})});K8.displayName=Qw;var Xg="SelectItemText",X8=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=Mu(Xg,n),o=Fu(Xg,n),l=q8(Xg,n),c=ame(Xg,n),[u,d]=_.useState(null),p=Wt(e,w=>d(w),l.onItemTextChange,w=>o.itemTextRefCallback?.(w,l.value,l.disabled)),g=u?.textContent,y=_.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=c;return rs(()=>(x(y),()=>v(y)),[x,v,y]),h.jsxs(h.Fragment,{children:[h.jsx(bt.span,{id:l.textId,...i,ref:p}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Vh.createPortal(i.children,a.valueNode):null]})});X8.displayName=Xg;var Y8="SelectItemIndicator",Q8=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return q8(Y8,n).isSelected?h.jsx(bt.span,{"aria-hidden":!0,...r,ref:e}):null});Q8.displayName=Y8;var UT="SelectScrollUpButton",J8=_.forwardRef((t,e)=>{const n=Fu(UT,t.__scopeSelect),r=jR(UT,t.__scopeSelect),[s,i]=_.useState(!1),a=Wt(e,r.onScrollButtonChange);return rs(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?h.jsx(e9,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});J8.displayName=UT;var WT="SelectScrollDownButton",Z8=_.forwardRef((t,e)=>{const n=Fu(WT,t.__scopeSelect),r=jR(WT,t.__scopeSelect),[s,i]=_.useState(!1),a=Wt(e,r.onScrollButtonChange);return rs(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?h.jsx(e9,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Z8.displayName=WT;var e9=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Fu("SelectScrollButton",n),a=_.useRef(null),o=Kk(n),l=_.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),rs(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),h.jsx(bt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:St(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:St(s.onPointerMove,()=>{i.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:St(s.onPointerLeave,()=>{l()})})}),vme="SelectSeparator",bme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(bt.div,{"aria-hidden":!0,...r,ref:e})});bme.displayName=vme;var GT="SelectArrow",wme=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Xk(n),i=Mu(GT,n),a=Fu(GT,n);return i.open&&a.position==="popper"?h.jsx(dpe,{...s,...r,ref:e}):null});wme.displayName=GT;var kme="SelectBubbleInput",t9=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=_.useRef(null),i=Wt(r,s),a=PR(e);return _.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),h.jsx(bt.select,{...n,style:{...S8,...n.style},ref:i,defaultValue:e})});t9.displayName=kme;function n9(t){return t===""||t===void 0}function r9(t){const e=Xs(t),n=_.useRef(""),r=_.useRef(0),s=_.useCallback(a=>{const o=n.current+a;e(o),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(o)},[e]),i=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function s9(t,e,n){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=Sme(t,Math.max(i,0));s.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Sme(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Nme=P8,Cme=D8,Ime=M8,Eme=F8,Tme=L8,_me=V8,Ame=W8,Rme=K8,$me=X8,Pme=Q8,jme=J8,Dme=Z8;function hi({...t}){return h.jsx(Nme,{"data-slot":"select",...t})}function fi({...t}){return h.jsx(Ime,{"data-slot":"select-value",...t})}function pi({className:t,size:e="default",children:n,...r}){return h.jsxs(Cme,{"data-slot":"select-trigger","data-size":e,className:It("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,h.jsx(Eme,{asChild:!0,children:h.jsx(dk,{className:"size-4 opacity-50"})})]})}function mi({className:t,children:e,position:n="popper",...r}){return h.jsx(Tme,{children:h.jsxs(_me,{"data-slot":"select-content",className:It("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(Ome,{}),h.jsx(Ame,{className:It("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),h.jsx(Mme,{})]})})}function Ot({className:t,children:e,...n}){return h.jsxs(Rme,{"data-slot":"select-item",className:It("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[h.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:h.jsx(Pme,{children:h.jsx(my,{className:"size-4"})})}),h.jsx($me,{children:e})]})}function Ome({className:t,...e}){return h.jsx(jme,{"data-slot":"select-scroll-up-button",className:It("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Ore,{className:"size-4"})})}function Mme({className:t,...e}){return h.jsx(Dme,{"data-slot":"select-scroll-down-button",className:It("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(dk,{className:"size-4"})})}var oI={},lI={},WF;function Fme(){return WF||(WF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(lI)),lI}var cI={},GF;function i9(){return GF||(GF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(cI)),cI}var uI={},HF;function a9(){return HF||(HF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(uI)),uI}var dI={},qF;function DR(){return qF||(qF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],s=n.length;if(s===0)return r;let i=0,a="",o="",l=!1;for(n.charCodeAt(0)===46&&(r.push(""),i++);i<s;){const c=n[i];o?c==="\\"&&i+1<s?(i++,a+=n[i]):c===o?o="":a+=c:l?c==='"'||c==="'"?o=c:c==="]"?(l=!1,r.push(a),a=""):a+=c:c==="["?(l=!0,a&&(r.push(a),a="")):c==="."?a&&(r.push(a),a=""):a+=c,i++}return a&&r.push(a),r}t.toPath=e})(dI)),dI}var KF;function OR(){return KF||(KF=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fme(),n=i9(),r=a9(),s=DR();function i(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?n.isDeepKey(l)?i(o,s.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let d=0;d<l.length;d++){if(u==null||e.isUnsafeProperty(l[d]))return c;u=u[l[d]]}return u===void 0?c:u}t.get=i})(oI)),oI}var hI,XF;function Lme(){return XF||(XF=1,hI=OR().get),hI}var Vme=Lme();const Nu=Ra(Vme);var fI={exports:{}},mn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YF;function Bme(){if(YF)return mn;YF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function y(x){if(typeof x=="object"&&x!==null){var v=x.$$typeof;switch(v){case t:switch(x=x.type,x){case n:case s:case r:case l:case c:case p:return x;default:switch(x=x&&x.$$typeof,x){case a:case o:case d:case u:return x;case i:return x;default:return v}}case e:return v}}}return mn.ContextConsumer=i,mn.ContextProvider=a,mn.Element=t,mn.ForwardRef=o,mn.Fragment=n,mn.Lazy=d,mn.Memo=u,mn.Portal=e,mn.Profiler=s,mn.StrictMode=r,mn.Suspense=l,mn.SuspenseList=c,mn.isContextConsumer=function(x){return y(x)===i},mn.isContextProvider=function(x){return y(x)===a},mn.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},mn.isForwardRef=function(x){return y(x)===o},mn.isFragment=function(x){return y(x)===n},mn.isLazy=function(x){return y(x)===d},mn.isMemo=function(x){return y(x)===u},mn.isPortal=function(x){return y(x)===e},mn.isProfiler=function(x){return y(x)===s},mn.isStrictMode=function(x){return y(x)===r},mn.isSuspense=function(x){return y(x)===l},mn.isSuspenseList=function(x){return y(x)===c},mn.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===s||x===r||x===l||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===d||x.$$typeof===u||x.$$typeof===a||x.$$typeof===i||x.$$typeof===o||x.$$typeof===g||x.getModuleId!==void 0)},mn.typeOf=y,mn}var QF;function zme(){return QF||(QF=1,fI.exports=Bme()),fI.exports}var Ume=zme(),es=t=>t===0?0:t>0?1:-1,Xi=t=>typeof t=="number"&&t!=+t,Gd=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,qe=t=>(typeof t=="number"||t instanceof Number)&&!Xi(t),cl=t=>qe(t)||typeof t=="string",Wme=0,Dy=t=>{var e=++Wme;return"".concat(t||"").concat(e)},Qs=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(e)&&typeof e!="string")return r;var i;if(Gd(e)){if(n==null)return r;var a=e.indexOf("%");i=n*parseFloat(e.slice(0,a))/100}else i=+e;return Xi(i)&&(i=r),s&&n!=null&&i>n&&(i=n),i},o9=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1},JF=(t,e)=>qe(t)&&qe(e)?n=>t+n*(e-t):()=>e;function so(t,e,n){return qe(t)&&qe(e)?t+n*(e-t):e}function l9(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Nu(r,e))===n)}var Dn=t=>t===null||typeof t>"u",mx=t=>Dn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Gme=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function MR(t){if(typeof t!="string")return!1;var e=Gme;return e.includes(t)}var Hme=["viewBox","children"],ZF=["points","pathLength"],pI={svg:Hme,polygon:ZF,polyline:ZF},FR=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(_.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(s=>{MR(s)&&(r[s]=(i=>n[s](n,i)))}),r},qme=(t,e,n)=>r=>(t(e,n,r),null),gx=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(s=>{var i=t[s];MR(s)&&typeof i=="function"&&(r||(r={}),r[s]=qme(i,e,n))}),r},Kme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function c9(t){if(typeof t!="string")return!1;var e=Kme;return e.includes(t)}function dc(t){var e=Object.entries(t).filter(n=>{var[r]=n;return c9(r)});return Object.fromEntries(e)}var eL=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",tL=null,mI=null,u9=t=>{if(t===tL&&Array.isArray(mI))return mI;var e=[];return _.Children.forEach(t,n=>{Dn(n)||(Ume.isFragment(n)?e=e.concat(u9(n.props.children)):e.push(n))}),mI=e,tL=t,e};function yx(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(s=>eL(s)):r=[eL(e)],u9(t).forEach(s=>{var i=Nu(s,"type.displayName")||Nu(s,"type.name");r.indexOf(i)!==-1&&n.push(s)}),n}var d9=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Xme=(t,e,n,r)=>{var s;if(typeof e=="symbol"||typeof e=="number")return!0;var i=(s=r&&pI?.[r])!==null&&s!==void 0?s:[],a=e.startsWith("data-"),o=typeof t!="function"&&(!!r&&i.includes(e)||c9(e)),l=!!n&&MR(e);return a||o||l},Bn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(_.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(i=>{var a;Xme((a=r)===null||a===void 0?void 0:a[i],i,e,n)&&(s[i]=r[i])}),s},Yme=["children","width","height","viewBox","className","style","title","desc"];function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HT.apply(null,arguments)}function Qme(t,e){if(t==null)return{};var n,r,s=Jme(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Jme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var LR=_.forwardRef((t,e)=>{var{children:n,width:r,height:s,viewBox:i,className:a,style:o,title:l,desc:c}=t,u=Qme(t,Yme),d=i||{width:r,height:s,x:0,y:0},p=Bt("recharts-surface",a);return _.createElement("svg",HT({},Bn(u,!0,"svg"),{className:p,width:r,height:s,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),_.createElement("title",null,l),_.createElement("desc",null,c),n)}),Zme=["children","className"];function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qT.apply(null,arguments)}function ege(t,e){if(t==null)return{};var n,r,s=tge(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function tge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fs=_.forwardRef((t,e)=>{var{children:n,className:r}=t,s=ege(t,Zme),i=Bt("recharts-layer",r);return _.createElement("g",qT({className:i},Bn(s,!0),{ref:e}),n)}),h9=_.createContext(null),nge=()=>_.useContext(h9);function In(t){return function(){return t}}const f9=Math.cos,Jw=Math.sin,Io=Math.sqrt,Zw=Math.PI,Yk=2*Zw,KT=Math.PI,XT=2*KT,Od=1e-6,rge=XT-Od;function p9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function sge(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return p9;const n=10**e;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class ige{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?p9:sge(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,i,a){this._append`C${+e},${+n},${+r},${+s},${this._x1=+i},${this._y1=+a}`}arcTo(e,n,r,s,i){if(e=+e,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,l=r-e,c=s-n,u=a-e,d=o-n,p=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Od)if(!(Math.abs(d*l-c*u)>Od)||!i)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,y=s-o,x=l*l+c*c,v=g*g+y*y,w=Math.sqrt(x),k=Math.sqrt(p),S=i*Math.tan((KT-Math.acos((x+p-v)/(2*w*k)))/2),I=S/k,E=S/w;Math.abs(I-1)>Od&&this._append`L${e+I*u},${n+I*d}`,this._append`A${i},${i},0,0,${+(d*g>u*y)},${this._x1=e+E*l},${this._y1=n+E*c}`}}arc(e,n,r,s,i,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),l=r*Math.sin(s),c=e+o,u=n+l,d=1^a,p=a?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Od||Math.abs(this._y1-u)>Od)&&this._append`L${c},${u}`,r&&(p<0&&(p=p%XT+XT),p>rge?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:p>Od&&this._append`A${r},${r},0,${+(p>=KT)},${d},${this._x1=e+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function VR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ige(e)}function BR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function m9(t){this._context=t}m9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qk(t){return new m9(t)}function g9(t){return t[0]}function y9(t){return t[1]}function x9(t,e){var n=In(!0),r=null,s=Qk,i=null,a=VR(o);t=typeof t=="function"?t:t===void 0?g9:In(t),e=typeof e=="function"?e:e===void 0?y9:In(e);function o(l){var c,u=(l=BR(l)).length,d,p=!1,g;for(r==null&&(i=s(g=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+t(d,c,l),+e(d,c,l));if(g)return i=null,g+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:In(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:In(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:In(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(i=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=i=null:i=s(r=l),o):r},o}function Eb(t,e,n){var r=null,s=In(!0),i=null,a=Qk,o=null,l=VR(c);t=typeof t=="function"?t:t===void 0?g9:In(+t),e=typeof e=="function"?e:In(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y9:In(+n);function c(d){var p,g,y,x=(d=BR(d)).length,v,w=!1,k,S=new Array(x),I=new Array(x);for(i==null&&(o=a(k=l())),p=0;p<=x;++p){if(!(p<x&&s(v=d[p],p,d))===w)if(w=!w)g=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=p-1;y>=g;--y)o.point(S[y],I[y]);o.lineEnd(),o.areaEnd()}w&&(S[p]=+t(v,p,d),I[p]=+e(v,p,d),o.point(r?+r(v,p,d):S[p],n?+n(v,p,d):I[p]))}if(k)return o=null,k+""||null}function u(){return x9().defined(s).curve(a).context(i)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:In(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:In(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:In(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:In(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:In(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:In(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(s=typeof d=="function"?d:In(!!d),c):s},c.curve=function(d){return arguments.length?(a=d,i!=null&&(o=a(i)),c):a},c.context=function(d){return arguments.length?(d==null?i=o=null:o=a(i=d),c):i},c}class v9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function age(t){return new v9(t,!0)}function oge(t){return new v9(t,!1)}const zR={draw(t,e){const n=Io(e/Zw);t.moveTo(n,0),t.arc(0,0,n,0,Yk)}},lge={draw(t,e){const n=Io(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},b9=Io(1/3),cge=b9*2,uge={draw(t,e){const n=Io(e/cge),r=n*b9;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},dge={draw(t,e){const n=Io(e),r=-n/2;t.rect(r,r,n,n)}},hge=.8908130915292852,w9=Jw(Zw/10)/Jw(7*Zw/10),fge=Jw(Yk/10)*w9,pge=-f9(Yk/10)*w9,mge={draw(t,e){const n=Io(e*hge),r=fge*n,s=pge*n;t.moveTo(0,-n),t.lineTo(r,s);for(let i=1;i<5;++i){const a=Yk*i/5,o=f9(a),l=Jw(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*s,l*r+o*s)}t.closePath()}},gI=Io(3),gge={draw(t,e){const n=-Io(e/(gI*3));t.moveTo(0,n*2),t.lineTo(-gI*n,-n),t.lineTo(gI*n,-n),t.closePath()}},pa=-.5,ma=Io(3)/2,YT=1/Io(12),yge=(YT/2+1)*3,xge={draw(t,e){const n=Io(e/yge),r=n/2,s=n*YT,i=r,a=n*YT+n,o=-i,l=a;t.moveTo(r,s),t.lineTo(i,a),t.lineTo(o,l),t.lineTo(pa*r-ma*s,ma*r+pa*s),t.lineTo(pa*i-ma*a,ma*i+pa*a),t.lineTo(pa*o-ma*l,ma*o+pa*l),t.lineTo(pa*r+ma*s,pa*s-ma*r),t.lineTo(pa*i+ma*a,pa*a-ma*i),t.lineTo(pa*o+ma*l,pa*l-ma*o),t.closePath()}};function vge(t,e){let n=null,r=VR(s);t=typeof t=="function"?t:In(t||zR),e=typeof e=="function"?e:In(e===void 0?64:+e);function s(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(t=typeof i=="function"?i:In(i),s):t},s.size=function(i){return arguments.length?(e=typeof i=="function"?i:In(+i),s):e},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function e1(){}function t1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function k9(t){this._context=t}k9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bge(t){return new k9(t)}function S9(t){this._context=t}S9.prototype={areaStart:e1,areaEnd:e1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:t1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wge(t){return new S9(t)}function N9(t){this._context=t}N9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:t1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function kge(t){return new N9(t)}function C9(t){this._context=t}C9.prototype={areaStart:e1,areaEnd:e1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Sge(t){return new C9(t)}function nL(t){return t<0?-1:1}function rL(t,e,n){var r=t._x1-t._x0,s=e-t._x1,i=(t._y1-t._y0)/(r||s<0&&-0),a=(n-t._y1)/(s||r<0&&-0),o=(i*s+a*r)/(r+s);return(nL(i)+nL(a))*Math.min(Math.abs(i),Math.abs(a),.5*Math.abs(o))||0}function sL(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function yI(t,e,n){var r=t._x0,s=t._y0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,s+o*e,i-o,a-o*n,i,a)}function n1(t){this._context=t}n1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yI(this,this._t0,sL(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yI(this,sL(this,n=rL(this,t,e)),n);break;default:yI(this,this._t0,n=rL(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function I9(t){this._context=new E9(t)}(I9.prototype=Object.create(n1.prototype)).point=function(t,e){n1.prototype.point.call(this,e,t)};function E9(t){this._context=t}E9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,i){this._context.bezierCurveTo(e,t,r,n,i,s)}};function Nge(t){return new n1(t)}function Cge(t){return new I9(t)}function T9(t){this._context=t}T9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iL(t),s=iL(e),i=0,a=1;a<n;++i,++a)this._context.bezierCurveTo(r[0][i],s[0][i],r[1][i],s[1][i],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iL(t){var e,n=t.length-1,r,s=new Array(n),i=new Array(n),a=new Array(n);for(s[0]=0,i[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,i[e]=4,a[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,i[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/i[e-1],i[e]-=r,a[e]-=r*a[e-1];for(s[n-1]=a[n-1]/i[n-1],e=n-2;e>=0;--e)s[e]=(a[e]-s[e+1])/i[e];for(i[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)i[e]=2*t[e+1]-s[e+1];return[s,i]}function Ige(t){return new T9(t)}function Jk(t,e){this._context=t,this._t=e}Jk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ege(t){return new Jk(t,.5)}function Tge(t){return new Jk(t,0)}function _ge(t){return new Jk(t,1)}function Op(t,e){if((a=t.length)>1)for(var n=1,r,s,i=t[e[0]],a,o=i.length;n<a;++n)for(s=i,i=t[e[n]],r=0;r<o;++r)i[r][1]+=i[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function QT(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Age(t,e){return t[e]}function Rge(t){const e=[];return e.key=t,e}function $ge(){var t=In([]),e=QT,n=Op,r=Age;function s(i){var a=Array.from(t.apply(this,arguments),Rge),o,l=a.length,c=-1,u;for(const d of i)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,i)]).data=d;for(o=0,u=BR(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:In(Array.from(i)),s):t},s.value=function(i){return arguments.length?(r=typeof i=="function"?i:In(+i),s):r},s.order=function(i){return arguments.length?(e=i==null?QT:typeof i=="function"?i:In(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Op,s):n},s}function Pge(t,e){if((r=t.length)>0){for(var n,r,s=0,i=t[0].length,a;s<i;++s){for(a=n=0;n<r;++n)a+=t[n][s][1]||0;if(a)for(n=0;n<r;++n)t[n][s][1]/=a}Op(t,e)}}function jge(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,i=r.length;n<i;++n){for(var a=0,o=0;a<s;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Op(t,e)}}function Dge(t,e){if(!(!((a=t.length)>0)||!((i=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,i,a;r<i;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],d=u[r][1]||0,p=u[r-1][1]||0,g=(d-p)/2,y=0;y<o;++y){var x=t[e[y]],v=x[r][1]||0,w=x[r-1][1]||0;g+=v-w}l+=d,c+=g*d}s[r-1][1]+=s[r-1][0]=n,l&&(n-=c/l)}s[r-1][1]+=s[r-1][0]=n,Op(t,e)}}var Oge=["type","size","sizeType"];function JT(){return JT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JT.apply(null,arguments)}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){Mge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mge(t,e,n){return(e=Fge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fge(t){var e=Lge(t,"string");return typeof e=="symbol"?e:e+""}function Lge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vge(t,e){if(t==null)return{};var n,r,s=Bge(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Bge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _9={symbolCircle:zR,symbolCross:lge,symbolDiamond:uge,symbolSquare:dge,symbolStar:mge,symbolTriangle:gge,symbolWye:xge},zge=Math.PI/180,Uge=t=>{var e="symbol".concat(mx(t));return _9[e]||zR},Wge=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*zge;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Gge=(t,e)=>{_9["symbol".concat(mx(t))]=e},UR=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,s=Vge(t,Oge),i=oL(oL({},s),{},{type:e,size:n,sizeType:r}),a=()=>{var d=Uge(e),p=vge().type(d).size(Wge(n,r,e));return p()},{className:o,cx:l,cy:c}=i,u=Bn(i,!0);return l===+l&&c===+c&&n===+n?_.createElement("path",JT({},u,{className:Bt("recharts-symbols",o),transform:"translate(".concat(l,", ").concat(c,")"),d:a()})):null};UR.registerSymbol=Gge;function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZT.apply(null,arguments)}function lL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(n),!0).forEach(function(r){WR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WR(t,e,n){return(e=qge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qge(t){var e=Kge(t,"string");return typeof e=="symbol"?e:e+""}function Kge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ga=32;class GR extends _.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,s=ga/2,i=ga/6,a=ga/3,o=e.inactive?r:e.color,l=n??e.type;if(l==="none")return null;if(l==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:s,x2:ga,y2:s,className:"recharts-legend-icon"});if(l==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(s,"h").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(s,`
            H`).concat(ga,"M").concat(2*a,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(s),className:"recharts-legend-icon"});if(l==="rect")return _.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(ga/8,"h").concat(ga,"v").concat(ga*3/4,"h").concat(-ga,"z"),className:"recharts-legend-icon"});if(_.isValidElement(e.legendIcon)){var c=Hge({},e);return delete c.legendIcon,_.cloneElement(e.legendIcon,c)}return _.createElement(UR,{fill:o,cx:s,cy:s,size:ga,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:s,inactiveColor:i,iconType:a}=this.props,o={x:0,y:0,width:ga,height:ga},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((u,d)=>{var p=u.formatter||s,g=Bt({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:u.inactive});if(u.type==="none")return null;var y=u.inactive?i:u.color,x=p?p(u.value,u,d):u.value;return _.createElement("li",ZT({className:g,style:l,key:"legend-item-".concat(d)},gx(this.props,u,d)),_.createElement(LR,{width:n,height:n,viewBox:o,style:c,"aria-label":"".concat(x," legend icon")},this.renderIcon(u,a)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},x))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}WR(GR,"displayName","Legend");WR(GR,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var xI={},vI={},cL;function Xge(){return cL||(cL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const s=new Map;for(let i=0;i<n.length;i++){const a=n[i],o=r(a);s.has(o)||s.set(o,a)}return Array.from(s.values())}t.uniqBy=e})(vI)),vI}var bI={},uL;function A9(){return uL||(uL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(bI)),bI}var wI={},kI={},SI={},dL;function Yge(){return dL||(dL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(SI)),SI}var hL;function HR(){return hL||(hL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yge();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(kI)),kI}var NI={},fL;function Qge(){return fL||(fL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(NI)),NI}var pL;function Jge(){return pL||(pL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HR(),n=Qge();function r(s){return n.isObjectLike(s)&&e.isArrayLike(s)}t.isArrayLikeObject=r})(wI)),wI}var CI={},II={},mL;function Zge(){return mL||(mL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OR();function n(r){return function(s){return e.get(s,r)}}t.property=n})(II)),II}var EI={},TI={},_I={},AI={},gL;function R9(){return gL||(gL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(AI)),AI}var RI={},yL;function $9(){return yL||(yL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(RI)),RI}var $I={},xL;function qR(){return xL||(xL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})($I)),$I}var vL;function eye(){return vL||(vL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR(),n=R9(),r=$9(),s=qR();function i(d,p,g){return typeof g!="function"?e.isMatch(d,p):a(d,p,function y(x,v,w,k,S,I){const E=g(x,v,w,k,S,I);return E!==void 0?!!E:a(x,v,y,I)},new Map)}function a(d,p,g,y){if(p===d)return!0;switch(typeof p){case"object":return o(d,p,g,y);case"function":return Object.keys(p).length>0?a(d,{...p},g,y):s.eq(d,p);default:return n.isObject(d)?typeof p=="string"?p==="":!0:s.eq(d,p)}}function o(d,p,g,y){if(p==null)return!0;if(Array.isArray(p))return c(d,p,g,y);if(p instanceof Map)return l(d,p,g,y);if(p instanceof Set)return u(d,p,g,y);const x=Object.keys(p);if(d==null)return x.length===0;if(x.length===0)return!0;if(y&&y.has(p))return y.get(p)===d;y&&y.set(p,d);try{for(let v=0;v<x.length;v++){const w=x[v];if(!r.isPrimitive(d)&&!(w in d)||p[w]===void 0&&d[w]!==void 0||p[w]===null&&d[w]!==null||!g(d[w],p[w],w,d,p,y))return!1}return!0}finally{y&&y.delete(p)}}function l(d,p,g,y){if(p.size===0)return!0;if(!(d instanceof Map))return!1;for(const[x,v]of p.entries()){const w=d.get(x);if(g(w,v,x,d,p,y)===!1)return!1}return!0}function c(d,p,g,y){if(p.length===0)return!0;if(!Array.isArray(d))return!1;const x=new Set;for(let v=0;v<p.length;v++){const w=p[v];let k=!1;for(let S=0;S<d.length;S++){if(x.has(S))continue;const I=d[S];let E=!1;if(g(I,w,v,d,p,y)&&(E=!0),E){x.add(S),k=!0;break}}if(!k)return!1}return!0}function u(d,p,g,y){return p.size===0?!0:d instanceof Set?c([...d],[...p],g,y):!1}t.isMatchWith=i,t.isSetMatch=u})(_I)),_I}var bL;function KR(){return bL||(bL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eye();function n(r,s){return e.isMatchWith(r,s,()=>{})}t.isMatch=n})(TI)),TI}var PI={},jI={},DI={},wL;function P9(){return wL||(wL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(DI)),DI}var OI={},kL;function XR(){return kL||(kL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(OI)),OI}var MI={},SL;function YR(){return SL||(SL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",s="[object Boolean]",i="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",d="[object Function]",p="[object ArrayBuffer]",g="[object Object]",y="[object Error]",x="[object DataView]",v="[object Uint8Array]",w="[object Uint8ClampedArray]",k="[object Uint16Array]",S="[object Uint32Array]",I="[object BigUint64Array]",E="[object Int8Array]",j="[object Int16Array]",A="[object Int32Array]",T="[object BigInt64Array]",$="[object Float32Array]",D="[object Float64Array]";t.argumentsTag=i,t.arrayBufferTag=p,t.arrayTag=u,t.bigInt64ArrayTag=T,t.bigUint64ArrayTag=I,t.booleanTag=s,t.dataViewTag=x,t.dateTag=o,t.errorTag=y,t.float32ArrayTag=$,t.float64ArrayTag=D,t.functionTag=d,t.int16ArrayTag=j,t.int32ArrayTag=A,t.int8ArrayTag=E,t.mapTag=l,t.numberTag=r,t.objectTag=g,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=k,t.uint32ArrayTag=S,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=w})(MI)),MI}var FI={},NL;function tye(){return NL||(NL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(FI)),FI}var CL;function j9(){return CL||(CL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=P9(),n=XR(),r=YR(),s=$9(),i=tye();function a(u,d){return o(u,void 0,u,new Map,d)}function o(u,d,p,g=new Map,y=void 0){const x=y?.(u,d,p,g);if(x!==void 0)return x;if(s.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const v=new Array(u.length);g.set(u,v);for(let w=0;w<u.length;w++)v[w]=o(u[w],w,p,g,y);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;g.set(u,v);for(const[w,k]of u)v.set(w,o(k,w,p,g,y));return v}if(u instanceof Set){const v=new Set;g.set(u,v);for(const w of u)v.add(o(w,void 0,p,g,y));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,v);for(let w=0;w<u.length;w++)v[w]=o(u[w],w,p,g,y);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,v),l(v,u,p,g,y),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return g.set(u,v),l(v,u,p,g,y),v}if(u instanceof Blob){const v=new Blob([u],{type:u.type});return g.set(u,v),l(v,u,p,g,y),v}if(u instanceof Error){const v=new u.constructor;return g.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,l(v,u,p,g,y),v}if(typeof u=="object"&&c(u)){const v=Object.create(Object.getPrototypeOf(u));return g.set(u,v),l(v,u,p,g,y),v}return u}function l(u,d,p=u,g,y){const x=[...Object.keys(d),...e.getSymbols(d)];for(let v=0;v<x.length;v++){const w=x[v],k=Object.getOwnPropertyDescriptor(u,w);(k==null||k.writable)&&(u[w]=o(d[w],w,p,g,y))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(jI)),jI}var IL;function nye(){return IL||(IL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j9();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(PI)),PI}var EL;function rye(){return EL||(EL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR(),n=nye();function r(s){return s=n.cloneDeep(s),i=>e.isMatch(i,s)}t.matches=r})(EI)),EI}var LI={},VI={},BI={},TL;function sye(){return TL||(TL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j9(),n=YR();function r(s,i){return e.cloneDeepWith(s,(a,o,l,c)=>{const u=i?.(a,o,l,c);if(u!==void 0)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const d=new s.constructor(s?.valueOf());return e.copyProperties(d,s),d}case n.argumentsTag:{const d={};return e.copyProperties(d,s),d.length=s.length,d[Symbol.iterator]=s[Symbol.iterator],d}default:return}})}t.cloneDeepWith=r})(BI)),BI}var _L;function iye(){return _L||(_L=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sye();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(VI)),VI}var zI={},UI={},AL;function D9(){return AL||(AL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,s=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<s;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(UI)),UI}var WI={},RL;function aye(){return RL||(RL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=XR();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(WI)),WI}var $L;function oye(){return $L||($L=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i9(),n=D9(),r=aye(),s=DR();function i(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?l=s.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const d=l[u];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}t.has=i})(zI)),zI}var PL;function lye(){return PL||(PL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KR(),n=a9(),r=iye(),s=OR(),i=oye();function a(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const u=s.get(c,o);return u===void 0?i.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=a})(LI)),LI}var jL;function cye(){return jL||(jL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=A9(),n=Zge(),r=rye(),s=lye();function i(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?s.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=i})(CI)),CI}var DL;function uye(){return DL||(DL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xge(),n=A9(),r=Jge(),s=cye();function i(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),s.iteratee(o)):[]}t.uniqBy=i})(xI)),xI}var GI,OL;function dye(){return OL||(OL=1,GI=uye().uniqBy),GI}var hye=dye();const ML=Ra(hye);function O9(t,e,n){return e===!0?ML(t,n):typeof e=="function"?ML(t,e):t}var HI={exports:{}},qI={},KI={exports:{}},XI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FL;function fye(){if(FL)return XI;FL=1;var t=rm();function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,i=t.useLayoutEffect,a=t.useDebugValue;function o(d,p){var g=p(),y=r({inst:{value:g,getSnapshot:p}}),x=y[0].inst,v=y[1];return i(function(){x.value=g,x.getSnapshot=p,l(x)&&v({inst:x})},[d,g,p]),s(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),a(g),g}function l(d){var p=d.getSnapshot;d=d.value;try{var g=p();return!n(d,g)}catch{return!0}}function c(d,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return XI.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,XI}var LL;function pye(){return LL||(LL=1,KI.exports=fye()),KI.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VL;function mye(){if(VL)return qI;VL=1;var t=rm(),e=pye();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return qI.useSyncExternalStoreWithSelector=function(c,u,d,p,g){var y=i(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=o(function(){function w(j){if(!k){if(k=!0,S=j,j=p(j),g!==void 0&&x.hasValue){var A=x.value;if(g(A,j))return I=A}return I=j}if(A=I,r(S,j))return A;var T=p(j);return g!==void 0&&g(A,T)?(S=j,A):(S=j,I=T)}var k=!1,S,I,E=d===void 0?null:d;return[function(){return w(u())},E===null?void 0:function(){return w(E())}]},[u,d,p,g]);var v=s(c,y[0],y[1]);return a(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},qI}var BL;function gye(){return BL||(BL=1,HI.exports=mye()),HI.exports}var yye=gye(),QR=_.createContext(null),xye=t=>t,Xn=()=>{var t=_.useContext(QR);return t?t.store.dispatch:xye},hw=()=>{},vye=()=>hw,bye=(t,e)=>t===e;function it(t){var e=_.useContext(QR);return yye.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:vye,e?e.store.getState:hw,e?e.store.getState:hw,e?t:hw,bye)}function wye(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function kye(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Sye(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var zL=t=>Array.isArray(t)?t:[t];function Nye(t){const e=Array.isArray(t[0])?t[0]:t;return Sye(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Cye(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var Iye=class{constructor(t){this.value=t}deref(){return this.value}},Eye=typeof WeakRef<"u"?WeakRef:Iye,Tye=0,UL=1;function Tb(){return{s:Tye,v:void 0,o:null,p:null}}function M9(t,e={}){let n=Tb();const{resultEqualityCheck:r}=e;let s,i=0;function a(){let o=n;const{length:l}=arguments;for(let d=0,p=l;d<p;d++){const g=arguments[d];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const x=y.get(g);x===void 0?(o=Tb(),y.set(g,o)):o=x}else{let y=o.p;y===null&&(o.p=y=new Map);const x=y.get(g);x===void 0?(o=Tb(),y.set(g,o)):o=x}}const c=o;let u;if(o.s===UL)u=o.v;else if(u=t.apply(null,arguments),i++,r){const d=s?.deref?.()??s;d!=null&&r(d,u)&&(u=d,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new Eye(u):u}return c.s=UL,c.v=u,u}return a.clearCache=()=>{n=Tb(),a.resetResultsCount()},a.resultsCount=()=>i,a.resetResultsCount=()=>{i=0},a}function _ye(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,a=0,o,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),wye(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:p=[],argsMemoize:g=M9,argsMemoizeOptions:y=[]}=u,x=zL(p),v=zL(y),w=Nye(s),k=d(function(){return i++,c.apply(null,arguments)},...x),S=g(function(){a++;const E=Cye(w,arguments);return o=k.apply(null,E),o},...v);return Object.assign(S,{resultFunc:c,memoizedResultFunc:k,dependencies:w,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var ve=_ye(M9),Aye=Object.assign((t,e=ve)=>{kye(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>Aye}),YI={},QI={},JI={},WL;function Rye(){return WL||(WL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,s,i)=>{if(r!==s){const a=e(r),o=e(s);if(a===o&&a===0){if(r<s)return i==="desc"?1:-1;if(r>s)return i==="desc"?-1:1}return i==="desc"?o-a:a-o}return 0};t.compareValues=n})(JI)),JI}var ZI={},eE={},GL;function F9(){return GL||(GL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(eE)),eE}var HL;function $ye(){return HL||(HL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F9(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(i,a){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||e.isSymbol(i)?!0:typeof i=="string"&&(r.test(i)||!n.test(i))||a!=null&&Object.hasOwn(a,i)}t.isKey=s})(ZI)),ZI}var qL;function Pye(){return qL||(qL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rye(),n=$ye(),r=DR();function s(i,a,o,l){if(i==null)return[];o=l?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const c=(g,y)=>{let x=g;for(let v=0;v<y.length&&x!=null;++v)x=x[y[v]];return x},u=(g,y)=>y==null||g==null?y:typeof g=="object"&&"key"in g?Object.hasOwn(y,g.key)?y[g.key]:c(y,g.path):typeof g=="function"?g(y):Array.isArray(g)?c(y,g):typeof y=="object"?y[g]:y,d=a.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||n.isKey(g)?g:{key:g,path:r.toPath(g)}));return i.map(g=>({original:g,criteria:d.map(y=>u(y,g))})).slice().sort((g,y)=>{for(let x=0;x<d.length;x++){const v=e.compareValues(g.criteria[x],y.criteria[x],o[x]);if(v!==0)return v}return 0}).map(g=>g.original)}t.orderBy=s})(QI)),QI}var tE={},KL;function jye(){return KL||(KL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const s=[],i=Math.floor(r),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<i?a(u,l+1):s.push(u)}};return a(n,0),s}t.flatten=e})(tE)),tE}var nE={},XL;function L9(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=D9(),n=HR(),r=R9(),s=qR();function i(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.eq(l[o],a):!1}t.isIterateeCall=i})(nE)),nE}var YL;function Dye(){return YL||(YL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pye(),n=jye(),r=L9();function s(i,...a){const o=a.length;return o>1&&r.isIterateeCall(i,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(i,n.flatten(a),["asc"])}t.sortBy=s})(YI)),YI}var rE,QL;function Oye(){return QL||(QL=1,rE=Dye().sortBy),rE}var Mye=Oye();const Zk=Ra(Mye);var V9=t=>t.legend.settings,Fye=t=>t.legend.size,Lye=t=>t.legend.payload,Vye=ve([Lye,V9],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Zk(r,n):r});function Bye(){return it(Vye)}var _b=1;function B9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=_.useState({height:0,left:0,top:0,width:0}),r=_.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-e.height)>_b||Math.abs(a.left-e.left)>_b||Math.abs(a.top-e.top)>_b||Math.abs(a.width-e.width)>_b)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function fs(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zye=typeof Symbol=="function"&&Symbol.observable||"@@observable",JL=zye,sE=()=>Math.random().toString(36).substring(7).split("").join("."),Uye={INIT:`@@redux/INIT${sE()}`,REPLACE:`@@redux/REPLACE${sE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sE()}`},r1=Uye;function JR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function z9(t,e,n){if(typeof t!="function")throw new Error(fs(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(fs(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(fs(1));return n(z9)(t,e)}let r=t,s=e,i=new Map,a=i,o=0,l=!1;function c(){a===i&&(a=new Map,i.forEach((v,w)=>{a.set(w,v)}))}function u(){if(l)throw new Error(fs(3));return s}function d(v){if(typeof v!="function")throw new Error(fs(4));if(l)throw new Error(fs(5));let w=!0;c();const k=o++;return a.set(k,v),function(){if(w){if(l)throw new Error(fs(6));w=!1,c(),a.delete(k),i=null}}}function p(v){if(!JR(v))throw new Error(fs(7));if(typeof v.type>"u")throw new Error(fs(8));if(typeof v.type!="string")throw new Error(fs(17));if(l)throw new Error(fs(9));try{l=!0,s=r(s,v)}finally{l=!1}return(i=a).forEach(k=>{k()}),v}function g(v){if(typeof v!="function")throw new Error(fs(10));r=v,p({type:r1.REPLACE})}function y(){const v=d;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(fs(11));function k(){const I=w;I.next&&I.next(u())}return k(),{unsubscribe:v(k)}},[JL](){return this}}}return p({type:r1.INIT}),{dispatch:p,subscribe:d,getState:u,replaceReducer:g,[JL]:y}}function Wye(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:r1.INIT})>"u")throw new Error(fs(12));if(typeof n(void 0,{type:r1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fs(13))})}function U9(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const a=e[i];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let s;try{Wye(n)}catch(i){s=i}return function(a={},o){if(s)throw s;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],p=n[d],g=a[d],y=p(g,o);if(typeof y>"u")throw o&&o.type,new Error(fs(14));c[d]=y,l=l||y!==g}return l=l||r.length!==Object.keys(a).length,l?c:a}}function s1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Gye(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(fs(15))};const a={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},o=t.map(l=>l(a));return i=s1(...o)(s.dispatch),{...s,dispatch:i}}}function W9(t){return JR(t)&&"type"in t&&typeof t.type=="string"}var G9=Symbol.for("immer-nothing"),ZL=Symbol.for("immer-draftable"),Yi=Symbol.for("immer-state");function lo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Mp=Object.getPrototypeOf;function wh(t){return!!t&&!!t[Yi]}function tc(t){return t?H9(t)||Array.isArray(t)||!!t[ZL]||!!t.constructor?.[ZL]||xx(t)||tS(t):!1}var Hye=Object.prototype.constructor.toString();function H9(t){if(!t||typeof t!="object")return!1;const e=Mp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Hye}function i1(t,e){eS(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function eS(t){const e=t[Yi];return e?e.type_:Array.isArray(t)?1:xx(t)?2:tS(t)?3:0}function e_(t,e){return eS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function q9(t,e,n){const r=eS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function qye(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function xx(t){return t instanceof Map}function tS(t){return t instanceof Set}function Md(t){return t.copy_||t.base_}function t_(t,e){if(xx(t))return new Map(t);if(tS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=H9(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Yi];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const a=s[i],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Mp(t),r)}else{const r=Mp(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function ZR(t,e=!1){return nS(t)||wh(t)||!tc(t)||(eS(t)>1&&Object.defineProperties(t,{set:{value:Ab},add:{value:Ab},clear:{value:Ab},delete:{value:Ab}}),Object.freeze(t),e&&Object.values(t).forEach(n=>ZR(n,!0))),t}function Ab(){lo(2)}function nS(t){return Object.isFrozen(t)}var Kye={};function kh(t){const e=Kye[t];return e||lo(0,t),e}var Oy;function K9(){return Oy}function Xye(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eV(t,e){e&&(kh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function n_(t){r_(t),t.drafts_.forEach(Yye),t.drafts_=null}function r_(t){t===Oy&&(Oy=t.parent_)}function tV(t){return Oy=Xye(Oy,t)}function Yye(t){const e=t[Yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function nV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Yi].modified_&&(n_(e),lo(4)),tc(t)&&(t=a1(e,t),e.parent_||o1(e,t)),e.patches_&&kh("Patches").generateReplacementPatches_(n[Yi].base_,t,e.patches_,e.inversePatches_)):t=a1(e,n,[]),n_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==G9?t:void 0}function a1(t,e,n){if(nS(e))return e;const r=e[Yi];if(!r)return i1(e,(s,i)=>rV(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return o1(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,a=!1;r.type_===3&&(i=new Set(s),s.clear(),a=!0),i1(i,(o,l)=>rV(t,r,s,o,l,n,a)),o1(t,s,!1),n&&t.patches_&&kh("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function rV(t,e,n,r,s,i,a){if(wh(s)){const o=i&&e&&e.type_!==3&&!e_(e.assigned_,r)?i.concat(r):void 0,l=a1(t,s,o);if(q9(n,r,l),wh(l))t.canAutoFreeze_=!1;else return}else a&&n.add(s);if(tc(s)&&!nS(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;a1(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(xx(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&o1(t,s)}}function o1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ZR(e,n)}function Qye(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:K9(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=e$;n&&(s=[r],i=My);const{revoke:a,proxy:o}=Proxy.revocable(s,i);return r.draft_=o,r.revoke_=a,o}var e$={get(t,e){if(e===Yi)return t;const n=Md(t);if(!e_(n,e))return Jye(t,n,e);const r=n[e];return t.finalized_||!tc(r)?r:r===iE(t.base_,e)?(aE(t),t.copy_[e]=i_(r,t)):r},has(t,e){return e in Md(t)},ownKeys(t){return Reflect.ownKeys(Md(t))},set(t,e,n){const r=X9(Md(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=iE(Md(t),e),i=s?.[Yi];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(qye(n,s)&&(n!==void 0||e_(t.base_,e)))return!0;aE(t),s_(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return iE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,aE(t),s_(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Md(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){lo(11)},getPrototypeOf(t){return Mp(t.base_)},setPrototypeOf(){lo(12)}},My={};i1(e$,(t,e)=>{My[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});My.deleteProperty=function(t,e){return My.set.call(this,t,e,void 0)};My.set=function(t,e,n){return e$.set.call(this,t[0],e,n,t[0])};function iE(t,e){const n=t[Yi];return(n?Md(n):t)[e]}function Jye(t,e,n){const r=X9(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function X9(t,e){if(!(e in t))return;let n=Mp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Mp(n)}}function s_(t){t.modified_||(t.modified_=!0,t.parent_&&s_(t.parent_))}function aE(t){t.copy_||(t.copy_=t_(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Zye=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const a=this;return function(l=i,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&lo(6),r!==void 0&&typeof r!="function"&&lo(7);let s;if(tc(e)){const i=tV(this),a=i_(e,void 0);let o=!0;try{s=n(a),o=!1}finally{o?n_(i):r_(i)}return eV(i,r),nV(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===G9&&(s=void 0),this.autoFreeze_&&ZR(s,!0),r){const i=[],a=[];kh("Patches").generateReplacementPatches_(e,s,i,a),r(i,a)}return s}else lo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,s;return[this.produce(e,n,(a,o)=>{r=a,s=o}),r,s]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){tc(t)||lo(8),wh(t)&&(t=Gl(t));const e=tV(this),n=i_(t,void 0);return n[Yi].isManual_=!0,r_(e),n}finishDraft(t,e){const n=t&&t[Yi];(!n||!n.isManual_)&&lo(9);const{scope_:r}=n;return eV(r,e),nV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=kh("Patches").applyPatches_;return wh(t)?r(t,e):this.produce(t,s=>r(s,e))}};function i_(t,e){const n=xx(t)?kh("MapSet").proxyMap_(t,e):tS(t)?kh("MapSet").proxySet_(t,e):Qye(t,e);return(e?e.scope_:K9()).drafts_.push(n),n}function Gl(t){return wh(t)||lo(10,t),Y9(t)}function Y9(t){if(!tc(t)||nS(t))return t;const e=t[Yi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=t_(t,e.scope_.immer_.useStrictShallowCopy_)}else n=t_(t,!0);return i1(n,(r,s)=>{q9(n,r,Y9(s))}),e&&(e.finalized_=!1),n}var exe=new Zye,Q9=exe.produce;function J9(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var txe=J9(),nxe=J9,rxe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?s1:s1.apply(null,arguments)};function Ea(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(Hi(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>W9(r)&&r.type===t,n}var Z9=class Yg extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Yg.prototype)}static get[Symbol.species](){return Yg}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Yg(...e[0].concat(this)):new Yg(...e.concat(this))}};function sV(t){return tc(t)?Q9(t,()=>{}):t}function Rb(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function sxe(t){return typeof t=="boolean"}var ixe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let a=new Z9;return n&&(sxe(n)?a.push(txe):a.push(nxe(n.extraArgument))),a},axe="RTK_autoBatch",iV=t=>e=>{setTimeout(e,t)},oxe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:iV(10):t.type==="callback"?t.queueNotification:iV(t.timeout),c=()=>{a=!1,i&&(i=!1,o.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>s&&u(),p=r.subscribe(d);return o.add(u),()=>{p(),o.delete(u)}},dispatch(u){try{return s=!u?.meta?.[axe],i=!s,i&&(a||(a=!0,l(c))),r.dispatch(u)}finally{s=!0}}})},lxe=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new Z9(t);return r&&s.push(oxe(typeof r=="object"?r:void 0)),s};function cxe(t){const e=ixe(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(JR(n))o=U9(n);else throw new Error(Hi(1));let l;typeof r=="function"?l=r(e):l=e();let c=s1;s&&(c=rxe({trace:!1,...typeof s=="object"&&s}));const u=Gye(...l),d=lxe(u);let p=typeof a=="function"?a(d):d();const g=c(...p);return z9(o,i,g)}function eH(t){const e={},n=[];let r;const s={addCase(i,a){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Hi(28));if(o in e)throw new Error(Hi(29));return e[o]=a,s},addAsyncThunk(i,a){return a.pending&&(e[i.pending.type]=a.pending),a.rejected&&(e[i.rejected.type]=a.rejected),a.fulfilled&&(e[i.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:i.settled,reducer:a.settled}),s},addMatcher(i,a){return n.push({matcher:i,reducer:a}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function uxe(t){return typeof t=="function"}function dxe(t,e){let[n,r,s]=eH(e),i;if(uxe(t))i=()=>sV(t());else{const o=sV(t);i=()=>o}function a(o=i(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,d)=>{if(d)if(wh(u)){const g=d(u,l);return g===void 0?u:g}else{if(tc(u))return Q9(u,p=>d(p,l));{const p=d(u,l);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},o)}return a.getInitialState=i,a}var hxe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",fxe=(t=21)=>{let e="",n=t;for(;n--;)e+=hxe[Math.random()*64|0];return e},pxe=Symbol.for("rtk-slice-createasyncthunk");function mxe(t,e){return`${t}/${e}`}function gxe({creators:t}={}){const e=t?.asyncThunk?.[pxe];return function(r){const{name:s,reducerPath:i=s}=r;if(!s)throw new Error(Hi(11));const a=(typeof r.reducers=="function"?r.reducers(xxe()):r.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(S,I){const E=typeof S=="string"?S:S.type;if(!E)throw new Error(Hi(12));if(E in l.sliceCaseReducersByType)throw new Error(Hi(13));return l.sliceCaseReducersByType[E]=I,c},addMatcher(S,I){return l.sliceMatchers.push({matcher:S,reducer:I}),c},exposeAction(S,I){return l.actionCreators[S]=I,c},exposeCaseReducer(S,I){return l.sliceCaseReducersByName[S]=I,c}};o.forEach(S=>{const I=a[S],E={reducerName:S,type:mxe(s,S),createNotation:typeof r.reducers=="function"};bxe(I)?kxe(E,I,c,e):vxe(E,I,c)});function u(){const[S={},I=[],E=void 0]=typeof r.extraReducers=="function"?eH(r.extraReducers):[r.extraReducers],j={...S,...l.sliceCaseReducersByType};return dxe(r.initialState,A=>{for(let T in j)A.addCase(T,j[T]);for(let T of l.sliceMatchers)A.addMatcher(T.matcher,T.reducer);for(let T of I)A.addMatcher(T.matcher,T.reducer);E&&A.addDefaultCase(E)})}const d=S=>S,p=new Map,g=new WeakMap;let y;function x(S,I){return y||(y=u()),y(S,I)}function v(){return y||(y=u()),y.getInitialState()}function w(S,I=!1){function E(A){let T=A[S];return typeof T>"u"&&I&&(T=Rb(g,E,v)),T}function j(A=d){const T=Rb(p,I,()=>new WeakMap);return Rb(T,A,()=>{const $={};for(const[D,R]of Object.entries(r.selectors??{}))$[D]=yxe(R,A,()=>Rb(g,A,v),I);return $})}return{reducerPath:S,getSelectors:j,get selectors(){return j(E)},selectSlice:E}}const k={name:s,reducer:x,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...w(i),injectInto(S,{reducerPath:I,...E}={}){const j=I??i;return S.inject({reducerPath:j,reducer:x},E),{...k,...w(j,!0)}}};return k}}function yxe(t,e,n,r){function s(i,...a){let o=e(i);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return s.unwrapped=t,s}var Zi=gxe();function xxe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function vxe({type:t,reducerName:e,createNotation:n},r,s){let i,a;if("reducer"in r){if(n&&!wxe(r))throw new Error(Hi(17));i=r.reducer,a=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,a?Ea(t,a):Ea(t))}function bxe(t){return t._reducerDefinitionType==="asyncThunk"}function wxe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function kxe({type:t,reducerName:e},n,r,s){if(!s)throw new Error(Hi(18));const{payloadCreator:i,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,d=s(t,i,u);r.exposeAction(e,d),a&&r.addCase(d.fulfilled,a),o&&r.addCase(d.pending,o),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:a||$b,pending:o||$b,rejected:l||$b,settled:c||$b})}function $b(){}var Sxe="task",tH="listener",nH="completed",t$="cancelled",Nxe=`task-${t$}`,Cxe=`task-${nH}`,a_=`${tH}-${t$}`,Ixe=`${tH}-${nH}`,rS=class{constructor(t){this.code=t,this.message=`${Sxe} ${t$} (reason: ${t})`}name="TaskAbortError";message},n$=(t,e)=>{if(typeof t!="function")throw new TypeError(Hi(32))},l1=()=>{},rH=(t,e=l1)=>(t.catch(e),t),sH=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),rh=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},sh=t=>{if(t.aborted){const{reason:e}=t;throw new rS(e)}};function iH(t,e){let n=l1;return new Promise((r,s)=>{const i=()=>s(new rS(t.reason));if(t.aborted){i();return}n=sH(t,i),e.finally(()=>n()).then(r,s)}).finally(()=>{n=l1})}var Exe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof rS?"cancelled":"rejected",error:n}}finally{e?.()}},c1=t=>e=>rH(iH(t,e).then(n=>(sh(t),n))),aH=t=>{const e=c1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:vp}=Object,aV={},sS="listenerMiddleware",Txe=(t,e)=>{const n=r=>sH(t,()=>rh(r,t.reason));return(r,s)=>{n$(r);const i=new AbortController;n(i);const a=Exe(async()=>{sh(t),sh(i.signal);const o=await r({pause:c1(i.signal),delay:aH(i.signal),signal:i.signal});return sh(i.signal),o},()=>rh(i,Cxe));return s?.autoJoin&&e.push(a.catch(l1)),{result:c1(t)(a),cancel(){rh(i,Nxe)}}}},_xe=(t,e)=>{const n=async(r,s)=>{sh(e);let i=()=>{};const o=[new Promise((l,c)=>{let u=t({predicate:r,effect:(d,p)=>{p.unsubscribe(),l([d,p.getState(),p.getOriginalState()])}});i=()=>{u(),c()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await iH(e,Promise.race(o));return sh(e),l}finally{i()}};return(r,s)=>rH(n(r,s))},oH=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=Ea(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(Hi(21));return n$(i),{predicate:s,type:e,effect:i}},lH=vp(t=>{const{type:e,predicate:n,effect:r}=oH(t);return{id:fxe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Hi(22))}}},{withTypes:()=>lH}),oV=(t,e)=>{const{type:n,effect:r,predicate:s}=oH(e);return Array.from(t.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===r)},o_=t=>{t.pending.forEach(e=>{rh(e,a_)})},Axe=t=>()=>{t.forEach(o_),t.clear()},lV=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},cH=vp(Ea(`${sS}/add`),{withTypes:()=>cH}),Rxe=Ea(`${sS}/removeAll`),uH=vp(Ea(`${sS}/remove`),{withTypes:()=>uH}),$xe=(...t)=>{console.error(`${sS}/error`,...t)},vx=(t={})=>{const e=new Map,{extra:n,onError:r=$xe}=t;n$(r);const s=u=>(u.unsubscribe=()=>e.delete(u.id),e.set(u.id,u),d=>{u.unsubscribe(),d?.cancelActive&&o_(u)}),i=u=>{const d=oV(e,u)??lH(u);return s(d)};vp(i,{withTypes:()=>i});const a=u=>{const d=oV(e,u);return d&&(d.unsubscribe(),u.cancelActive&&o_(d)),!!d};vp(a,{withTypes:()=>a});const o=async(u,d,p,g)=>{const y=new AbortController,x=_xe(i,y.signal),v=[];try{u.pending.add(y),await Promise.resolve(u.effect(d,vp({},p,{getOriginalState:g,condition:(w,k)=>x(w,k).then(Boolean),take:x,delay:aH(y.signal),pause:c1(y.signal),extra:n,signal:y.signal,fork:Txe(y.signal,v),unsubscribe:u.unsubscribe,subscribe:()=>{e.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((w,k,S)=>{w!==y&&(rh(w,a_),S.delete(w))})},cancel:()=>{rh(y,a_),u.pending.delete(y)},throwIfCancelled:()=>{sh(y.signal)}})))}catch(w){w instanceof rS||lV(r,w,{raisedBy:"effect"})}finally{await Promise.all(v),rh(y,Ixe),u.pending.delete(y)}},l=Axe(e);return{middleware:u=>d=>p=>{if(!W9(p))return d(p);if(cH.match(p))return i(p.payload);if(Rxe.match(p)){l();return}if(uH.match(p))return a(p.payload);let g=u.getState();const y=()=>{if(g===aV)throw new Error(Hi(23));return g};let x;try{if(x=d(p),e.size>0){const v=u.getState(),w=Array.from(e.values());for(const k of w){let S=!1;try{S=k.predicate(p,v,g)}catch(I){S=!1,lV(r,I,{raisedBy:"predicate"})}S&&o(k,p,u,y)}}}finally{g=aV}return x},startListening:i,stopListening:a,clearListeners:l}};function Hi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Pxe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},dH=Zi({name:"chartLayout",initialState:Pxe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:jxe,setLayout:Dxe,setChartSize:Oxe,setScale:Mxe}=dH.actions,Fxe=dH.reducer;function cV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function uV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cV(Object(n),!0).forEach(function(r){Lxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lxe(t,e,n){return(e=Vxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vxe(t){var e=Bxe(t,"string");return typeof e=="symbol"?e:e+""}function Bxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u1=Math.PI/180,zxe=t=>t*180/Math.PI,xr=(t,e,n,r)=>({x:t+Math.cos(-u1*r)*n,y:e+Math.sin(-u1*r)*n}),hH=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Uxe=(t,e)=>{var{x:n,y:r}=t,{x:s,y:i}=e;return Math.sqrt((n-s)**2+(r-i)**2)},Wxe=(t,e)=>{var{x:n,y:r}=t,{cx:s,cy:i}=e,a=Uxe({x:n,y:r},{x:s,y:i});if(a<=0)return{radius:a,angle:0};var o=(n-s)/a,l=Math.acos(o);return r>i&&(l=2*Math.PI-l),{radius:a,angle:zxe(l),angleInRadian:l}},Gxe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),s=Math.floor(n/360),i=Math.min(r,s);return{startAngle:e-i*360,endAngle:n-i*360}},Hxe=(t,e)=>{var{startAngle:n,endAngle:r}=e,s=Math.floor(n/360),i=Math.floor(r/360),a=Math.min(s,i);return t+a*360},qxe=(t,e)=>{var{x:n,y:r}=t,{radius:s,angle:i}=Wxe({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(s<a||s>o||s===0)return null;var{startAngle:l,endAngle:c}=Gxe(e),u=i,d;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;d=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;d=u>=c&&u<=l}return d?uV(uV({},e),{},{radius:s,angle:Hxe(u,e)}):null};function fH(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){Kxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kxe(t,e,n){return(e=Xxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xxe(t){var e=Yxe(t,"string");return typeof e=="symbol"?e:e+""}function Yxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bn(t,e,n){return Dn(t)||Dn(e)?n:cl(e)?Nu(t,e,n):typeof e=="function"?e(t):n}var Qxe=(t,e,n,r,s)=>{var i,a=-1,o=(i=e?.length)!==null&&i!==void 0?i:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,u=n[l].coordinate,d=l>=o-1?n[0].coordinate:n[l+1].coordinate,p=void 0;if(es(u-c)!==es(d-u)){var g=[];if(es(d-u)===es(s[1]-s[0])){p=d;var y=u+s[1]-s[0];g[0]=Math.min(y,(y+c)/2),g[1]=Math.max(y,(y+c)/2)}else{p=c;var x=d+s[1]-s[0];g[0]=Math.min(u,(x+u)/2),g[1]=Math.max(u,(x+u)/2)}var v=[Math.min(u,(p+u)/2),Math.max(u,(p+u)/2)];if(t>v[0]&&t<=v[1]||t>=g[0]&&t<=g[1]){({index:a}=n[l]);break}}else{var w=Math.min(c,d),k=Math.max(c,d);if(t>(w+u)/2&&t<=(k+u)/2){({index:a}=n[l]);break}}}else if(e){for(var S=0;S<o;S++)if(S===0&&t<=(e[S].coordinate+e[S+1].coordinate)/2||S>0&&S<o-1&&t>(e[S].coordinate+e[S-1].coordinate)/2&&t<=(e[S].coordinate+e[S+1].coordinate)/2||S===o-1&&t>(e[S].coordinate+e[S-1].coordinate)/2){({index:a}=e[S]);break}}return a},Jxe=(t,e,n)=>{if(e&&n){var{width:r,height:s}=n,{align:i,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&i!=="center"&&qe(t[i]))return ka(ka({},t),{},{[i]:t[i]+(r||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&a!=="middle"&&qe(t[a]))return ka(ka({},t),{},{[a]:t[a]+(s||0)})}return t},Lu=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",pH=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var s,i,a=t.map(o=>(o.coordinate===e&&(s=!0),o.coordinate===n&&(i=!0),o.coordinate));return s||a.push(e),i||a.push(n),a},mH=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:s,range:i,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:p,axisType:g}=t;if(!a)return null;var y=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,x=s==="category"&&a.bandwidth?a.bandwidth()/y:0;if(x=g==="angleAxis"&&i&&i.length>=2?es(i[0]-i[1])*2*x:x,d||p){var v=(d||p||[]).map((w,k)=>{var S=r?r.indexOf(w):w;return{coordinate:a(S)+x,value:w,offset:x,index:k}});return v.filter(w=>!Xi(w.coordinate))}return l&&c?c.map((w,k)=>({coordinate:a(w)+x,value:w,index:k,offset:x})):a.ticks&&u!=null?a.ticks(u).map((w,k)=>({coordinate:a(w)+x,value:w,offset:x,index:k})):a.domain().map((w,k)=>({coordinate:a(w)+x,value:r?r[w]:w,index:k,offset:x}))},hV=1e-4,Zxe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),s=Math.min(r[0],r[1])-hV,i=Math.max(r[0],r[1])+hV,a=t(e[0]),o=t(e[n-1]);(a<s||a>i||o<s||o>i)&&t.domain([e[0],e[n-1]])}},eve=(t,e)=>{if(!e||e.length!==2||!qe(e[0])||!qe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),s=[t[0],t[1]];return(!qe(t[0])||t[0]<n)&&(s[0]=n),(!qe(t[1])||t[1]>r)&&(s[1]=r),s[0]>r&&(s[0]=r),s[1]<n&&(s[1]=n),s},tve=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0,a=0;a<e;++a){var o=Xi(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1]):(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1])}},nve=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var s=0,i=0;i<e;++i){var a=Xi(t[i][n][1])?t[i][n][0]:t[i][n][1];a>=0?(t[i][n][0]=s,t[i][n][1]=s+a,s=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},rve={sign:tve,expand:Pge,none:Op,silhouette:jge,wiggle:Dge,positive:nve},sve=(t,e,n)=>{var r=rve[n],s=$ge().keys(e).value((i,a)=>+bn(i,a,0)).order(QT).offset(r);return s(t)};function ive(t){return t==null?void 0:String(t)}function fV(t){var{axis:e,ticks:n,bandSize:r,entry:s,index:i,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Dn(s[e.dataKey])){var o=l9(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var l=bn(s,Dn(a)?e.dataKey:a);return Dn(l)?null:e.scale(l)}var pV=t=>{var{axis:e,ticks:n,offset:r,bandSize:s,entry:i,index:a}=t;if(e.type==="category")return n[a]?n[a].coordinate+r:null;var o=bn(i,e.dataKey,e.scale.domain()[a]);return Dn(o)?null:e.scale(o)-s/2+r},ave=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return r<=0&&s>=0?0:s<0?s:r}return n[0]},ove=t=>{var e=t.flat(2).filter(qe);return[Math.min(...e),Math.max(...e)]},lve=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],cve=(t,e,n)=>{if(t!=null)return lve(Object.keys(t).reduce((r,s)=>{var i=t[s],{stackedData:a}=i,o=a.reduce((l,c)=>{var u=fH(c,e,n),d=ove(u);return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},mV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fy=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var s=Zk(e,u=>u.coordinate),i=1/0,a=1,o=s.length;a<o;a++){var l=s[a],c=s[a-1];i=Math.min((l.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function yV(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:s,name:i}=t;return ka(ka({},e),{},{dataKey:n,payload:r,value:s,name:i})}function ym(t,e){if(t)return String(t);if(typeof e=="string")return e}function uve(t,e,n,r,s){if(n==="horizontal"||n==="vertical"){var i=t>=s.left&&t<=s.left+s.width&&e>=s.top&&e<=s.top+s.height;return i?{x:t,y:e}:null}return r?qxe({x:t,y:e},r):null}var dve=(t,e,n,r)=>{var s=e.find(c=>c&&c.index===n);if(s){if(t==="horizontal")return{x:s.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:s.coordinate};if(t==="centric"){var i=s.coordinate,{radius:a}=r;return ka(ka(ka({},r),xr(r.cx,r.cy,a,i)),{},{angle:i,radius:a})}var o=s.coordinate,{angle:l}=r;return ka(ka(ka({},r),xr(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},hve=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,hc=t=>t.layout.width,fc=t=>t.layout.height,fve=t=>t.layout.scale,gH=t=>t.layout.margin,r$=ve(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),s$=ve(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),yH="data-recharts-item-index",xH="data-recharts-item-data-key",iS=60;function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Gc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){pve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pve(t,e,n){return(e=mve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mve(t){var e=gve(t,"string");return typeof e=="symbol"?e:e+""}function gve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yve=t=>t.brush.height,Or=ve([hc,fc,gH,yve,r$,s$,V9,Fye],(t,e,n,r,s,i,a,o)=>{var l=i.reduce((y,x)=>{var{orientation:v}=x;if(!x.mirror&&!x.hide){var w=typeof x.width=="number"?x.width:iS;return Gc(Gc({},y),{},{[v]:y[v]+w})}return y},{left:n.left||0,right:n.right||0}),c=s.reduce((y,x)=>{var{orientation:v}=x;return!x.mirror&&!x.hide?Gc(Gc({},y),{},{[v]:Nu(y,"".concat(v))+x.height}):y},{top:n.top||0,bottom:n.bottom||0}),u=Gc(Gc({},c),l),d=u.bottom;u.bottom+=r,u=Jxe(u,a,o);var p=t-u.left-u.right,g=e-u.top-u.bottom;return Gc(Gc({brushBottom:d},u),{},{width:Math.max(p,0),height:Math.max(g,0)})}),xve=ve(Or,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),vH=ve(hc,fc,(t,e)=>({x:0,y:0,width:t,height:e})),vve=_.createContext(null),Ii=()=>_.useContext(vve)!=null,aS=t=>t.brush,oS=ve([aS,Or,gH],(t,e,n)=>({height:t.height,x:qe(t.x)?t.x:e.left,y:qe(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:qe(t.width)?t.width:e.width})),i$=()=>{var t,e=Ii(),n=it(xve),r=it(oS),s=(t=it(aS))===null||t===void 0?void 0:t.padding;return!e||!r||!s?n:{width:r.width-s.left-s.right,height:r.height-s.top-s.bottom,x:s.left,y:s.top}},bve={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},bH=()=>{var t;return(t=it(Or))!==null&&t!==void 0?t:bve},a$=()=>it(hc),o$=()=>it(fc),wve={top:0,right:0,bottom:0,left:0},kve=()=>{var t;return(t=it(e=>e.layout.margin))!==null&&t!==void 0?t:wve},Yt=t=>t.layout.layoutType,lS=()=>it(Yt),Sve={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},wH=Zi({name:"legend",initialState:Sve,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Gl(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:vV,setLegendSettings:Nve,addLegendPayload:kH,removeLegendPayload:SH}=wH.actions,Cve=wH.reducer,Ive=["contextPayload"];function l_(){return l_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l_.apply(null,arguments)}function bV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(n),!0).forEach(function(r){l$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l$(t,e,n){return(e=Eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eve(t){var e=Tve(t,"string");return typeof e=="symbol"?e:e+""}function Tve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ve(t,e){if(t==null)return{};var n,r,s=Ave(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Ave(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Rve(t){return t.value}function $ve(t){var{contextPayload:e}=t,n=_ve(t,Ive),r=O9(e,t.payloadUniqBy,Rve),s=Fp(Fp({},n),{},{payload:r});return _.isValidElement(t.content)?_.cloneElement(t.content,s):typeof t.content=="function"?_.createElement(t.content,s):_.createElement(GR,s)}function Pve(t,e,n,r,s,i){var{layout:a,align:o,verticalAlign:l}=e,c,u;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&a==="vertical"?c={left:((r||0)-i.width)/2}:c=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?u={top:((s||0)-i.height)/2}:u=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Fp(Fp({},c),u)}function jve(t){var e=Xn();return _.useEffect(()=>{e(Nve(t))},[e,t]),null}function Dve(t){var e=Xn();return _.useEffect(()=>(e(vV(t)),()=>{e(vV({width:0,height:0}))}),[e,t]),null}function Ove(t){var e=Bye(),n=nge(),r=kve(),{width:s,height:i,wrapperStyle:a,portal:o}=t,[l,c]=B9([e]),u=a$(),d=o$(),p=u-(r.left||0)-(r.right||0),g=Ly.getWidthOrHeight(t.layout,i,s,p),y=o?a:Fp(Fp({position:"absolute",width:g?.width||s||"auto",height:g?.height||i||"auto"},Pve(a,t,r,u,d,l)),a),x=o??n;if(x==null)return null;var v=_.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:c},_.createElement(jve,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),_.createElement(Dve,{width:l.width,height:l.height}),_.createElement($ve,l_({},t,g,{margin:r,chartWidth:u,chartHeight:d,contextPayload:e})));return Vh.createPortal(v,x)}class Ly extends _.PureComponent{static getWidthOrHeight(e,n,r,s){return e==="vertical"&&qe(n)?{height:n}:e==="horizontal"?{width:r||s}:null}render(){return _.createElement(Ove,this.props)}}l$(Ly,"displayName","Legend");l$(Ly,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function c_(){return c_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c_.apply(null,arguments)}function wV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function oE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wV(Object(n),!0).forEach(function(r){Mve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mve(t,e,n){return(e=Fve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fve(t){var e=Lve(t,"string");return typeof e=="symbol"?e:e+""}function Lve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vve(t){return Array.isArray(t)&&cl(t[0])&&cl(t[1])?t.join(" ~ "):t}var Bve=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:s={},payload:i,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:p=!1}=t,g=()=>{if(i&&i.length){var E={padding:0,margin:0},j=(o?Zk(i,o):i).map((A,T)=>{if(A.type==="none")return null;var $=A.formatter||a||Vve,{value:D,name:R}=A,F=D,L=R;if($){var K=$(D,R,A,T,i);if(Array.isArray(K))[F,L]=K;else if(K!=null)F=K;else return null}var X=oE({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},r);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:X},cl(L)?_.createElement("span",{className:"recharts-tooltip-item-name"},L):null,cl(L)?_.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,_.createElement("span",{className:"recharts-tooltip-item-value"},F),_.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:E},j)}return null},y=oE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=oE({margin:0},s),v=!Dn(u),w=v?u:"",k=Bt("recharts-default-tooltip",l),S=Bt("recharts-tooltip-label",c);v&&d&&i!==void 0&&i!==null&&(w=d(u,i));var I=p?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",c_({className:k,style:y},I),_.createElement("p",{className:S,style:x},_.isValidElement(w)?w:"".concat(w)),g())},Pg="recharts-tooltip-wrapper",zve={visibility:"hidden"};function Uve(t){var{coordinate:e,translateX:n,translateY:r}=t;return Bt(Pg,{["".concat(Pg,"-right")]:qe(n)&&e&&qe(e.x)&&n>=e.x,["".concat(Pg,"-left")]:qe(n)&&e&&qe(e.x)&&n<e.x,["".concat(Pg,"-bottom")]:qe(r)&&e&&qe(e.y)&&r>=e.y,["".concat(Pg,"-top")]:qe(r)&&e&&qe(e.y)&&r<e.y})}function kV(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(i&&qe(i[r]))return i[r];var u=n[r]-o-(s>0?s:0),d=n[r]+s;if(e[r])return a[r]?u:d;var p=l[r];if(p==null)return 0;if(a[r]){var g=u,y=p;return g<y?Math.max(d,p):Math.max(u,p)}if(c==null)return 0;var x=d+o,v=p+c;return x>v?Math.max(u,p):Math.max(d,p)}function Wve(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Gve(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:s,reverseDirection:i,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,c,u,d;return a.height>0&&a.width>0&&n?(u=kV({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=kV({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:i,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=Wve({translateX:u,translateY:d,useTranslate3d:o})):c=zve,{cssProperties:c,cssClasses:Uve({translateX:u,translateY:d,coordinate:n})}}function SV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(n),!0).forEach(function(r){u_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u_(t,e,n){return(e=Hve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hve(t){var e=qve(t,"string");return typeof e=="symbol"?e:e+""}function qve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Kve extends _.PureComponent{constructor(){super(...arguments),u_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),u_(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:s,children:i,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:p,viewBox:g,wrapperStyle:y,lastBoundingBox:x,innerRef:v,hasPortalFromProps:w}=this.props,{cssClasses:k,cssProperties:S}=Gve({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:x.height,width:x.width},useTranslate3d:p,viewBox:g}),I=w?{}:Pb(Pb({transition:l&&e?"transform ".concat(r,"ms ").concat(s):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=Pb(Pb({},I),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},y);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:E,ref:v},i)}}var Xve=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Kh={isSsr:Xve()},NH=()=>it(t=>t.rootProps.accessibilityLayer);function Qi(t){return Number.isFinite(t)}function Lp(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d_.apply(null,arguments)}function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function CV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){Yve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yve(t,e,n){return(e=Qve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qve(t){var e=Jve(t,"string");return typeof e=="symbol"?e:e+""}function Jve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IV={curveBasisClosed:wge,curveBasisOpen:kge,curveBasis:bge,curveBumpX:age,curveBumpY:oge,curveLinearClosed:Sge,curveLinear:Qk,curveMonotoneX:Nge,curveMonotoneY:Cge,curveNatural:Ige,curveStep:Ege,curveStepAfter:_ge,curveStepBefore:Tge},jb=t=>Qi(t.x)&&Qi(t.y),jg=t=>t.x,Dg=t=>t.y,Zve=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(mx(t));return(n==="curveMonotone"||n==="curveBump")&&e?IV["".concat(n).concat(e==="vertical"?"Y":"X")]:IV[n]||Qk},e0e=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:s,connectNulls:i=!1}=t,a=Zve(e,s),o=i?n.filter(jb):n,l;if(Array.isArray(r)){var c=i?r.filter(d=>jb(d)):r,u=o.map((d,p)=>CV(CV({},d),{},{base:c[p]}));return s==="vertical"?l=Eb().y(Dg).x1(jg).x0(d=>d.base.x):l=Eb().x(jg).y1(Dg).y0(d=>d.base.y),l.defined(jb).curve(a),l(u)}return s==="vertical"&&qe(r)?l=Eb().y(Dg).x1(jg).x0(r):qe(r)?l=Eb().x(jg).y1(Dg).y0(r):l=x9().x(jg).y(Dg),l.defined(jb).curve(a),l(o)},c$=t=>{var{className:e,points:n,path:r,pathRef:s}=t;if((!n||!n.length)&&!r)return null;var i=n&&n.length?e0e(t):r;return _.createElement("path",d_({},dc(t),FR(t),{className:Bt("recharts-curve",e),d:i===null?void 0:i,ref:s}))},t0e=["x","y","top","left","width","height","className"];function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(null,arguments)}function EV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function n0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(n),!0).forEach(function(r){r0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r0e(t,e,n){return(e=s0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s0e(t){var e=i0e(t,"string");return typeof e=="symbol"?e:e+""}function i0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a0e(t,e){if(t==null)return{};var n,r,s=o0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function o0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var l0e=(t,e,n,r,s,i)=>"M".concat(t,",").concat(s,"v").concat(r,"M").concat(i,",").concat(e,"h").concat(n),c0e=t=>{var{x:e=0,y:n=0,top:r=0,left:s=0,width:i=0,height:a=0,className:o}=t,l=a0e(t,t0e),c=n0e({x:e,y:n,top:r,left:s,width:i,height:a},l);return!qe(e)||!qe(n)||!qe(i)||!qe(a)||!qe(r)||!qe(s)?null:_.createElement("path",h_({},Bn(c,!0),{className:Bt("recharts-cross",o),d:l0e(e,n,i,a,r,s)}))};function u0e(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function TV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function d0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(n),!0).forEach(function(r){h0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h0e(t,e,n){return(e=f0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f0e(t){var e=p0e(t,"string");return typeof e=="symbol"?e:e+""}function p0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ea(t,e){var n=d0e({},t),r=e,s=Object.keys(e),i=s.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return i}var lE={},cE={},uE={},_V;function m0e(){return _V||(_V=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e})(uE)),uE}var AV;function g0e(){return AV||(AV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=m0e(),n=P9(),r=XR(),s=YR(),i=qR();function a(c,u,d){return o(c,u,void 0,void 0,void 0,void 0,d)}function o(c,u,d,p,g,y,x){const v=x(c,u,d,p,g,y);if(v!==void 0)return v;if(typeof c==typeof u)switch(typeof c){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return c===u;case"number":return c===u||Object.is(c,u);case"function":return c===u;case"object":return l(c,u,y,x)}return l(c,u,y,x)}function l(c,u,d,p){if(Object.is(c,u))return!0;let g=r.getTag(c),y=r.getTag(u);if(g===s.argumentsTag&&(g=s.objectTag),y===s.argumentsTag&&(y=s.objectTag),g!==y)return!1;switch(g){case s.stringTag:return c.toString()===u.toString();case s.numberTag:{const w=c.valueOf(),k=u.valueOf();return i.eq(w,k)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(c.valueOf(),u.valueOf());case s.regexpTag:return c.source===u.source&&c.flags===u.flags;case s.functionTag:return c===u}d=d??new Map;const x=d.get(c),v=d.get(u);if(x!=null&&v!=null)return x===u;d.set(c,u),d.set(u,c);try{switch(g){case s.mapTag:{if(c.size!==u.size)return!1;for(const[w,k]of c.entries())if(!u.has(w)||!o(k,u.get(w),w,c,u,d,p))return!1;return!0}case s.setTag:{if(c.size!==u.size)return!1;const w=Array.from(c.values()),k=Array.from(u.values());for(let S=0;S<w.length;S++){const I=w[S],E=k.findIndex(j=>o(I,j,void 0,c,u,d,p));if(E===-1)return!1;k.splice(E,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(c)!==Buffer.isBuffer(u)||c.length!==u.length)return!1;for(let w=0;w<c.length;w++)if(!o(c[w],u[w],w,c,u,d,p))return!1;return!0}case s.arrayBufferTag:return c.byteLength!==u.byteLength?!1:l(new Uint8Array(c),new Uint8Array(u),d,p);case s.dataViewTag:return c.byteLength!==u.byteLength||c.byteOffset!==u.byteOffset?!1:l(new Uint8Array(c),new Uint8Array(u),d,p);case s.errorTag:return c.name===u.name&&c.message===u.message;case s.objectTag:{if(!(l(c.constructor,u.constructor,d,p)||e.isPlainObject(c)&&e.isPlainObject(u)))return!1;const k=[...Object.keys(c),...n.getSymbols(c)],S=[...Object.keys(u),...n.getSymbols(u)];if(k.length!==S.length)return!1;for(let I=0;I<k.length;I++){const E=k[I],j=c[E];if(!Object.hasOwn(u,E))return!1;const A=u[E];if(!o(j,A,E,c,u,d,p))return!1}return!0}default:return!1}}finally{d.delete(c),d.delete(u)}}t.isEqualWith=a})(cE)),cE}var dE={},RV;function y0e(){return RV||(RV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e})(dE)),dE}var $V;function x0e(){return $V||($V=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=g0e(),n=y0e();function r(s,i){return e.isEqualWith(s,i,n.noop)}t.isEqual=r})(lE)),lE}var hE,PV;function v0e(){return PV||(PV=1,hE=x0e().isEqual),hE}var b0e=v0e();const w0e=Ra(b0e);var d1=1e-4,CH=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],IH=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),jV=(t,e)=>n=>{var r=CH(t,e);return IH(r,n)},k0e=(t,e)=>n=>{var r=CH(t,e),s=[...r.map((i,a)=>i*a).slice(1),0];return IH(s,n)},DV=function(){for(var e,n,r,s,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,r,n,s]=[0,0,1,1];break;case"ease":[e,r,n,s]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,s]=[.42,0,1,1];break;case"ease-out":[e,r,n,s]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,s]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,r,n,s]=l[1].split(")")[0].split(",").map(y=>parseFloat(y)))}}else a.length===4&&([e,r,n,s]=a);var c=jV(e,n),u=jV(r,s),d=k0e(e,n),p=y=>y>1?1:y<0?0:y,g=y=>{for(var x=y>1?1:y,v=x,w=0;w<8;++w){var k=c(v)-x,S=d(v);if(Math.abs(k-x)<d1||S<d1)return u(v);v=p(v-k/S)}return u(v)};return g.isStepper=!1,g},S0e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:s=17}=e,i=(a,o,l)=>{var c=-(a-o)*n,u=l*r,d=l+(c-u)*s/1e3,p=l*s/1e3+a;return Math.abs(p-o)<d1&&Math.abs(d)<d1?[o,0]:[p,d]};return i.isStepper=!0,i.dt=s,i},EH=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DV(t);case"spring":return S0e();default:if(t.split("(")[0]==="cubic-bezier")return DV(t)}return typeof t=="function"?t:null};function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function MV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){N0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0e(t,e,n){return(e=C0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C0e(t){var e=I0e(t,"string");return typeof e=="symbol"?e:e+""}function I0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E0e=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),T0e=(t,e,n)=>t.map(r=>"".concat(E0e(r)," ").concat(e,"ms ").concat(n)).join(","),_0e=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(s=>r.includes(s))),Vy=(t,e)=>Object.keys(e).reduce((n,r)=>MV(MV({},n),{},{[r]:t(r,e[r])}),{});function FV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ms(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(n),!0).forEach(function(r){A0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function A0e(t,e,n){return(e=R0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R0e(t){var e=$0e(t,"string");return typeof e=="symbol"?e:e+""}function $0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h1=(t,e,n)=>t+(e-t)*n,f_=t=>{var{from:e,to:n}=t;return e!==n},TH=(t,e,n)=>{var r=Vy((s,i)=>{if(f_(i)){var[a,o]=t(i.from,i.to,i.velocity);return ms(ms({},i),{},{from:a,velocity:o})}return i},e);return n<1?Vy((s,i)=>f_(i)?ms(ms({},i),{},{velocity:h1(i.velocity,r[s].velocity,n),from:h1(i.from,r[s].from,n)}):i,e):TH(t,r,n-1)};function P0e(t,e,n,r,s,i){var a,o=r.reduce((p,g)=>ms(ms({},p),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),l=()=>Vy((p,g)=>g.from,o),c=()=>!Object.values(o).filter(f_).length,u=null,d=p=>{a||(a=p);var g=p-a,y=g/n.dt;o=TH(n,o,y),s(ms(ms(ms({},t),e),l())),a=p,c()||(u=i.setTimeout(d))};return()=>(u=i.setTimeout(d),()=>{u()})}function j0e(t,e,n,r,s,i,a){var o=null,l=s.reduce((d,p)=>ms(ms({},d),{},{[p]:[t[p],e[p]]}),{}),c,u=d=>{c||(c=d);var p=(d-c)/r,g=Vy((x,v)=>h1(...v,n(p)),l);if(i(ms(ms(ms({},t),e),g)),p<1)o=a.setTimeout(u);else{var y=Vy((x,v)=>h1(...v,n(1)),l);i(ms(ms(ms({},t),e),y))}};return()=>(o=a.setTimeout(u),()=>{o()})}const _H=(t,e,n,r,s,i)=>{var a=_0e(t,e);return n.isStepper===!0?P0e(t,e,n,a,s,i):j0e(t,e,n,r,a,s,i)};function D0e(t){var e,n=()=>null,r=!1,s=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){s=t.setTimeout(i.bind(null,c),l);return}i(l),s=t.setTimeout(i.bind(null,c));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,s&&(s(),s=null),i(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class O0e{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),s=null,i=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function M0e(){return D0e(new O0e)}var F0e=_.createContext(M0e);function AH(t,e){var n=_.useContext(F0e);return _.useMemo(()=>e??n(t),[t,e,n])}var L0e=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function p_(){return p_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p_.apply(null,arguments)}function V0e(t,e){if(t==null)return{};var n,r,s=B0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function B0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Hc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){Hd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hd(t,e,n){return(e=z0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z0e(t){var e=U0e(t,"string");return typeof e=="symbol"?e:e+""}function U0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class u$ extends _.PureComponent{constructor(e,n){super(e,n),Hd(this,"mounted",!1),Hd(this,"manager",void 0),Hd(this,"stopJSAnimation",null),Hd(this,"unSubscribe",null);var{isActive:r,attributeName:s,from:i,to:a,children:o,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||l<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:a});return}if(i){if(typeof o=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:r,attributeName:s,shouldReAnimate:i,to:a,from:o}=this.props,{style:l}=this.state;if(r){if(!n){var c={style:s?{[s]:a}:a};this.state&&l&&(s&&l[s]!==a||!s&&l!==a)&&this.setState(c);return}if(!(w0e(e.to,a)&&e.canBegin&&e.isActive)){var u=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=u||i?o:e.to;if(this.state&&l){var p={style:s?{[s]:d}:d};(s&&l[s]!==d||!s&&l!==d)&&this.setState(p)}this.runAnimation(Hc(Hc({},this.props),{},{from:d,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:r,duration:s,easing:i,begin:a,onAnimationEnd:o,onAnimationStart:l}=e,c=_H(n,r,EH(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=c()};this.manager.start([l,a,u,s,o])}runAnimation(e){var{begin:n,duration:r,attributeName:s,to:i,easing:a,onAnimationStart:o,onAnimationEnd:l,children:c}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof a=="function"||typeof c=="function"||a==="spring"){this.runJSAnimation(e);return}var u=s?{[s]:i}:i,d=T0e(Object.keys(u),r,a);this.manager.start([o,n,Hc(Hc({},u),{},{transition:d}),r,l])}render(){var e=this.props,{children:n,begin:r,duration:s,attributeName:i,easing:a,isActive:o,from:l,to:c,canBegin:u,onAnimationEnd:d,shouldReAnimate:p,onAnimationReStart:g,animationManager:y}=e,x=V0e(e,L0e),v=_.Children.count(n),w=this.state.style;if(typeof n=="function")return n(w);if(!o||v===0||s<=0)return n;var k=S=>{var{style:I={},className:E}=S.props,j=_.cloneElement(S,Hc(Hc({},x),{},{style:Hc(Hc({},I),w),className:E}));return j};return v===1?k(_.Children.only(n)):_.createElement("div",null,_.Children.map(n,S=>k(S)))}}Hd(u$,"displayName","Animate");Hd(u$,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function f1(t){var e,n=AH((e=t.attributeName)!==null&&e!==void 0?e:Object.keys(t.to).join(","),t.animationManager);return _.createElement(u$,p_({},t,{animationManager:n}))}function p1(){return p1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p1.apply(null,arguments)}var VV=(t,e,n,r,s)=>{var i=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],d=0,p=4;d<p;d++)u[d]=s[d]>i?i:s[d];c="M".concat(t,",").concat(e+a*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+o*u[0],",").concat(e)),c+="L ".concat(t+n-o*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*u[1])),c+="L ".concat(t+n,",").concat(e+r-a*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+n-o*u[2],",").concat(e+r)),c+="L ".concat(t+o*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-a*u[3])),c+="Z"}else if(i>0&&s===+s&&s>0){var g=Math.min(i,s);c="M ".concat(t,",").concat(e+a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+o*g,",").concat(e,`
            L `).concat(t+n-o*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*g,`
            L `).concat(t+n,",").concat(e+r-a*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t+n-o*g,",").concat(e+r,`
            L `).concat(t+o*g,",").concat(e+r,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(t,",").concat(e+r-a*g," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},W0e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RH=t=>{var e=ea(t,W0e),n=_.useRef(null),[r,s]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var{x:i,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:d,animationDuration:p,animationBegin:g,isAnimationActive:y,isUpdateAnimationActive:x}=e;if(i!==+i||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var v=Bt("recharts-rectangle",u);return x?_.createElement(f1,{canBegin:r>0,from:{width:o,height:l,x:i,y:a},to:{width:o,height:l,x:i,y:a},duration:p,animationEasing:d,isActive:x},w=>{var{width:k,height:S,x:I,y:E}=w;return _.createElement(f1,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:y,easing:d},_.createElement("path",p1({},Bn(e,!0),{className:v,d:VV(I,E,k,S,c),ref:n})))}):_.createElement("path",p1({},Bn(e,!0),{className:v,d:VV(i,a,o,l,c)}))};function $H(t){var{cx:e,cy:n,radius:r,startAngle:s,endAngle:i}=t,a=xr(e,n,r,s),o=xr(e,n,r,i);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:i}}function m_(){return m_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m_.apply(null,arguments)}var G0e=(t,e)=>{var n=es(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Db=t=>{var{cx:e,cy:n,radius:r,angle:s,sign:i,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,c=o*(a?1:-1)+r,u=Math.asin(o/c)/u1,d=l?s:s+i*u,p=xr(e,n,c,d),g=xr(e,n,r,d),y=l?s-i*u:s,x=xr(e,n,c*Math.cos(u*u1),y);return{center:p,circleTangency:g,lineTangency:x,theta:u}},PH=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:i,endAngle:a}=t,o=G0e(i,a),l=i+o,c=xr(e,n,s,i),u=xr(e,n,s,l),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var p=xr(e,n,r,i),g=xr(e,n,r,l);d+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=l),`,
            `).concat(p.x,",").concat(p.y," Z")}else d+="L ".concat(e,",").concat(n," Z");return d},H0e=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:s,cornerRadius:i,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=t,u=es(c-l),{circleTangency:d,lineTangency:p,theta:g}=Db({cx:e,cy:n,radius:s,angle:l,sign:u,cornerRadius:i,cornerIsExternal:o}),{circleTangency:y,lineTangency:x,theta:v}=Db({cx:e,cy:n,radius:s,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:o}),w=o?Math.abs(l-c):Math.abs(l-c)-g-v;if(w<0)return a?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):PH({cx:e,cy:n,innerRadius:r,outerRadius:s,startAngle:l,endAngle:c});var k="M ".concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(w>180),",").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
  `);if(r>0){var{circleTangency:S,lineTangency:I,theta:E}=Db({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:j,lineTangency:A,theta:T}=Db({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),$=o?Math.abs(l-c):Math.abs(l-c)-E-T;if($<0&&i===0)return"".concat(k,"L").concat(e,",").concat(n,"Z");k+="L".concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(r,",").concat(r,",0,").concat(+($>180),",").concat(+(u>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(I.x,",").concat(I.y,"Z")}else k+="L".concat(e,",").concat(n,"Z");return k},q0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jH=t=>{var e=ea(t,q0e),{cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=e;if(i<s||c===u)return null;var p=Bt("recharts-sector",d),g=i-s,y=Qs(a,g,0,!0),x;return y>0&&Math.abs(c-u)<360?x=H0e({cx:n,cy:r,innerRadius:s,outerRadius:i,cornerRadius:Math.min(y,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):x=PH({cx:n,cy:r,innerRadius:s,outerRadius:i,startAngle:c,endAngle:u}),_.createElement("path",m_({},Bn(e,!0),{className:p,d:x}))};function K0e(t,e,n){var r,s,i,a;if(t==="horizontal")r=e.x,i=r,s=n.top,a=n.top+n.height;else if(t==="vertical")s=e.y,a=s,r=n.left,i=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:o,cy:l,innerRadius:c,outerRadius:u,angle:d}=e,p=xr(o,l,c,d),g=xr(o,l,u,d);r=p.x,s=p.y,i=g.x,a=g.y}else return $H(e);return[{x:r,y:s},{x:i,y:a}]}var fE={},pE={},mE={},BV;function X0e(){return BV||(BV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=F9();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(mE)),mE}var zV;function Y0e(){return zV||(zV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X0e();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(pE)),pE}var UV;function Q0e(){return UV||(UV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=L9(),n=Y0e();function r(s,i,a){a&&typeof a!="number"&&e.isIterateeCall(s,i,a)&&(i=a=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),a=a===void 0?s<i?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((i-s)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=s,s+=a;return l}t.range=r})(fE)),fE}var gE,WV;function J0e(){return WV||(WV=1,gE=Q0e().range),gE}var Z0e=J0e();const DH=Ra(Z0e);function ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ebe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function d$(t){let e,n,r;t.length!==2?(e=ou,n=(o,l)=>ou(t(o),l),r=(o,l)=>t(o)-l):(e=t===ou||t===ebe?t:tbe,n=t,r=t);function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=s(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:s,center:a,right:i}}function tbe(){return 0}function OH(t){return t===null?NaN:+t}function*nbe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const rbe=d$(ou),bx=rbe.right;d$(OH).center;class GV extends Map{constructor(e,n=abe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(HV(this,e))}has(e){return super.has(HV(this,e))}set(e,n){return super.set(sbe(this,e),n)}delete(e){return super.delete(ibe(this,e))}}function HV({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function sbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function ibe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function abe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function obe(t=ou){if(t===ou)return MH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function MH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const lbe=Math.sqrt(50),cbe=Math.sqrt(10),ube=Math.sqrt(2);function m1(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),a=i>=lbe?10:i>=cbe?5:i>=ube?2:1;let o,l,c;return s<0?(c=Math.pow(10,-s)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,s)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?m1(t,e,n*2):[o,l,c]}function g_(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,a]=r?m1(e,t,n):m1(t,e,n);if(!(i>=s))return[];const o=i-s+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(i-c)/-a;else for(let c=0;c<o;++c)l[c]=(i-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(s+c)/-a;else for(let c=0;c<o;++c)l[c]=(s+c)*a;return l}function y_(t,e,n){return e=+e,t=+t,n=+n,m1(t,e,n)[2]}function x_(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?y_(e,t,n):y_(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function qV(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KV(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function FH(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?MH:obe(s);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*d/l+p)),y=Math.min(r,Math.floor(e+(l-c)*d/l+p));FH(t,e,g,y,s)}const i=t[e];let a=n,o=r;for(Og(t,n,e),s(t[r],i)>0&&Og(t,n,r);a<o;){for(Og(t,a,o),++a,--o;s(t[a],i)<0;)++a;for(;s(t[o],i)>0;)--o}s(t[n],i)===0?Og(t,n,o):(++o,Og(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Og(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function dbe(t,e,n){if(t=Float64Array.from(nbe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return KV(t);if(e>=1)return qV(t);var r,s=(r-1)*e,i=Math.floor(s),a=qV(FH(t,i).subarray(0,i+1)),o=KV(t.subarray(i+1));return a+(o-a)*(s-i)}}function hbe(t,e,n=OH){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,i=Math.floor(s),a=+n(t[i],i,t),o=+n(t[i+1],i+1,t);return a+(o-a)*(s-i)}}function fbe(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,i=new Array(s);++r<s;)i[r]=t+r*n;return i}function Pa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function pc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const v_=Symbol("implicit");function h$(){var t=new GV,e=[],n=[],r=v_;function s(i){let a=t.get(i);if(a===void 0){if(r!==v_)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return s.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new GV;for(const a of i)t.has(a)||t.set(a,e.push(a)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return h$(e,n).unknown(r)},Pa.apply(s,arguments),s}function f$(){var t=h$().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,i,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var p=e().length,g=s<r,y=g?s:r,x=g?r:s;i=(x-y)/Math.max(1,p-l+c*2),o&&(i=Math.floor(i)),y+=(x-y-i*(p-l))*u,a=i*(1-l),o&&(y=Math.round(y),a=Math.round(a));var v=fbe(p).map(function(w){return y+i*w});return n(g?v.reverse():v)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,d()):[r,s]},t.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(p){return arguments.length?(o=!!p,d()):o},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),d()):u},t.copy=function(){return f$(e(),[r,s]).round(o).paddingInner(l).paddingOuter(c).align(u)},Pa.apply(d(),arguments)}function LH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return LH(e())},t}function pbe(){return LH(f$.apply(null,arguments).paddingInner(1))}function p$(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function VH(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function wx(){}var By=.7,g1=1/By,bp="\\s*([+-]?\\d+)\\s*",zy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",el="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mbe=/^#([0-9a-f]{3,8})$/,gbe=new RegExp(`^rgb\\(${bp},${bp},${bp}\\)$`),ybe=new RegExp(`^rgb\\(${el},${el},${el}\\)$`),xbe=new RegExp(`^rgba\\(${bp},${bp},${bp},${zy}\\)$`),vbe=new RegExp(`^rgba\\(${el},${el},${el},${zy}\\)$`),bbe=new RegExp(`^hsl\\(${zy},${el},${el}\\)$`),wbe=new RegExp(`^hsla\\(${zy},${el},${el},${zy}\\)$`),XV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};p$(wx,Uy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:YV,formatHex:YV,formatHex8:kbe,formatHsl:Sbe,formatRgb:QV,toString:QV});function YV(){return this.rgb().formatHex()}function kbe(){return this.rgb().formatHex8()}function Sbe(){return BH(this).formatHsl()}function QV(){return this.rgb().formatRgb()}function Uy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mbe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?JV(e):n===3?new vi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ob(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ob(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gbe.exec(t))?new vi(e[1],e[2],e[3],1):(e=ybe.exec(t))?new vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xbe.exec(t))?Ob(e[1],e[2],e[3],e[4]):(e=vbe.exec(t))?Ob(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bbe.exec(t))?tB(e[1],e[2]/100,e[3]/100,1):(e=wbe.exec(t))?tB(e[1],e[2]/100,e[3]/100,e[4]):XV.hasOwnProperty(t)?JV(XV[t]):t==="transparent"?new vi(NaN,NaN,NaN,0):null}function JV(t){return new vi(t>>16&255,t>>8&255,t&255,1)}function Ob(t,e,n,r){return r<=0&&(t=e=n=NaN),new vi(t,e,n,r)}function Nbe(t){return t instanceof wx||(t=Uy(t)),t?(t=t.rgb(),new vi(t.r,t.g,t.b,t.opacity)):new vi}function b_(t,e,n,r){return arguments.length===1?Nbe(t):new vi(t,e,n,r??1)}function vi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}p$(vi,b_,VH(wx,{brighter(t){return t=t==null?g1:Math.pow(g1,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?By:Math.pow(By,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vi(ih(this.r),ih(this.g),ih(this.b),y1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ZV,formatHex:ZV,formatHex8:Cbe,formatRgb:eB,toString:eB}));function ZV(){return`#${qd(this.r)}${qd(this.g)}${qd(this.b)}`}function Cbe(){return`#${qd(this.r)}${qd(this.g)}${qd(this.b)}${qd((isNaN(this.opacity)?1:this.opacity)*255)}`}function eB(){const t=y1(this.opacity);return`${t===1?"rgb(":"rgba("}${ih(this.r)}, ${ih(this.g)}, ${ih(this.b)}${t===1?")":`, ${t})`}`}function y1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ih(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qd(t){return t=ih(t),(t<16?"0":"")+t.toString(16)}function tB(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new co(t,e,n,r)}function BH(t){if(t instanceof co)return new co(t.h,t.s,t.l,t.opacity);if(t instanceof wx||(t=Uy(t)),!t)return new co;if(t instanceof co)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),a=NaN,o=i-s,l=(i+s)/2;return o?(e===i?a=(n-r)/o+(n<r)*6:n===i?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?i+s:2-i-s,a*=60):o=l>0&&l<1?0:a,new co(a,o,l,t.opacity)}function Ibe(t,e,n,r){return arguments.length===1?BH(t):new co(t,e,n,r??1)}function co(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}p$(co,Ibe,VH(wx,{brighter(t){return t=t==null?g1:Math.pow(g1,t),new co(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?By:Math.pow(By,t),new co(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new vi(yE(t>=240?t-240:t+120,s,r),yE(t,s,r),yE(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new co(nB(this.h),Mb(this.s),Mb(this.l),y1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=y1(this.opacity);return`${t===1?"hsl(":"hsla("}${nB(this.h)}, ${Mb(this.s)*100}%, ${Mb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function nB(t){return t=(t||0)%360,t<0?t+360:t}function Mb(t){return Math.max(0,Math.min(1,t||0))}function yE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const m$=t=>()=>t;function Ebe(t,e){return function(n){return t+n*e}}function Tbe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function _be(t){return(t=+t)==1?zH:function(e,n){return n-e?Tbe(e,n,t):m$(isNaN(e)?n:e)}}function zH(t,e){var n=e-t;return n?Ebe(t,n):m$(isNaN(t)?e:t)}const rB=(function t(e){var n=_be(e);function r(s,i){var a=n((s=b_(s)).r,(i=b_(i)).r),o=n(s.g,i.g),l=n(s.b,i.b),c=zH(s.opacity,i.opacity);return function(u){return s.r=a(u),s.g=o(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=t,r})(1);function Abe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function Rbe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $be(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),a;for(a=0;a<r;++a)s[a]=xm(t[a],e[a]);for(;a<n;++a)i[a]=e[a];return function(o){for(a=0;a<r;++a)i[a]=s[a](o);return i}}function Pbe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function x1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jbe(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=xm(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var w_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xE=new RegExp(w_.source,"g");function Dbe(t){return function(){return t}}function Obe(t){return function(e){return t(e)+""}}function Mbe(t,e){var n=w_.lastIndex=xE.lastIndex=0,r,s,i,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=w_.exec(t))&&(s=xE.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(s=s[0])?o[a]?o[a]+=s:o[++a]=s:(o[++a]=null,l.push({i:a,x:x1(r,s)})),n=xE.lastIndex;return n<e.length&&(i=e.slice(n),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?Obe(l[0].x):Dbe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function xm(t,e){var n=typeof e,r;return e==null||n==="boolean"?m$(e):(n==="number"?x1:n==="string"?(r=Uy(e))?(e=r,rB):Mbe:e instanceof Uy?rB:e instanceof Date?Pbe:Rbe(e)?Abe:Array.isArray(e)?$be:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?jbe:x1)(t,e)}function g$(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Fbe(t,e){e===void 0&&(e=t,t=xm);for(var n=0,r=e.length-1,s=e[0],i=new Array(r<0?0:r);n<r;)i[n]=t(s,s=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return i[o](a-o)}}function Lbe(t){return function(){return t}}function v1(t){return+t}var sB=[0,1];function Ys(t){return t}function k_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lbe(isNaN(e)?NaN:.5)}function Vbe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Bbe(t,e,n){var r=t[0],s=t[1],i=e[0],a=e[1];return s<r?(r=k_(s,r),i=n(a,i)):(r=k_(r,s),i=n(i,a)),function(o){return i(r(o))}}function zbe(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)s[a]=k_(t[a],t[a+1]),i[a]=n(e[a],e[a+1]);return function(o){var l=bx(t,o,1,r)-1;return i[l](s[l](o))}}function kx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cS(){var t=sB,e=sB,n=xm,r,s,i,a=Ys,o,l,c;function u(){var p=Math.min(t.length,e.length);return a!==Ys&&(a=Vbe(t[0],t[p-1])),o=p>2?zbe:Bbe,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?i:(l||(l=o(t.map(r),e,n)))(r(a(p)))}return d.invert=function(p){return a(s((c||(c=o(e,t.map(r),x1)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,v1),u()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),u()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=g$,u()},d.clamp=function(p){return arguments.length?(a=p?!0:Ys,u()):a!==Ys},d.interpolate=function(p){return arguments.length?(n=p,u()):n},d.unknown=function(p){return arguments.length?(i=p,d):i},function(p,g){return r=p,s=g,u()}}function y$(){return cS()(Ys,Ys)}function Ube(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function b1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Vp(t){return t=b1(Math.abs(t)),t?t[1]:NaN}function Wbe(t,e){return function(n,r){for(var s=n.length,i=[],a=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),i.push(n.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return i.reverse().join(e)}}function Gbe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wy(t){if(!(e=Hbe.exec(t)))throw new Error("invalid format: "+t);var e;return new x$({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wy.prototype=x$.prototype;function x$(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}x$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qbe(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var UH;function Kbe(t,e){var n=b1(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(UH=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,a=r.length;return i===a?r:i>a?r+new Array(i-a+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+b1(t,Math.max(0,e+i-1))[0]}function iB(t,e){var n=b1(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const aB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ube,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>iB(t*100,e),r:iB,s:Kbe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oB(t){return t}var lB=Array.prototype.map,cB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xbe(t){var e=t.grouping===void 0||t.thousands===void 0?oB:Wbe(lB.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?oB:Gbe(lB.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Wy(d);var p=d.fill,g=d.align,y=d.sign,x=d.symbol,v=d.zero,w=d.width,k=d.comma,S=d.precision,I=d.trim,E=d.type;E==="n"?(k=!0,E="g"):aB[E]||(S===void 0&&(S=12),I=!0,E="g"),(v||p==="0"&&g==="=")&&(v=!0,p="0",g="=");var j=x==="$"?n:x==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",A=x==="$"?r:/[%p]/.test(E)?a:"",T=aB[E],$=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function D(R){var F=j,L=A,K,X,q;if(E==="c")L=T(R)+L,R="";else{R=+R;var Q=R<0||1/R<0;if(R=isNaN(R)?l:T(Math.abs(R),S),I&&(R=qbe(R)),Q&&+R==0&&y!=="+"&&(Q=!1),F=(Q?y==="("?y:o:y==="-"||y==="("?"":y)+F,L=(E==="s"?cB[8+UH/3]:"")+L+(Q&&y==="("?")":""),$){for(K=-1,X=R.length;++K<X;)if(q=R.charCodeAt(K),48>q||q>57){L=(q===46?s+R.slice(K+1):R.slice(K))+L,R=R.slice(0,K);break}}}k&&!v&&(R=e(R,1/0));var z=F.length+R.length+L.length,H=z<w?new Array(w-z+1).join(p):"";switch(k&&v&&(R=e(H+R,H.length?w-L.length:1/0),H=""),g){case"<":R=F+R+L+H;break;case"=":R=F+H+R+L;break;case"^":R=H.slice(0,z=H.length>>1)+F+R+L+H.slice(z);break;default:R=H+F+R+L;break}return i(R)}return D.toString=function(){return d+""},D}function u(d,p){var g=c((d=Wy(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Vp(p)/3)))*3,x=Math.pow(10,-y),v=cB[8+y/3];return function(w){return g(x*w)+v}}return{format:c,formatPrefix:u}}var Fb,v$,WH;Ybe({thousands:",",grouping:[3],currency:["$",""]});function Ybe(t){return Fb=Xbe(t),v$=Fb.format,WH=Fb.formatPrefix,Fb}function Qbe(t){return Math.max(0,-Vp(Math.abs(t)))}function Jbe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vp(e)/3)))*3-Vp(Math.abs(t)))}function Zbe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Vp(e)-Vp(t))+1}function GH(t,e,n,r){var s=x_(t,e,n),i;switch(r=Wy(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=Jbe(s,a))&&(r.precision=i),WH(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Zbe(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Qbe(s))&&(r.precision=i-(r.type==="%")*2);break}}return v$(r)}function Vu(t){var e=t.domain;return t.ticks=function(n){var r=e();return g_(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return GH(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,a=r[s],o=r[i],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=s,s=i,i=c);u-- >0;){if(c=y_(a,o,n),c===l)return r[s]=a,r[i]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function HH(){var t=y$();return t.copy=function(){return kx(t,HH())},Pa.apply(t,arguments),Vu(t)}function qH(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,v1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return qH(t).unknown(e)},t=arguments.length?Array.from(t,v1):[0,1],Vu(n)}function KH(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],i=t[r],a;return i<s&&(a=n,n=r,r=a,a=s,s=i,i=a),t[n]=e.floor(s),t[r]=e.ceil(i),t}function uB(t){return Math.log(t)}function dB(t){return Math.exp(t)}function ewe(t){return-Math.log(-t)}function twe(t){return-Math.exp(-t)}function nwe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rwe(t){return t===10?nwe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function swe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function hB(t){return(e,n)=>-t(-e,n)}function b$(t){const e=t(uB,dB),n=e.domain;let r=10,s,i;function a(){return s=swe(r),i=rwe(r),n()[0]<0?(s=hB(s),i=hB(i),t(ewe,twe)):t(uB,dB),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let p=s(c),g=s(u),y,x;const v=o==null?10:+o;let w=[];if(!(r%1)&&g-p<v){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(y=1;y<r;++y)if(x=p<0?y/i(-p):y*i(p),!(x<c)){if(x>u)break;w.push(x)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(x=p>0?y/i(-p):y*i(p),!(x<c)){if(x>u)break;w.push(x)}w.length*2<v&&(w=g_(c,u,v))}else w=g_(p,g,Math.min(g-p,v)).map(i);return d?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Wy(l)).precision==null&&(l.trim=!0),l=v$(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let d=u/i(Math.round(s(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(KH(n(),{floor:o=>i(Math.floor(s(o))),ceil:o=>i(Math.ceil(s(o)))})),e}function XH(){const t=b$(cS()).domain([1,10]);return t.copy=()=>kx(t,XH()).base(t.base()),Pa.apply(t,arguments),t}function fB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function w$(t){var e=1,n=t(fB(e),pB(e));return n.constant=function(r){return arguments.length?t(fB(e=+r),pB(e)):e},Vu(n)}function YH(){var t=w$(cS());return t.copy=function(){return kx(t,YH()).constant(t.constant())},Pa.apply(t,arguments)}function mB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function iwe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function awe(t){return t<0?-t*t:t*t}function k$(t){var e=t(Ys,Ys),n=1;function r(){return n===1?t(Ys,Ys):n===.5?t(iwe,awe):t(mB(n),mB(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},Vu(e)}function S$(){var t=k$(cS());return t.copy=function(){return kx(t,S$()).exponent(t.exponent())},Pa.apply(t,arguments),t}function owe(){return S$.apply(null,arguments).exponent(.5)}function gB(t){return Math.sign(t)*t*t}function lwe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function QH(){var t=y$(),e=[0,1],n=!1,r;function s(i){var a=lwe(t(i));return isNaN(a)?r:n?Math.round(a):a}return s.invert=function(i){return t.invert(gB(i))},s.domain=function(i){return arguments.length?(t.domain(i),s):t.domain()},s.range=function(i){return arguments.length?(t.range((e=Array.from(i,v1)).map(gB)),s):e.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(t.clamp(i),s):t.clamp()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return QH(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Pa.apply(s,arguments),Vu(s)}function JH(){var t=[],e=[],n=[],r;function s(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=hbe(t,a/o);return i}function i(a){return a==null||isNaN(a=+a)?r:e[bx(n,a)]}return i.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},i.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ou),s()},i.range=function(a){return arguments.length?(e=Array.from(a),s()):e.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return JH().domain(t).range(e).unknown(r)},Pa.apply(i,arguments)}function ZH(){var t=0,e=1,n=1,r=[.5],s=[0,1],i;function a(l){return l!=null&&l<=l?s[bx(r,l,0,n)]:i}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,o()):s.slice()},a.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(i=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return ZH().domain([t,e]).range(s).unknown(i)},Pa.apply(Vu(a),arguments)}function eq(){var t=[.5],e=[0,1],n,r=1;function s(i){return i!=null&&i<=i?e[bx(t,i,0,r)]:n}return s.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(i){return arguments.length?(e=Array.from(i),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(i){var a=e.indexOf(i);return[t[a-1],t[a]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return eq().domain(t).range(e).unknown(n)},Pa.apply(s,arguments)}const vE=new Date,bE=new Date;function Mr(t,e,n,r){function s(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(t(i=new Date(+i)),i),s.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),s.round=i=>{const a=s(i),o=s.ceil(i);return i-a<o-i?a:o},s.offset=(i,a)=>(e(i=new Date(+i),a==null?1:Math.floor(a)),i),s.range=(i,a,o)=>{const l=[];if(i=s.ceil(i),o=o==null?1:Math.floor(o),!(i<a)||!(o>0))return l;let c;do l.push(c=new Date(+i)),e(i,o),t(i);while(c<i&&i<a);return l},s.filter=i=>Mr(a=>{if(a>=a)for(;t(a),!i(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!i(a););else for(;--o>=0;)for(;e(a,1),!i(a););}),n&&(s.count=(i,a)=>(vE.setTime(+i),bE.setTime(+a),t(vE),t(bE),Math.floor(n(vE,bE))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(r?a=>r(a)%i===0:a=>s.count(0,a)%i===0):s)),s}const w1=Mr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);w1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Mr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):w1);w1.range;const Vl=1e3,Na=Vl*60,Bl=Na*60,nc=Bl*24,N$=nc*7,yB=nc*30,wE=nc*365,Kd=Mr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Vl)},(t,e)=>(e-t)/Vl,t=>t.getUTCSeconds());Kd.range;const C$=Mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vl)},(t,e)=>{t.setTime(+t+e*Na)},(t,e)=>(e-t)/Na,t=>t.getMinutes());C$.range;const I$=Mr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Na)},(t,e)=>(e-t)/Na,t=>t.getUTCMinutes());I$.range;const E$=Mr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vl-t.getMinutes()*Na)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getHours());E$.range;const T$=Mr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getUTCHours());T$.range;const Sx=Mr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Na)/nc,t=>t.getDate()-1);Sx.range;const uS=Mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nc,t=>t.getUTCDate()-1);uS.range;const tq=Mr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/nc,t=>Math.floor(t/nc));tq.range;function Xh(t){return Mr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Na)/N$)}const dS=Xh(0),k1=Xh(1),cwe=Xh(2),uwe=Xh(3),Bp=Xh(4),dwe=Xh(5),hwe=Xh(6);dS.range;k1.range;cwe.range;uwe.range;Bp.range;dwe.range;hwe.range;function Yh(t){return Mr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/N$)}const hS=Yh(0),S1=Yh(1),fwe=Yh(2),pwe=Yh(3),zp=Yh(4),mwe=Yh(5),gwe=Yh(6);hS.range;S1.range;fwe.range;pwe.range;zp.range;mwe.range;gwe.range;const _$=Mr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());_$.range;const A$=Mr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());A$.range;const rc=Mr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());rc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});rc.range;const sc=Mr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Mr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});sc.range;function nq(t,e,n,r,s,i){const a=[[Kd,1,Vl],[Kd,5,5*Vl],[Kd,15,15*Vl],[Kd,30,30*Vl],[i,1,Na],[i,5,5*Na],[i,15,15*Na],[i,30,30*Na],[s,1,Bl],[s,3,3*Bl],[s,6,6*Bl],[s,12,12*Bl],[r,1,nc],[r,2,2*nc],[n,1,N$],[e,1,yB],[e,3,3*yB],[t,1,wE]];function o(c,u,d){const p=u<c;p&&([c,u]=[u,c]);const g=d&&typeof d.range=="function"?d:l(c,u,d),y=g?g.range(c,+u+1):[];return p?y.reverse():y}function l(c,u,d){const p=Math.abs(u-c)/d,g=d$(([,,v])=>v).right(a,p);if(g===a.length)return t.every(x_(c/wE,u/wE,d));if(g===0)return w1.every(Math.max(x_(c,u,d),1));const[y,x]=a[p/a[g-1][2]<a[g][2]/p?g-1:g];return y.every(x)}return[o,l]}const[ywe,xwe]=nq(sc,A$,hS,tq,T$,I$),[vwe,bwe]=nq(rc,_$,dS,Sx,E$,C$);function kE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function SE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mg(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wwe(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,i=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Fg(s),u=Lg(s),d=Fg(i),p=Lg(i),g=Fg(a),y=Lg(a),x=Fg(o),v=Lg(o),w=Fg(l),k=Lg(l),S={a:Q,A:z,b:H,B:ee,c:null,d:SB,e:SB,f:Wwe,g:e1e,G:n1e,H:Bwe,I:zwe,j:Uwe,L:rq,m:Gwe,M:Hwe,p:G,q:Y,Q:IB,s:EB,S:qwe,u:Kwe,U:Xwe,V:Ywe,w:Qwe,W:Jwe,x:null,X:null,y:Zwe,Y:t1e,Z:r1e,"%":CB},I={a:ae,A:ye,b:xe,B:Ce,c:null,d:NB,e:NB,f:o1e,g:y1e,G:v1e,H:s1e,I:i1e,j:a1e,L:iq,m:l1e,M:c1e,p:fe,q:Te,Q:IB,s:EB,S:u1e,u:d1e,U:h1e,V:f1e,w:p1e,W:m1e,x:null,X:null,y:g1e,Y:x1e,Z:b1e,"%":CB},E={a:D,A:R,b:F,B:L,c:K,d:wB,e:wB,f:Mwe,g:bB,G:vB,H:kB,I:kB,j:Pwe,L:Owe,m:$we,M:jwe,p:$,q:Rwe,Q:Lwe,s:Vwe,S:Dwe,u:Iwe,U:Ewe,V:Twe,w:Cwe,W:_we,x:X,X:q,y:bB,Y:vB,Z:Awe,"%":Fwe};S.x=j(n,S),S.X=j(r,S),S.c=j(e,S),I.x=j(n,I),I.X=j(r,I),I.c=j(e,I);function j(ue,Ne){return function(Ee){var me=[],Ze=-1,Xe=0,pt=ue.length,ft,Et,Qt;for(Ee instanceof Date||(Ee=new Date(+Ee));++Ze<pt;)ue.charCodeAt(Ze)===37&&(me.push(ue.slice(Xe,Ze)),(Et=xB[ft=ue.charAt(++Ze)])!=null?ft=ue.charAt(++Ze):Et=ft==="e"?" ":"0",(Qt=Ne[ft])&&(ft=Qt(Ee,Et)),me.push(ft),Xe=Ze+1);return me.push(ue.slice(Xe,Ze)),me.join("")}}function A(ue,Ne){return function(Ee){var me=Mg(1900,void 0,1),Ze=T(me,ue,Ee+="",0),Xe,pt;if(Ze!=Ee.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Ne&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(Xe=SE(Mg(me.y,0,1)),pt=Xe.getUTCDay(),Xe=pt>4||pt===0?S1.ceil(Xe):S1(Xe),Xe=uS.offset(Xe,(me.V-1)*7),me.y=Xe.getUTCFullYear(),me.m=Xe.getUTCMonth(),me.d=Xe.getUTCDate()+(me.w+6)%7):(Xe=kE(Mg(me.y,0,1)),pt=Xe.getDay(),Xe=pt>4||pt===0?k1.ceil(Xe):k1(Xe),Xe=Sx.offset(Xe,(me.V-1)*7),me.y=Xe.getFullYear(),me.m=Xe.getMonth(),me.d=Xe.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),pt="Z"in me?SE(Mg(me.y,0,1)).getUTCDay():kE(Mg(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(pt+5)%7:me.w+me.U*7-(pt+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,SE(me)):kE(me)}}function T(ue,Ne,Ee,me){for(var Ze=0,Xe=Ne.length,pt=Ee.length,ft,Et;Ze<Xe;){if(me>=pt)return-1;if(ft=Ne.charCodeAt(Ze++),ft===37){if(ft=Ne.charAt(Ze++),Et=E[ft in xB?Ne.charAt(Ze++):ft],!Et||(me=Et(ue,Ee,me))<0)return-1}else if(ft!=Ee.charCodeAt(me++))return-1}return me}function $(ue,Ne,Ee){var me=c.exec(Ne.slice(Ee));return me?(ue.p=u.get(me[0].toLowerCase()),Ee+me[0].length):-1}function D(ue,Ne,Ee){var me=g.exec(Ne.slice(Ee));return me?(ue.w=y.get(me[0].toLowerCase()),Ee+me[0].length):-1}function R(ue,Ne,Ee){var me=d.exec(Ne.slice(Ee));return me?(ue.w=p.get(me[0].toLowerCase()),Ee+me[0].length):-1}function F(ue,Ne,Ee){var me=w.exec(Ne.slice(Ee));return me?(ue.m=k.get(me[0].toLowerCase()),Ee+me[0].length):-1}function L(ue,Ne,Ee){var me=x.exec(Ne.slice(Ee));return me?(ue.m=v.get(me[0].toLowerCase()),Ee+me[0].length):-1}function K(ue,Ne,Ee){return T(ue,e,Ne,Ee)}function X(ue,Ne,Ee){return T(ue,n,Ne,Ee)}function q(ue,Ne,Ee){return T(ue,r,Ne,Ee)}function Q(ue){return a[ue.getDay()]}function z(ue){return i[ue.getDay()]}function H(ue){return l[ue.getMonth()]}function ee(ue){return o[ue.getMonth()]}function G(ue){return s[+(ue.getHours()>=12)]}function Y(ue){return 1+~~(ue.getMonth()/3)}function ae(ue){return a[ue.getUTCDay()]}function ye(ue){return i[ue.getUTCDay()]}function xe(ue){return l[ue.getUTCMonth()]}function Ce(ue){return o[ue.getUTCMonth()]}function fe(ue){return s[+(ue.getUTCHours()>=12)]}function Te(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var Ne=j(ue+="",S);return Ne.toString=function(){return ue},Ne},parse:function(ue){var Ne=A(ue+="",!1);return Ne.toString=function(){return ue},Ne},utcFormat:function(ue){var Ne=j(ue+="",I);return Ne.toString=function(){return ue},Ne},utcParse:function(ue){var Ne=A(ue+="",!0);return Ne.toString=function(){return ue},Ne}}}var xB={"-":"",_:" ",0:"0"},is=/^\s*\d+/,kwe=/^%/,Swe=/[\\^$*+?|[\]().{}]/g;function nn(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",i=s.length;return r+(i<n?new Array(n-i+1).join(e)+s:s)}function Nwe(t){return t.replace(Swe,"\\$&")}function Fg(t){return new RegExp("^(?:"+t.map(Nwe).join("|")+")","i")}function Lg(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Cwe(t,e,n){var r=is.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Iwe(t,e,n){var r=is.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ewe(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Twe(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function _we(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function vB(t,e,n){var r=is.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bB(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Awe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Rwe(t,e,n){var r=is.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $we(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function wB(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Pwe(t,e,n){var r=is.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function kB(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function jwe(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Dwe(t,e,n){var r=is.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Owe(t,e,n){var r=is.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mwe(t,e,n){var r=is.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Fwe(t,e,n){var r=kwe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Lwe(t,e,n){var r=is.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Vwe(t,e,n){var r=is.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function SB(t,e){return nn(t.getDate(),e,2)}function Bwe(t,e){return nn(t.getHours(),e,2)}function zwe(t,e){return nn(t.getHours()%12||12,e,2)}function Uwe(t,e){return nn(1+Sx.count(rc(t),t),e,3)}function rq(t,e){return nn(t.getMilliseconds(),e,3)}function Wwe(t,e){return rq(t,e)+"000"}function Gwe(t,e){return nn(t.getMonth()+1,e,2)}function Hwe(t,e){return nn(t.getMinutes(),e,2)}function qwe(t,e){return nn(t.getSeconds(),e,2)}function Kwe(t){var e=t.getDay();return e===0?7:e}function Xwe(t,e){return nn(dS.count(rc(t)-1,t),e,2)}function sq(t){var e=t.getDay();return e>=4||e===0?Bp(t):Bp.ceil(t)}function Ywe(t,e){return t=sq(t),nn(Bp.count(rc(t),t)+(rc(t).getDay()===4),e,2)}function Qwe(t){return t.getDay()}function Jwe(t,e){return nn(k1.count(rc(t)-1,t),e,2)}function Zwe(t,e){return nn(t.getFullYear()%100,e,2)}function e1e(t,e){return t=sq(t),nn(t.getFullYear()%100,e,2)}function t1e(t,e){return nn(t.getFullYear()%1e4,e,4)}function n1e(t,e){var n=t.getDay();return t=n>=4||n===0?Bp(t):Bp.ceil(t),nn(t.getFullYear()%1e4,e,4)}function r1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+nn(e/60|0,"0",2)+nn(e%60,"0",2)}function NB(t,e){return nn(t.getUTCDate(),e,2)}function s1e(t,e){return nn(t.getUTCHours(),e,2)}function i1e(t,e){return nn(t.getUTCHours()%12||12,e,2)}function a1e(t,e){return nn(1+uS.count(sc(t),t),e,3)}function iq(t,e){return nn(t.getUTCMilliseconds(),e,3)}function o1e(t,e){return iq(t,e)+"000"}function l1e(t,e){return nn(t.getUTCMonth()+1,e,2)}function c1e(t,e){return nn(t.getUTCMinutes(),e,2)}function u1e(t,e){return nn(t.getUTCSeconds(),e,2)}function d1e(t){var e=t.getUTCDay();return e===0?7:e}function h1e(t,e){return nn(hS.count(sc(t)-1,t),e,2)}function aq(t){var e=t.getUTCDay();return e>=4||e===0?zp(t):zp.ceil(t)}function f1e(t,e){return t=aq(t),nn(zp.count(sc(t),t)+(sc(t).getUTCDay()===4),e,2)}function p1e(t){return t.getUTCDay()}function m1e(t,e){return nn(S1.count(sc(t)-1,t),e,2)}function g1e(t,e){return nn(t.getUTCFullYear()%100,e,2)}function y1e(t,e){return t=aq(t),nn(t.getUTCFullYear()%100,e,2)}function x1e(t,e){return nn(t.getUTCFullYear()%1e4,e,4)}function v1e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?zp(t):zp.ceil(t),nn(t.getUTCFullYear()%1e4,e,4)}function b1e(){return"+0000"}function CB(){return"%"}function IB(t){return+t}function EB(t){return Math.floor(+t/1e3)}var ep,oq,lq;w1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function w1e(t){return ep=wwe(t),oq=ep.format,ep.parse,lq=ep.utcFormat,ep.utcParse,ep}function k1e(t){return new Date(t)}function S1e(t){return t instanceof Date?+t:+new Date(+t)}function R$(t,e,n,r,s,i,a,o,l,c){var u=y$(),d=u.invert,p=u.domain,g=c(".%L"),y=c(":%S"),x=c("%I:%M"),v=c("%I %p"),w=c("%a %d"),k=c("%b %d"),S=c("%B"),I=c("%Y");function E(j){return(l(j)<j?g:o(j)<j?y:a(j)<j?x:i(j)<j?v:r(j)<j?s(j)<j?w:k:n(j)<j?S:I)(j)}return u.invert=function(j){return new Date(d(j))},u.domain=function(j){return arguments.length?p(Array.from(j,S1e)):p().map(k1e)},u.ticks=function(j){var A=p();return t(A[0],A[A.length-1],j??10)},u.tickFormat=function(j,A){return A==null?E:c(A)},u.nice=function(j){var A=p();return(!j||typeof j.range!="function")&&(j=e(A[0],A[A.length-1],j??10)),j?p(KH(A,j)):u},u.copy=function(){return kx(u,R$(t,e,n,r,s,i,a,o,l,c))},u}function N1e(){return Pa.apply(R$(vwe,bwe,rc,_$,dS,Sx,E$,C$,Kd,oq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function C1e(){return Pa.apply(R$(ywe,xwe,sc,A$,hS,uS,T$,I$,Kd,lq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fS(){var t=0,e=1,n,r,s,i,a=Ys,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(s===0?.5:(d=(i(d)-n)*s,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=i(t=+t),r=i(e=+e),s=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function u(d){return function(p){var g,y;return arguments.length?([g,y]=p,a=d(g,y),c):[a(0),a(1)]}}return c.range=u(xm),c.rangeRound=u(g$),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return i=d,n=d(t),r=d(e),s=n===r?0:1/(r-n),c}}function Bu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function cq(){var t=Vu(fS()(Ys));return t.copy=function(){return Bu(t,cq())},pc.apply(t,arguments)}function uq(){var t=b$(fS()).domain([1,10]);return t.copy=function(){return Bu(t,uq()).base(t.base())},pc.apply(t,arguments)}function dq(){var t=w$(fS());return t.copy=function(){return Bu(t,dq()).constant(t.constant())},pc.apply(t,arguments)}function $$(){var t=k$(fS());return t.copy=function(){return Bu(t,$$()).exponent(t.exponent())},pc.apply(t,arguments)}function I1e(){return $$.apply(null,arguments).exponent(.5)}function hq(){var t=[],e=Ys;function n(r){if(r!=null&&!isNaN(r=+r))return e((bx(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ou),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,i)=>dbe(t,i/r))},n.copy=function(){return hq(e).domain(t)},pc.apply(n,arguments)}function pS(){var t=0,e=.5,n=1,r=1,s,i,a,o,l,c=Ys,u,d=!1,p;function g(x){return isNaN(x=+x)?p:(x=.5+((x=+u(x))-i)*(r*x<r*i?o:l),c(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,s=u(t=+t),i=u(e=+e),a=u(n=+n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(c=x,g):c};function y(x){return function(v){var w,k,S;return arguments.length?([w,k,S]=v,c=Fbe(x,[w,k,S]),g):[c(0),c(.5),c(1)]}}return g.range=y(xm),g.rangeRound=y(g$),g.unknown=function(x){return arguments.length?(p=x,g):p},function(x){return u=x,s=x(t),i=x(e),a=x(n),o=s===i?0:.5/(i-s),l=i===a?0:.5/(a-i),r=i<s?-1:1,g}}function fq(){var t=Vu(pS()(Ys));return t.copy=function(){return Bu(t,fq())},pc.apply(t,arguments)}function pq(){var t=b$(pS()).domain([.1,1,10]);return t.copy=function(){return Bu(t,pq()).base(t.base())},pc.apply(t,arguments)}function mq(){var t=w$(pS());return t.copy=function(){return Bu(t,mq()).constant(t.constant())},pc.apply(t,arguments)}function P$(){var t=k$(pS());return t.copy=function(){return Bu(t,P$()).exponent(t.exponent())},pc.apply(t,arguments)}function E1e(){return P$.apply(null,arguments).exponent(.5)}const Qg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:f$,scaleDiverging:fq,scaleDivergingLog:pq,scaleDivergingPow:P$,scaleDivergingSqrt:E1e,scaleDivergingSymlog:mq,scaleIdentity:qH,scaleImplicit:v_,scaleLinear:HH,scaleLog:XH,scaleOrdinal:h$,scalePoint:pbe,scalePow:S$,scaleQuantile:JH,scaleQuantize:ZH,scaleRadial:QH,scaleSequential:cq,scaleSequentialLog:uq,scaleSequentialPow:$$,scaleSequentialQuantile:hq,scaleSequentialSqrt:I1e,scaleSequentialSymlog:dq,scaleSqrt:owe,scaleSymlog:YH,scaleThreshold:eq,scaleTime:N1e,scaleUtc:C1e,tickFormat:GH},Symbol.toStringTag,{value:"Module"}));var zu=t=>t.chartData,j$=ve([zu],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),mS=(t,e,n,r)=>r?j$(t):zu(t);function Up(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Qi(e)&&Qi(n))return!0}return!1}function TB(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function T1e(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,s,i;if(Qi(n))s=n;else if(typeof n=="function")return;if(Qi(r))i=r;else if(typeof r=="function")return;var a=[s,i];if(Up(a))return a}}function _1e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Up(r))return TB(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[s,i]=t,a,o;if(s==="auto")e!=null&&(a=Math.min(...e));else if(qe(s))a=s;else if(typeof s=="function")try{e!=null&&(a=s(e?.[0]))}catch{}else if(typeof s=="string"&&mV.test(s)){var l=mV.exec(s);if(l==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e?.[0];if(i==="auto")e!=null&&(o=Math.max(...e));else if(qe(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[1]))}catch{}else if(typeof i=="string"&&gV.test(i)){var u=gV.exec(i);if(u==null||e==null)o=void 0;else{var d=+u[1];o=e[1]+d}}else o=e?.[1];var p=[a,o];if(Up(p))return e==null?p:TB(p,e,n)}}}var vm=1e9,A1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},O$,zn=!0,Ta="[DecimalError] ",ah=Ta+"Invalid argument: ",D$=Ta+"Exponent out of range: ",bm=Math.floor,Fd=Math.pow,R1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bi,Yr=1e7,Pn=7,gq=9007199254740991,N1=bm(gq/Pn),Qe={};Qe.absoluteValue=Qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Qe.comparedTo=Qe.cmp=function(t){var e,n,r,s,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return r===s?0:r>s^i.s<0?1:-1};Qe.decimalPlaces=Qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Pn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Qe.dividedBy=Qe.div=function(t){return Hl(this,new this.constructor(t))};Qe.dividedToIntegerBy=Qe.idiv=function(t){var e=this,n=e.constructor;return kn(Hl(e,new n(t),0,1),n.precision)};Qe.equals=Qe.eq=function(t){return!this.cmp(t)};Qe.exponent=function(){return wr(this)};Qe.greaterThan=Qe.gt=function(t){return this.cmp(t)>0};Qe.greaterThanOrEqualTo=Qe.gte=function(t){return this.cmp(t)>=0};Qe.isInteger=Qe.isint=function(){return this.e>this.d.length-2};Qe.isNegative=Qe.isneg=function(){return this.s<0};Qe.isPositive=Qe.ispos=function(){return this.s>0};Qe.isZero=function(){return this.s===0};Qe.lessThan=Qe.lt=function(t){return this.cmp(t)<0};Qe.lessThanOrEqualTo=Qe.lte=function(t){return this.cmp(t)<1};Qe.logarithm=Qe.log=function(t){var e,n=this,r=n.constructor,s=r.precision,i=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Bi))throw Error(Ta+"NaN");if(n.s<1)throw Error(Ta+(n.s?"NaN":"-Infinity"));return n.eq(Bi)?new r(0):(zn=!1,e=Hl(Gy(n,i),Gy(t,i),i),zn=!0,kn(e,s))};Qe.minus=Qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?vq(e,t):yq(e,(t.s=-t.s,t))};Qe.modulo=Qe.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Ta+"NaN");return n.s?(zn=!1,e=Hl(n,t,0,1).times(t),zn=!0,n.minus(e)):kn(new r(n),s)};Qe.naturalExponential=Qe.exp=function(){return xq(this)};Qe.naturalLogarithm=Qe.ln=function(){return Gy(this)};Qe.negated=Qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Qe.plus=Qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?yq(e,t):vq(e,(t.s=-t.s,t))};Qe.precision=Qe.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ah+t);if(e=wr(s)+1,r=s.d.length-1,n=r*Pn+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Qe.squareRoot=Qe.sqrt=function(){var t,e,n,r,s,i,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Ta+"NaN")}for(t=wr(o),zn=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=Xo(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=bm((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=a=n+3;;)if(i=r,r=i.plus(Hl(o,i,a+2)).times(.5),Xo(i.d).slice(0,a)===(e=Xo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),s==a&&e=="4999"){if(kn(i,n+1,0),i.times(i).eq(o)){r=i;break}}else if(e!="9999")break;a+=4}return zn=!0,kn(r,n)};Qe.times=Qe.mul=function(t){var e,n,r,s,i,a,o,l,c,u=this,d=u.constructor,p=u.d,g=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=p.length,c=g.length,l<c&&(i=p,p=g,g=i,a=l,l=c,c=a),i=[],a=l+c,r=a;r--;)i.push(0);for(r=c;--r>=0;){for(e=0,s=l+r;s>r;)o=i[s]+g[r]*p[s-r-1]+e,i[s--]=o%Yr|0,e=o/Yr|0;i[s]=(i[s]+e)%Yr|0}for(;!i[--a];)i.pop();return e?++n:i.shift(),t.d=i,t.e=n,zn?kn(t,d.precision):t};Qe.toDecimalPlaces=Qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ul(t,0,vm),e===void 0?e=r.rounding:ul(e,0,8),kn(n,t+wr(n)+1,e))};Qe.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Sh(r,!0):(ul(t,0,vm),e===void 0?e=s.rounding:ul(e,0,8),r=kn(new s(r),t+1,e),n=Sh(r,!0,t+1)),n};Qe.toFixed=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?Sh(s):(ul(t,0,vm),e===void 0?e=i.rounding:ul(e,0,8),r=kn(new i(s),t+wr(s)+1,e),n=Sh(r.abs(),!1,t+wr(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Qe.toInteger=Qe.toint=function(){var t=this,e=t.constructor;return kn(new e(t),wr(t)+1,e.rounding)};Qe.toNumber=function(){return+this};Qe.toPower=Qe.pow=function(t){var e,n,r,s,i,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Bi);if(o=new l(o),!o.s){if(t.s<1)throw Error(Ta+"Infinity");return o}if(o.eq(Bi))return o;if(r=l.precision,t.eq(Bi))return kn(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,i=o.s,a){if((n=u<0?-u:u)<=gq){for(s=new l(Bi),e=Math.ceil(r/Pn+4),zn=!1;n%2&&(s=s.times(o),AB(s.d,e)),n=bm(n/2),n!==0;)o=o.times(o),AB(o.d,e);return zn=!0,t.s<0?new l(Bi).div(s):kn(s,r)}}else if(i<0)throw Error(Ta+"NaN");return i=i<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,zn=!1,s=t.times(Gy(o,r+c)),zn=!0,s=xq(s),s.s=i,s};Qe.toPrecision=function(t,e){var n,r,s=this,i=s.constructor;return t===void 0?(n=wr(s),r=Sh(s,n<=i.toExpNeg||n>=i.toExpPos)):(ul(t,1,vm),e===void 0?e=i.rounding:ul(e,0,8),s=kn(new i(s),t,e),n=wr(s),r=Sh(s,t<=n||n<=i.toExpNeg,t)),r};Qe.toSignificantDigits=Qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ul(t,1,vm),e===void 0?e=r.rounding:ul(e,0,8)),kn(new r(n),t,e)};Qe.toString=Qe.valueOf=Qe.val=Qe.toJSON=Qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=wr(t),n=t.constructor;return Sh(t,e<=n.toExpNeg||e>=n.toExpPos)};function yq(t,e){var n,r,s,i,a,o,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),zn?kn(e,d):e;if(l=t.d,c=e.d,a=t.e,s=e.e,l=l.slice(),i=a-s,i){for(i<0?(r=l,i=-i,o=c.length):(r=c,s=a,o=l.length),a=Math.ceil(d/Pn),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,r=c,c=l,l=r),n=0;i;)n=(l[--i]=l[i]+c[i]+n)/Yr|0,l[i]%=Yr;for(n&&(l.unshift(n),++s),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=s,zn?kn(e,d):e}function ul(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ah+t)}function Xo(t){var e,n,r,s=t.length-1,i="",a=t[0];if(s>0){for(i+=a,e=1;e<s;e++)r=t[e]+"",n=Pn-r.length,n&&(i+=Kc(n)),i+=r;a=t[e],r=a+"",n=Pn-r.length,n&&(i+=Kc(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return i+a}var Hl=(function(){function t(r,s){var i,a=0,o=r.length;for(r=r.slice();o--;)i=r[o]*s+a,r[o]=i%Yr|0,a=i/Yr|0;return a&&r.unshift(a),r}function e(r,s,i,a){var o,l;if(i!=a)l=i>a?1:-1;else for(o=l=0;o<i;o++)if(r[o]!=s[o]){l=r[o]>s[o]?1:-1;break}return l}function n(r,s,i){for(var a=0;i--;)r[i]-=a,a=r[i]<s[i]?1:0,r[i]=a*Yr+r[i]-s[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,i,a){var o,l,c,u,d,p,g,y,x,v,w,k,S,I,E,j,A,T,$=r.constructor,D=r.s==s.s?1:-1,R=r.d,F=s.d;if(!r.s)return new $(r);if(!s.s)throw Error(Ta+"Division by zero");for(l=r.e-s.e,A=F.length,E=R.length,g=new $(D),y=g.d=[],c=0;F[c]==(R[c]||0);)++c;if(F[c]>(R[c]||0)&&--l,i==null?k=i=$.precision:a?k=i+(wr(r)-wr(s))+1:k=i,k<0)return new $(0);if(k=k/Pn+2|0,c=0,A==1)for(u=0,F=F[0],k++;(c<E||u)&&k--;c++)S=u*Yr+(R[c]||0),y[c]=S/F|0,u=S%F|0;else{for(u=Yr/(F[0]+1)|0,u>1&&(F=t(F,u),R=t(R,u),A=F.length,E=R.length),I=A,x=R.slice(0,A),v=x.length;v<A;)x[v++]=0;T=F.slice(),T.unshift(0),j=F[0],F[1]>=Yr/2&&++j;do u=0,o=e(F,x,A,v),o<0?(w=x[0],A!=v&&(w=w*Yr+(x[1]||0)),u=w/j|0,u>1?(u>=Yr&&(u=Yr-1),d=t(F,u),p=d.length,v=x.length,o=e(d,x,p,v),o==1&&(u--,n(d,A<p?T:F,p))):(u==0&&(o=u=1),d=F.slice()),p=d.length,p<v&&d.unshift(0),n(x,d,v),o==-1&&(v=x.length,o=e(F,x,A,v),o<1&&(u++,n(x,A<v?T:F,v))),v=x.length):o===0&&(u++,x=[0]),y[c++]=u,o&&x[0]?x[v++]=R[I]||0:(x=[R[I]],v=1);while((I++<E||x[0]!==void 0)&&k--)}return y[0]||y.shift(),g.e=l,kn(g,a?i+wr(g)+1:i)}})();function xq(t,e){var n,r,s,i,a,o,l=0,c=0,u=t.constructor,d=u.precision;if(wr(t)>16)throw Error(D$+wr(t));if(!t.s)return new u(Bi);for(zn=!1,o=d,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(Fd(2,c))/Math.LN10*2+5|0,o+=r,n=s=i=new u(Bi),u.precision=o;;){if(s=kn(s.times(t),o),n=n.times(++l),a=i.plus(Hl(s,n,o)),Xo(a.d).slice(0,o)===Xo(i.d).slice(0,o)){for(;c--;)i=kn(i.times(i),o);return u.precision=d,e==null?(zn=!0,kn(i,d)):i}i=a}}function wr(t){for(var e=t.e*Pn,n=t.d[0];n>=10;n/=10)e++;return e}function NE(t,e,n){if(e>t.LN10.sd())throw zn=!0,n&&(t.precision=n),Error(Ta+"LN10 precision limit exceeded");return kn(new t(t.LN10),e)}function Kc(t){for(var e="";t--;)e+="0";return e}function Gy(t,e){var n,r,s,i,a,o,l,c,u,d=1,p=10,g=t,y=g.d,x=g.constructor,v=x.precision;if(g.s<1)throw Error(Ta+(g.s?"NaN":"-Infinity"));if(g.eq(Bi))return new x(0);if(e==null?(zn=!1,c=v):c=e,g.eq(10))return e==null&&(zn=!0),NE(x,c);if(c+=p,x.precision=c,n=Xo(y),r=n.charAt(0),i=wr(g),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Xo(g.d),r=n.charAt(0),d++;i=wr(g),r>1?(g=new x("0."+n),i++):g=new x(r+"."+n.slice(1))}else return l=NE(x,c+2,v).times(i+""),g=Gy(new x(r+"."+n.slice(1)),c-p).plus(l),x.precision=v,e==null?(zn=!0,kn(g,v)):g;for(o=a=g=Hl(g.minus(Bi),g.plus(Bi),c),u=kn(g.times(g),c),s=3;;){if(a=kn(a.times(u),c),l=o.plus(Hl(a,new x(s),c)),Xo(l.d).slice(0,c)===Xo(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(NE(x,c+2,v).times(i+""))),o=Hl(o,new x(d),c),x.precision=v,e==null?(zn=!0,kn(o,v)):o;o=l,s+=2}}function _B(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=bm(n/Pn),t.d=[],r=(n+1)%Pn,n<0&&(r+=Pn),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Pn;r<s;)t.d.push(+e.slice(r,r+=Pn));e=e.slice(r),r=Pn-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),zn&&(t.e>N1||t.e<-N1))throw Error(D$+n)}else t.s=0,t.e=0,t.d=[0];return t}function kn(t,e,n){var r,s,i,a,o,l,c,u,d=t.d;for(a=1,i=d[0];i>=10;i/=10)a++;if(r=e-a,r<0)r+=Pn,s=e,c=d[u=0];else{if(u=Math.ceil((r+1)/Pn),i=d.length,u>=i)return t;for(c=i=d[u],a=1;i>=10;i/=10)a++;r%=Pn,s=r-Pn+a}if(n!==void 0&&(i=Fd(10,a-s-1),o=c/i%10|0,l=e<0||d[u+1]!==void 0||c%i,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?s>0?c/Fd(10,a-s):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(i=wr(t),d.length=1,e=e-i-1,d[0]=Fd(10,(Pn-e%Pn)%Pn),t.e=bm(-e/Pn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,i=1,u--):(d.length=u+1,i=Fd(10,Pn-r),d[u]=s>0?(c/Fd(10,a-s)%Fd(10,s)|0)*i:0),l)for(;;)if(u==0){(d[0]+=i)==Yr&&(d[0]=1,++t.e);break}else{if(d[u]+=i,d[u]!=Yr)break;d[u--]=0,i=1}for(r=d.length;d[--r]===0;)d.pop();if(zn&&(t.e>N1||t.e<-N1))throw Error(D$+wr(t));return t}function vq(t,e){var n,r,s,i,a,o,l,c,u,d,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),zn?kn(e,g):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),s=Math.max(Math.ceil(g/Pn),o)+2,a>s&&(a=s,n.length=1),n.reverse(),s=a;s--;)n.push(0);n.reverse()}else{for(s=l.length,o=d.length,u=s<o,u&&(o=s),s=0;s<o;s++)if(l[s]!=d[s]){u=l[s]<d[s];break}a=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,s=d.length-o;s>0;--s)l[o++]=0;for(s=d.length;s>a;){if(l[--s]<d[s]){for(i=s;i&&l[--i]===0;)l[i]=Yr-1;--l[i],l[s]+=Yr}l[s]-=d[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,zn?kn(e,g):e):new p(0)}function Sh(t,e,n){var r,s=wr(t),i=Xo(t.d),a=i.length;return e?(n&&(r=n-a)>0?i=i.charAt(0)+"."+i.slice(1)+Kc(r):a>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Kc(-s-1)+i,n&&(r=n-a)>0&&(i+=Kc(r))):s>=a?(i+=Kc(s+1-a),n&&(r=n-s-1)>0&&(i=i+"."+Kc(r))):((r=s+1)<a&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-a)>0&&(s+1===a&&(i+="."),i+=Kc(r))),t.s<0?"-"+i:i}function AB(t,e){if(t.length>e)return t.length=e,!0}function bq(t){var e,n,r;function s(i){var a=this;if(!(a instanceof s))return new s(i);if(a.constructor=s,i instanceof s){a.s=i.s,a.e=i.e,a.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ah+i);if(i>0)a.s=1;else if(i<0)i=-i,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(i===~~i&&i<1e7){a.e=0,a.d=[i];return}return _B(a,i.toString())}else if(typeof i!="string")throw Error(ah+i);if(i.charCodeAt(0)===45?(i=i.slice(1),a.s=-1):a.s=1,R1e.test(i))_B(a,i);else throw Error(ah+i)}if(s.prototype=Qe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=bq,s.config=s.set=$1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function $1e(t){if(!t||typeof t!="object")throw Error(Ta+"Object expected");var e,n,r,s=["precision",1,vm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(bm(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ah+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ah+n+": "+r);return this}var O$=bq(A1e);Bi=new O$(1);const un=O$;var P1e=t=>t,wq={},kq=t=>t===wq,RB=t=>function e(){return arguments.length===0||arguments.length===1&&kq(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Sq=(t,e)=>t===1?e:RB(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var i=r.filter(a=>a!==wq).length;return i>=t?e(...r):Sq(t-i,RB(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=r.map(u=>kq(u)?o.shift():u);return e(...c,...o)}))}),gS=t=>Sq(t.length,t),S_=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},j1e=gS((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),D1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return P1e;var s=n.reverse(),i=s[0],a=s.slice(1);return function(){return a.reduce((o,l)=>l(o),i(...arguments))}},N_=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),Nq=t=>{var e=null,n=null;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e&&s.every((a,o)=>{var l;return a===((l=e)===null||l===void 0?void 0:l[o])})||(e=s,n=t(...s)),n}};function Cq(t){var e;return t===0?e=1:e=Math.floor(new un(t).abs().log(10).toNumber())+1,e}function Iq(t,e,n){for(var r=new un(t),s=0,i=[];r.lt(e)&&s<1e5;)i.push(r.toNumber()),r=r.add(n),s++;return i}gS((t,e,n)=>{var r=+t,s=+e;return r+n*(s-r)});gS((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});gS((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var Eq=t=>{var[e,n]=t,[r,s]=[e,n];return e>n&&([r,s]=[n,e]),[r,s]},Tq=(t,e,n)=>{if(t.lte(0))return new un(0);var r=Cq(t.toNumber()),s=new un(10).pow(r),i=t.div(s),a=r!==1?.05:.1,o=new un(Math.ceil(i.div(a).toNumber())).add(n).mul(a),l=o.mul(s);return e?new un(l.toNumber()):new un(Math.ceil(l.toNumber()))},O1e=(t,e,n)=>{var r=new un(1),s=new un(t);if(!s.isint()&&n){var i=Math.abs(t);i<1?(r=new un(10).pow(Cq(t)-1),s=new un(Math.floor(s.div(r).toNumber())).mul(r)):i>1&&(s=new un(Math.floor(t)))}else t===0?s=new un(Math.floor((e-1)/2)):n||(s=new un(Math.floor(t)));var a=Math.floor((e-1)/2),o=D1e(j1e(l=>s.add(new un(l-a).mul(r)).toNumber()),S_);return o(0,e)},_q=function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new un(0),tickMin:new un(0),tickMax:new un(0)};var a=Tq(new un(n).sub(e).div(r-1),s,i),o;e<=0&&n>=0?o=new un(0):(o=new un(e).add(n).div(2),o=o.sub(new un(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new un(n).sub(o).div(a).toNumber()),u=l+c+1;return u>r?_q(e,n,r,s,i+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:a,tickMin:o.sub(new un(l).mul(a)),tickMax:o.add(new un(c).mul(a))})};function M1e(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(r,2),[a,o]=Eq([e,n]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...S_(0,r-1).map(()=>1/0)]:[...S_(0,r-1).map(()=>-1/0),o];return e>n?N_(l):l}if(a===o)return O1e(a,r,s);var{step:c,tickMin:u,tickMax:d}=_q(a,o,i,s,0),p=Iq(u,d.add(new un(.1).mul(c)),c);return e>n?N_(p):p}function F1e(t,e){var[n,r]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,a]=Eq([n,r]);if(i===-1/0||a===1/0)return[n,r];if(i===a)return[i];var o=Math.max(e,2),l=Tq(new un(a).sub(i).div(o-1),s,0),c=[...Iq(new un(i),new un(a),l),a];return s===!1&&(c=c.map(u=>Math.round(u))),n>r?N_(c):c}var L1e=Nq(M1e),V1e=Nq(F1e),Aq=t=>t.rootProps.maxBarSize,B1e=t=>t.rootProps.barGap,Rq=t=>t.rootProps.barCategoryGap,z1e=t=>t.rootProps.barSize,Nx=t=>t.rootProps.stackOffset,M$=t=>t.options.chartName,F$=t=>t.rootProps.syncId,$q=t=>t.rootProps.syncMethod,L$=t=>t.options.eventEmitter,Ml={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Oi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},yS=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},U1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ml.angleAxisId,includeHidden:!1,name:void 0,reversed:Ml.reversed,scale:Ml.scale,tick:Ml.tick,tickCount:void 0,ticks:void 0,type:Ml.type,unit:void 0},W1e={allowDataOverflow:Oi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oi.scale,tick:Oi.tick,tickCount:Oi.tickCount,ticks:void 0,type:Oi.type,unit:void 0},G1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ml.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ml.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ml.scale,tick:Ml.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},H1e={allowDataOverflow:Oi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Oi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Oi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Oi.scale,tick:Oi.tick,tickCount:Oi.tickCount,ticks:void 0,type:"category",unit:void 0},V$=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?G1e:U1e,B$=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?H1e:W1e,xS=t=>t.polarOptions,z$=ve([hc,fc,Or],hH),Pq=ve([xS,z$],(t,e)=>{if(t!=null)return Qs(t.innerRadius,e,0)}),jq=ve([xS,z$],(t,e)=>{if(t!=null)return Qs(t.outerRadius,e,e*.8)}),q1e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Dq=ve([xS],q1e);ve([V$,Dq],yS);var Oq=ve([z$,Pq,jq],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});ve([B$,Oq],yS);var Mq=ve([Yt,xS,Pq,jq,hc,fc],(t,e,n,r,s,i)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:Qs(a,s,s/2),cy:Qs(o,i,i/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Wn=(t,e)=>e,Cx=(t,e,n)=>n;function U$(t){return t?.id}var Fr=t=>{var e=Yt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},wm=t=>t.tooltip.settings.axisId,Lr=t=>{var e=Fr(t),n=wm(t);return Ix(t,e,n)};function Fq(t,e,n){var{chartData:r=[]}=e,s=n?.dataKey,i=new Map;return t.forEach(a=>{var o,l=(o=a.data)!==null&&o!==void 0?o:r;if(!(l==null||l.length===0)){var c=U$(a);l.forEach((u,d)=>{var p=s==null?d:String(bn(u,s,null)),g=bn(u,a.dataKey,0),y;i.has(p)?y=i.get(p):y={},Object.assign(y,{[c]:g}),i.set(p,y)})}}),Array.from(i.values())}function vS(t){return t.stackId!=null&&t.dataKey!=null}function $B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function C1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(n),!0).forEach(function(r){K1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K1e(t,e,n){return(e=X1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X1e(t){var e=Y1e(t,"string");return typeof e=="symbol"?e:e+""}function Y1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C_=[0,"auto"],ji={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mc=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??ji},Di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:C_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:iS},Uu=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??Di},Q1e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},W$=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Q1e},dr=(t,e,n)=>{switch(e){case"xAxis":return mc(t,n);case"yAxis":return Uu(t,n);case"zAxis":return W$(t,n);case"angleAxis":return V$(t,n);case"radiusAxis":return B$(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},J1e=(t,e,n)=>{switch(e){case"xAxis":return mc(t,n);case"yAxis":return Uu(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Ix=(t,e,n)=>{switch(e){case"xAxis":return mc(t,n);case"yAxis":return Uu(t,n);case"angleAxis":return V$(t,n);case"radiusAxis":return B$(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Lq=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function G$(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var bS=t=>t.graphicalItems.cartesianItems,Z1e=ve([Wn,Cx],G$),H$=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Ex=ve([bS,dr,Z1e],H$),Vq=ve([Ex],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(vS)),Bq=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),zq=ve([Ex],Bq),q$=t=>t.map(e=>e.data).filter(Boolean).flat(1),eke=ve([Ex],q$),K$=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:s}=e;return t.length>0?t:n.slice(r,s+1)},X$=ve([eke,mS],K$),Y$=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:bn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(s=>({value:bn(s,r)}))):t.map(r=>({value:r})),wS=ve([X$,dr,Ex],Y$);function Uq(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Qh(t){return t.filter(e=>cl(e)||e instanceof Date).map(Number).filter(e=>Xi(e)===!1)}function tke(t,e,n){return!n||typeof e!="number"||Xi(e)?[]:n.length?Qh(n.flatMap(r=>{var s=bn(t,r.dataKey),i,a;if(Array.isArray(s)?[i,a]=s:i=a=s,!(!Qi(i)||!Qi(a)))return[e-i,e+a]})):[]}var nke=ve([Vq,mS,Lr],Fq),Wq=(t,e,n)=>{var r={},s=e.reduce((i,a)=>(a.stackId==null||(i[a.stackId]==null&&(i[a.stackId]=[]),i[a.stackId].push(a)),i),r);return Object.fromEntries(Object.entries(s).map(i=>{var[a,o]=i,l=o.map(U$);return[a,{stackedData:sve(t,l,n),graphicalItems:o}]}))},I_=ve([nke,Vq,Nx],Wq),Gq=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(n!=="zAxis"){var i=cve(t,r,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},rke=ve([I_,zu,Wn],Gq),Hq=(t,e,n,r,s)=>n.length>0?t.flatMap(i=>n.flatMap(a=>{var o,l,c=(o=r[a.id])===null||o===void 0?void 0:o.filter(d=>Uq(s,d)),u=bn(i,(l=e.dataKey)!==null&&l!==void 0?l:a.dataKey);return{value:u,errorDomain:tke(i,u,c)}})).filter(Boolean):e?.dataKey!=null?t.map(i=>({value:bn(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})),kS=t=>t.errorBars,qq=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Uq(n,r));ve([zq,kS,Wn],qq);var ske=ve([X$,dr,zq,kS,Wn],Hq);function ike(t){var{value:e}=t;if(cl(e)||e instanceof Date)return e}var PB=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Qh(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ake=(t,e,n)=>{var r=t.map(ike).filter(s=>s!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&o9(r))?DH(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},Q$=t=>{var e;if(t==null||!("domain"in t))return C_;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Qh(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:C_},I1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),a=Math.min(...i),o=Math.max(...i);return[a,o]}},Kq=t=>t.referenceElements.dots,km=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),oke=ve([Kq,Wn,Cx],km),Xq=t=>t.referenceElements.areas,lke=ve([Xq,Wn,Cx],km),Yq=t=>t.referenceElements.lines,cke=ve([Yq,Wn,Cx],km),Qq=(t,e)=>{var n=Qh(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uke=ve(oke,Wn,Qq),Jq=(t,e)=>{var n=Qh(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},dke=ve([lke,Wn],Jq),Zq=(t,e)=>{var n=Qh(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},hke=ve(cke,Wn,Zq),fke=ve(uke,hke,dke,(t,e,n)=>I1(t,n,e)),eK=ve([dr],Q$),J$=(t,e,n,r,s,i,a)=>{var o=T1e(e,t.allowDataOverflow);if(o!=null)return o;var l=i==="vertical"&&a==="xAxis"||i==="horizontal"&&a==="yAxis",c=l?I1(n,s,PB(r)):I1(s,PB(r));return _1e(e,c,t.allowDataOverflow)},pke=ve([dr,eK,rke,ske,fke,Yt,Wn],J$),mke=[0,1],Z$=(t,e,n,r,s,i,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,c=Lu(e,i);return c&&o==null?DH(0,n.length):l==="category"?ake(r,t,c):s==="expand"?mke:a}},eP=ve([dr,Yt,X$,wS,Nx,Wn,pke],Z$),tK=(t,e,n,r,s)=>{if(t!=null){var{scale:i,type:a}=t;if(i==="auto")return e==="radial"&&s==="radiusAxis"?"band":e==="radial"&&s==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(mx(i));return o in Qg?o:"point"}}},Sm=ve([dr,Yt,Lq,M$,Wn],tK);function gke(t){if(t!=null){if(t in Qg)return Qg[t]();var e="scale".concat(mx(t));if(e in Qg)return Qg[e]()}}function tP(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var s=gke(e);if(s!=null){var i=s.domain(n).range(r);return Zxe(i),i}}}var nP=(t,e,n)=>{var r=Q$(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Up(t))return L1e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Up(t))return V1e(t,e.tickCount,e.allowDecimals)}},rP=ve([eP,Ix,Sm],nP),sP=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&Up(e)&&Array.isArray(n)&&n.length>0){var s=e[0],i=n[0],a=e[1],o=n[n.length-1];return[Math.min(s,i),Math.max(a,o)]}return e},yke=ve([dr,eP,rP,Wn],sP),xke=ve(wS,dr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Qh(t.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var s=r[r.length-1]-r[0];if(s===0)return 1/0;for(var i=0;i<r.length-1;i++){var a=r[i+1]-r[i];n=Math.min(n,a)}return n/s}}),nK=ve(xke,Yt,Rq,Or,(t,e,n,r)=>r,(t,e,n,r,s)=>{if(!Qi(t))return 0;var i=e==="vertical"?r.height:r.width;if(s==="gap")return t*i/2;if(s==="no-gap"){var a=Qs(n,t*i),o=t*i/2;return o-a-(o-a)/i*a}return 0}),vke=(t,e)=>{var n=mc(t,e);return n==null||typeof n.padding!="string"?0:nK(t,"xAxis",e,n.padding)},bke=(t,e)=>{var n=Uu(t,e);return n==null||typeof n.padding!="string"?0:nK(t,"yAxis",e,n.padding)},wke=ve(mc,vke,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:s}=t;return typeof s=="string"?{left:e,right:e}:{left:((n=s.left)!==null&&n!==void 0?n:0)+e,right:((r=s.right)!==null&&r!==void 0?r:0)+e}}),kke=ve(Uu,bke,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:s}=t;return typeof s=="string"?{top:e,bottom:e}:{top:((n=s.top)!==null&&n!==void 0?n:0)+e,bottom:((r=s.bottom)!==null&&r!==void 0?r:0)+e}}),Ske=ve([Or,wke,oS,aS,(t,e,n)=>n],(t,e,n,r,s)=>{var{padding:i}=r;return s?[i.left,n.width-i.right]:[t.left+e.left,t.left+t.width-e.right]}),Nke=ve([Or,Yt,kke,oS,aS,(t,e,n)=>n],(t,e,n,r,s,i)=>{var{padding:a}=s;return i?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Tx=(t,e,n,r)=>{var s;switch(e){case"xAxis":return Ske(t,n,r);case"yAxis":return Nke(t,n,r);case"zAxis":return(s=W$(t,n))===null||s===void 0?void 0:s.range;case"angleAxis":return Dq(t);case"radiusAxis":return Oq(t,n);default:return}},rK=ve([dr,Tx],yS),Nm=ve([dr,Sm,yke,rK],tP);ve([Ex,kS,Wn],qq);function sK(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var SS=(t,e)=>e,NS=(t,e,n)=>n,Cke=ve(r$,SS,NS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(sK)),Ike=ve(s$,SS,NS,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(sK)),iK=(t,e)=>({width:t.width,height:e.height}),Eke=(t,e)=>{var n=typeof e.width=="number"?e.width:iS;return{width:n,height:t.height}},aK=ve(Or,mc,iK),Tke=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},_ke=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Ake=ve(fc,Or,Cke,SS,NS,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=iK(e,o);a==null&&(a=Tke(e,r,t));var c=r==="top"&&!s||r==="bottom"&&s;i[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),i}),Rke=ve(hc,Or,Ike,SS,NS,(t,e,n,r,s)=>{var i={},a;return n.forEach(o=>{var l=Eke(e,o);a==null&&(a=_ke(e,r,t));var c=r==="left"&&!s||r==="right"&&s;i[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),i}),$ke=(t,e)=>{var n=Or(t),r=mc(t,e);if(r!=null){var s=Ake(t,r.orientation,r.mirror),i=s[e];return i==null?{x:n.left,y:0}:{x:n.left,y:i}}},Pke=(t,e)=>{var n=Or(t),r=Uu(t,e);if(r!=null){var s=Rke(t,r.orientation,r.mirror),i=s[e];return i==null?{x:0,y:n.top}:{x:i,y:n.top}}},oK=ve(Or,Uu,(t,e)=>{var n=typeof e.width=="number"?e.width:iS;return{width:n,height:t.height}}),jB=(t,e,n)=>{switch(e){case"xAxis":return aK(t,n).width;case"yAxis":return oK(t,n).height;default:return}},lK=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:a}=n,o=Lu(t,r),l=e.map(c=>c.value);if(a&&o&&i==="category"&&s&&o9(l))return l}},iP=ve([Yt,wS,dr,Wn],lK),cK=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,a=Lu(t,r);if(a&&(s==="number"||i!=="auto"))return e.map(o=>o.value)}},aP=ve([Yt,wS,Ix,Wn],cK),DB=ve([Yt,J1e,Sm,Nm,iP,aP,Tx,rP,Wn],(t,e,n,r,s,i,a,o,l)=>{if(e==null)return null;var c=Lu(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:i,duplicateDomain:s,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}),jke=(t,e,n,r,s,i,a,o,l)=>{if(!(e==null||r==null)){var c=Lu(t,l),{type:u,ticks:d,tickCount:p}=e,g=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,y=u==="category"&&r.bandwidth?r.bandwidth()/g:0;y=l==="angleAxis"&&i!=null&&i.length>=2?es(i[0]-i[1])*2*y:y;var x=d||s;if(x){var v=x.map((w,k)=>{var S=a?a.indexOf(w):w;return{index:k,coordinate:r(S)+y,value:w,offset:y}});return v.filter(w=>!Xi(w.coordinate))}return c&&o?o.map((w,k)=>({coordinate:r(w)+y,value:w,index:k,offset:y})):r.ticks?r.ticks(p).map(w=>({coordinate:r(w)+y,value:w,offset:y})):r.domain().map((w,k)=>({coordinate:r(w)+y,value:a?a[w]:w,index:k,offset:y}))}},uK=ve([Yt,Ix,Sm,Nm,rP,Tx,iP,aP,Wn],jke),Dke=(t,e,n,r,s,i,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Lu(t,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&r?.length>=2?es(r[0]-r[1])*2*c:c,o&&i?i.map((u,d)=>({coordinate:n(u)+c,value:u,index:d,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,d)=>({coordinate:n(u)+c,value:s?s[u]:u,index:d,offset:c}))}},Cu=ve([Yt,Ix,Nm,Tx,iP,aP,Wn],Dke),Iu=ve(dr,Nm,(t,e)=>{if(!(t==null||e==null))return C1(C1({},t),{},{scale:e})}),Oke=ve([dr,Sm,eP,rK],tP);ve((t,e,n)=>W$(t,n),Oke,(t,e)=>{if(!(t==null||e==null))return C1(C1({},t),{},{scale:e})});var Mke=ve([Yt,r$,s$],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),dK=t=>t.options.defaultTooltipEventType,hK=t=>t.options.validateTooltipEventTypes;function fK(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function oP(t,e){var n=dK(t),r=hK(t);return fK(e,n,r)}function Fke(t){return it(e=>oP(e,t))}var pK=(t,e)=>{var n,r=Number(e);if(!(Xi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Lke=t=>t.tooltip.settings,Qc={active:!1,index:null,dataKey:void 0,coordinate:void 0},Vke={itemInteraction:{click:Qc,hover:Qc},axisInteraction:{click:Qc,hover:Qc},keyboardInteraction:Qc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},mK=Zi({name:"tooltip",initialState:Vke,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Gl(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Bke,removeTooltipEntrySettings:zke,setTooltipSettingsState:Uke,setActiveMouseOverItemIndex:gK,mouseLeaveItem:Wke,mouseLeaveChart:yK,setActiveClickItemIndex:Gke,setMouseOverAxisIndex:xK,setMouseClickAxisIndex:Hke,setSyncInteraction:E_,setKeyboardInteraction:T_}=mK.actions,qke=mK.reducer;function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){Kke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kke(t,e,n){return(e=Xke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xke(t){var e=Yke(t,"string");return typeof e=="symbol"?e:e+""}function Yke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qke(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Jke(t){return t.index!=null}var vK=(t,e,n,r)=>{if(e==null)return Qc;var s=Qke(t,e,n);if(s==null)return Qc;if(s.active)return s;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var i=t.settings.active===!0;if(Jke(s)){if(i)return Lb(Lb({},s),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Lb(Lb({},Qc),{},{coordinate:s.coordinate})},lP=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!Qi(r))return n;var s=0,i=1/0;return e.length>0&&(i=e.length-1),String(Math.max(s,Math.min(r,i)))},bK=(t,e,n,r,s,i,a,o)=>{if(!(i==null||o==null)){var l=a[0],c=l==null?void 0:o(l.positions,i);if(c!=null)return c;var u=s?.[Number(i)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},wK=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var s;return n==="hover"?s=t.itemInteraction.hover.dataKey:s=t.itemInteraction.click.dataKey,s==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(i=>{var a;return((a=i.settings)===null||a===void 0?void 0:a.dataKey)===s})},_x=t=>t.options.tooltipPayloadSearcher,Cm=t=>t.tooltip;function MB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function FB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MB(Object(n),!0).forEach(function(r){Zke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zke(t,e,n){return(e=eSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eSe(t){var e=tSe(t,"string");return typeof e=="symbol"?e:e+""}function tSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nSe(t,e){return t??e}var kK=(t,e,n,r,s,i,a)=>{if(!(e==null||i==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,d=[];return t.reduce((p,g)=>{var y,{dataDefinedOnItem:x,settings:v}=g,w=nSe(x,o),k=Array.isArray(w)?fH(w,c,u):w,S=(y=v?.dataKey)!==null&&y!==void 0?y:r?.dataKey,I=v?.nameKey,E;if(r!=null&&r.dataKey&&Array.isArray(k)&&!Array.isArray(k[0])&&a==="axis"?E=l9(k,r.dataKey,s):E=i(k,e,l,I),Array.isArray(E))E.forEach(A=>{var T=FB(FB({},v),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});p.push(yV({tooltipEntrySettings:T,dataKey:A.dataKey,payload:A.payload,value:bn(A.payload,A.dataKey),name:A.name}))});else{var j;p.push(yV({tooltipEntrySettings:v,dataKey:S,payload:E,value:bn(E,S),name:(j=bn(E,I))!==null&&j!==void 0?j:v?.name}))}return p},d)}},cP=ve([Lr,Yt,Lq,M$,Fr],tK),rSe=ve([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),sSe=ve([Fr,wm],G$),Ax=ve([rSe,Lr,sSe],H$),iSe=ve([Ax],t=>t.filter(vS)),aSe=ve([Ax],q$),Im=ve([aSe,zu],K$),oSe=ve([iSe,zu,Lr],Fq),uP=ve([Im,Lr,Ax],Y$),lSe=ve([Lr],Q$),cSe=ve([Ax],t=>t.filter(vS)),uSe=ve([oSe,cSe,Nx],Wq),dSe=ve([uSe,zu,Fr],Gq),hSe=ve([Ax],Bq),fSe=ve([Im,Lr,hSe,kS,Fr],Hq),pSe=ve([Kq,Fr,wm],km),mSe=ve([pSe,Fr],Qq),gSe=ve([Xq,Fr,wm],km),ySe=ve([gSe,Fr],Jq),xSe=ve([Yq,Fr,wm],km),vSe=ve([xSe,Fr],Zq),bSe=ve([mSe,vSe,ySe],I1),wSe=ve([Lr,lSe,dSe,fSe,bSe,Yt,Fr],J$),SK=ve([Lr,Yt,Im,uP,Nx,Fr,wSe],Z$),kSe=ve([SK,Lr,cP],nP),SSe=ve([Lr,SK,kSe,Fr],sP),NK=t=>{var e=Fr(t),n=wm(t),r=!1;return Tx(t,e,n,r)},CK=ve([Lr,NK],yS),IK=ve([Lr,cP,SSe,CK],tP),NSe=ve([Yt,uP,Lr,Fr],lK),CSe=ve([Yt,uP,Lr,Fr],cK),ISe=(t,e,n,r,s,i,a,o)=>{if(e){var{type:l}=e,c=Lu(t,o);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,d=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return d=o==="angleAxis"&&s!=null&&s?.length>=2?es(s[0]-s[1])*2*d:d,c&&a?a.map((p,g)=>({coordinate:r(p)+d,value:p,index:g,offset:d})):r.domain().map((p,g)=>({coordinate:r(p)+d,value:i?i[p]:p,index:g,offset:d}))}}},gc=ve([Yt,Lr,cP,IK,NK,NSe,CSe,Fr],ISe),dP=ve([dK,hK,Lke],(t,e,n)=>fK(n.shared,t,e)),EK=t=>t.tooltip.settings.trigger,hP=t=>t.tooltip.settings.defaultIndex,CS=ve([Cm,dP,EK,hP],vK),Eu=ve([CS,Im],lP),TK=ve([gc,Eu],pK),_K=ve([CS],t=>{if(t)return t.dataKey}),AK=ve([Cm,dP,EK,hP],wK),ESe=ve([hc,fc,Yt,Or,gc,hP,AK,_x],bK),TSe=ve([CS,ESe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),_Se=ve([CS],t=>t.active),ASe=ve([AK,Eu,zu,Lr,TK,_x,dP],kK),RSe=ve([ASe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function VB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){$Se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Se(t,e,n){return(e=PSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PSe(t){var e=jSe(t,"string");return typeof e=="symbol"?e:e+""}function jSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DSe=()=>it(Lr),OSe=()=>{var t=DSe(),e=it(gc),n=it(IK);return Fy(VB(VB({},t),{},{scale:n}),e)},MSe=()=>it(M$),fP=(t,e)=>e,RK=(t,e,n)=>n,pP=(t,e,n,r)=>r,FSe=ve(gc,t=>Zk(t,e=>e.coordinate)),mP=ve([Cm,fP,RK,pP],vK),$K=ve([mP,Im],lP),LSe=(t,e,n)=>{if(e!=null){var r=Cm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},PK=ve([Cm,fP,RK,pP],wK),E1=ve([hc,fc,Yt,Or,gc,pP,PK,_x],bK),VSe=ve([mP,E1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),jK=ve(gc,$K,pK),BSe=ve([PK,$K,zu,Lr,jK,_x,fP],kK),zSe=ve([mP],t=>({isActive:t.active,activeIndex:t.index})),USe=(t,e,n,r,s,i,a,o)=>{if(!(!t||!e||!r||!s||!i)){var l=uve(t.chartX,t.chartY,e,n,o);if(l){var c=hve(l,e),u=Qxe(c,a,i,r,s),d=dve(e,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}};function __(){return __=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},__.apply(null,arguments)}function BB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(n),!0).forEach(function(r){WSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WSe(t,e,n){return(e=GSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GSe(t){var e=HSe(t,"string");return typeof e=="symbol"?e:e+""}function HSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qSe(t){var{coordinate:e,payload:n,index:r,offset:s,tooltipAxisBandSize:i,layout:a,cursor:o,tooltipEventType:l,chartName:c}=t,u=e,d=n,p=r;if(!o||!u||c!=="ScatterChart"&&l!=="axis")return null;var g,y;if(c==="ScatterChart")g=u,y=c0e;else if(c==="BarChart")g=u0e(a,u,s,i),y=RH;else if(a==="radial"){var{cx:x,cy:v,radius:w,startAngle:k,endAngle:S}=$H(u);g={cx:x,cy:v,startAngle:k,endAngle:S,innerRadius:w,outerRadius:w},y=jH}else g={points:K0e(a,u,s)},y=c$;var I=typeof o=="object"&&"className"in o?o.className:void 0,E=Vb(Vb(Vb(Vb({stroke:"#ccc",pointerEvents:"none"},s),g),Bn(o,!1)),{},{payload:d,payloadIndex:p,className:Bt("recharts-tooltip-cursor",I)});return _.isValidElement(o)?_.cloneElement(o,E):_.createElement(y,E)}function KSe(t){var e=OSe(),n=bH(),r=lS(),s=MSe();return _.createElement(qSe,__({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:s}))}var DK=_.createContext(null),XSe=()=>_.useContext(DK),CE={exports:{}},zB;function YSe(){return zB||(zB=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new s(u,d||l,p),y=n?n+c:c;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var p=0,g=d.length,y=new Array(g);p<g;p++)y[p]=d[p].fn;return y},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,p,g,y){var x=n?n+c:c;if(!this._events[x])return!1;var v=this._events[x],w=arguments.length,k,S;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),w){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,p),!0;case 5:return v.fn.call(v.context,u,d,p,g),!0;case 6:return v.fn.call(v.context,u,d,p,g,y),!0}for(S=1,k=new Array(w-1);S<w;S++)k[S-1]=arguments[S];v.fn.apply(v.context,k)}else{var I=v.length,E;for(S=0;S<I;S++)switch(v[S].once&&this.removeListener(c,v[S].fn,void 0,!0),w){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,u);break;case 3:v[S].fn.call(v[S].context,u,d);break;case 4:v[S].fn.call(v[S].context,u,d,p);break;default:if(!k)for(E=1,k=new Array(w-1);E<w;E++)k[E-1]=arguments[E];v[S].fn.apply(v[S].context,k)}}return!0},o.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,p){var g=n?n+c:c;if(!this._events[g])return this;if(!u)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===u&&(!p||y.once)&&(!d||y.context===d)&&a(this,g);else{for(var x=0,v=[],w=y.length;x<w;x++)(y[x].fn!==u||p&&!y[x].once||d&&y[x].context!==d)&&v.push(y[x]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(CE)),CE.exports}var QSe=YSe();const JSe=Ra(QSe);var Hy=new JSe,A_="recharts.syncEvent.tooltip",UB="recharts.syncEvent.brush";function gP(t,e){if(e){var n=Number.parseInt(e,10);if(!Xi(n))return t?.[n]}}var ZSe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},OK=Zi({name:"options",initialState:ZSe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eNe=OK.reducer,{createEventEmitter:tNe}=OK.actions;function nNe(t){return t.tooltip.syncInteraction}var rNe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},MK=Zi({name:"chartData",initialState:rNe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:WB,setDataStartEndIndexes:sNe,setComputedData:iet}=MK.actions,iNe=MK.reducer,FK=()=>{};function aNe(){var t=it(F$),e=it(L$),n=Xn(),r=it($q),s=it(gc),i=lS(),a=i$(),o=it(l=>l.rootProps.className);_.useEffect(()=>{if(t==null)return FK;var l=(c,u,d)=>{if(e!==d&&t===c){if(r==="index"){n(u);return}if(s!=null){var p;if(typeof r=="function"){var g={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},y=r(s,g);p=s[y]}else r==="value"&&(p=s.find(j=>String(j.value)===u.payload.label));var{coordinate:x}=u.payload;if(p==null||u.payload.active===!1||x==null||a==null){n(E_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y:w}=x,k=Math.min(v,a.x+a.width),S=Math.min(w,a.y+a.height),I={x:i==="horizontal"?p.coordinate:k,y:i==="horizontal"?S:p.coordinate},E=E_({active:u.payload.active,coordinate:I,dataKey:u.payload.dataKey,index:String(p.index),label:u.payload.label});n(E)}}};return Hy.on(A_,l),()=>{Hy.off(A_,l)}},[o,n,e,t,r,s,i,a])}function oNe(){var t=it(F$),e=it(L$),n=Xn();_.useEffect(()=>{if(t==null)return FK;var r=(s,i,a)=>{e!==a&&t===s&&n(sNe(i))};return Hy.on(UB,r),()=>{Hy.off(UB,r)}},[n,e,t])}function lNe(){var t=Xn();_.useEffect(()=>{t(tNe())},[t]),aNe(),oNe()}function cNe(t,e,n,r,s,i){var a=it(p=>LSe(p,t,e)),o=it(L$),l=it(F$),c=it($q),u=it(nNe),d=u?.active;_.useEffect(()=>{if(!d&&l!=null&&o!=null){var p=E_({active:i,coordinate:n,dataKey:a,index:s,label:typeof r=="number"?String(r):r});Hy.emit(A_,l,p,o)}},[d,n,a,s,r,o,l,c,i])}function GB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(n),!0).forEach(function(r){uNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uNe(t,e,n){return(e=dNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dNe(t){var e=hNe(t,"string");return typeof e=="symbol"?e:e+""}function hNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fNe(t){return t.dataKey}function pNe(t,e){return _.isValidElement(t)?_.cloneElement(t,e):typeof t=="function"?_.createElement(t,e):_.createElement(Bve,e)}var qB=[],mNe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Kh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function oh(t){var e=ea(t,mNe),{active:n,allowEscapeViewBox:r,animationDuration:s,animationEasing:i,content:a,filterNull:o,isAnimationActive:l,offset:c,payloadUniqBy:u,position:d,reverseDirection:p,useTranslate3d:g,wrapperStyle:y,cursor:x,shared:v,trigger:w,defaultIndex:k,portal:S,axisId:I}=e,E=Xn(),j=typeof k=="number"?String(k):k;_.useEffect(()=>{E(Uke({shared:v,trigger:w,axisId:I,active:n,defaultIndex:j}))},[E,v,w,I,n,j]);var A=i$(),T=NH(),$=Fke(v),{activeIndex:D,isActive:R}=it(xe=>zSe(xe,$,w,j)),F=it(xe=>BSe(xe,$,w,j)),L=it(xe=>jK(xe,$,w,j)),K=it(xe=>VSe(xe,$,w,j)),X=F,q=XSe(),Q=n??R,[z,H]=B9([X,Q]),ee=$==="axis"?L:void 0;cNe($,w,K,ee,D,Q);var G=S??q;if(G==null)return null;var Y=X??qB;Q||(Y=qB),o&&Y.length&&(Y=O9(X.filter(xe=>xe.value!=null&&(xe.hide!==!0||e.includeHidden)),u,fNe));var ae=Y.length>0,ye=_.createElement(Kve,{allowEscapeViewBox:r,animationDuration:s,animationEasing:i,isAnimationActive:l,active:Q,coordinate:K,hasPayload:ae,offset:c,position:d,reverseDirection:p,useTranslate3d:g,viewBox:A,wrapperStyle:y,lastBoundingBox:z,innerRef:H,hasPortalFromProps:!!S},pNe(a,HB(HB({},e),{},{payload:Y,label:ee,active:Q,coordinate:K,accessibilityLayer:T})));return _.createElement(_.Fragment,null,Vh.createPortal(ye,G),Q&&_.createElement(KSe,{cursor:x,tooltipEventType:$,coordinate:K,payload:X,index:D}))}var IE={},EE={},TE={},KB;function gNe(){return KB||(KB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:s,edges:i}={}){let a,o=null;const l=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},d=()=>{c&&u(),x()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,d()},r)},y=()=>{p!==null&&(clearTimeout(p),p=null)},x=()=>{y(),a=void 0,o=null},v=()=>{u()},w=function(...k){if(s?.aborted)return;a=this,o=k;const S=p==null;g(),l&&S&&u()};return w.schedule=g,w.cancel=x,w.flush=v,s?.addEventListener("abort",x,{once:!0}),w}t.debounce=e})(TE)),TE}var XB;function yNe(){return XB||(XB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gNe();function n(r,s=0,i={}){typeof i!="object"&&(i={});const{leading:a=!1,trailing:o=!0,maxWait:l}=i,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,d=null;const p=e.debounce(function(...x){u=r.apply(this,x),d=null},s,{edges:c}),g=function(...x){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(u=r.apply(this,x),d=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,x),u)},y=()=>(p.flush(),u);return g.cancel=p.cancel,g.flush=y,g}t.debounce=n})(EE)),EE}var YB;function xNe(){return YB||(YB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yNe();function n(r,s=0,i={}){const{leading:a=!0,trailing:o=!0}=i;return e.debounce(r,s,{leading:a,maxWait:s,trailing:o})}t.throttle=n})(IE)),IE}var _E,QB;function vNe(){return QB||(QB=1,_E=xNe().throttle),_E}var bNe=vNe();const wNe=Ra(bNe);var dy=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i]};function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){kNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kNe(t,e,n){return(e=SNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SNe(t){var e=NNe(t,"string");return typeof e=="symbol"?e:e+""}function NNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lh=_.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:d,className:p,onResize:g,style:y={}}=t,x=_.useRef(null),v=_.useRef();v.current=g,_.useImperativeHandle(e,()=>x.current);var[w,k]=_.useState({containerWidth:r.width,containerHeight:r.height}),S=_.useCallback((E,j)=>{k(A=>{var T=Math.round(E),$=Math.round(j);return A.containerWidth===T&&A.containerHeight===$?A:{containerWidth:T,containerHeight:$}})},[]);_.useEffect(()=>{var E=$=>{var D,{width:R,height:F}=$[0].contentRect;S(R,F),(D=v.current)===null||D===void 0||D.call(v,R,F)};u>0&&(E=wNe(E,u,{trailing:!0,leading:!1}));var j=new ResizeObserver(E),{width:A,height:T}=x.current.getBoundingClientRect();return S(A,T),j.observe(x.current),()=>{j.disconnect()}},[S,u]);var I=_.useMemo(()=>{var{containerWidth:E,containerHeight:j}=w;if(E<0||j<0)return null;dy(Gd(s)||Gd(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),dy(!n||n>0,"The aspect(%s) must be greater than zero.",n);var A=Gd(s)?E:s,T=Gd(i)?j:i;return n&&n>0&&(A?T=A/n:T&&(A=T*n),l&&T>l&&(T=l)),dy(A>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,T,s,i,a,o,n),_.Children.map(c,$=>_.cloneElement($,{width:A,height:T,style:AE({width:A,height:T},$.props.style)}))},[n,c,i,l,o,a,w,s]);return _.createElement("div",{id:d?"".concat(d):void 0,className:Bt("recharts-responsive-container",p),style:AE(AE({},y),{},{width:s,height:i,minWidth:a,minHeight:o,maxHeight:l}),ref:x},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},I))}),Rx=t=>null;Rx.displayName="Cell";function CNe(t,e,n){return(e=INe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function INe(t){var e=ENe(t,"string");return typeof e=="symbol"?e:e+""}function ENe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class TNe{constructor(e){CNe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ZB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZB(Object(n),!0).forEach(function(r){ANe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ANe(t,e,n){return(e=RNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RNe(t){var e=$Ne(t,"string");return typeof e=="symbol"?e:e+""}function $Ne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PNe={cacheSize:2e3,enableCache:!0},LK=_Ne({},PNe),ez=new TNe(LK.cacheSize),jNe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tz="recharts_measurement_span";function DNe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",s=e.fontWeight||"",i=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(s,"|").concat(i,"|").concat(a,"|").concat(o)}var nz=(t,e)=>{try{var n=document.getElementById(tz);n||(n=document.createElement("span"),n.setAttribute("id",tz),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,jNe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},hy=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Kh.isSsr)return{width:0,height:0};if(!LK.enableCache)return nz(e,n);var r=DNe(e,n),s=ez.get(r);if(s)return s;var i=nz(e,n);return ez.set(r,i),i},rz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ONe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FNe=Object.keys(VK),dp="NaN";function LNe(t,e){return t*VK[e]}class gi{static parse(e){var n,[,r,s]=(n=MNe.exec(e))!==null&&n!==void 0?n:[];return new gi(parseFloat(r),s??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Xi(e)&&(this.unit=""),n!==""&&!ONe.test(n)&&(this.num=NaN,this.unit=""),FNe.includes(n)&&(this.num=LNe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new gi(NaN,""):new gi(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new gi(NaN,""):new gi(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new gi(NaN,""):new gi(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new gi(NaN,""):new gi(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Xi(this.num)}}function BK(t){if(t.includes(dp))return dp;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,s,i]=(n=rz.exec(e))!==null&&n!==void 0?n:[],a=gi.parse(r??""),o=gi.parse(i??""),l=s==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return dp;e=e.replace(rz,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,d,p]=(c=sz.exec(e))!==null&&c!==void 0?c:[],g=gi.parse(u??""),y=gi.parse(p??""),x=d==="+"?g.add(y):g.subtract(y);if(x.isNaN())return dp;e=e.replace(sz,x.toString())}return e}var iz=/\(([^()]*)\)/;function VNe(t){for(var e=t,n;(n=iz.exec(e))!=null;){var[,r]=n;e=e.replace(iz,BK(r))}return e}function BNe(t){var e=t.replace(/\s+/g,"");return e=VNe(e),e=BK(e),e}function zNe(t){try{return BNe(t)}catch{return dp}}function RE(t){var e=zNe(t.slice(5,-1));return e===dp?"":e}var UNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],WNe=["dx","dy","angle","className","breakAll"];function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R_.apply(null,arguments)}function az(t,e){if(t==null)return{};var n,r,s=GNe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function GNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zK=/[ \f\n\r\t\v\u2028\u2029]+/,UK=t=>{var{children:e,breakAll:n,style:r}=t;try{var s=[];Dn(e)||(n?s=e.toString().split(""):s=e.toString().split(zK));var i=s.map(o=>({word:o,width:hy(o,r).width})),a=n?0:hy("",r).width;return{wordsWithComputedWidth:i,spaceWidth:a}}catch{return null}},HNe=(t,e,n,r,s)=>{var{maxLines:i,children:a,style:o,breakAll:l}=t,c=qe(i),u=a,d=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce((F,L)=>{var{word:K,width:X}=L,q=F[F.length-1];if(q&&(r==null||s||q.width+X+n<Number(r)))q.words.push(K),q.width+=X+n;else{var Q={words:[K],width:X};F.push(Q)}return F},[])},p=d(e),g=D=>D.reduce((R,F)=>R.width>F.width?R:F);if(!c||s)return p;var y=p.length>i||g(p).width>Number(r);if(!y)return p;for(var x="",v=D=>{var R=u.slice(0,D),F=UK({breakAll:l,style:o,children:R+x}).wordsWithComputedWidth,L=d(F),K=L.length>i||g(L).width>Number(r);return[K,L]},w=0,k=u.length-1,S=0,I;w<=k&&S<=u.length-1;){var E=Math.floor((w+k)/2),j=E-1,[A,T]=v(j),[$]=v(E);if(!A&&!$&&(w=E+1),A&&$&&(k=E-1),!A&&$){I=T;break}S++}return I||p},oz=t=>{var e=Dn(t)?[]:t.toString().split(zK);return[{words:e}]},qNe=t=>{var{width:e,scaleToFit:n,children:r,style:s,breakAll:i,maxLines:a}=t;if((e||n)&&!Kh.isSsr){var o,l,c=UK({breakAll:i,children:r,style:s});if(c){var{wordsWithComputedWidth:u,spaceWidth:d}=c;o=u,l=d}else return oz(r);return HNe({breakAll:i,children:r,maxLines:a,style:s},o,l,e,n)}return oz(r)},lz="#808080",IS=_.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:c=lz}=t,u=az(t,UNe),d=_.useMemo(()=>qNe({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:a,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,a,u.style,u.width]),{dx:p,dy:g,angle:y,className:x,breakAll:v}=u,w=az(u,WNe);if(!cl(n)||!cl(r))return null;var k=n+(qe(p)?p:0),S=r+(qe(g)?g:0),I;switch(l){case"start":I=RE("calc(".concat(i,")"));break;case"middle":I=RE("calc(".concat((d.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:I=RE("calc(".concat(d.length-1," * -").concat(s,")"));break}var E=[];if(a){var j=d[0].width,{width:A}=u;E.push("scale(".concat(qe(A)?A/j:1,")"))}return y&&E.push("rotate(".concat(y,", ").concat(k,", ").concat(S,")")),E.length&&(w.transform=E.join(" ")),_.createElement("text",R_({},Bn(w,!0),{ref:e,x:k,y:S,className:Bt("recharts-text",x),textAnchor:o,fill:c.includes("url")?lz:c}),d.map((T,$)=>{var D=T.words.join(v?"":" ");return _.createElement("tspan",{x:k,dy:$===0?I:s,key:"".concat(D,"-").concat($)},D)}))});IS.displayName="Text";var KNe=["offset"],XNe=["labelRef"];function cz(t,e){if(t==null)return{};var n,r,s=YNe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function YNe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uz(Object(n),!0).forEach(function(r){QNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QNe(t,e,n){return(e=JNe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JNe(t){var e=ZNe(t,"string");return typeof e=="symbol"?e:e+""}function ZNe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fl.apply(null,arguments)}var e2e=t=>{var{value:e,formatter:n}=t,r=Dn(t.children)?e:t.children;return typeof n=="function"?n(r):r},yP=t=>t!=null&&typeof t=="function",t2e=(t,e)=>{var n=es(e-t),r=Math.min(Math.abs(e-t),360);return n*r},n2e=(t,e,n,r)=>{var{position:s,offset:i,className:a}=t,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:d,endAngle:p,clockWise:g}=r,y=(c+u)/2,x=t2e(d,p),v=x>=0?1:-1,w,k;s==="insideStart"?(w=d+v*i,k=g):s==="insideEnd"?(w=p-v*i,k=!g):s==="end"&&(w=p+v*i,k=g),k=x<=0?k:!k;var S=xr(o,l,y,w),I=xr(o,l,y,w+(k?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(k?0:1,`,
    `).concat(I.x,",").concat(I.y),j=Dn(t.id)?Dy("recharts-radial-line-"):t.id;return _.createElement("text",Fl({},n,{dominantBaseline:"central",className:Bt("recharts-radial-bar-label",a)}),_.createElement("defs",null,_.createElement("path",{id:j,d:E})),_.createElement("textPath",{xlinkHref:"#".concat(j)},e))},r2e=(t,e,n)=>{var{cx:r,cy:s,innerRadius:i,outerRadius:a,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:u,y:d}=xr(r,s,a+e,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:s,textAnchor:"middle",verticalAnchor:"end"};var p=(i+a)/2,{x:g,y}=xr(r,s,p,c);return{x:g,y,textAnchor:"middle",verticalAnchor:"middle"}},s2e=(t,e)=>{var{parentViewBox:n,offset:r,position:s}=t,{x:i,y:a,width:o,height:l}=e,c=l>=0?1:-1,u=c*r,d=c>0?"end":"start",p=c>0?"start":"end",g=o>=0?1:-1,y=g*r,x=g>0?"end":"start",v=g>0?"start":"end";if(s==="top"){var w={x:i+o/2,y:a-c*r,textAnchor:"middle",verticalAnchor:d};return Qn(Qn({},w),n?{height:Math.max(a-n.y,0),width:o}:{})}if(s==="bottom"){var k={x:i+o/2,y:a+l+u,textAnchor:"middle",verticalAnchor:p};return Qn(Qn({},k),n?{height:Math.max(n.y+n.height-(a+l),0),width:o}:{})}if(s==="left"){var S={x:i-y,y:a+l/2,textAnchor:x,verticalAnchor:"middle"};return Qn(Qn({},S),n?{width:Math.max(S.x-n.x,0),height:l}:{})}if(s==="right"){var I={x:i+o+y,y:a+l/2,textAnchor:v,verticalAnchor:"middle"};return Qn(Qn({},I),n?{width:Math.max(n.x+n.width-I.x,0),height:l}:{})}var E=n?{width:o,height:l}:{};return s==="insideLeft"?Qn({x:i+y,y:a+l/2,textAnchor:v,verticalAnchor:"middle"},E):s==="insideRight"?Qn({x:i+o-y,y:a+l/2,textAnchor:x,verticalAnchor:"middle"},E):s==="insideTop"?Qn({x:i+o/2,y:a+u,textAnchor:"middle",verticalAnchor:p},E):s==="insideBottom"?Qn({x:i+o/2,y:a+l-u,textAnchor:"middle",verticalAnchor:d},E):s==="insideTopLeft"?Qn({x:i+y,y:a+u,textAnchor:v,verticalAnchor:p},E):s==="insideTopRight"?Qn({x:i+o-y,y:a+u,textAnchor:x,verticalAnchor:p},E):s==="insideBottomLeft"?Qn({x:i+y,y:a+l-u,textAnchor:v,verticalAnchor:d},E):s==="insideBottomRight"?Qn({x:i+o-y,y:a+l-u,textAnchor:x,verticalAnchor:d},E):s&&typeof s=="object"&&(qe(s.x)||Gd(s.x))&&(qe(s.y)||Gd(s.y))?Qn({x:i+Qs(s.x,o),y:a+Qs(s.y,l),textAnchor:"end",verticalAnchor:"end"},E):Qn({x:i+o/2,y:a+l/2,textAnchor:"middle",verticalAnchor:"middle"},E)},i2e=t=>"cx"in t&&qe(t.cx);function Fi(t){var{offset:e=5}=t,n=cz(t,KNe),r=Qn({offset:e},n),{viewBox:s,position:i,value:a,children:o,content:l,className:c="",textBreakAll:u,labelRef:d}=r,p=it(Mq),g=i$(),y=i==="center"?g:p??g,x=s||y;if(!x||Dn(a)&&Dn(o)&&!_.isValidElement(l)&&typeof l!="function")return null;var v=Qn(Qn({},r),{},{viewBox:x});if(_.isValidElement(l)){var{labelRef:w}=v,k=cz(v,XNe);return _.cloneElement(l,k)}var S;if(typeof l=="function"){if(S=_.createElement(l,v),_.isValidElement(S))return S}else S=e2e(r);var I=i2e(x),E=Bn(r,!0);if(I&&(i==="insideStart"||i==="insideEnd"||i==="end"))return n2e(r,S,E,x);var j=I?r2e(x,r.offset,r.position):s2e(r,x);return _.createElement(IS,Fl({ref:d,className:Bt("recharts-label",c)},E,j,{breakAll:u}),S)}Fi.displayName="Label";var WK=t=>{var{cx:e,cy:n,angle:r,startAngle:s,endAngle:i,r:a,radius:o,innerRadius:l,outerRadius:c,x:u,y:d,top:p,left:g,width:y,height:x,clockWise:v,labelViewBox:w}=t;if(w)return w;if(qe(y)&&qe(x)){if(qe(u)&&qe(d))return{x:u,y:d,width:y,height:x};if(qe(p)&&qe(g))return{x:p,y:g,width:y,height:x}}if(qe(u)&&qe(d))return{x:u,y:d,width:0,height:0};if(qe(e)&&qe(n))return{cx:e,cy:n,startAngle:s||r||0,endAngle:i||r||0,innerRadius:l||0,outerRadius:c||o||a||0,clockWise:v};if(t.viewBox)return t.viewBox},a2e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?_.createElement(Fi,Fl({key:"label-implicit"},r)):cl(t)?_.createElement(Fi,Fl({key:"label-implicit",value:t},r)):_.isValidElement(t)?t.type===Fi?_.cloneElement(t,Qn({key:"label-implicit"},r)):_.createElement(Fi,Fl({key:"label-implicit",content:t},r)):yP(t)?_.createElement(Fi,Fl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?_.createElement(Fi,Fl({},t,{key:"label-implicit"},r)):null},o2e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:s,labelRef:i}=e,a=WK(e),o=yx(s,Fi).map((c,u)=>_.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)}));if(!r)return o;var l=a2e(e.label,n||a,i);return[l,...o]};Fi.parseViewBox=WK;Fi.renderCallByParent=o2e;var $E={},PE={},dz;function l2e(){return dz||(dz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(PE)),PE}var jE={},hz;function c2e(){return hz||(hz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(jE)),jE}var fz;function u2e(){return fz||(fz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l2e(),n=c2e(),r=HR();function s(i){if(r.isArrayLike(i))return e.last(n.toArray(i))}t.last=s})($E)),$E}var DE,pz;function d2e(){return pz||(pz=1,DE=u2e().last),DE}var h2e=d2e();const f2e=Ra(h2e);var p2e=["valueAccessor"],m2e=["data","dataKey","clockWise","id","textBreakAll"];function T1(){return T1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T1.apply(null,arguments)}function mz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mz(Object(n),!0).forEach(function(r){g2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g2e(t,e,n){return(e=y2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y2e(t){var e=x2e(t,"string");return typeof e=="symbol"?e:e+""}function x2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yz(t,e){if(t==null)return{};var n,r,s=v2e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function v2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var b2e=t=>Array.isArray(t.value)?f2e(t.value):t.value;function lu(t){var{valueAccessor:e=b2e}=t,n=yz(t,p2e),{data:r,dataKey:s,clockWise:i,id:a,textBreakAll:o}=n,l=yz(n,m2e);return!r||!r.length?null:_.createElement(Fs,{className:"recharts-label-list"},r.map((c,u)=>{var d=Dn(s)?e(c,u):bn(c&&c.payload,s),p=Dn(a)?{}:{id:"".concat(a,"-").concat(u)};return _.createElement(Fi,T1({},Bn(c,!0),l,p,{parentViewBox:c.parentViewBox,value:d,textBreakAll:o,viewBox:Fi.parseViewBox(Dn(i)?c:gz(gz({},c),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}lu.displayName="LabelList";function w2e(t,e){return t?t===!0?_.createElement(lu,{key:"labelList-implicit",data:e}):_.isValidElement(t)||yP(t)?_.createElement(lu,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?_.createElement(lu,T1({data:e},t,{key:"labelList-implicit"})):null:null}function k2e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:r}=t,s=yx(r,lu).map((a,o)=>_.cloneElement(a,{data:e,key:"labelList-".concat(o)}));if(!n)return s;var i=w2e(t.label,e);return[i,...s]}lu.renderCallByParent=k2e;function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(null,arguments)}var GK=t=>{var{cx:e,cy:n,r,className:s}=t,i=Bt("recharts-dot",s);return e===+e&&n===+n&&r===+r?_.createElement("circle",$_({},dc(t),FR(t),{className:i,cx:e,cy:n,r})):null},HK=t=>t.graphicalItems.polarItems,S2e=ve([Wn,Cx],G$),xP=ve([HK,dr,S2e],H$),N2e=ve([xP],q$),vP=ve([N2e,j$],K$),C2e=ve([vP,dr,xP],Y$),I2e=ve([vP,dr,xP],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(s=>{var i,a=bn(r,(i=e.dataKey)!==null&&i!==void 0?i:s.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(r=>({value:bn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]}))),xz=()=>{},E2e=ve([dr,eK,xz,I2e,xz,Yt,Wn],J$),qK=ve([dr,Yt,vP,C2e,Nx,Wn,E2e],Z$),T2e=ve([qK,dr,Sm],nP);ve([dr,qK,T2e,Wn],sP);var _2e={radiusAxis:{},angleAxis:{}},KK=Zi({name:"polarAxis",initialState:_2e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:aet,removeRadiusAxis:oet,addAngleAxis:cet,removeAngleAxis:uet}=KK.actions,A2e=KK.reducer;function vz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(n),!0).forEach(function(r){R2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R2e(t,e,n){return(e=$2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2e(t){var e=P2e(t,"string");return typeof e=="symbol"?e:e+""}function P2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j2e=(t,e)=>e,bP=ve([HK,j2e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),D2e=[],wP=(t,e,n)=>n?.length===0?D2e:n,XK=ve([j$,bP,wP],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var s;if(e?.data!=null&&e.data.length>0?s=e.data:s=r,(!s||!s.length)&&n!=null&&(s=n.map(i=>bz(bz({},e.presentationProps),i.props))),s!=null)return s}}),O2e=ve([XK,bP,wP],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,s)=>{var i,a=bn(r,e.nameKey,e.name),o;return n!=null&&(i=n[s])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=n[s].props.fill:typeof r=="object"&&r!=null&&"fill"in r?o=r.fill:o=e.fill,{value:ym(a,e.dataKey),color:o,payload:r,type:e.legendType}})}),M2e=ve([XK,bP,wP,Or],(t,e,n,r)=>{if(!(e==null||t==null))return ACe({offset:r,pieSettings:e,displayedData:t,cells:n})}),OE={},wz;function F2e(){return wz||(wz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(OE)),OE}var ME,kz;function L2e(){return kz||(kz=1,ME=F2e().isPlainObject),ME}var V2e=L2e();const B2e=Ra(V2e);function _1(){return _1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_1.apply(null,arguments)}var Sz=(t,e,n,r,s)=>{var i=n-r,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-i/2,",").concat(e+s),a+="L ".concat(t+n-i/2-r,",").concat(e+s),a+="L ".concat(t,",").concat(e," Z"),a},z2e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},U2e=t=>{var e=ea(t,z2e),n=_.useRef(),[r,s]=_.useState(-1);_.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&s(v)}catch{}},[]);var{x:i,y:a,upperWidth:o,lowerWidth:l,height:c,className:u}=e,{animationEasing:d,animationDuration:p,animationBegin:g,isUpdateAnimationActive:y}=e;if(i!==+i||a!==+a||o!==+o||l!==+l||c!==+c||o===0&&l===0||c===0)return null;var x=Bt("recharts-trapezoid",u);return y?_.createElement(f1,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:c,x:i,y:a},to:{upperWidth:o,lowerWidth:l,height:c,x:i,y:a},duration:p,animationEasing:d,isActive:y},v=>{var{upperWidth:w,lowerWidth:k,height:S,x:I,y:E}=v;return _.createElement(f1,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:d},_.createElement("path",_1({},Bn(e,!0),{className:x,d:Sz(I,E,w,k,S),ref:n})))}):_.createElement("g",null,_.createElement("path",_1({},Bn(e,!0),{className:x,d:Sz(i,a,o,l,c)})))},W2e=["option","shapeType","propTransformer","activeClassName","isActive"];function G2e(t,e){if(t==null)return{};var n,r,s=H2e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function H2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Nz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function A1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(n),!0).forEach(function(r){q2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function q2e(t,e,n){return(e=K2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K2e(t){var e=X2e(t,"string");return typeof e=="symbol"?e:e+""}function X2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y2e(t,e){return A1(A1({},e),t)}function Q2e(t,e){return t==="symbols"}function Cz(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return _.createElement(RH,n);case"trapezoid":return _.createElement(U2e,n);case"sector":return _.createElement(jH,n);case"symbols":if(Q2e(e))return _.createElement(UR,n);break;default:return null}}function J2e(t){return _.isValidElement(t)?t.props:t}function YK(t){var{option:e,shapeType:n,propTransformer:r=Y2e,activeClassName:s="recharts-active-shape",isActive:i}=t,a=G2e(t,W2e),o;if(_.isValidElement(e))o=_.cloneElement(e,A1(A1({},a),J2e(e)));else if(typeof e=="function")o=e(a);else if(B2e(e)&&typeof e!="boolean"){var l=r(e,a);o=_.createElement(Cz,{shapeType:n,elementProps:l})}else{var c=a;o=_.createElement(Cz,{shapeType:n,elementProps:c})}return i?_.createElement(Fs,{className:s},o):o}var kP=(t,e)=>{var n=Xn();return(r,s)=>i=>{t?.(r,s,i),n(gK({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},SP=t=>{var e=Xn();return(n,r)=>s=>{t?.(n,r,s),e(Wke())}},NP=(t,e)=>{var n=Xn();return(r,s)=>i=>{t?.(r,s,i),n(Gke({activeIndex:String(s),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function CP(t){var{fn:e,args:n}=t,r=Xn(),s=Ii();return _.useEffect(()=>{if(!s){var i=e(n);return r(Bke(i)),()=>{r(zke(i))}}},[e,n,r,s]),null}var QK=()=>{};function JK(t){var{legendPayload:e}=t,n=Xn(),r=Ii();return _.useEffect(()=>r?QK:(n(kH(e)),()=>{n(SH(e))}),[n,r,e]),null}function Z2e(t){var{legendPayload:e}=t,n=Xn(),r=it(Yt);return _.useEffect(()=>r!=="centric"&&r!=="radial"?QK:(n(kH(e)),()=>{n(SH(e))}),[n,r,e]),null}function IP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=_.useRef(Dy(e)),r=_.useRef(t);return r.current!==t&&(n.current=Dy(e),r.current=t),n.current}var FE,eCe=()=>{var[t]=_.useState(()=>Dy("uid-"));return t},tCe=(FE=TA.useId)!==null&&FE!==void 0?FE:eCe;function nCe(t,e){var n=tCe();return e||(t?"".concat(t,"-").concat(n):n)}var rCe=_.createContext(void 0),EP=t=>{var{id:e,type:n,children:r}=t,s=nCe("recharts-".concat(n),e);return _.createElement(rCe.Provider,{value:s},r(s))},sCe={cartesianItems:[],polarItems:[]},ZK=Zi({name:"graphicalItems",initialState:sCe,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,s=Gl(t).cartesianItems.indexOf(n);s>-1&&(t.cartesianItems[s]=r)},removeCartesianGraphicalItem(t,e){var n=Gl(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Gl(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:iCe,replaceCartesianGraphicalItem:aCe,removeCartesianGraphicalItem:oCe,addPolarGraphicalItem:lCe,removePolarGraphicalItem:cCe}=ZK.actions,uCe=ZK.reducer;function e7(t){var e=Xn(),n=_.useRef(null);return _.useEffect(()=>{n.current===null?e(iCe(t)):n.current!==t&&e(aCe({prev:n.current,next:t})),n.current=t},[e,t]),_.useEffect(()=>()=>{n.current&&(e(oCe(n.current)),n.current=null)},[e]),null}function dCe(t){var e=Xn();return _.useEffect(()=>(e(lCe(t)),()=>{e(cCe(t))}),[e,t]),null}function hCe(){}var fCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Iz={t:0},LE={t:1};function TP(t){var e=ea(t,fCe),{isActive:n,canBegin:r,duration:s,easing:i,begin:a,onAnimationEnd:o,onAnimationStart:l,children:c}=e,u=AH("JavascriptAnimate",e.animationManager),[d,p]=_.useState(n?Iz:LE),g=_.useRef(null);return _.useEffect(()=>{n||p(LE)},[n]),_.useEffect(()=>{if(!n||!r)return hCe;var y=_H(Iz,LE,EH(i),s,p,u.getTimeoutController()),x=()=>{g.current=y()};return u.start([l,a,x,s,o]),()=>{u.stop(),g.current&&g.current(),o()}},[n,r,s,i,a,l,o,u]),c(d.t)}var pCe=["onMouseEnter","onClick","onMouseLeave"],mCe=["id"],gCe=["id"];function _P(t,e){if(t==null)return{};var n,r,s=yCe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function yCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(n),!0).forEach(function(r){xCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ez(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xCe(t,e,n){return(e=vCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vCe(t){var e=bCe(t,"string");return typeof e=="symbol"?e:e+""}function bCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ic(){return ic=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ic.apply(null,arguments)}function wCe(t){var e=_.useMemo(()=>yx(t.children,Rx),[t.children]),n=it(r=>O2e(r,t.id,e));return n==null?null:_.createElement(Z2e,{legendPayload:n})}function kCe(t){var{dataKey:e,nameKey:n,sectors:r,stroke:s,strokeWidth:i,fill:a,name:o,hide:l,tooltipType:c}=t;return{dataDefinedOnItem:r?.map(u=>u.tooltipPayload),positions:r?.map(u=>u.tooltipPosition),settings:{stroke:s,strokeWidth:i,fill:a,dataKey:e,nameKey:n,name:ym(o,e),hide:l,type:c,color:a,unit:""}}}var SCe=(t,e)=>t>e?"start":t<e?"end":"middle",NCe=(t,e,n)=>typeof e=="function"?e(t):Qs(e,n,n*.8),CCe=(t,e,n)=>{var{top:r,left:s,width:i,height:a}=e,o=hH(i,a),l=s+Qs(t.cx,i,i/2),c=r+Qs(t.cy,a,a/2),u=Qs(t.innerRadius,o,0),d=NCe(n,t.outerRadius,o),p=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:p}},ICe=(t,e)=>{var n=es(e-t),r=Math.min(Math.abs(e-t),360);return n*r},ECe=(t,e)=>{if(_.isValidElement(t))return _.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Bt("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return _.createElement(c$,ic({},e,{type:"linear",className:n}))},TCe=(t,e,n)=>{if(_.isValidElement(t))return _.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),_.isValidElement(r)))return r;var s=Bt("recharts-pie-label-text",typeof t!="boolean"&&typeof t!="function"?t.className:"");return _.createElement(IS,ic({},e,{alignmentBaseline:"middle",className:s}),r)};function _Ce(t){var{sectors:e,props:n,showLabels:r}=t,{label:s,labelLine:i,dataKey:a}=n;if(!r||!s||!e)return null;var o=dc(n),l=Bn(s,!1),c=Bn(i,!1),u=typeof s=="object"&&"offsetRadius"in s&&s.offsetRadius||20,d=e.map((p,g)=>{var y=(p.startAngle+p.endAngle)/2,x=xr(p.cx,p.cy,p.outerRadius+u,y),v=Jn(Jn(Jn(Jn({},o),p),{},{stroke:"none"},l),{},{index:g,textAnchor:SCe(x.x,p.cx)},x),w=Jn(Jn(Jn(Jn({},o),p),{},{fill:"none",stroke:p.fill},c),{},{index:g,points:[xr(p.cx,p.cy,p.outerRadius,y),x],key:"line"});return _.createElement(Fs,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},i&&ECe(i,w),TCe(s,v,bn(p,a)))});return _.createElement(Fs,{className:"recharts-pie-labels"},d)}function t7(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:s,showLabels:i}=t,a=it(Eu),{onMouseEnter:o,onClick:l,onMouseLeave:c}=s,u=_P(s,pCe),d=kP(o,s.dataKey),p=SP(c),g=NP(l,s.dataKey);return e==null?null:_.createElement(_.Fragment,null,e.map((y,x)=>{if(y?.startAngle===0&&y?.endAngle===0&&e.length!==1)return null;var v=n&&String(x)===a,w=a?r:null,k=v?n:w,S=Jn(Jn({},y),{},{stroke:y.stroke,tabIndex:-1,[yH]:x,[xH]:s.dataKey});return _.createElement(Fs,ic({tabIndex:-1,className:"recharts-pie-sector"},gx(u,y,x),{onMouseEnter:d(y,x),onMouseLeave:p(y,x),onClick:g(y,x),key:"sector-".concat(y?.startAngle,"-").concat(y?.endAngle,"-").concat(y.midAngle,"-").concat(x)}),_.createElement(YK,ic({option:k,isActive:v,shapeType:"sector"},S)))}),_.createElement(_Ce,{sectors:e,props:s,showLabels:i}))}function ACe(t){var e,{pieSettings:n,displayedData:r,cells:s,offset:i}=t,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:c,nameKey:u,tooltipType:d}=n,p=Math.abs(n.minAngle),g=ICe(o,l),y=Math.abs(g),x=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,v=r.filter(j=>bn(j,c,0)!==0).length,w=(y>=360?v:v-1)*x,k=y-v*p-w,S=r.reduce((j,A)=>{var T=bn(A,c,0);return j+(qe(T)?T:0)},0),I;if(S>0){var E;I=r.map((j,A)=>{var T=bn(j,c,0),$=bn(j,u,A),D=CCe(n,i,j),R=(qe(T)?T:0)/S,F,L=Jn(Jn({},j),s&&s[A]&&s[A].props);A?F=E.endAngle+es(g)*x*(T!==0?1:0):F=o;var K=F+es(g)*((T!==0?p:0)+R*k),X=(F+K)/2,q=(D.innerRadius+D.outerRadius)/2,Q=[{name:$,value:T,payload:L,dataKey:c,type:d}],z=xr(D.cx,D.cy,q,X);return E=Jn(Jn(Jn(Jn({},n.presentationProps),{},{percent:R,cornerRadius:a,name:$,tooltipPayload:Q,midAngle:X,middleRadius:q,tooltipPosition:z},L),D),{},{value:bn(j,c),startAngle:F,endAngle:K,payload:L,paddingAngle:es(g)*x}),E})}return I}function RCe(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:s,animationBegin:i,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:c,onAnimationStart:u,onAnimationEnd:d}=e,p=IP(e,"recharts-pie-"),g=n.current,[y,x]=_.useState(!0),v=_.useCallback(()=>{typeof d=="function"&&d(),x(!1)},[d]),w=_.useCallback(()=>{typeof u=="function"&&u(),x(!0)},[u]);return _.createElement(TP,{begin:i,duration:a,isActive:s,easing:o,onAnimationStart:w,onAnimationEnd:v,key:p},k=>{var S=[],I=r&&r[0],E=I.startAngle;return r.forEach((j,A)=>{var T=g&&g[A],$=A>0?Nu(j,"paddingAngle",0):0;if(T){var D=JF(T.endAngle-T.startAngle,j.endAngle-j.startAngle),R=Jn(Jn({},j),{},{startAngle:E+$,endAngle:E+D(k)+$});S.push(R),E=R.endAngle}else{var{endAngle:F,startAngle:L}=j,K=JF(0,F-L),X=K(k),q=Jn(Jn({},j),{},{startAngle:E+$,endAngle:E+X+$});S.push(q),E=q.endAngle}}),n.current=S,_.createElement(Fs,null,_.createElement(t7,{sectors:S,activeShape:l,inactiveShape:c,allOtherPieProps:e,showLabels:!y}))})}function $Ce(t){var{sectors:e,isAnimationActive:n,activeShape:r,inactiveShape:s}=t,i=_.useRef(null),a=i.current;return n&&e&&e.length&&(!a||a!==e)?_.createElement(RCe,{props:t,previousSectorsRef:i}):_.createElement(t7,{sectors:e,activeShape:r,inactiveShape:s,allOtherPieProps:t,showLabels:!0})}function PCe(t){var{hide:e,className:n,rootTabIndex:r}=t,s=Bt("recharts-pie",n);return e?null:_.createElement(Fs,{tabIndex:r,className:s},_.createElement($Ce,t))}var jCe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Kh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function DCe(t){var{id:e}=t,n=_P(t,mCe),r=_.useMemo(()=>yx(t.children,Rx),[t.children]),s=it(i=>M2e(i,e,r));return _.createElement(_.Fragment,null,_.createElement(CP,{fn:kCe,args:Jn(Jn({},t),{},{sectors:s})}),_.createElement(PCe,ic({},n,{sectors:s})))}function n7(t){var e=ea(t,jCe),{id:n}=e,r=_P(e,gCe),s=dc(r);return _.createElement(EP,{id:n,type:"pie"},i=>_.createElement(_.Fragment,null,_.createElement(dCe,{type:"pie",id:i,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s}),_.createElement(wCe,ic({},r,{id:i})),_.createElement(DCe,ic({},r,{id:i})),r.children))}n7.displayName="Pie";var OCe=ve([Or],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),MCe=ve([OCe,hc,fc],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),AP=()=>it(MCe),FCe=()=>it(RSe);function Tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(n),!0).forEach(function(r){LCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LCe(t,e,n){return(e=VCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VCe(t){var e=BCe(t,"string");return typeof e=="symbol"?e:e+""}function BCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zCe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:s,dataKey:i}=t;if(s===!1||e.x==null||e.y==null)return null;var a=_z(_z({index:n,dataKey:i,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},Bn(s,!1)),FR(s)),o;return _.isValidElement(s)?o=_.cloneElement(s,a):typeof s=="function"?o=s(a):o=_.createElement(GK,a),_.createElement(Fs,{className:"recharts-active-dot"},o)};function UCe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:s}=t,i=it(Eu),a=FCe();if(e==null||a==null)return null;var o=e.find(l=>a.includes(l.payload));return Dn(o)?null:zCe({point:o,childIndex:Number(i),mainColor:n,dataKey:s,activeDot:r})}var WCe="Invariant failed";function GCe(t,e){throw new Error(WCe)}var HCe=["x","y"];function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P_.apply(null,arguments)}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){qCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qCe(t,e,n){return(e=KCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KCe(t){var e=XCe(t,"string");return typeof e=="symbol"?e:e+""}function XCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YCe(t,e){if(t==null)return{};var n,r,s=QCe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function QCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function JCe(t,e){var{x:n,y:r}=t,s=YCe(t,HCe),i="".concat(n),a=parseInt(i,10),o="".concat(r),l=parseInt(o,10),c="".concat(e.height||s.height),u=parseInt(c,10),d="".concat(e.width||s.width),p=parseInt(d,10);return Vg(Vg(Vg(Vg(Vg({},e),s),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:p,name:e.name,radius:e.radius})}function r7(t){return _.createElement(YK,P_({shapeType:"rectangle",propTransformer:JCe,activeClassName:"recharts-active-bar"},t))}var ZCe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,s)=>{if(qe(e))return e;var i=qe(r)||Dn(r);return i?e(r,s):(i||GCe(),n)}},eIe={},s7=Zi({name:"errorBars",initialState:eIe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(s=>s.dataKey!==r.dataKey||s.direction!==r.direction))}}}),{addErrorBar:det,removeErrorBar:het}=s7.actions,tIe=s7.reducer,nIe=["children"];function rIe(t,e){if(t==null)return{};var n,r,s=sIe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function sIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iIe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},aIe=_.createContext(iIe);function i7(t){var{children:e}=t,n=rIe(t,nIe);return _.createElement(aIe.Provider,{value:n},e)}function RP(t,e){var n,r,s=it(c=>mc(c,t)),i=it(c=>Uu(c,e)),a=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:ji.allowDataOverflow,o=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:Di.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function a7(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,s=AP(),{needClipX:i,needClipY:a,needClip:o}=RP(e,n);if(!o)return null;var{x:l,y:c,width:u,height:d}=s;return _.createElement("clipPath",{id:"clipPath-".concat(r)},_.createElement("rect",{x:i?l:l-u/2,y:a?c:c-d/2,width:i?u:u*2,height:a?d:d*2}))}var oIe=["onMouseEnter","onMouseLeave","onClick"],lIe=["value","background","tooltipPosition"],cIe=["id"],uIe=["onMouseEnter","onClick","onMouseLeave"];function Wp(){return Wp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wp.apply(null,arguments)}function Rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(n),!0).forEach(function(r){dIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dIe(t,e,n){return(e=hIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hIe(t){var e=fIe(t,"string");return typeof e=="symbol"?e:e+""}function fIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function R1(t,e){if(t==null)return{};var n,r,s=pIe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function pIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var mIe=t=>{var{dataKey:e,name:n,fill:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:ym(n,e),payload:t}]};function gIe(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:s,name:i,hide:a,unit:o}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:s,dataKey:e,nameKey:void 0,name:ym(i,e),hide:a,type:t.tooltipType,color:t.fill,unit:o}}}function yIe(t){var e=it(Eu),{data:n,dataKey:r,background:s,allOtherBarProps:i}=t,{onMouseEnter:a,onMouseLeave:o,onClick:l}=i,c=R1(i,oIe),u=kP(a,r),d=SP(o),p=NP(l,r);if(!s||n==null)return null;var g=Bn(s,!1);return _.createElement(_.Fragment,null,n.map((y,x)=>{var{value:v,background:w,tooltipPosition:k}=y,S=R1(y,lIe);if(!w)return null;var I=u(y,x),E=d(y,x),j=p(y,x),A=Ps(Ps(Ps(Ps(Ps({option:s,isActive:String(x)===e},S),{},{fill:"#eee"},w),g),gx(c,y,x)),{},{onMouseEnter:I,onMouseLeave:E,onClick:j,dataKey:r,index:x,className:"recharts-bar-background-rectangle"});return _.createElement(r7,Wp({key:"background-bar-".concat(x)},A))}))}function o7(t){var{data:e,props:n,showLabels:r}=t,s=dc(n),{id:i}=s,a=R1(s,cIe),{shape:o,dataKey:l,activeBar:c}=n,u=it(Eu),d=it(_K),{onMouseEnter:p,onClick:g,onMouseLeave:y}=n,x=R1(n,uIe),v=kP(p,l),w=SP(y),k=NP(g,l);return e?_.createElement(_.Fragment,null,e.map((S,I)=>{var E=c&&String(I)===u&&(d==null||l===d),j=E?c:o,A=Ps(Ps(Ps({},a),S),{},{isActive:E,option:j,index:I,dataKey:l});return _.createElement(Fs,Wp({className:"recharts-bar-rectangle"},gx(x,S,I),{onMouseEnter:v(S,I),onMouseLeave:w(S,I),onClick:k(S,I),key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(I)}),_.createElement(r7,A))}),r&&lu.renderCallByParent(n,e)):null}function xIe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:s,isAnimationActive:i,animationBegin:a,animationDuration:o,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=e,d=n.current,p=IP(e,"recharts-bar-"),[g,y]=_.useState(!1),x=_.useCallback(()=>{typeof c=="function"&&c(),y(!1)},[c]),v=_.useCallback(()=>{typeof u=="function"&&u(),y(!0)},[u]);return _.createElement(TP,{begin:a,duration:o,isActive:i,easing:l,onAnimationEnd:x,onAnimationStart:v,key:p},w=>{var k=w===1?r:r?.map((S,I)=>{var E=d&&d[I];if(E)return Ps(Ps({},S),{},{x:so(E.x,S.x,w),y:so(E.y,S.y,w),width:so(E.width,S.width,w),height:so(E.height,S.height,w)});if(s==="horizontal"){var j=so(0,S.height,w);return Ps(Ps({},S),{},{y:S.y+S.height-j,height:j})}var A=so(0,S.width,w);return Ps(Ps({},S),{},{width:A})});return w>0&&(n.current=k??null),k==null?null:_.createElement(Fs,null,_.createElement(o7,{props:e,data:k,showLabels:!g}))})}function vIe(t){var{data:e,isAnimationActive:n}=t,r=_.useRef(null);return n&&e&&e.length&&(r.current==null||r.current!==e)?_.createElement(xIe,{previousRectanglesRef:r,props:t}):_.createElement(o7,{props:t,data:e,showLabels:!0})}var l7=0,bIe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:bn(t,e)}};class wIe extends _.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:s,xAxisId:i,yAxisId:a,needClip:o,background:l,id:c}=this.props;if(e)return null;var u=Bt("recharts-bar",s),d=c;return _.createElement(Fs,{className:u,id:c},o&&_.createElement("defs",null,_.createElement(a7,{clipPathId:d,xAxisId:i,yAxisId:a})),_.createElement(Fs,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(d,")"):void 0},_.createElement(yIe,{data:n,dataKey:r,background:l,allOtherBarProps:this.props}),_.createElement(vIe,this.props)),this.props.children)}}var kIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Kh.isSsr,legendType:"rect",minPointSize:l7,xAxisId:0,yAxisId:0};function SIe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u}=t,{needClip:d}=RP(e,n),p=lS(),g=Ii(),y=yx(t.children,Rx),x=it(k=>YIe(k,e,n,g,t.id,y));if(p!=="vertical"&&p!=="horizontal")return null;var v,w=x?.[0];return w==null||w.height==null||w.width==null?v=0:v=p==="vertical"?w.height/2:w.width/2,_.createElement(i7,{xAxisId:e,yAxisId:n,data:x,dataPointFormatter:bIe,errorBarOffset:v},_.createElement(wIe,Wp({},t,{layout:p,needClip:d,data:x,xAxisId:e,yAxisId:n,hide:r,legendType:s,minPointSize:i,activeBar:a,animationBegin:o,animationDuration:l,animationEasing:c,isAnimationActive:u})))}function NIe(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:s,bandSize:i,xAxis:a,yAxis:o,xAxisTicks:l,yAxisTicks:c,stackedData:u,displayedData:d,offset:p,cells:g}=t,y=e==="horizontal"?o:a,x=u?y.scale.domain():null,v=ave({numericAxis:y});return d.map((w,k)=>{var S,I,E,j,A,T;u?S=eve(u[k],x):(S=bn(w,n),Array.isArray(S)||(S=[v,S]));var $=ZCe(r,l7)(S[1],k);if(e==="horizontal"){var D,[R,F]=[o.scale(S[0]),o.scale(S[1])];I=pV({axis:a,ticks:l,bandSize:i,offset:s.offset,entry:w,index:k}),E=(D=F??R)!==null&&D!==void 0?D:void 0,j=s.size;var L=R-F;if(A=Xi(L)?0:L,T={x:I,y:p.top,width:j,height:p.height},Math.abs($)>0&&Math.abs(A)<Math.abs($)){var K=es(A||$)*(Math.abs($)-Math.abs(A));E-=K,A+=K}}else{var[X,q]=[a.scale(S[0]),a.scale(S[1])];if(I=X,E=pV({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:w,index:k}),j=q-X,A=s.size,T={x:p.left,y:E,width:p.width,height:A},Math.abs($)>0&&Math.abs(j)<Math.abs($)){var Q=es(j||$)*(Math.abs($)-Math.abs(j));j+=Q}}if(I==null||E==null||j==null||A==null)return null;var z=Ps(Ps({},w),{},{x:I,y:E,width:j,height:A,value:u?S:S[1],payload:w,background:T,tooltipPosition:{x:I+j/2,y:E+A/2}},g&&g[k]&&g[k].props);return z}).filter(Boolean)}function fw(t){var e=ea(t,kIe),n=Ii();return _.createElement(EP,{id:e.id,type:"bar"},r=>_.createElement(_.Fragment,null,_.createElement(JK,{legendPayload:mIe(e)}),_.createElement(CP,{fn:gIe,args:e}),_.createElement(e7,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:ive(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),_.createElement(SIe,Wp({},e,{id:r}))))}fw.displayName="Bar";function $z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$z(Object(n),!0).forEach(function(r){CIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CIe(t,e,n){return(e=IIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IIe(t){var e=EIe(t,"string");return typeof e=="symbol"?e:e+""}function EIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TIe=(t,e)=>e,_Ie=(t,e,n)=>n,AIe=(t,e,n,r)=>r,RIe=(t,e,n,r,s)=>s,$x=ve([bS,RIe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),$Ie=ve([$x],t=>t?.maxBarSize),PIe=(t,e,n,r,s,i)=>i,Pz=(t,e,n)=>{var r=n??t;if(!Dn(r))return Qs(r,e,0)},jIe=ve([Yt,bS,TIe,_Ie,AIe],(t,e,n,r,s)=>e.filter(i=>t==="horizontal"?i.xAxisId===n:i.yAxisId===r).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),DIe=(t,e,n,r)=>{var s=Yt(t);return s==="horizontal"?I_(t,"yAxis",n,r):I_(t,"xAxis",e,r)},OIe=(t,e,n)=>{var r=Yt(t);return r==="horizontal"?jB(t,"xAxis",e):jB(t,"yAxis",n)},MIe=(t,e,n)=>{var r={},s=t.filter(vS),i=t.filter(c=>c.stackId==null),a=s.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),r),o=Object.entries(a).map(c=>{var[u,d]=c,p=d.map(y=>y.dataKey),g=Pz(e,n,d[0].barSize);return{stackId:u,dataKeys:p,barSize:g}}),l=i.map(c=>{var u=[c.dataKey].filter(p=>p!=null),d=Pz(e,n,c.barSize);return{stackId:void 0,dataKeys:u,barSize:d}});return[...o,...l]},FIe=ve([jIe,z1e,OIe],MIe),LIe=(t,e,n,r,s)=>{var i,a,o=$x(t,e,n,r,s);if(o!=null){var l=Yt(t),c=Aq(t),{maxBarSize:u}=o,d=Dn(u)?c:u,p,g;return l==="horizontal"?(p=Iu(t,"xAxis",e,r),g=Cu(t,"xAxis",e,r)):(p=Iu(t,"yAxis",n,r),g=Cu(t,"yAxis",n,r)),(i=(a=Fy(p,g,!0))!==null&&a!==void 0?a:d)!==null&&i!==void 0?i:0}},c7=(t,e,n,r)=>{var s=Yt(t),i,a;return s==="horizontal"?(i=Iu(t,"xAxis",e,r),a=Cu(t,"xAxis",e,r)):(i=Iu(t,"yAxis",n,r),a=Cu(t,"yAxis",n,r)),Fy(i,a)};function VIe(t,e,n,r,s){var i=r.length;if(!(i<1)){var a=Qs(t,n,0,!0),o,l=[];if(Qi(r[0].barSize)){var c=!1,u=n/i,d=r.reduce((w,k)=>w+(k.barSize||0),0);d+=(i-1)*a,d>=n&&(d-=(i-1)*a,a=0),d>=n&&u>0&&(c=!0,u*=.9,d=i*u);var p=(n-d)/2>>0,g={offset:p-a,size:0};o=r.reduce((w,k)=>{var S,I={stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:g.offset+g.size+a,size:c?u:(S=k.barSize)!==null&&S!==void 0?S:0}},E=[...w,I];return g=E[E.length-1].position,E},l)}else{var y=Qs(e,n,0,!0);n-2*y-(i-1)*a<=0&&(a=0);var x=(n-2*y-(i-1)*a)/i;x>1&&(x>>=0);var v=Qi(s)?Math.min(x,s):x;o=r.reduce((w,k,S)=>[...w,{stackId:k.stackId,dataKeys:k.dataKeys,position:{offset:y+(x+a)*S+(x-v)/2,size:v}}],l)}return o}}var BIe=(t,e,n,r,s,i,a)=>{var o=Dn(a)?e:a,l=VIe(n,r,s!==i?s:i,t,o);return s!==i&&l!=null&&(l=l.map(c=>Bb(Bb({},c),{},{position:Bb(Bb({},c.position),{},{offset:c.position.offset-s/2})}))),l},zIe=ve([FIe,Aq,B1e,Rq,LIe,c7,$Ie],BIe),UIe=(t,e,n,r)=>Iu(t,"xAxis",e,r),WIe=(t,e,n,r)=>Iu(t,"yAxis",n,r),GIe=(t,e,n,r)=>Cu(t,"xAxis",e,r),HIe=(t,e,n,r)=>Cu(t,"yAxis",n,r),qIe=ve([zIe,$x],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),KIe=(t,e)=>{var n=U$(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var s=t[r];if(s){var{stackedData:i}=s;if(i)return i.find(a=>a.key===n)}}}},XIe=ve([DIe,$x],KIe),YIe=ve([Or,UIe,WIe,GIe,HIe,qIe,Yt,mS,c7,XIe,$x,PIe],(t,e,n,r,s,i,a,o,l,c,u,d)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:y}=o;if(!(u==null||i==null||a!=="horizontal"&&a!=="vertical"||e==null||n==null||r==null||s==null||l==null)){var{data:x}=u,v;if(x!=null&&x.length>0?v=x:v=p?.slice(g,y+1),v!=null)return NIe({layout:a,barSettings:u,pos:i,bandSize:l,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,stackedData:c,displayedData:v,offset:t,cells:d})}}),u7=t=>{var{chartData:e}=t,n=Xn(),r=Ii();return _.useEffect(()=>r?()=>{}:(n(WB(e)),()=>{n(WB(void 0))}),[e,n,r]),null},jz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},d7=Zi({name:"brush",initialState:jz,reducers:{setBrushSettings(t,e){return e.payload==null?jz:e.payload}}}),{setBrushSettings:fet}=d7.actions,QIe=d7.reducer;function JIe(t,e,n){return(e=ZIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZIe(t){var e=eEe(t,"string");return typeof e=="symbol"?e:e+""}function eEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $P{static create(e){return new $P(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(e)+i}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],s=n[n.length-1];return r<=s?e>=r&&e<=s:e>=s&&e<=r}}JIe($P,"EPS",1e-4);function tEe(t){return(t%180+180)%180}var nEe=function(e){var{width:n,height:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=tEe(s),a=i*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},rEe={dots:[],areas:[],lines:[]},h7=Zi({name:"referenceElements",initialState:rEe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Gl(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Gl(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Gl(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:pet,removeDot:met,addArea:get,removeArea:yet,addLine:xet,removeLine:vet}=h7.actions,sEe=h7.reducer,iEe=_.createContext(void 0),aEe=t=>{var{children:e}=t,[n]=_.useState("".concat(Dy("recharts"),"-clip")),r=AP();if(r==null)return null;var{x:s,y:i,width:a,height:o}=r;return _.createElement(iEe.Provider,{value:n},_.createElement("defs",null,_.createElement("clipPath",{id:n},_.createElement("rect",{x:s,y:i,height:o,width:a}))),e)};function VE(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function f7(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function oEe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return nEe(r,n)}function lEe(t,e,n){var r=n==="width",{x:s,y:i,width:a,height:o}=t;return e===1?{start:r?s:i,end:r?s+a:i+o}:{start:r?s+a:i+o,end:r?s:i}}function $1(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var i=n();return t*(e-t*i/2-r)>=0&&t*(e+t*i/2-s)<=0}function cEe(t,e){return f7(t,e+1)}function uEe(t,e,n,r,s){for(var i=(r||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,d=function(){var y=r?.[l];if(y===void 0)return{v:f7(r,c)};var x=l,v,w=()=>(v===void 0&&(v=n(y,x)),v),k=y.coordinate,S=l===0||$1(t,k,w,u,o);S||(l=0,u=a,c+=1),S&&(u=k+t*(w()/2+s),l+=c)},p;c<=i.length;)if(p=d(),p)return p.v;return[]}function Dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ts(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(n),!0).forEach(function(r){dEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dEe(t,e,n){return(e=hEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hEe(t){var e=fEe(t,"string");return typeof e=="symbol"?e:e+""}function fEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pEe(t,e,n,r,s){for(var i=(r||[]).slice(),a=i.length,{start:o}=e,{end:l}=e,c=function(p){var g=i[p],y,x=()=>(y===void 0&&(y=n(g,p)),y);if(p===a-1){var v=t*(g.coordinate+t*x()/2-l);i[p]=g=Ts(Ts({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else i[p]=g=Ts(Ts({},g),{},{tickCoord:g.coordinate});var w=$1(t,g.tickCoord,x,o,l);w&&(l=g.tickCoord-t*(x()/2+s),i[p]=Ts(Ts({},g),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return i}function mEe(t,e,n,r,s,i){var a=(r||[]).slice(),o=a.length,{start:l,end:c}=e;if(i){var u=r[o-1],d=n(u,o-1),p=t*(u.coordinate+t*d/2-c);a[o-1]=u=Ts(Ts({},u),{},{tickCoord:p>0?u.coordinate-p*t:u.coordinate});var g=$1(t,u.tickCoord,()=>d,l,c);g&&(c=u.tickCoord-t*(d/2+s),a[o-1]=Ts(Ts({},u),{},{isShow:!0}))}for(var y=i?o-1:o,x=function(k){var S=a[k],I,E=()=>(I===void 0&&(I=n(S,k)),I);if(k===0){var j=t*(S.coordinate-t*E()/2-l);a[k]=S=Ts(Ts({},S),{},{tickCoord:j<0?S.coordinate-j*t:S.coordinate})}else a[k]=S=Ts(Ts({},S),{},{tickCoord:S.coordinate});var A=$1(t,S.tickCoord,E,l,c);A&&(l=S.tickCoord+t*(E()/2+s),a[k]=Ts(Ts({},S),{},{isShow:!0}))},v=0;v<y;v++)x(v);return a}function PP(t,e,n){var{tick:r,ticks:s,viewBox:i,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:d}=t;if(!s||!s.length||!r)return[];if(qe(l)||Kh.isSsr){var p;return(p=cEe(s,qe(l)?l:0))!==null&&p!==void 0?p:[]}var g=[],y=o==="top"||o==="bottom"?"width":"height",x=u&&y==="width"?hy(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=(S,I)=>{var E=typeof c=="function"?c(S.value,I):S.value;return y==="width"?oEe(hy(E,{fontSize:e,letterSpacing:n}),x,d):hy(E,{fontSize:e,letterSpacing:n})[y]},w=s.length>=2?es(s[1].coordinate-s[0].coordinate):1,k=lEe(i,w,y);return l==="equidistantPreserveStart"?uEe(w,k,v,s,a):(l==="preserveStart"||l==="preserveStartEnd"?g=mEe(w,k,v,s,a,l==="preserveStartEnd"):g=pEe(w,k,v,s,a),g.filter(S=>S.isShow))}var gEe=["viewBox"],yEe=["viewBox"];function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(null,arguments)}function Oz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(n),!0).forEach(function(r){jP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mz(t,e){if(t==null)return{};var n,r,s=xEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function xEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jP(t,e,n){return(e=vEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vEe(t){var e=bEe(t,"string");return typeof e=="symbol"?e:e+""}function bEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Wu extends _.Component{constructor(e){super(e),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,s=Mz(e,gEe),i=this.props,{viewBox:a}=i,o=Mz(i,yEe);return!VE(r,a)||!VE(s,o)||!VE(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:s,height:i,orientation:a,tickSize:o,mirror:l,tickMargin:c}=this.props,u,d,p,g,y,x,v=l?-1:1,w=e.tickSize||o,k=qe(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,g=r+ +!l*i,p=g-v*w,x=p-v*c,y=k;break;case"left":p=g=e.coordinate,d=n+ +!l*s,u=d-v*w,y=u-v*c,x=k;break;case"right":p=g=e.coordinate,d=n+ +l*s,u=d+v*w,y=u+v*c,x=k;break;default:u=d=e.coordinate,g=r+ +l*i,p=g+v*w,x=p+v*c,y=k;break}return{line:{x1:u,y1:p,x2:d,y2:g},tick:{x:y,y:x}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props,r;switch(e){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:s,orientation:i,mirror:a,axisLine:o}=this.props,l=Rr(Rr(Rr({},Bn(this.props,!1)),Bn(o,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var c=+(i==="top"&&!a||i==="bottom"&&a);l=Rr(Rr({},l),{},{x1:e,y1:n+c*s,x2:e+r,y2:n+c*s})}else{var u=+(i==="left"&&!a||i==="right"&&a);l=Rr(Rr({},l),{},{x1:e+u*r,y1:n,x2:e+u*r,y2:n+s})}return _.createElement("line",hp({},l,{className:Bt("recharts-cartesian-axis-line",Nu(o,"className"))}))}static renderTickItem(e,n,r){var s,i=Bt(n.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(e))s=_.cloneElement(e,Rr(Rr({},n),{},{className:i}));else if(typeof e=="function")s=e(Rr(Rr({},n),{},{className:i}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=Bt(a,e.className)),s=_.createElement(IS,hp({},n,{className:a}),r)}return s}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:a,tickFormatter:o,unit:l,padding:c}=this.props,u=PP(Rr(Rr({},this.props),{},{ticks:r}),e,n),d=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=dc(this.props),y=Bn(a,!1),x=Rr(Rr({},g),{},{fill:"none"},Bn(s,!1)),v=u.map((w,k)=>{var{line:S,tick:I}=this.getTickLineCoord(w),E=Rr(Rr(Rr(Rr({textAnchor:d,verticalAnchor:p},g),{},{stroke:"none",fill:i},y),I),{},{index:k,payload:w,visibleTicksCount:u.length,tickFormatter:o,padding:c});return _.createElement(Fs,hp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},gx(this.props,w,k)),s&&_.createElement("line",hp({},x,S,{className:Bt("recharts-cartesian-axis-tick-line",Nu(s,"className"))})),a&&Wu.renderTickItem(a,E,"".concat(typeof o=="function"?o(w.value,k):w.value).concat(l||"")))});return v.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},v):null}render(){var{axisLine:e,width:n,height:r,className:s,hide:i}=this.props;if(i)return null;var{ticks:a}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:_.createElement(Fs,{className:Bt("recharts-cartesian-axis",s),ref:o=>{if(o){var l=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(l);var c=l[0];if(c){var u=window.getComputedStyle(c).fontSize,d=window.getComputedStyle(c).letterSpacing;(u!==this.state.fontSize||d!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(c).fontSize,letterSpacing:window.getComputedStyle(c).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,a),Fi.renderCallByParent(this.props))}}jP(Wu,"displayName","CartesianAxis");jP(Wu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var wEe=["x1","y1","x2","y2","key"],kEe=["offset"],SEe=["xAxisId","yAxisId"],NEe=["xAxisId","yAxisId"];function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(r){CEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CEe(t,e,n){return(e=IEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IEe(t){var e=EEe(t,"string");return typeof e=="symbol"?e:e+""}function EEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xd.apply(null,arguments)}function P1(t,e){if(t==null)return{};var n,r,s=TEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function TEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _Ee=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:s,width:i,height:a,ry:o}=t;return _.createElement("rect",{x:r,y:s,ry:o,width:i,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function p7(t,e){var n;if(_.isValidElement(t))n=_.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:s,x2:i,y2:a,key:o}=e,l=P1(e,wEe),c=dc(l),{offset:u}=c,d=P1(c,kEe);n=_.createElement("line",Xd({},d,{x1:r,y1:s,x2:i,y2:a,fill:"none",key:o}))}return n}function AEe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=P1(t,SEe),l=s.map((c,u)=>{var d=js(js({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return p7(r,d)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function REe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:s}=t;if(!r||!s||!s.length)return null;var{xAxisId:i,yAxisId:a}=t,o=P1(t,NEe),l=s.map((c,u)=>{var d=js(js({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return p7(r,d)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function $Ee(t){var{horizontalFill:e,fillOpacity:n,x:r,y:s,width:i,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length)return null;var c=o.map(d=>Math.round(d+s-s)).sort((d,p)=>d-p);s!==c[0]&&c.unshift(0);var u=c.map((d,p)=>{var g=!c[p+1],y=g?s+a-d:c[p+1]-d;if(y<=0)return null;var x=p%e.length;return _.createElement("rect",{key:"react-".concat(p),y:d,x:r,height:y,width:i,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function PEe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:s,y:i,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(d=>Math.round(d+s-s)).sort((d,p)=>d-p);s!==c[0]&&c.unshift(0);var u=c.map((d,p)=>{var g=!c[p+1],y=g?s+a-d:c[p+1]-d;if(y<=0)return null;var x=p%n.length;return _.createElement("rect",{key:"react-".concat(p),x:d,y:i,width:y,height:o,stroke:"none",fill:n[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var jEe=(t,e)=>{var{xAxis:n,width:r,height:s,offset:i}=t;return pH(PP(js(js(js({},Wu.defaultProps),n),{},{ticks:mH(n),viewBox:{x:0,y:0,width:r,height:s}})),i.left,i.left+i.width,e)},DEe=(t,e)=>{var{yAxis:n,width:r,height:s,offset:i}=t;return pH(PP(js(js(js({},Wu.defaultProps),n),{},{ticks:mH(n),viewBox:{x:0,y:0,width:r,height:s}})),i.top,i.top+i.height,e)},OEe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Nh(t){var e=a$(),n=o$(),r=bH(),s=js(js({},ea(t,OEe)),{},{x:qe(t.x)?t.x:r.left,y:qe(t.y)?t.y:r.top,width:qe(t.width)?t.width:r.width,height:qe(t.height)?t.height:r.height}),{xAxisId:i,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:p,verticalValues:g}=s,y=Ii(),x=it($=>DB($,"xAxis",i,y)),v=it($=>DB($,"yAxis",a,y));if(!qe(c)||c<=0||!qe(u)||u<=0||!qe(o)||o!==+o||!qe(l)||l!==+l)return null;var w=s.verticalCoordinatesGenerator||jEe,k=s.horizontalCoordinatesGenerator||DEe,{horizontalPoints:S,verticalPoints:I}=s;if((!S||!S.length)&&typeof k=="function"){var E=p&&p.length,j=k({yAxis:v?js(js({},v),{},{ticks:E?p:v.ticks}):void 0,width:e,height:n,offset:r},E?!0:d);dy(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(S=j)}if((!I||!I.length)&&typeof w=="function"){var A=g&&g.length,T=w({xAxis:x?js(js({},x),{},{ticks:A?g:x.ticks}):void 0,width:e,height:n,offset:r},A?!0:d);dy(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(I=T)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(_Ee,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement($Ee,Xd({},s,{horizontalPoints:S})),_.createElement(PEe,Xd({},s,{verticalPoints:I})),_.createElement(AEe,Xd({},s,{offset:r,horizontalPoints:S,xAxis:x,yAxis:v})),_.createElement(REe,Xd({},s,{offset:r,verticalPoints:I,xAxis:x,yAxis:v})))}Nh.displayName="CartesianGrid";var m7=(t,e,n,r)=>Iu(t,"xAxis",e,r),g7=(t,e,n,r)=>Cu(t,"xAxis",e,r),y7=(t,e,n,r)=>Iu(t,"yAxis",n,r),x7=(t,e,n,r)=>Cu(t,"yAxis",n,r),MEe=ve([Yt,m7,y7,g7,x7],(t,e,n,r,s)=>Lu(t,"xAxis")?Fy(e,r,!1):Fy(n,s,!1)),FEe=(t,e,n,r,s)=>s;function LEe(t){return t.type==="line"}var VEe=ve([bS,FEe],(t,e)=>t.filter(LEe).find(n=>n.id===e)),BEe=ve([Yt,m7,y7,g7,x7,VEe,MEe,mS],(t,e,n,r,s,i,a,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(!(i==null||e==null||n==null||r==null||s==null||r.length===0||s.length===0||a==null)){var{dataKey:d,data:p}=i,g;if(p!=null&&p.length>0?g=p:g=l?.slice(c,u+1),g!=null)return lTe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:s,dataKey:d,bandSize:a,displayedData:g})}}),zEe=["id"],UEe=["type","layout","connectNulls","needClip"],WEe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(n),!0).forEach(function(r){GEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GEe(t,e,n){return(e=HEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HEe(t){var e=qEe(t,"string");return typeof e=="symbol"?e:e+""}function qEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DP(t,e){if(t==null)return{};var n,r,s=KEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function KEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(null,arguments)}var XEe=t=>{var{dataKey:e,name:n,stroke:r,legendType:s,hide:i}=t;return[{inactive:i,dataKey:e,type:s,color:r,value:ym(n,e),payload:t}]};function YEe(t){var{dataKey:e,data:n,stroke:r,strokeWidth:s,fill:i,name:a,hide:o,unit:l}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:i,dataKey:e,nameKey:void 0,name:ym(a,e),hide:o,type:t.tooltipType,color:t.stroke,unit:l}}}var v7=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function QEe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],s=0;s<e;++s)r=[...r,...n];return r}var JEe=(t,e,n)=>{var r=n.reduce((d,p)=>d+p);if(!r)return v7(e,t);for(var s=Math.floor(t/r),i=t%r,a=e-t,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>i){o=[...n.slice(0,l),i-c];break}var u=o.length%2===0?[0,a]:[a];return[...QEe(n,s),...o,...u].map(d=>"".concat(d,"px")).join(", ")};function ZEe(t,e){var n;if(_.isValidElement(t))n=_.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=Bt("recharts-line-dot",typeof t!="boolean"?t.className:"");n=_.createElement(GK,Ch({},e,{className:r}))}return n}function eTe(t,e){return t==null?!1:e?!0:t.length===1}function tTe(t){var{clipPathId:e,points:n,props:r}=t,{dot:s,dataKey:i,needClip:a}=r;if(!eTe(n,s))return null;var{id:o}=r,l=DP(r,zEe),c=d9(s),u=dc(l),d=Bn(s,!0),p=n.map((y,x)=>{var v=io(io(io({key:"dot-".concat(x),r:3},u),d),{},{index:x,cx:y.x,cy:y.y,dataKey:i,value:y.value,payload:y.payload,points:n});return ZEe(s,v)}),g={clipPath:a?"url(#clipPath-".concat(c?"":"dots-").concat(e,")"):void 0};return _.createElement(Fs,Ch({className:"recharts-line-dots",key:"dots"},g),p)}function j_(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:s,props:i,showLabels:a}=t,{type:o,layout:l,connectNulls:c,needClip:u}=i,d=DP(i,UEe),p=io(io({},Bn(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:r,type:o,layout:l,connectNulls:c,strokeDasharray:s??i.strokeDasharray});return _.createElement(_.Fragment,null,r?.length>1&&_.createElement(c$,Ch({},p,{pathRef:n})),_.createElement(tTe,{points:r,clipPathId:e,props:i}),a&&lu.renderCallByParent(i,r))}function nTe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function rTe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:s,longestAnimatedLengthRef:i}=t,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:p,width:g,height:y,onAnimationEnd:x,onAnimationStart:v}=n,w=s.current,k=IP(n,"recharts-line-"),[S,I]=_.useState(!1),E=_.useCallback(()=>{typeof x=="function"&&x(),I(!1)},[x]),j=_.useCallback(()=>{typeof v=="function"&&v(),I(!0)},[v]),A=nTe(r.current),T=i.current;return _.createElement(TP,{begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:E,onAnimationStart:j,key:k},$=>{var D=so(T,A+T,$),R=Math.min(D,A),F;if(o){var L="".concat(o).split(/[,\s]+/gim).map(q=>parseFloat(q));F=JEe(R,A,L)}else F=v7(A,R);if(w){var K=w.length/a.length,X=$===1?a:a.map((q,Q)=>{var z=Math.floor(Q*K);if(w[z]){var H=w[z];return io(io({},q),{},{x:so(H.x,q.x,$),y:so(H.y,q.y,$)})}return p?io(io({},q),{},{x:so(g*2,q.x,$),y:so(y/2,q.y,$)}):io(io({},q),{},{x:q.x,y:q.y})});return s.current=X,_.createElement(j_,{props:n,points:X,clipPathId:e,pathRef:r,showLabels:!S,strokeDasharray:F})}return $>0&&A>0&&(s.current=a,i.current=R),_.createElement(j_,{props:n,points:a,clipPathId:e,pathRef:r,showLabels:!S,strokeDasharray:F})})}function sTe(t){var{clipPathId:e,props:n}=t,{points:r,isAnimationActive:s}=n,i=_.useRef(null),a=_.useRef(0),o=_.useRef(null),l=i.current;return s&&r&&r.length&&l!==r?_.createElement(rTe,{props:n,clipPathId:e,previousPointsRef:i,longestAnimatedLengthRef:a,pathRef:o}):_.createElement(j_,{props:n,points:r,clipPathId:e,pathRef:o,showLabels:!0})}var iTe=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:bn(t.payload,e)});class aTe extends _.Component{render(){var e,{hide:n,dot:r,points:s,className:i,xAxisId:a,yAxisId:o,top:l,left:c,width:u,height:d,id:p,needClip:g}=this.props;if(n)return null;var y=Bt("recharts-line",i),x=p,{r:v=3,strokeWidth:w=2}=(e=Bn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},k=d9(r),S=v*2+w;return _.createElement(_.Fragment,null,_.createElement(Fs,{className:y},g&&_.createElement("defs",null,_.createElement(a7,{clipPathId:x,xAxisId:a,yAxisId:o}),!k&&_.createElement("clipPath",{id:"clipPath-dots-".concat(x)},_.createElement("rect",{x:c-S/2,y:l-S/2,width:u+S,height:d+S}))),_.createElement(sTe,{props:this.props,clipPathId:x}),_.createElement(i7,{xAxisId:a,yAxisId:o,data:s,dataPointFormatter:iTe,errorBarOffset:0},this.props.children)),_.createElement(UCe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var b7={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Kh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function oTe(t){var e=ea(t,b7),{activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,connectNulls:o,dot:l,hide:c,isAnimationActive:u,label:d,legendType:p,xAxisId:g,yAxisId:y,id:x}=e,v=DP(e,WEe),{needClip:w}=RP(g,y),k=AP(),S=lS(),I=Ii(),E=it(D=>BEe(D,g,y,I,x));if(S!=="horizontal"&&S!=="vertical"||E==null||k==null)return null;var{height:j,width:A,x:T,y:$}=k;return _.createElement(aTe,Ch({},v,{id:x,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:s,animationDuration:i,animationEasing:a,isAnimationActive:u,hide:c,label:d,legendType:p,xAxisId:g,yAxisId:y,points:E,layout:S,height:j,width:A,left:T,top:$,needClip:w}))}function lTe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:s,yAxisTicks:i,dataKey:a,bandSize:o,displayedData:l}=t;return l.map((c,u)=>{var d=bn(c,a);if(e==="horizontal"){var p=fV({axis:n,ticks:s,bandSize:o,entry:c,index:u}),g=Dn(d)?null:r.scale(d);return{x:p,y:g,value:d,payload:c}}var y=Dn(d)?null:n.scale(d),x=fV({axis:r,ticks:i,bandSize:o,entry:c,index:u});return y==null||x==null?null:{x:y,y:x,value:d,payload:c}}).filter(Boolean)}function bi(t){var e=ea(t,b7),n=Ii();return _.createElement(EP,{id:e.id,type:"line"},r=>_.createElement(_.Fragment,null,_.createElement(JK,{legendPayload:XEe(e)}),_.createElement(CP,{fn:YEe,args:e}),_.createElement(e7,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),_.createElement(oTe,Ch({},e,{id:r}))))}bi.displayName="Line";function Vz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vz(Object(n),!0).forEach(function(r){cTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cTe(t,e,n){return(e=uTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uTe(t){var e=dTe(t,"string");return typeof e=="symbol"?e:e+""}function dTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hTe={xAxis:{},yAxis:{},zAxis:{}},w7=Zi({name:"cartesianAxis",initialState:hTe,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=Bz(Bz({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:fTe,removeXAxis:pTe,addYAxis:mTe,removeYAxis:gTe,addZAxis:bet,removeZAxis:wet,updateYAxisWidth:yTe}=w7.actions,xTe=w7.reducer,vTe=["children"],bTe=["dangerouslySetInnerHTML","ticks"];function k7(t,e,n){return(e=wTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wTe(t){var e=kTe(t,"string");return typeof e=="symbol"?e:e+""}function kTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(null,arguments)}function S7(t,e){if(t==null)return{};var n,r,s=STe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function STe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function NTe(t){var e=Xn(),n=_.useMemo(()=>{var{children:i}=t,a=S7(t,vTe);return a},[t]),r=it(i=>mc(i,n.id)),s=n===r;return _.useEffect(()=>(e(fTe(n)),()=>{e(pTe(n))}),[n,e]),s?t.children:null}var CTe=t=>{var{xAxisId:e,className:n}=t,r=it(vH),s=Ii(),i="xAxis",a=it(g=>Nm(g,i,e,s)),o=it(g=>uK(g,i,e,s)),l=it(g=>aK(g,e)),c=it(g=>$ke(g,e));if(l==null||c==null)return null;var{dangerouslySetInnerHTML:u,ticks:d}=t,p=S7(t,bTe);return _.createElement(Wu,D_({},p,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:Bt("recharts-".concat(i," ").concat(i),n),viewBox:r,ticks:o}))},ITe=t=>{var e,n,r,s,i;return _.createElement(NTe,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(s=t.minTickGap)!==null&&s!==void 0?s:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter},_.createElement(CTe,t))};class Tu extends _.Component{render(){return _.createElement(ITe,this.props)}}k7(Tu,"displayName","XAxis");k7(Tu,"defaultProps",{allowDataOverflow:ji.allowDataOverflow,allowDecimals:ji.allowDecimals,allowDuplicatedCategory:ji.allowDuplicatedCategory,height:ji.height,hide:!1,mirror:ji.mirror,orientation:ji.orientation,padding:ji.padding,reversed:ji.reversed,scale:ji.scale,tickCount:ji.tickCount,type:ji.type,xAxisId:0});var ETe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:s=0,tickMargin:i=0}=t,a=0;if(e){e.forEach(u=>{if(u){var d=u.getBoundingClientRect();d.width>a&&(a=d.width)}});var o=n?n.getBoundingClientRect().width:0,l=s+i,c=a+l+o+(n?r:0);return Math.round(c)}return 0},TTe=["dangerouslySetInnerHTML","ticks"];function N7(t,e,n){return(e=_Te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Te(t){var e=ATe(t,"string");return typeof e=="symbol"?e:e+""}function ATe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O_(){return O_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O_.apply(null,arguments)}function RTe(t,e){if(t==null)return{};var n,r,s=$Te(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function $Te(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PTe(t){var e=Xn();return _.useEffect(()=>(e(mTe(t)),()=>{e(gTe(t))}),[t,e]),null}var jTe=t=>{var e,{yAxisId:n,className:r,width:s,label:i}=t,a=_.useRef(null),o=_.useRef(null),l=it(vH),c=Ii(),u=Xn(),d="yAxis",p=it(S=>Nm(S,d,n,c)),g=it(S=>oK(S,n)),y=it(S=>Pke(S,n)),x=it(S=>uK(S,d,n,c));if(_.useLayoutEffect(()=>{var S;if(!(s!=="auto"||!g||yP(i)||_.isValidElement(i))){var I=a.current,E=I==null||(S=I.tickRefs)===null||S===void 0?void 0:S.current,{tickSize:j,tickMargin:A}=I.props,T=ETe({ticks:E,label:o.current,labelGapWithTick:5,tickSize:j,tickMargin:A});Math.round(g.width)!==Math.round(T)&&u(yTe({id:n,width:T}))}},[a,a==null||(e=a.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,g?.width,g,u,i,n,s]),g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:w}=t,k=RTe(t,TTe);return _.createElement(Wu,O_({},k,{ref:a,labelRef:o,scale:p,x:y.x,y:y.y,width:g.width,height:g.height,className:Bt("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:x}))},DTe=t=>{var e,n,r,s,i;return _.createElement(_.Fragment,null,_.createElement(PTe,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(s=t.minTickGap)!==null&&s!==void 0?s:5,tick:(i=t.tick)!==null&&i!==void 0?i:!0,tickFormatter:t.tickFormatter}),_.createElement(jTe,t))},OTe={allowDataOverflow:Di.allowDataOverflow,allowDecimals:Di.allowDecimals,allowDuplicatedCategory:Di.allowDuplicatedCategory,hide:!1,mirror:Di.mirror,orientation:Di.orientation,padding:Di.padding,reversed:Di.reversed,scale:Di.scale,tickCount:Di.tickCount,type:Di.type,width:Di.width,yAxisId:0};class _u extends _.Component{render(){return _.createElement(DTe,this.props)}}N7(_u,"displayName","YAxis");N7(_u,"defaultProps",OTe);var BE={exports:{}},zE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zz;function MTe(){if(zz)return zE;zz=1;var t=rm();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,o=t.useDebugValue;return zE.useSyncExternalStoreWithSelector=function(l,c,u,d,p){var g=s(null);if(g.current===null){var y={hasValue:!1,value:null};g.current=y}else y=g.current;g=a(function(){function v(E){if(!w){if(w=!0,k=E,E=d(E),p!==void 0&&y.hasValue){var j=y.value;if(p(j,E))return S=j}return S=E}if(j=S,n(k,E))return j;var A=d(E);return p!==void 0&&p(j,A)?(k=E,j):(k=E,S=A)}var w=!1,k,S,I=u===void 0?null:u;return[function(){return v(c())},I===null?void 0:function(){return v(I())}]},[c,u,d,p]);var x=r(l,g[0],g[1]);return i(function(){y.hasValue=!0,y.value=x},[x]),o(x),x},zE}var Uz;function FTe(){return Uz||(Uz=1,BE.exports=MTe()),BE.exports}FTe();function LTe(t){t()}function VTe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){LTe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var Wz={notify(){},get:()=>[]};function BTe(t,e){let n,r=Wz,s=0,i=!1;function a(x){u();const v=r.subscribe(x);let w=!1;return()=>{w||(w=!0,v(),d())}}function o(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return i}function u(){s++,n||(n=t.subscribe(l),r=VTe())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=Wz)}function p(){i||(i=!0,u())}function g(){i&&(i=!1,d())}const y={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return y}var zTe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UTe=zTe(),WTe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GTe=WTe(),HTe=()=>UTe||GTe?_.useLayoutEffect:_.useEffect,qTe=HTe(),KTe=Symbol.for("react-redux-context"),XTe=typeof globalThis<"u"?globalThis:{};function YTe(){if(!_.createContext)return{};const t=XTe[KTe]??=new Map;let e=t.get(_.createContext);return e||(e=_.createContext(null),t.set(_.createContext,e)),e}var QTe=YTe();function JTe(t){const{children:e,context:n,serverState:r,store:s}=t,i=_.useMemo(()=>{const l=BTe(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),a=_.useMemo(()=>s.getState(),[s]);qTe(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const o=n||QTe;return _.createElement(o.Provider,{value:i},e)}var ZTe=JTe,e_e=(t,e)=>e,OP=ve([e_e,Yt,Mq,Fr,CK,gc,FSe,Or],USe),MP=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},C7=Ea("mouseClick"),I7=vx();I7.startListening({actionCreator:C7,effect:(t,e)=>{var n=t.payload,r=OP(e.getState(),MP(n));r?.activeIndex!=null&&e.dispatch(Hke({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var M_=Ea("mouseMove"),E7=vx();E7.startListening({actionCreator:M_,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=oP(r,r.tooltip.settings.shared),i=OP(r,MP(n));s==="axis"&&(i?.activeIndex!=null?e.dispatch(xK({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):e.dispatch(yK()))}});function t_e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var Gz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},T7=Zi({name:"rootProps",initialState:Gz,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:Gz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),n_e=T7.reducer,{updateOptions:r_e}=T7.actions,_7=Zi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:s_e}=_7.actions,i_e=_7.reducer,A7=Ea("keyDown"),R7=Ea("focus"),FP=vx();FP.startListening({actionCreator:A7,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip,i=t.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var a=Number(lP(s,Im(n))),o=gc(n);if(i==="Enter"){var l=E1(n,"axis","hover",String(s.index));e.dispatch(T_({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var c=Mke(n),u=c==="left-to-right"?1:-1,d=i==="ArrowRight"?1:-1,p=a+d*u;if(!(o==null||p>=o.length||p<0)){var g=E1(n,"axis","hover",String(p));e.dispatch(T_({active:!0,activeIndex:p.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});FP.startListening({actionCreator:R7,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",a=E1(n,"axis","hover",String(i));e.dispatch(T_({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:a}))}}}});var va=Ea("externalEvent"),$7=vx();$7.startListening({actionCreator:va,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:TSe(n),activeDataKey:_K(n),activeIndex:Eu(n),activeLabel:TK(n),activeTooltipIndex:Eu(n),isTooltipActive:_Se(n)};t.payload.handler(r,t.payload.reactEvent)}}});var a_e=ve([Cm],t=>t.tooltipItemPayloads),o_e=ve([a_e,_x,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var s=t.find(o=>o.settings.dataKey===r);if(s!=null){var{positions:i}=s;if(i!=null){var a=e(i,n);return a}}}),P7=Ea("touchMove"),j7=vx();j7.startListening({actionCreator:P7,effect:(t,e)=>{var n=t.payload,r=e.getState(),s=oP(r,r.tooltip.settings.shared);if(s==="axis"){var i=OP(r,MP({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));i?.activeIndex!=null&&e.dispatch(xK({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var a,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(yH),u=(a=l.getAttribute(xH))!==null&&a!==void 0?a:void 0,d=o_e(e.getState(),c,u);e.dispatch(gK({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}});var l_e=U9({brush:QIe,cartesianAxis:xTe,chartData:iNe,errorBars:tIe,graphicalItems:uCe,layout:Fxe,legend:Cve,options:eNe,polarAxis:A2e,polarOptions:i_e,referenceElements:sEe,rootProps:n_e,tooltip:qke}),c_e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return cxe({reducer:l_e,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([I7.middleware,E7.middleware,FP.middleware,$7.middleware,j7.middleware]),devTools:{serialize:{replacer:t_e},name:"recharts-".concat(n)}})};function D7(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,s=Ii(),i=_.useRef(null);if(s)return n;i.current==null&&(i.current=c_e(e,r));var a=QR;return _.createElement(ZTe,{context:a,store:i.current},n)}function O7(t){var{layout:e,width:n,height:r,margin:s}=t,i=Xn(),a=Ii();return _.useEffect(()=>{a||(i(Dxe(e)),i(Oxe({width:n,height:r})),i(jxe(s)))},[i,a,e,n,r,s]),null}function M7(t){var e=Xn();return _.useEffect(()=>{e(r_e(t))},[e,t]),null}var u_e=["children"];function d_e(t,e){if(t==null)return{};var n,r,s=h_e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function h_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(null,arguments)}var f_e={width:"100%",height:"100%"},p_e=_.forwardRef((t,e)=>{var n=a$(),r=o$(),s=NH();if(!Lp(n)||!Lp(r))return null;var{children:i,otherAttributes:a,title:o,desc:l}=t,c,u;return typeof a.tabIndex=="number"?c=a.tabIndex:c=s?0:void 0,typeof a.role=="string"?u=a.role:u=s?"application":void 0,_.createElement(LR,j1({},a,{title:o,desc:l,role:u,tabIndex:c,width:n,height:r,style:f_e,ref:e}),i)}),m_e=t=>{var{children:e}=t,n=it(oS);if(!n)return null;var{width:r,height:s,y:i,x:a}=n;return _.createElement(LR,{width:r,height:s,x:a,y:i},e)},Hz=_.forwardRef((t,e)=>{var{children:n}=t,r=d_e(t,u_e),s=Ii();return s?_.createElement(m_e,null,n):_.createElement(p_e,j1({ref:e},r),n)});function g_e(){var t=Xn(),[e,n]=_.useState(null),r=it(fve);return _.useEffect(()=>{if(e!=null){var s=e.getBoundingClientRect(),i=s.width/e.offsetWidth;Qi(i)&&i!==r&&t(Mxe(i))}},[e,t,r]),n}function qz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function y_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qz(Object(n),!0).forEach(function(r){x_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x_e(t,e,n){return(e=v_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v_e(t){var e=b_e(t,"string");return typeof e=="symbol"?e:e+""}function b_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w_e=_.forwardRef((t,e)=>{var{children:n,className:r,height:s,onClick:i,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:p,onTouchEnd:g,onTouchMove:y,onTouchStart:x,style:v,width:w}=t,k=Xn(),[S,I]=_.useState(null),[E,j]=_.useState(null);lNe();var A=g_e(),T=_.useCallback(Y=>{A(Y),typeof e=="function"&&e(Y),I(Y),j(Y)},[A,e,I,j]),$=_.useCallback(Y=>{k(C7(Y)),k(va({handler:i,reactEvent:Y}))},[k,i]),D=_.useCallback(Y=>{k(M_(Y)),k(va({handler:c,reactEvent:Y}))},[k,c]),R=_.useCallback(Y=>{k(yK()),k(va({handler:u,reactEvent:Y}))},[k,u]),F=_.useCallback(Y=>{k(M_(Y)),k(va({handler:d,reactEvent:Y}))},[k,d]),L=_.useCallback(()=>{k(R7())},[k]),K=_.useCallback(Y=>{k(A7(Y.key))},[k]),X=_.useCallback(Y=>{k(va({handler:a,reactEvent:Y}))},[k,a]),q=_.useCallback(Y=>{k(va({handler:o,reactEvent:Y}))},[k,o]),Q=_.useCallback(Y=>{k(va({handler:l,reactEvent:Y}))},[k,l]),z=_.useCallback(Y=>{k(va({handler:p,reactEvent:Y}))},[k,p]),H=_.useCallback(Y=>{k(va({handler:x,reactEvent:Y}))},[k,x]),ee=_.useCallback(Y=>{k(P7(Y)),k(va({handler:y,reactEvent:Y}))},[k,y]),G=_.useCallback(Y=>{k(va({handler:g,reactEvent:Y}))},[k,g]);return _.createElement(DK.Provider,{value:S},_.createElement(h9.Provider,{value:E},_.createElement("div",{className:Bt("recharts-wrapper",r),style:y_e({position:"relative",cursor:"default",width:w,height:s},v),onClick:$,onContextMenu:X,onDoubleClick:q,onFocus:L,onKeyDown:K,onMouseDown:Q,onMouseEnter:D,onMouseLeave:R,onMouseMove:F,onMouseUp:z,onTouchEnd:G,onTouchMove:ee,onTouchStart:H,ref:T},n)))}),k_e=["children","className","width","height","style","compact","title","desc"];function S_e(t,e){if(t==null)return{};var n,r,s=N_e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function N_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var F7=_.forwardRef((t,e)=>{var{children:n,className:r,width:s,height:i,style:a,compact:o,title:l,desc:c}=t,u=S_e(t,k_e),d=dc(u);return o?_.createElement(Hz,{otherAttributes:d,title:l,desc:c},n):_.createElement(w_e,{className:r,style:a,width:s,height:i,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},_.createElement(Hz,{otherAttributes:d,title:l,desc:c,ref:e},_.createElement(aEe,null,n)))}),C_e=["width","height"];function F_(){return F_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F_.apply(null,arguments)}function I_e(t,e){if(t==null)return{};var n,r,s=E_e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function E_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var T_e={top:5,right:5,bottom:5,left:5},__e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:T_e,reverseStackOrder:!1,syncMethod:"index"},L7=_.forwardRef(function(e,n){var r,s=ea(e.categoricalChartProps,__e),{width:i,height:a}=s,o=I_e(s,C_e);if(!Lp(i)||!Lp(a))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:p}=e,g={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return _.createElement(D7,{preloadedState:{options:g},reduxStoreName:(r=p.id)!==null&&r!==void 0?r:l},_.createElement(u7,{chartData:p.data}),_.createElement(O7,{width:i,height:a,layout:s.layout,margin:s.margin}),_.createElement(M7,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(F7,F_({},o,{width:i,height:a,ref:n})))}),A_e=["axis"],Px=_.forwardRef((t,e)=>_.createElement(L7,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:A_e,tooltipPayloadSearcher:gP,categoricalChartProps:t,ref:e})),R_e=["axis","item"],$_e=_.forwardRef((t,e)=>_.createElement(L7,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:R_e,tooltipPayloadSearcher:gP,categoricalChartProps:t,ref:e}));function P_e(t){var e=Xn();return _.useEffect(()=>{e(s_e(t))},[e,t]),null}var j_e=["width","height","layout"];function L_(){return L_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L_.apply(null,arguments)}function D_e(t,e){if(t==null)return{};var n,r,s=O_e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function O_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var M_e={top:5,right:5,bottom:5,left:5},F_e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:M_e,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},L_e=_.forwardRef(function(e,n){var r,s=ea(e.categoricalChartProps,F_e),{width:i,height:a,layout:o}=s,l=D_e(s,j_e);if(!Lp(i)||!Lp(a))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:p}=e,g={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:p,eventEmitter:void 0};return _.createElement(D7,{preloadedState:{options:g},reduxStoreName:(r=s.id)!==null&&r!==void 0?r:c},_.createElement(u7,{chartData:s.data}),_.createElement(O7,{width:i,height:a,layout:o,margin:s.margin}),_.createElement(M7,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(P_e,{cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius}),_.createElement(F7,L_({width:i,height:a},l,{ref:n})))}),V_e=["item"],B_e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},z_e=_.forwardRef((t,e)=>{var n=ea(t,B_e);return _.createElement(L_e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:V_e,tooltipPayloadSearcher:gP,categoricalChartProps:n,ref:e})});const zb=t=>{if(!t)return"N/A";const e=t.seconds?new Date(t.seconds*1e3):new Date(t);return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})},U_e=(t,e)=>t>10&&e>20?h.jsx(fh,{className:"h-4 w-4 text-green-500"}):t<=10?h.jsx(DA,{className:"h-4 w-4 text-red-500"}):h.jsx(OA,{className:"h-4 w-4 text-yellow-500"}),W_e=(t,e)=>t>10&&e>20?"Online":t<=10?"Baterai Rendah":"Maintenance",G_e=t=>t>50?{status:"Baik",color:"bg-green-500"}:t>20?{status:"Rendah",color:"bg-yellow-500"}:{status:"Kritis",color:"bg-red-500"},H_e=t=>t>70?{status:"Kuat",color:"bg-green-500"}:t>30?{status:"Sedang",color:"bg-yellow-500"}:{status:"Lemah",color:"bg-red-500"},q_e=({active:t,payload:e,label:n})=>t&&e&&e.length?h.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[h.jsx("p",{className:"font-medium",children:`Waktu: ${n}`}),e.map((r,s)=>h.jsxs("p",{style:{color:r.color},children:[`${r.dataKey==="temperature"?"Suhu":r.dataKey==="humidity"?"Kelembaban":r.dataKey==="pm25"?"PM2.5":r.dataKey==="aqi"?"AQI":r.dataKey}: ${r.value.toFixed(2)}`,r.dataKey==="temperature"?"C":r.dataKey==="humidity"?"%":r.dataKey==="pm25"?" g/m":""]},s))]}):null;function Kz({selectedRobotId:t,onRobotSelect:e}){const{robots:n,airReadings:r,loading:s,error:i}=yl(),a=n.find(g=>g.robot_id===t),o=_.useMemo(()=>!r||!t?[]:r.filter(g=>g.robot_id===t).sort((g,y)=>{const x=g.timestamp?.seconds||0,v=y.timestamp?.seconds||0;return x-v}),[r,t]),l=_.useMemo(()=>o.length?o.slice(-15).map(g=>{const y=Number(g.dust_pm25)||0,x=Number(g.gas_ppm)||0,v=y>0?Math.round(y*2.5+x*.5):0;return{time:zb(g.timestamp),temperature:Number(g.temperature)||0,humidity:Number(g.humidity)||0,pm25:y,aqi:v,timestamp:g.timestamp?.seconds||0}}):[],[o]),c=_.useMemo(()=>{if(!o.length||!a)return{uptime:0,dataPoints:0,avgTemperature:0,avgHumidity:0,efficiency:0,lastMaintenance:"N/A"};const g=o.filter(k=>{const S=k.timestamp?.seconds*1e3;return Date.now()-S<=1440*60*1e3}),y=a.battery>10&&a.signal_strength>20?Math.min(99.5,g.length/24*100):0,x=g.length>0?g.reduce((k,S)=>k+(Number(S.temperature)||0),0)/g.length:0,v=g.length>0?g.reduce((k,S)=>k+(Number(S.humidity)||0),0)/g.length:0,w=Math.min(100,y*.4+a.battery*.3+a.signal_strength*.3);return{uptime:Math.round(y*10)/10,dataPoints:o.length,avgTemperature:Math.round(x*10)/10,avgHumidity:Math.round(v*10)/10,efficiency:Math.round(w),lastMaintenance:a.last_seen?zb(a.last_seen):"N/A"}},[o,a]);if(s)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ki,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),h.jsx("p",{children:"Memuat data robot..."})]})});if(i||!a)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ts,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),h.jsx("p",{children:"Robot tidak ditemukan atau tidak ada data"})]})});const u=o[o.length-1],d=G_e(a.battery),p=H_e(a.signal_strength);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Robot Dashboard"}),h.jsx("p",{className:"text-muted-foreground",children:"Monitoring dan kontrol robot GREENOVA"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs(hi,{value:t,onValueChange:e,children:[h.jsx(pi,{className:"w-48",children:h.jsx(fi,{placeholder:"Pilih Robot"})}),h.jsx(mi,{children:n.map(g=>h.jsx(Ot,{value:g.robot_id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wn,{className:"h-4 w-4"}),g.robot_id]})},g.robot_id))})]}),h.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[h.jsx(ki,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Status Robot"}),h.jsx("p",{className:"text-2xl font-bold",children:W_e(a.battery,a.signal_strength)})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:U_e(a.battery,a.signal_strength)})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[h.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"}),h.jsxs("span",{className:"text-muted-foreground",children:["Update: ",zb(a.last_seen)]})]})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Baterai"}),h.jsxs("p",{className:"text-2xl font-bold",children:[a.battery,"%"]}),h.jsx(Ft,{className:`${d.color} text-white mt-2`,children:d.status})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(uk,{className:"h-6 w-6 text-primary"})})]}),h.jsx("div",{className:"mt-4",children:h.jsx(au,{value:a.battery,className:"w-full"})})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Sinyal"}),h.jsxs("p",{className:"text-2xl font-bold",children:[a.signal_strength,"%"]}),h.jsx(Ft,{className:`${p.color} text-white mt-2`,children:p.status})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(iU,{className:"h-6 w-6 text-primary"})})]}),h.jsx("div",{className:"mt-4",children:h.jsx(au,{value:a.signal_strength,className:"w-full"})})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"AQI Terakhir"}),h.jsx("p",{className:"text-2xl font-bold",children:u?Math.round(Number(u.dust_pm25)*2.5+Number(u.gas_ppm)*.5):"N/A"})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(fu,{className:"h-6 w-6 text-primary"})})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[h.jsx(fo,{className:"h-4 w-4 text-green-500"}),h.jsxs("span",{className:"text-green-500",children:[o.length," data points"]})]})]})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(sm,{className:"h-5 w-5"}),"Performance Summary"]})}),h.jsx(Oe,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center",children:h.jsx(ro,{className:"h-5 w-5 text-green-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime (24h)"}),h.jsxs("p",{className:"text-xl font-bold",children:[c.uptime,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:h.jsx(mk,{className:"h-5 w-5 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Data Points"}),h.jsx("p",{className:"text-xl font-bold",children:c.dataPoints})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-red-50 rounded-full flex items-center justify-center",children:h.jsx(ix,{className:"h-5 w-5 text-red-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Temperature (24h)"}),h.jsxs("p",{className:"text-xl font-bold",children:[c.avgTemperature,"C"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-cyan-50 rounded-full flex items-center justify-center",children:h.jsx(Zr,{className:"h-5 w-5 text-cyan-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Humidity (24h)"}),h.jsxs("p",{className:"text-xl font-bold",children:[c.avgHumidity,"%"]})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center",children:h.jsx(qre,{className:"h-5 w-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Efficiency Score"}),h.jsxs("p",{className:"text-xl font-bold",children:[c.efficiency,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-yellow-50 rounded-full flex items-center justify-center",children:h.jsx(OA,{className:"h-5 w-5 text-yellow-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Update"}),h.jsx("p",{className:"text-sm font-medium",children:c.lastMaintenance})]})]})]})]})})]}),h.jsxs(Uh,{defaultValue:"sensors",className:"space-y-6",children:[h.jsxs(Wh,{children:[h.jsx(Ln,{value:"sensors",children:"Data Sensor"}),h.jsx(Ln,{value:"control",children:"Kontrol Robot"}),h.jsx(Ln,{value:"maintenance",children:"Maintenance"})]}),h.jsx(Vn,{value:"sensors",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Grafik Sensor - 15 Data Terakhir"})}),h.jsx(Oe,{children:h.jsx("div",{className:"h-80",children:h.jsx(lh,{width:"100%",height:"100%",children:h.jsxs(Px,{data:l,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"time",tick:{fontSize:12},angle:-45,textAnchor:"end",height:70}),h.jsx(_u,{}),h.jsx(oh,{content:h.jsx(q_e,{})}),h.jsx(bi,{type:"monotone",dataKey:"temperature",stroke:"#ef4444",strokeWidth:2,name:"Suhu"}),h.jsx(bi,{type:"monotone",dataKey:"humidity",stroke:"#3b82f6",strokeWidth:2,name:"Kelembaban"}),h.jsx(bi,{type:"monotone",dataKey:"pm25",stroke:"#f59e0b",strokeWidth:2,name:"PM2.5"}),h.jsx(bi,{type:"monotone",dataKey:"aqi",stroke:"#22c55e",strokeWidth:2,name:"AQI"})]})})})})]})}),h.jsx(Vn,{value:"control",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Fan Control"})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{children:"Status Fan:"}),h.jsx(Ft,{className:a.fan_status?"bg-green-500":"bg-gray-500",children:a.fan_status?"ON":"OFF"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Le,{variant:a.fan_status?"default":"outline",size:"sm",className:"flex-1",children:[h.jsx(Ep,{className:"h-4 w-4 mr-2"}),"Turn ON"]}),h.jsxs(Le,{variant:a.fan_status?"outline":"default",size:"sm",className:"flex-1",children:[h.jsx(pk,{className:"h-4 w-4 mr-2"}),"Turn OFF"]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"System Info"})}),h.jsxs(Oe,{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Robot ID:"}),h.jsx("span",{className:"font-medium",children:a.robot_id})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Location:"}),h.jsx("span",{className:"font-medium",children:a.city_loc||"N/A"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Last Seen:"}),h.jsx("span",{className:"font-medium",children:zb(a.last_seen)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Data Points:"}),h.jsx("span",{className:"font-medium",children:o.length})]})]})]})]})}),h.jsx(Vn,{value:"maintenance",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Maintenance Schedule"})}),h.jsx(Oe,{children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(En,{className:"h-5 w-5 text-green-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Sensor Cleaning"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed 2 days ago"})]})]}),h.jsx(Ft,{className:"bg-green-500",children:"Complete"})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Wi,{className:"h-5 w-5 text-yellow-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Battery Check"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Due in 5 days"})]})]}),h.jsx(Ft,{className:"bg-yellow-500",children:"Pending"})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ts,{className:"h-5 w-5 text-red-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Filter Replacement"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Overdue by 1 day"})]})]}),h.jsx(Ft,{className:"bg-red-500",children:"Overdue"})]})]})})]})})]})]})}const K_e=["Bagaimana kualitas udara sekarang?","Apa itu PM2.5?","Bagaimana kelembaban tanah di tanaman A?","Rekomendasi untuk lingkungan?"],X_e=t=>t<=50?"Baik":t<=100?"Sedang":t<=150?"Tidak Sehat untuk Sensitif":t<=200?"Tidak Sehat":"Sangat Tidak Sehat",Y_e=({text:t,onComplete:e})=>{const[n,r]=_.useState(""),[s,i]=_.useState(0);return _.useEffect(()=>{if(s<t.length){const a=setTimeout(()=>{r(o=>o+t[s]),i(o=>o+1)},20);return()=>clearTimeout(a)}else e()},[s,t,e]),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />")}}),s<t.length&&h.jsx("span",{className:"inline-block w-2 h-4 bg-primary animate-pulse"})]})};function Q_e(){const[t,e]=_.useState([{id:"1",text:` Halo! Saya **GREENOVA AI**, asisten pintar untuk monitoring lingkungan dan pertanian berkelanjutan!

 Saya bisa membantu Anda dengan:
 **Data sensor real-time** (suhu, kelembaban, PM2.5)
 **Kondisi tanaman** dan rekomendasi penyiraman
 **Analisis tren lingkungan**
 **Prediksi kualitas udara** dan dampaknya

Silakan tanya apa saja tentang data lingkungan! `,isBot:!0,timestamp:new Date}]),[n,r]=_.useState(""),[s,i]=_.useState(!1),[a,o]=_.useState(""),[l,c]=_.useState(!1),{airReadings:u,plantReadings:d,loading:p}=yl(),g=u.length>0?u[0]:null,y=d.length>0?d[0]:null;_.useEffect(()=>{const E=sessionStorage.getItem("autoMessage");E&&(r(E),sessionStorage.removeItem("autoMessage"),setTimeout(async()=>{const j={id:Date.now().toString(),text:E,isBot:!1,timestamp:new Date};e($=>[...$,j]),r("");const A=await x(j.text),T={id:(Date.now()+1).toString(),text:A,isBot:!0,timestamp:new Date};e($=>[...$,T])},1e3))},[]),_.useEffect(()=>{setTimeout(()=>{const E=document.querySelector("[data-radix-scroll-area-content]");E&&(E.scrollTop=E.scrollHeight)},100)},[t]);const x=async E=>{i(!0);let j="";if(g){const F=g.dust_pm25?Math.round(g.dust_pm25*2.5+g.gas_ppm*.5):0;j+=`
Data Udara Terbaru:
- Suhu: ${g.temperature||"N/A"}C
- Kelembaban Udara: ${g.humidity||"N/A"}%
- PM2.5: ${g.dust_pm25||"N/A"} g/m
- Gas PPM: ${g.gas_ppm||"N/A"} ppm
- Kualitas Udara (AQI): ${F} (${X_e(F)})
      `.trim()}y&&(j+=`

Data Tanaman Terbaru:
- Kelembaban Tanaman A: ${y.moisture_percent||"N/A"}% (${y.condition||"N/A"})
      `.trim());const $={contents:[{role:"user",parts:[{text:`
      Anda adalah GREENOVA AI. Jawablah pertanyaan pengguna dalam Bahasa Indonesia yang santai, ramah, dan tidak kaku.
      Gunakan data sensor yang disediakan di bawah ini untuk menjawab pertanyaan spesifik tentang kondisi lingkungan terkini.

      ${j}

      Instruksi Penting:
      1. Anda HANYA boleh menjawab pertanyaan yang berkaitan dengan data lingkungan (udara, tanah, suhu, kelembaban) dan tidak ada yang lain.
      2. Jangan pernah menjawab pertanyaan tentang status sistem, seperti level baterai robot, kekuatan sinyal, atau status kipas.
      3. Jika pertanyaan di luar topik (misalnya: tentang sejarah, matematika, atau status sistem), berikan respons yang sopan bahwa Anda tidak bisa menjawab.

      Contoh respons penolakan yang relevan:
      - "Maaf, saya tidak dapat memberikan informasi tentang status sistem seperti baterai atau sinyal. Fokus saya adalah pada data lingkungan."
      - "Topik itu di luar keahlian saya, nih. Kalau mau tanya seputar polusi udara atau kondisi tanaman, saya siap bantu kok!"
      
      Pertanyaan Pengguna: ${E}
    `}]}]},R="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyB9EsmQ8_mthCuXGMSL3e5EezFhRuqYg-Q";try{const L=await(await fetch(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)})).json();return L.candidates&&L.candidates.length>0&&L.candidates[0].content&&L.candidates[0].content.parts&&L.candidates[0].content.parts.length>0?L.candidates[0].content.parts[0].text:"Maaf, saya tidak dapat memproses permintaan ini saat ini. Silakan coba lagi nanti."}catch(F){return console.error("Error fetching AI response:",F),"Terjadi kesalahan saat memproses permintaan. Mohon maaf atas ketidaknyamanannya."}finally{i(!1)}},v=async()=>{if(!n.trim()||s)return;const E={id:Date.now().toString(),text:n,isBot:!1,timestamp:new Date};e(T=>[...T,E]),r(""),c(!0),o("");const j=await x(E.text);c(!1),o(j);const A={id:(Date.now()+1).toString(),text:j,isBot:!0,timestamp:new Date,typing:!0};e(T=>[...T,A])},w=E=>{e(j=>j.map(A=>A.id===E?{...A,typing:!1}:A))},k=E=>{r(E),setTimeout(()=>{document.querySelector('input[placeholder*="Tanyakan tentang"]')?.focus()},0)},S=()=>{const E=document.querySelector("[data-radix-scroll-area-content]");E&&(E.scrollTop=E.scrollHeight)},I=E=>E.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />");return p?h.jsx("div",{children:"Memuat data..."}):h.jsxs("div",{className:"h-full flex flex-col max-w-4xl mx-auto",children:[h.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary text-white p-6 rounded-t-xl",children:h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:h.jsx(wn,{className:"h-6 w-6"})}),h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white"})]}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold",children:"GREENOVA AI Assistant"}),h.jsxs("div",{className:"flex items-center gap-2 text-white/80 text-sm",children:[h.jsx("div",{className:`w-2 h-2 ${s||l?"bg-orange-400":"bg-green-400"} rounded-full ${s||l?"animate-pulse":""}`}),s||l?"Mengetik...":"Online - Siap membantu Anda"]})]})]})}),h.jsx(De,{className:"flex-1 flex flex-col rounded-t-none border-t-0",children:h.jsxs(Oe,{className:"flex-1 flex flex-col p-0",children:[h.jsxs("div",{className:"relative flex-1",children:[h.jsx(tW,{className:"h-full p-4",children:h.jsxs("div",{className:"space-y-4",children:[t.map(E=>h.jsxs("div",{className:`flex gap-3 ${E.isBot?"justify-start":"justify-end"}`,children:[E.isBot&&h.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:h.jsx(wn,{className:"h-4 w-4 text-primary"})}),h.jsxs("div",{className:`max-w-[80%] ${E.isBot?"order-2":"order-1"}`,children:[h.jsx("div",{className:`rounded-2xl px-4 py-3 ${E.isBot?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground ml-auto"}`,children:E.isBot&&E.typing?h.jsx(Y_e,{text:E.text,onComplete:()=>w(E.id)}):h.jsx("div",{className:"whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:I(E.text)}})}),h.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-muted-foreground ${E.isBot?"justify-start":"justify-end"}`,children:[h.jsx(Wi,{className:"h-3 w-3"}),E.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),!E.isBot&&h.jsx(En,{className:"h-3 w-3"})]})]}),!E.isBot&&h.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:h.jsx(Cw,{className:"h-4 w-4 text-primary"})})]},E.id)),l&&h.jsxs("div",{className:"flex gap-3 justify-start",children:[h.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:h.jsx(wn,{className:"h-4 w-4 text-primary"})}),h.jsx("div",{className:"max-w-[80%]",children:h.jsx("div",{className:"rounded-2xl px-4 py-3 bg-muted text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]})]})}),h.jsx(Le,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 w-8 h-8 rounded-full shadow-lg",onClick:S,children:h.jsx(Sw,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"px-4 py-2 border-t border-border",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Zse,{className:"h-4 w-4 text-primary"}),h.jsx("span",{className:"text-sm font-medium",children:"Pertanyaan Cepat:"})]}),h.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:K_e.map((E,j)=>h.jsx(Ft,{variant:"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors whitespace-nowrap",onClick:()=>k(E),children:E},j))})]}),h.jsxs("div",{className:"p-4 border-t border-border",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"flex-1 relative",children:h.jsx(Pt,{value:n,onChange:E=>r(E.target.value),onKeyDown:E=>E.key==="Enter"&&v(),placeholder:"Tanyakan tentang data lingkungan, status robot, atau kondisi tanaman...",className:"pr-20 bg-input-background",disabled:s||l})}),h.jsx(Le,{onClick:v,disabled:!n.trim()||s||l,className:"px-6",children:h.jsx(rU,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:" GREENOVA AI dapat memberikan informasi real-time tentang lingkungan dan pertanian"})]})]})})]})}const J_e=t=>{if(!t)return"N/A";const e=t.seconds?new Date(t.seconds*1e3):new Date(t);return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})},Z_e=t=>{if(!t)return"N/A";const e=t.seconds?new Date(t.seconds*1e3):new Date(t);return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})},Xz=t=>t<=50?{status:"Baik",color:"bg-green-500",textColor:"text-green-500",icon:En}:t<=100?{status:"Sedang",color:"bg-yellow-500",textColor:"text-yellow-500",icon:hh}:t<=150?{status:"Tidak Sehat untuk Sensitif",color:"bg-orange-500",textColor:"text-orange-500",icon:ts}:t<=200?{status:"Tidak Sehat",color:"bg-red-500",textColor:"text-red-500",icon:ts}:{status:"Sangat Tidak Sehat",color:"bg-purple-500",textColor:"text-purple-500",icon:ts},Yz=(t,e)=>{const n=e==="PM2.5"?[35,75,115]:[75,150,250];return t<=n[0]?{status:"Baik",color:"bg-green-500",textColor:"text-green-500",icon:En}:t<=n[1]?{status:"Sedang",color:"bg-yellow-500",textColor:"text-yellow-500",icon:hh}:t<=n[2]?{status:"Tidak Sehat",color:"bg-orange-500",textColor:"text-orange-500",icon:ts}:{status:"Berbahaya",color:"bg-red-500",textColor:"text-red-500",icon:ts}},Qz=({active:t,payload:e,label:n})=>t&&e&&e.length?h.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[h.jsx("p",{className:"font-medium",children:`Waktu: ${n}`}),e.map((r,s)=>h.jsxs("p",{style:{color:r.color},children:[`${r.dataKey==="pm25"?"PM2.5":r.dataKey==="pm10"?"PM10":r.dataKey==="aqi"?"AQI":r.dataKey}: ${r.value.toFixed(2)}`,r.dataKey==="pm25"||r.dataKey==="pm10"?" g/m":""]},s))]}):null;function eAe(){const{airReadings:t,loading:e,error:n}=yl(),r=_.useMemo(()=>{if(!t||t.length===0)return{current:null,hourly:[],daily:[],composition:[],trends:{aqi:0,pm25:0,pm10:0}};const S=t.filter(D=>D&&D.timestamp).sort((D,R)=>{const F=D.timestamp?.seconds||0,L=R.timestamp?.seconds||0;return F-L}),I=S[S.length-1],E=S.slice(-15).map(D=>{const R=Number(D.dust_pm25)||0,F=Number(D.gas_ppm)||0,L=R>0?Math.round(R*2.5+F*.5):0;return{time:Z_e(D.timestamp),pm25:R,pm10:F,aqi:L,temperature:Number(D.temperature)||0,humidity:Number(D.humidity)||0,timestamp:D.timestamp?.seconds||0}}),j={};S.forEach(D=>{if(!D.timestamp)return;const F=new Date(D.timestamp.seconds*1e3).toLocaleDateString("id-ID",{day:"numeric",month:"short"});j[F]||(j[F]=[]),j[F].push(D)});const A=Object.entries(j).slice(-7).map(([D,R])=>{const F=R.reduce((X,q)=>X+(Number(q.dust_pm25)||0),0)/R.length,L=R.reduce((X,q)=>X+(Number(q.gas_ppm)||0),0)/R.length,K=F>0?Math.round(F*2.5+L*.5):0;return{day:D,pm25:Number(F.toFixed(1)),pm10:Number(L.toFixed(1)),aqi:K}}),T=I?[{name:"PM2.5",value:Number(I.dust_pm25)||0,color:"#ef4444"},{name:"Gas",value:Number(I.gas_ppm)||0,color:"#f59e0b"}].filter(D=>D.value>0):[],$={aqi:0,pm25:0,pm10:0};if(S.length>1){const D=S.slice(-48,-24);if(D.length>0){const R=Number(I?.dust_pm25)||0,F=Number(I?.gas_ppm)||0,L=R>0?Math.round(R*2.5+F*.5):0,K=D.reduce((Q,z)=>Q+(Number(z.dust_pm25)||0),0)/D.length,X=D.reduce((Q,z)=>Q+(Number(z.gas_ppm)||0),0)/D.length,q=K>0?Math.round(K*2.5+X*.5):0;$.pm25=K>0?Math.round((R-K)/K*100):0,$.pm10=X>0?Math.round((F-X)/X*100):0,$.aqi=q>0?Math.round((L-q)/q*100):0}}return{current:I,hourly:E,daily:A,composition:T,trends:$}},[t]),[s,i]=_.useState({text:"",icon:fk}),[a,o]=_.useState("");if(_.useEffect(()=>{const S=async()=>{if(!r.current)return;const E=r.current,j=Number(E.dust_pm25)||0,A=Number(E.gas_ppm)||0,T=j>0?Math.round(j*2.5+A*.5):0,$=`
        Berikan rekomendasi singkat (maksimal 2 kalimat) dalam Bahasa Indonesia untuk kondisi udara saat ini:
        - PM2.5: ${j} g/m
        - Gas PPM: ${A} ppm
        - AQI: ${T}
        - Suhu: ${E.temperature||"N/A"}C
        - Kelembaban: ${E.humidity||"N/A"}%

        Berikan rekomendasi praktis untuk aktivitas sehari-hari.
      `;try{const R=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyB9EsmQ8_mthCuXGMSL3e5EezFhRuqYg-Q",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:$}]}]})})).json();R.candidates?.[0]?.content?.parts?.[0]?.text&&i({text:R.candidates[0].content.parts[0].text,icon:T<=50?En:T<=100?hh:ts})}catch(D){console.error("Error generating recommendations:",D),i({text:"Pantau terus kualitas udara dan gunakan masker jika diperlukan.",icon:hh})}},I=async()=>{if(!r.trends)return;const{aqi:E,pm25:j,pm10:A}=r.trends,T=`
        Jelaskan tren kualitas udara dalam 1 kalimat singkat berdasarkan perubahan:
        - AQI: ${E>0?"+":""}${E}%
        - PM2.5: ${j>0?"+":""}${j}%
        - Gas PPM: ${A>0?"+":""}${A}%
        
        Gunakan Bahasa Indonesia yang natural.
      `;try{const D=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyB9EsmQ8_mthCuXGMSL3e5EezFhRuqYg-Q",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:T}]}]})})).json();D.candidates?.[0]?.content?.parts?.[0]?.text&&o(D.candidates[0].content.parts[0].text)}catch($){console.error("Error generating trends:",$),o("Tren kualitas udara dalam monitoring.")}};r.current&&(S(),I())},[r.current]),e)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ki,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),h.jsx("p",{children:"Memuat data kualitas udara..."})]})});if(n||!r.current)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ts,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),h.jsx("p",{children:"Tidak ada data tersedia"})]})});const{current:l,hourly:c,daily:u,composition:d,trends:p}=r,g=Number(l.dust_pm25)||0,y=Number(l.gas_ppm)||0,x=g>0?Math.round(g*2.5+y*.5):0,v=Xz(x),w=Yz(g,"PM2.5"),k=Yz(y,"PM10");return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Analisis Kualitas Udara"}),h.jsx("p",{className:"text-muted-foreground",children:"Monitoring real-time dan analisis tren kualitas udara"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[h.jsx(ki,{className:"h-4 w-4 mr-2"}),"Refresh"]}),h.jsxs(Le,{variant:"outline",size:"sm",children:[h.jsx(AA,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(De,{className:"relative overflow-hidden",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-base text-muted-foreground mb-2",children:"Air Quality Index"}),h.jsx("p",{className:"text-4xl font-bold mb-3",children:x||"N/A"}),h.jsx(Ft,{className:`${v.color} text-white`,children:v.status})]}),h.jsx("div",{className:`w-16 h-16 rounded-full ${v.color} flex items-center justify-center flex-shrink-0`,children:h.jsx(v.icon,{className:"h-8 w-8 text-white"})})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[p.aqi>=0?h.jsx(ro,{className:`h-4 w-4 ${p.aqi>5?"text-red-500":"text-green-500"}`}):h.jsx(jd,{className:`h-4 w-4 ${p.aqi<-5?"text-green-500":"text-red-500"}`}),h.jsxs("span",{className:p.aqi>=0?p.aqi>5?"text-red-500":"text-green-500":p.aqi<-5?"text-green-500":"text-red-500",children:[p.aqi>0?"+":"",p.aqi,"% dari kemarin"]})]})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-base text-muted-foreground mb-2",children:"PM2.5"}),h.jsx("p",{className:"text-4xl font-bold mb-3",children:g>0?g.toFixed(1):"N/A"}),h.jsx(Ft,{className:`${w.color} text-white`,children:w.status})]}),h.jsx("div",{className:`w-16 h-16 rounded-full ${w.color} flex items-center justify-center flex-shrink-0`,children:h.jsx(w.icon,{className:"h-8 w-8 text-white"})})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[p.pm25>=0?h.jsx(ro,{className:`h-4 w-4 ${p.pm25>5?"text-red-500":"text-green-500"}`}):h.jsx(jd,{className:`h-4 w-4 ${p.pm25<-5?"text-green-500":"text-red-500"}`}),h.jsxs("span",{className:p.pm25>=0?p.pm25>5?"text-red-500":"text-green-500":p.pm25<-5?"text-green-500":"text-red-500",children:[p.pm25>0?"+":"",p.pm25,"% dari kemarin"]})]})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-base text-muted-foreground mb-2",children:"Gas PPM"}),h.jsx("p",{className:"text-4xl font-bold mb-3",children:y>0?y.toFixed(1):"N/A"}),h.jsx(Ft,{className:`${k.color} text-white`,children:k.status})]}),h.jsx("div",{className:`w-16 h-16 rounded-full ${k.color} flex items-center justify-center flex-shrink-0`,children:h.jsx(k.icon,{className:"h-8 w-8 text-white"})})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[p.pm10>=0?h.jsx(ro,{className:`h-4 w-4 ${p.pm10>5?"text-red-500":"text-green-500"}`}):h.jsx(jd,{className:`h-4 w-4 ${p.pm10<-5?"text-green-500":"text-red-500"}`}),h.jsxs("span",{className:p.pm10>=0?p.pm10>5?"text-red-500":"text-green-500":p.pm10<-5?"text-green-500":"text-red-500",children:[p.pm10>0?"+":"",p.pm10,"% dari kemarin"]})]})]})})]}),h.jsx(De,{children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0",children:h.jsx(s.icon,{className:"h-6 w-6 text-primary"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold mb-2",children:"Rekomendasi AI GREENOVA"}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.text})]})]})})}),h.jsxs(Uh,{defaultValue:"24h",className:"space-y-6",children:[h.jsxs(Wh,{children:[h.jsx(Ln,{value:"24h",children:"24 Jam Terakhir"}),h.jsx(Ln,{value:"7d",children:"7 Hari Terakhir"}),h.jsx(Ln,{value:"composition",children:"Komposisi"})]}),h.jsx(Vn,{value:"24h",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Grafik 15 Data Terakhir"})}),h.jsx(Oe,{children:h.jsx("div",{className:"h-80",children:h.jsx(lh,{width:"100%",height:"100%",children:h.jsxs(Px,{data:c,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"time",tick:{fontSize:12},angle:-45,textAnchor:"end",height:70}),h.jsx(_u,{}),h.jsx(oh,{content:h.jsx(Qz,{})}),h.jsx(Ly,{}),h.jsx(bi,{type:"monotone",dataKey:"aqi",stroke:"#ef4444",strokeWidth:2,name:"AQI"}),h.jsx(bi,{type:"monotone",dataKey:"pm25",stroke:"#f59e0b",strokeWidth:2,name:"PM2.5"}),h.jsx(bi,{type:"monotone",dataKey:"pm10",stroke:"#3b82f6",strokeWidth:2,name:"Gas PPM"})]})})})})]})}),h.jsx(Vn,{value:"7d",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{children:["Tren 7 Hari - ",u.length>0?`${u[0]?.day} - ${u[u.length-1]?.day}`:"Tidak ada data"]})}),h.jsx(Oe,{children:h.jsx("div",{className:"h-80",children:h.jsx(lh,{width:"100%",height:"100%",children:h.jsxs($_e,{data:u,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"day"}),h.jsx(_u,{}),h.jsx(oh,{content:h.jsx(Qz,{})}),h.jsx(Ly,{}),h.jsx(fw,{dataKey:"aqi",fill:"#ef4444",name:"AQI"}),h.jsx(fw,{dataKey:"pm25",fill:"#f59e0b",name:"PM2.5"}),h.jsx(fw,{dataKey:"pm10",fill:"#3b82f6",name:"Gas PPM"})]})})})})]})}),h.jsx(Vn,{value:"composition",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Komposisi Polutan"})}),h.jsx(Oe,{children:h.jsx("div",{className:"h-80",children:h.jsx(lh,{width:"100%",height:"100%",children:h.jsxs(z_e,{children:[h.jsx(n7,{data:d,cx:"50%",cy:"50%",labelLine:!1,label:({name:S,value:I})=>`${S}: ${I}`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d.map((S,I)=>h.jsx(Rx,{fill:S.color},`cell-${I}`))}),h.jsx(oh,{})]})})})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Analisis Tren"})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center flex-shrink-0",children:h.jsx(fo,{className:"h-6 w-6 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium mb-1",children:"Ringkasan Tren"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:a||"Sedang menganalisis data..."})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[h.jsx("span",{children:"AQI"}),h.jsxs("div",{className:"flex items-center gap-2",children:[p.aqi>=0?h.jsx(ro,{className:"h-4 w-4 text-red-500"}):h.jsx(jd,{className:"h-4 w-4 text-green-500"}),h.jsxs("span",{className:p.aqi>=0?"text-red-500":"text-green-500",children:[p.aqi>0?"+":"",p.aqi,"%"]})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[h.jsx("span",{children:"PM2.5"}),h.jsxs("div",{className:"flex items-center gap-2",children:[p.pm25>=0?h.jsx(ro,{className:"h-4 w-4 text-red-500"}):h.jsx(jd,{className:"h-4 w-4 text-green-500"}),h.jsxs("span",{className:p.pm25>=0?"text-red-500":"text-green-500",children:[p.pm25>0?"+":"",p.pm25,"%"]})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[h.jsx("span",{children:"Gas PPM"}),h.jsxs("div",{className:"flex items-center gap-2",children:[p.pm10>=0?h.jsx(ro,{className:"h-4 w-4 text-red-500"}):h.jsx(jd,{className:"h-4 w-4 text-green-500"}),h.jsxs("span",{className:p.pm10>=0?"text-red-500":"text-green-500",children:[p.pm10>0?"+":"",p.pm10,"%"]})]})]})]})]})]})]})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(oie,{className:"h-5 w-5"}),"Data Historis (20 Terbaru)"]})}),h.jsx(Oe,{children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b",children:[h.jsx("th",{className:"text-left p-2",children:"Waktu"}),h.jsx("th",{className:"text-left p-2",children:"AQI"}),h.jsx("th",{className:"text-left p-2",children:"PM2.5"}),h.jsx("th",{className:"text-left p-2",children:"Gas PPM"}),h.jsx("th",{className:"text-left p-2",children:"Suhu"}),h.jsx("th",{className:"text-left p-2",children:"Kelembaban"}),h.jsx("th",{className:"text-left p-2",children:"Status"})]})}),h.jsx("tbody",{children:t.slice(0,20).map((S,I)=>{const E=Number(S.dust_pm25)||0,j=Number(S.gas_ppm)||0,A=E>0?Math.round(E*2.5+j*.5):0,T=Xz(A);return h.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[h.jsx("td",{className:"p-2",children:J_e(S.timestamp)}),h.jsx("td",{className:"p-2",children:A||"N/A"}),h.jsx("td",{className:"p-2",children:E>0?E.toFixed(1):"N/A"}),h.jsx("td",{className:"p-2",children:j>0?j.toFixed(1):"N/A"}),h.jsxs("td",{className:"p-2",children:[S.temperature||"N/A","C"]}),h.jsxs("td",{className:"p-2",children:[S.humidity||"N/A","%"]}),h.jsx("td",{className:"p-2",children:h.jsx(Ft,{className:`${T.color} text-white`,children:T.status})})]},I)})})]})})})]})]})}const Jz=[{number:"01",title:"Pengumpulan Data Sensor",subtitle:"Data Collection",description:"Robot Greenova AI, yang dilengkapi dengan berbagai sensor (suhu, kelembaban, pH tanah, dll.), mengumpulkan data lingkungan dari lokasi yang telah ditentukan.",icon:wn,color:"bg-blue-500",features:[{icon:ix,label:"Sensor Suhu",value:"0.1C"},{icon:Zr,label:"Kelembaban",value:"0-100%"},{icon:RA,label:"pH Tanah",value:"0-14 pH"},{icon:fo,label:"Real-time",value:"24/7"}],visual:"robot-sensors"},{number:"02",title:"Pengiriman Data Real-time",subtitle:"Data Transmission",description:"Data yang terkumpul dikirim secara instan melalui Wi-Fi atau jaringan seluler ke server backend menggunakan protokol MQTT.",icon:fh,color:"bg-green-500",features:[{icon:fh,label:"Wi-Fi 802.11",value:"2.4/5GHz"},{icon:Fse,label:"MQTT Protocol",value:"Secure"},{icon:Ep,label:"Latency",value:"<100ms"},{icon:Ki,label:"Encryption",value:"TLS 1.3"}],visual:"data-transmission"},{number:"03",title:"Analisis Data di Server",subtitle:"Processing & Analysis",description:"Server backend (Flask) memproses data, menyimpannya di database, dan menganalisisnya dengan model AI untuk mendeteksi anomali atau pola penting.",icon:Nw,color:"bg-purple-500",features:[{icon:sU,label:"Flask Backend",value:"Python"},{icon:_A,label:"Database",value:"PostgreSQL"},{icon:Nw,label:"AI Model",value:"TensorFlow"},{icon:ro,label:"Analytics",value:"Real-time"}],visual:"ai-processing"},{number:"04",title:"Informasi untuk Anda",subtitle:"Visualization & Notification",description:"Data yang telah dianalisis divisualisasikan dalam dashboard yang interaktif dan mudah dipahami. Sistem juga akan mengirimkan notifikasi penting, seperti peringatan dini bencana, ke perangkat Anda.",icon:aU,color:"bg-orange-500",features:[{icon:sm,label:"Dashboard",value:"Interactive"},{icon:fp,label:"Notifikasi",value:"Push/Email"},{icon:Gg,label:"Visualisasi",value:"Real-time"},{icon:ts,label:"Peringatan",value:"Otomatis"}],visual:"dashboard-notification"}];function tAe(){return h.jsxs("div",{className:"space-y-16",children:[h.jsx("div",{className:"text-center space-y-6",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs(Ft,{className:"px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white border-0",children:[h.jsx(wn,{className:"h-4 w-4 mr-2"}),"Sistem Greenova AI"]}),h.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Bagaimana Cara Kerjanya?"}),h.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[h.jsx("p",{className:"text-lg md:text-xl text-muted-foreground leading-relaxed",children:"Sistem robot Greenova AI bekerja melalui 4 tahapan utama untuk memberikan solusi pertanian pintar yang efisien dan berkelanjutan."}),h.jsx("p",{className:"text-base text-muted-foreground",children:"Dari pengumpulan data sensor hingga notifikasi cerdas - mari pelajari alur kerja teknologi revolusioner ini."})]})]})}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{icon:Wi,label:"Response Time",value:"<100ms",color:"text-blue-500"},{icon:Ki,label:"Security",value:"99.9%",color:"text-green-500"},{icon:fo,label:"Uptime",value:"24/7",color:"text-purple-500"},{icon:En,label:"Accuracy",value:"95%+",color:"text-orange-500"}].map((t,e)=>h.jsx(De,{className:"p-4 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-2",children:[h.jsx("div",{className:`inline-flex items-center justify-center w-10 h-10 rounded-full bg-muted ${t.color}`,children:h.jsx(t.icon,{className:"h-5 w-5"})}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-xl font-bold",children:t.value}),h.jsx("p",{className:"text-sm text-muted-foreground",children:t.label})]})]})},e))}),h.jsx("div",{className:"space-y-16",children:Jz.map((t,e)=>h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"hidden lg:block",children:h.jsxs("div",{className:`grid grid-cols-12 gap-8 items-center ${e%2===0?"":"direction-rtl"}`,children:[h.jsxs("div",{className:`col-span-6 space-y-6 ${e%2===0?"":"order-2"}`,children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`flex items-center justify-center w-16 h-16 rounded-2xl ${t.color} text-white text-xl font-bold`,children:t.number}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:t.title}),h.jsx("p",{className:"text-primary font-medium",children:t.subtitle})]})]}),h.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:t.description})]}),h.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.features.map((n,r)=>h.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[h.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-lg ${t.color}/10`,children:h.jsx(n.icon,{className:`h-4 w-4 ${t.color.replace("bg-","text-")}`})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium",children:n.label}),h.jsx("p",{className:"text-xs text-muted-foreground",children:n.value})]})]},r))})]}),h.jsx("div",{className:`col-span-6 ${e%2===0?"":"order-1"}`,children:h.jsx(De,{className:"p-8 bg-gradient-to-br from-muted/30 to-muted/10 border-2 border-muted hover:shadow-xl transition-all duration-300",children:h.jsxs(Oe,{className:"text-center space-y-6",children:[h.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-3xl ${t.color} text-white`,children:h.jsx(t.icon,{className:"h-12 w-12"})}),h.jsxs("div",{className:"space-y-4",children:[t.visual==="robot-sensors"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"flex justify-center gap-2",children:[ix,Zr,RA,fo].map((n,r)=>h.jsxs("div",{className:"flex flex-col items-center gap-2 p-3 bg-background rounded-lg shadow-sm",children:[h.jsx(n,{className:"h-6 w-6 text-blue-500"}),h.jsx("div",{className:"w-8 h-1 bg-blue-500 rounded animate-pulse"})]},r))}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"Data sensor real-time"})]}),t.visual==="data-transmission"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-center gap-4",children:[h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(wn,{className:"h-8 w-8 text-green-500"})}),h.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((n,r)=>h.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse",style:{animationDelay:`${r*.2}s`}},r))}),h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(Bre,{className:"h-8 w-8 text-green-500"})})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"Transmisi data aman"})]}),t.visual==="ai-processing"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-center gap-3",children:[h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(sU,{className:"h-6 w-6 text-purple-500"})}),h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(_A,{className:"h-6 w-6 text-purple-500"})}),h.jsxs("div",{className:"p-3 bg-background rounded-lg shadow-sm relative",children:[h.jsx(Nw,{className:"h-6 w-6 text-purple-500"}),h.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-purple-500 rounded-full animate-ping"})]})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"AI menganalisis data"})]}),t.visual==="dashboard-notification"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-center gap-3",children:[h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(mse,{className:"h-6 w-6 text-orange-500"})}),h.jsxs("div",{className:"p-3 bg-background rounded-lg shadow-sm relative",children:[h.jsx(aU,{className:"h-6 w-6 text-orange-500"}),h.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-bounce"})]}),h.jsx("div",{className:"p-3 bg-background rounded-lg shadow-sm",children:h.jsx(sm,{className:"h-6 w-6 text-orange-500"})})]}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"Dashboard & notifikasi real-time"})]})]})]})})})]})}),h.jsx("div",{className:"lg:hidden space-y-6",children:h.jsx(De,{className:"p-6 bg-gradient-to-br from-muted/30 to-muted/10 border-2 border-muted",children:h.jsxs(Oe,{className:"text-center space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-center gap-4",children:[h.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl ${t.color} text-white font-bold`,children:t.number}),h.jsx("div",{className:`flex items-center justify-center w-16 h-16 rounded-2xl ${t.color} text-white`,children:h.jsx(t.icon,{className:"h-8 w-8"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-xl font-bold",children:t.title}),h.jsx("p",{className:"text-primary font-medium",children:t.subtitle})]}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t.description}),h.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.features.map((n,r)=>h.jsxs("div",{className:"flex items-center gap-2 p-2 bg-background rounded-lg shadow-sm",children:[h.jsx(n.icon,{className:`h-4 w-4 ${t.color.replace("bg-","text-")}`}),h.jsxs("div",{className:"text-left",children:[h.jsx("p",{className:"text-xs font-medium",children:n.label}),h.jsx("p",{className:"text-xs text-muted-foreground",children:n.value})]})]},r))})]})})}),e<Jz.length-1&&h.jsxs("div",{className:"flex justify-center my-8",children:[h.jsx("div",{className:"hidden lg:block",children:h.jsx(Sw,{className:"h-8 w-8 text-primary animate-bounce"})}),h.jsx("div",{className:"lg:hidden",children:h.jsx(Sw,{className:"h-6 w-6 text-primary animate-bounce"})})]})]},e))}),h.jsxs("div",{className:"bg-gradient-to-r from-primary/5 to-secondary/5 rounded-3xl p-8 md:p-12 space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Mengapa Sistem Ini Efektif?"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Kombinasi teknologi canggih yang memberikan solusi pertanian pintar dan berkelanjutan"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{icon:Ep,title:"Respons Cepat",description:"Sistem bereaksi dalam hitungan detik untuk memberikan solusi optimal",color:"text-yellow-500"},{icon:Nw,title:"AI Cerdas",description:"Machine learning yang terus belajar untuk hasil yang semakin akurat",color:"text-purple-500"},{icon:Ki,title:"Keamanan Tinggi",description:"Enkripsi end-to-end melindungi semua data yang dikumpulkan",color:"text-blue-500"}].map((t,e)=>h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted ${t.color}`,children:h.jsx(t.icon,{className:"h-6 w-6"})}),h.jsx("h3",{className:"font-semibold",children:t.title}),h.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:t.description})]})},e))})]}),h.jsxs("div",{className:"text-center space-y-6 bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 md:p-12",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:"Siap Merasakan Teknologi Ini?"}),h.jsx("p",{className:"text-lg opacity-90 max-w-2xl mx-auto",children:"Jelajahi dashboard interaktif dan lihat bagaimana Greenova AI dapat mengubah cara Anda bercocok tanam"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsxs(Le,{size:"lg",variant:"secondary",className:"text-primary font-semibold px-8",children:[h.jsx(fo,{className:"h-5 w-5 mr-2"}),"Lihat Dashboard"]}),h.jsxs(Le,{size:"lg",variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[h.jsx(wn,{className:"h-5 w-5 mr-2"}),"Pelajari Lebih Lanjut"]})]})]})]})}function nAe({className:t,...e}){return h.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:h.jsx("table",{"data-slot":"table",className:It("w-full caption-bottom text-sm",t),...e})})}function rAe({className:t,...e}){return h.jsx("thead",{"data-slot":"table-header",className:It("[&_tr]:border-b",t),...e})}function sAe({className:t,...e}){return h.jsx("tbody",{"data-slot":"table-body",className:It("[&_tr:last-child]:border-0",t),...e})}function Zz({className:t,...e}){return h.jsx("tr",{"data-slot":"table-row",className:It("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...e})}function _d({className:t,...e}){return h.jsx("th",{"data-slot":"table-head",className:It("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}function Ad({className:t,...e}){return h.jsx("td",{"data-slot":"table-cell",className:It("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e})}const iAe=t=>t.map(n=>{const r=n.timestamp?.seconds?new Date(n.timestamp.seconds*1e3):new Date;return{time:r.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),timestamp:r.toISOString(),temperature:n.temperature,humidity:n.humidity,aqi:n.aq_number,pm25:n.dust_pm25,pm10:n.dust_pm25?n.dust_pm25*1.5:0}}),aAe=t=>t<=50?{status:"Baik",variant:"default",bgColor:"bg-green-500"}:t<=100?{status:"Sedang",variant:"secondary",bgColor:"bg-yellow-500"}:t<=150?{status:"Tidak Sehat untuk Sensitif",variant:"destructive",bgColor:"bg-orange-500"}:t<=200?{status:"Tidak Sehat",variant:"destructive",bgColor:"bg-red-500"}:{status:"Sangat Tidak Sehat",variant:"destructive",bgColor:"bg-red-600"},oAe=t=>{if(!t)return"N/A";const e=t.seconds?new Date(t.seconds*1e3):new Date(t);return e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})};function lAe({selectedRobotId:t,onRobotSelect:e}){const[n,r]=_.useState("7d"),[s,i]=_.useState(""),{robots:a,airReadings:o,loading:l}=yl(),c=a.find(x=>x.robot_id===t),u=o.filter(x=>x.robot_id===t),d=iAe(u).reverse();if(l)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("p",{className:"text-muted-foreground",children:"Memuat data..."})});if(!c)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("p",{className:"text-muted-foreground",children:"Robot tidak ditemukan"})});const p=u.length,g=(u.reduce((x,v)=>x+(v.temperature||0),0)/p).toFixed(1),y=(u.reduce((x,v)=>x+(v.aq_number||0),0)/p).toFixed(0);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Riwayat Robot"}),h.jsx(Ft,{variant:"outline",children:c.robot_id})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs(hi,{value:t,onValueChange:e,children:[h.jsx(pi,{className:"w-[200px]",children:h.jsx(fi,{placeholder:"Pilih Robot"})}),h.jsx(mi,{children:a.map(x=>h.jsx(Ot,{value:x.robot_id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wn,{className:"h-4 w-4"}),h.jsx("span",{children:x.robot_id})]})},x.robot_id))})]}),h.jsxs(hi,{value:n,onValueChange:r,children:[h.jsx(pi,{className:"w-[120px]",children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"1d",children:"1 Hari"}),h.jsx(Ot,{value:"7d",children:"7 Hari"}),h.jsx(Ot,{value:"30d",children:"30 Hari"}),h.jsx(Ot,{value:"90d",children:"90 Hari"})]})]}),h.jsx(Le,{variant:"outline",size:"icon",children:h.jsx(ki,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",children:h.jsx(AA,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Total Data"}),h.jsx(sm,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:p}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"sensor readings"})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Avg. Temperature"}),h.jsx(ix,{className:"h-4 w-4 text-red-500"})]}),h.jsxs(Oe,{children:[h.jsxs("div",{className:"text-2xl font-bold",children:[g,"C"]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"rata-rata suhu"})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Avg. AQI"}),h.jsx(fu,{className:"h-4 w-4 text-green-500"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:y}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"rata-rata kualitas udara"})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Avg. Uptime"}),h.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:"N/A"}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"data belum tersedia"})]})]})]}),h.jsxs(Uh,{defaultValue:"sensors",className:"space-y-6",children:[h.jsxs(Wh,{className:"grid w-full grid-cols-4",children:[h.jsx(Ln,{value:"sensors",children:"Sensor Data"}),h.jsx(Ln,{value:"tasks",children:"Task History"}),h.jsx(Ln,{value:"maintenance",children:"Maintenance"}),h.jsx(Ln,{value:"alerts",children:"Alerts"})]}),h.jsxs(Vn,{value:"sensors",className:"space-y-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Sensor Data Trends"})}),h.jsx(Oe,{children:h.jsx(lh,{width:"100%",height:300,children:h.jsxs(Px,{data:d,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"time",tickFormatter:x=>x}),h.jsx(_u,{}),h.jsx(oh,{labelFormatter:x=>`Waktu: ${x}`}),h.jsx(bi,{type:"monotone",dataKey:"temperature",stroke:"#ef4444",strokeWidth:2,name:"Suhu (C)"}),h.jsx(bi,{type:"monotone",dataKey:"humidity",stroke:"#3b82f6",strokeWidth:2,name:"Kelembaban (%)"}),h.jsx(bi,{type:"monotone",dataKey:"aqi",stroke:"#22c55e",strokeWidth:2,name:"AQI"})]})})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Detailed Sensor Readings"})}),h.jsx(Oe,{children:h.jsxs(nAe,{children:[h.jsx(rAe,{children:h.jsxs(Zz,{children:[h.jsx(_d,{children:"Timestamp"}),h.jsx(_d,{children:"Suhu (C)"}),h.jsx(_d,{children:"Kelembaban (%)"}),h.jsx(_d,{children:"PM2.5 (g/m)"}),h.jsx(_d,{children:"PM10 (g/m)"}),h.jsx(_d,{children:"AQI"}),h.jsx(_d,{children:"Status"})]})}),h.jsx(sAe,{children:u.slice(0,20).map((x,v)=>{const w=x.aq_number||(x.dust_pm25?Math.round(x.dust_pm25*2.5+(x.gas_ppm||0)*.5):0),k=aAe(w);return h.jsxs(Zz,{children:[h.jsx(Ad,{children:oAe(x.timestamp)}),h.jsx(Ad,{children:x.temperature||"N/A"}),h.jsx(Ad,{children:x.humidity||"N/A"}),h.jsx(Ad,{children:x.dust_pm25||"N/A"}),h.jsx(Ad,{children:x.dust_pm25?(x.dust_pm25*1.5).toFixed(1):"N/A"}),h.jsx(Ad,{children:w||"N/A"}),h.jsx(Ad,{children:h.jsx(Ft,{className:`${k.bgColor} text-white border-0`,children:k.status})})]},v)})})]})})]})]}),h.jsx(Vn,{value:"tasks",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Riwayat Tugas"})}),h.jsx(Oe,{children:h.jsx("div",{className:"text-center p-8 text-muted-foreground",children:h.jsx("p",{children:"Data riwayat tugas belum tersedia."})})})]})}),h.jsx(Vn,{value:"maintenance",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Riwayat Maintenance"})}),h.jsx(Oe,{children:h.jsx("div",{className:"text-center p-8 text-muted-foreground",children:h.jsx("p",{children:"Data riwayat maintenance belum tersedia."})})})]})}),h.jsx(Vn,{value:"alerts",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"System Alerts"})}),h.jsx(Oe,{children:h.jsx("div",{className:"text-center p-8 text-muted-foreground",children:h.jsx("p",{children:"Data peringatan sistem belum tersedia."})})})]})})]})]})}var ES="Collapsible",[cAe,V7]=Co(ES),[uAe,LP]=cAe(ES),B7=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:a,...o}=t,[l,c]=Kl({prop:r,defaultProp:s??!1,onChange:a,caller:ES});return h.jsx(uAe,{scope:n,disabled:i,contentId:Bh(),open:l,onOpenToggle:_.useCallback(()=>c(u=>!u),[c]),children:h.jsx(bt.div,{"data-state":BP(l),"data-disabled":i?"":void 0,...o,ref:e})})});B7.displayName=ES;var z7="CollapsibleTrigger",U7=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=LP(z7,n);return h.jsx(bt.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":BP(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:St(t.onClick,s.onOpenToggle)})});U7.displayName=z7;var VP="CollapsibleContent",W7=_.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=LP(VP,t.__scopeCollapsible);return h.jsx(zh,{present:n||s.open,children:({present:i})=>h.jsx(dAe,{...r,ref:e,present:i})})});W7.displayName=VP;var dAe=_.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,a=LP(VP,n),[o,l]=_.useState(r),c=_.useRef(null),u=Wt(e,c),d=_.useRef(0),p=d.current,g=_.useRef(0),y=g.current,x=a.open||o,v=_.useRef(x),w=_.useRef(void 0);return _.useEffect(()=>{const k=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(k)},[]),rs(()=>{const k=c.current;if(k){w.current=w.current||{transitionDuration:k.style.transitionDuration,animationName:k.style.animationName},k.style.transitionDuration="0s",k.style.animationName="none";const S=k.getBoundingClientRect();d.current=S.height,g.current=S.width,v.current||(k.style.transitionDuration=w.current.transitionDuration,k.style.animationName=w.current.animationName),l(r)}},[a.open,r]),h.jsx(bt.div,{"data-state":BP(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!x,...i,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...t.style},children:x&&s})});function BP(t){return t?"open":"closed"}var hAe=B7,fAe=U7,pAe=W7,Eo="Accordion",mAe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zP,gAe,yAe]=gk(Eo),[TS,ket]=Co(Eo,[yAe,V7]),UP=V7(),G7=sn.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return h.jsx(zP.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?h.jsx(wAe,{...i,ref:e}):h.jsx(bAe,{...s,ref:e})})});G7.displayName=Eo;var[H7,xAe]=TS(Eo),[q7,vAe]=TS(Eo,{collapsible:!1}),bAe=sn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...a}=t,[o,l]=Kl({prop:n,defaultProp:r??"",onChange:s,caller:Eo});return h.jsx(H7,{scope:t.__scopeAccordion,value:sn.useMemo(()=>o?[o]:[],[o]),onItemOpen:l,onItemClose:sn.useCallback(()=>i&&l(""),[i,l]),children:h.jsx(q7,{scope:t.__scopeAccordion,collapsible:i,children:h.jsx(K7,{...a,ref:e})})})}),wAe=sn.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[a,o]=Kl({prop:n,defaultProp:r??[],onChange:s,caller:Eo}),l=sn.useCallback(u=>o((d=[])=>[...d,u]),[o]),c=sn.useCallback(u=>o((d=[])=>d.filter(p=>p!==u)),[o]);return h.jsx(H7,{scope:t.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:h.jsx(q7,{scope:t.__scopeAccordion,collapsible:!0,children:h.jsx(K7,{...i,ref:e})})})}),[kAe,_S]=TS(Eo),K7=sn.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...a}=t,o=sn.useRef(null),l=Wt(o,e),c=gAe(n),d=om(s)==="ltr",p=St(t.onKeyDown,g=>{if(!mAe.includes(g.key))return;const y=g.target,x=c().filter(T=>!T.ref.current?.disabled),v=x.findIndex(T=>T.ref.current===y),w=x.length;if(v===-1)return;g.preventDefault();let k=v;const S=0,I=w-1,E=()=>{k=v+1,k>I&&(k=S)},j=()=>{k=v-1,k<S&&(k=I)};switch(g.key){case"Home":k=S;break;case"End":k=I;break;case"ArrowRight":i==="horizontal"&&(d?E():j());break;case"ArrowDown":i==="vertical"&&E();break;case"ArrowLeft":i==="horizontal"&&(d?j():E());break;case"ArrowUp":i==="vertical"&&j();break}const A=k%w;x[A].ref.current?.focus()});return h.jsx(kAe,{scope:n,disabled:r,direction:s,orientation:i,children:h.jsx(zP.Slot,{scope:n,children:h.jsx(bt.div,{...a,"data-orientation":i,ref:l,onKeyDown:r?void 0:p})})})}),D1="AccordionItem",[SAe,WP]=TS(D1),X7=sn.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=_S(D1,n),a=xAe(D1,n),o=UP(n),l=Bh(),c=r&&a.value.includes(r)||!1,u=i.disabled||t.disabled;return h.jsx(SAe,{scope:n,open:c,disabled:u,triggerId:l,children:h.jsx(hAe,{"data-orientation":i.orientation,"data-state":tX(c),...o,...s,ref:e,disabled:u,open:c,onOpenChange:d=>{d?a.onItemOpen(r):a.onItemClose(r)}})})});X7.displayName=D1;var Y7="AccordionHeader",Q7=sn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=_S(Eo,n),i=WP(Y7,n);return h.jsx(bt.h3,{"data-orientation":s.orientation,"data-state":tX(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Q7.displayName=Y7;var V_="AccordionTrigger",J7=sn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=_S(Eo,n),i=WP(V_,n),a=vAe(V_,n),o=UP(n);return h.jsx(zP.ItemSlot,{scope:n,children:h.jsx(fAe,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...o,...r,ref:e})})});J7.displayName=V_;var Z7="AccordionContent",eX=sn.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=_S(Eo,n),i=WP(Z7,n),a=UP(n);return h.jsx(pAe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...a,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});eX.displayName=Z7;function tX(t){return t?"open":"closed"}var NAe=G7,CAe=X7,IAe=Q7,EAe=J7,TAe=eX;function _Ae({...t}){return h.jsx(NAe,{"data-slot":"accordion",...t})}function AAe({className:t,...e}){return h.jsx(CAe,{"data-slot":"accordion-item",className:It("border-b last:border-b-0",t),...e})}function RAe({className:t,children:e,...n}){return h.jsx(IAe,{className:"flex",children:h.jsxs(EAe,{"data-slot":"accordion-trigger",className:It("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,h.jsx(dk,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function $Ae({className:t,children:e,...n}){return h.jsx(TAe,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:h.jsx("div",{className:It("pt-0 pb-4",t),children:e})})}const PAe=[{id:1,title:"Apa itu PM2.5?",description:"Partikel halus berdiameter kurang dari 2.5 mikrometer yang dapat membahayakan kesehatan pernapasan.",icon:fu,content:`PM2.5 adalah singkatan dari Particulate Matter dengan diameter kurang dari 2.5 mikrometer. 
    Partikel ini sangat kecil sehingga dapat masuk ke dalam paru-paru dan aliran darah, menyebabkan 
    berbagai masalah kesehatan seperti asma, penyakit jantung, dan gangguan pernapasan lainnya.`,category:"Kualitas Udara",level:"Pemula"},{id:2,title:"Manfaat Tanaman untuk Udara",description:"Bagaimana tanaman membantu membersihkan udara dan meningkatkan kualitas lingkungan.",icon:hk,content:`Tanaman berperan sebagai filter alami udara dengan menyerap CO2 dan melepaskan O2. 
    Beberapa tanaman juga dapat menyerap polutan berbahaya seperti formaldehyde, benzene, dan 
    xylene. Selain itu, tanaman membantu meningkatkan kelembaban udara dan mengurangi suhu lingkungan.`,category:"Lingkungan",level:"Pemula"},{id:3,title:"Cara Kerja GREENOVA",description:"Sistem AI dan sensor yang digunakan robot untuk memantau dan merawat lingkungan.",icon:wn,content:`GREENOVA menggunakan ESP32-CAM untuk vision dan Teachable Machine untuk AI. 
    Robot dilengkapi sensor kelembaban tanah, kualitas udara, dan sistem navigasi otomatis. 
    Data dari sensor diolah menggunakan algoritma machine learning untuk membuat keputusan 
    penyiraman dan pemantauan lingkungan yang optimal.`,category:"Teknologi",level:"Menengah"},{id:4,title:"Kelembaban Tanah Optimal",description:"Tingkat kelembaban yang ideal untuk pertumbuhan tanaman yang sehat.",icon:Zr,content:`Kelembaban tanah optimal untuk sebagian besar tanaman berkisar antara 60-80%. 
    Kelembaban di bawah 50% menandakan tanaman memerlukan air, sementara di atas 90% 
    dapat menyebabkan akar membusuk. GREENOVA memantau kelembaban secara real-time dan 
    melakukan penyiraman otomatis saat diperlukan.`,category:"Pertanian",level:"Pemula"},{id:5,title:"Teknologi Machine Learning",description:"Bagaimana AI membantu robot membuat keputusan cerdas dalam perawatan tanaman.",icon:fk,content:`GREENOVA menggunakan Teachable Machine untuk mengenali pola dan membuat prediksi. 
    AI dapat mengidentifikasi kondisi tanaman dari gambar, memprediksi kebutuhan air berdasarkan 
    data historis, dan mengoptimalkan rute patroli. Sistem pembelajaran terus berkembang 
    seiring dengan pengumpulan data yang lebih banyak.`,category:"Teknologi",level:"Lanjutan"},{id:6,title:"Pemeliharaan Robot",description:"Tips dan panduan untuk merawat robot agar tetap berfungsi optimal.",icon:Ki,content:`Pemeliharaan rutin GREENOVA meliputi pembersihan sensor, pengecekan baterai, 
    kalibrasi sensor kelembaban, dan update software. Robot secara otomatis melakukan 
    self-diagnostic dan akan memberikan notifikasi jika memerlukan maintenance. 
    Pembersihan kamera dan sensor sebaiknya dilakukan setiap minggu.`,category:"Maintenance",level:"Menengah"}],jAe=[{question:"Berapa lama baterai GREENOVA bertahan?",answer:"Baterai GREENOVA dapat bertahan hingga 8-12 jam tergantung aktivitas. Robot akan secara otomatis kembali ke stasiun pengisian ketika baterai mencapai 20%."},{question:"Apakah robot bisa bekerja dalam cuaca hujan?",answer:"GREENOVA memiliki perlindungan IP65 yang memungkinkannya beroperasi dalam hujan ringan. Namun, untuk keamanan maksimal, robot akan mencari shelter saat mendeteksi hujan lebat."},{question:"Bagaimana cara menambah tanaman baru ke sistem?",answer:"Anda dapat menambah tanaman baru melalui halaman Pengaturan > Robot > Edit Peta. Klik pada lokasi yang diinginkan dan tentukan jenis tanaman serta jadwal penyiramannya."},{question:"Seberapa akurat sensor kualitas udara?",answer:"Sensor PM2.5 memiliki akurasi 10% dan sensor VOCs 5%. Kalibrasi otomatis dilakukan setiap 24 jam untuk memastikan pembacaan yang akurat."},{question:"Apa yang terjadi jika robot tidak bisa mencapai tanaman?",answer:"Robot memiliki sistem deteksi obstacle dan path planning. Jika ada rintangan, robot akan mencari rute alternatif atau memberikan notifikasi untuk bantuan manual."},{question:"Bisakah mengatur jadwal penyiraman manual?",answer:"Ya, Anda dapat mengatur jadwal penyiraman custom untuk setiap tanaman melalui halaman Pengaturan. Robot juga akan tetap melakukan penyiraman otomatis berdasarkan sensor kelembaban."},{question:"Bagaimana cara backup data sensor?",answer:"Data sensor secara otomatis disimpan secara lokal dan dapat di-backup ke cloud storage. Anda dapat mengatur backup otomatis di halaman Pengaturan > Sistem."},{question:"Apakah robot bisa mendeteksi hama tanaman?",answer:"Dengan kamera ESP32-CAM dan AI, GREENOVA dapat mendeteksi beberapa jenis hama umum dan memberikan alert. Fitur ini masih dalam pengembangan untuk akurasi yang lebih baik."}];function DAe(){const[t,e]=_.useState(null),n=(i,a)=>{const o=window.location.href,l=`Check out this educational content: ${a}`;let c="";switch(i){case"facebook":c=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(o)}`;break;case"twitter":c=`https://twitter.com/intent/tweet?text=${encodeURIComponent(l)}&url=${encodeURIComponent(o)}`;break;case"linkedin":c=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(o)}`;break;case"copy":navigator.clipboard.writeText(o),alert("Link copied to clipboard!");return}c&&window.open(c,"_blank","width=600,height=400")},r=i=>{switch(i){case"Kualitas Udara":return"bg-blue-100 text-blue-800";case"Lingkungan":return"bg-green-100 text-green-800";case"Teknologi":return"bg-purple-100 text-purple-800";case"Pertanian":return"bg-orange-100 text-orange-800";case"Maintenance":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},s=i=>{switch(i){case"Pemula":return"bg-green-50 text-green-700 border border-green-200";case"Menengah":return"bg-yellow-50 text-yellow-700 border border-yellow-200";case"Lanjutan":return"bg-red-50 text-red-700 border border-red-200";default:return"bg-gray-50 text-gray-700 border border-gray-200"}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{children:"Pusat Edukasi"}),h.jsx("p",{className:"text-muted-foreground",children:"Pelajari tentang teknologi dan lingkungan"})]}),h.jsx("div",{className:"flex gap-2",children:h.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>n("facebook","GREENOVA Education Hub"),children:[h.jsx(Kse,{className:"h-4 w-4 mr-2"}),"Share"]})})]}),h.jsxs(Uh,{defaultValue:"learn",className:"space-y-6",children:[h.jsxs(Wh,{className:"grid w-full grid-cols-2",children:[h.jsx(Ln,{value:"learn",children:"Materi"}),h.jsx(Ln,{value:"faq",children:"FAQ"})]}),h.jsx(Vn,{value:"learn",className:"space-y-6",children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:PAe.map(i=>h.jsxs(De,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[h.jsxs(dt,{children:[h.jsx("div",{className:"flex items-start justify-between",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:h.jsx(i.icon,{className:"h-6 w-6 text-primary"})}),h.jsx("div",{className:"flex-1",children:h.jsx(ht,{className:"text-lg",children:i.title})})]})}),h.jsxs("div",{className:"flex gap-2 mt-3",children:[h.jsx(Ft,{className:r(i.category),children:i.category}),h.jsx(Ft,{variant:"outline",className:s(i.level),children:i.level})]})]}),h.jsxs(Oe,{children:[h.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:i.description}),h.jsx("div",{className:"text-sm leading-relaxed",children:i.content})]})]},i.id))})}),h.jsx(Vn,{value:"faq",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(K6,{className:"h-5 w-5"}),"Frequently Asked Questions (FAQ)"]})}),h.jsx(Oe,{children:h.jsx(_Ae,{type:"single",collapsible:!0,className:"w-full",children:jAe.map((i,a)=>h.jsxs(AAe,{value:`item-${a}`,children:[h.jsx(RAe,{className:"text-left",children:i.question}),h.jsx($Ae,{className:"text-muted-foreground",children:i.answer})]},a))})})]})})]})]})}var OAe="Separator",e5="horizontal",MAe=["horizontal","vertical"],nX=_.forwardRef((t,e)=>{const{decorative:n,orientation:r=e5,...s}=t,i=FAe(r)?r:e5,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return h.jsx(bt.div,{"data-orientation":i,...o,...s,ref:e})});nX.displayName=OAe;function FAe(t){return MAe.includes(t)}var LAe=nX;function Yd({className:t,orientation:e="horizontal",decorative:n=!0,...r}){return h.jsx(LAe,{"data-slot":"separator-root",decorative:n,orientation:e,className:It("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...r})}const VAe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function BAe(t){const[e,n]=_.useState(!1),r=()=>{n(!0)},{src:s,alt:i,style:a,className:o,...l}=t;return e?h.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:a,children:h.jsx("div",{className:"flex items-center justify-center w-full h-full",children:h.jsx("img",{src:VAe,alt:"Error loading image",...l,"data-original-url":s})})}):h.jsx("img",{src:s,alt:i,className:o,style:a,...l,onError:r})}const zAe=[{name:"Jojo Gid",role:"Founder & Developer Utama",bio:"Passionate tentang teknologi AI dan robotika untuk solusi pertanian berkelanjutan. Memiliki pengalaman 5+ tahun dalam pengembangan sistem IoT dan machine learning.",avatar:"https://static.vecteezy.com/system/resources/previews/026/630/551/non_2x/profile-icon-symbol-design-illustration-vector.jpg",expertise:["AI/ML","IoT Systems","Full-Stack Development"]},{name:"Nando",role:"Hardware Engineer",bio:"Spesialis dalam pengembangan sistem embedded dan sensor integration. Bertanggung jawab atas desain dan implementasi hardware robot GREENOVA yang handal dan efisien.",avatar:"https://static.vecteezy.com/system/resources/previews/026/630/551/non_2x/profile-icon-symbol-design-illustration-vector.jpg",expertise:["Embedded Systems","Sensor Integration","Circuit Design"]},{name:"Kenneth",role:"AI/ML Specialist",bio:"Expert dalam computer vision dan machine learning untuk deteksi tanaman dan analisis lingkungan. Mengembangkan model Teachable Machine yang digunakan robot untuk decision making.",avatar:"https://static.vecteezy.com/system/resources/previews/026/630/551/non_2x/profile-icon-symbol-design-illustration-vector.jpg",expertise:["Computer Vision","Machine Learning","Data Analysis"]},{name:"Louis",role:"UX/UI Designer",bio:"Menciptakan pengalaman pengguna yang intuitif dan menarik untuk dashboard GREENOVA. Fokus pada desain yang user-centered dan accessibility untuk semua kalangan pengguna.",avatar:"https://static.vecteezy.com/system/resources/previews/026/630/551/non_2x/profile-icon-symbol-design-illustration-vector.jpg",expertise:["UI/UX Design","User Research","Design Systems"]}],UAe=[{icon:mk,title:"Misi Kami",description:"Mengembangkan teknologi robotika AI yang membuat pertanian lebih efisien, berkelanjutan, dan mudah diakses untuk semua."},{icon:fk,title:"Inovasi",description:"Menggabungkan kecerdasan buatan, sensor IoT, dan computer vision untuk menciptakan solusi pertanian otomatis yang cerdas."},{icon:rw,title:"Komitmen",description:"Berkomitmen untuk mengurangi penggunaan air dan pestisida melalui teknologi precision agriculture yang ramah lingkungan."}];function WAe({onNavigate:t}){return h.jsxs("div",{className:"space-y-12",children:[h.jsxs("div",{className:"text-center space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"About Us"}),h.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[h.jsxs("p",{className:"text-lg md:text-xl text-muted-foreground leading-relaxed",children:[h.jsx("strong",{className:"text-foreground",children:"Greenova AI"})," adalah proyek inovatif yang menggabungkan kecerdasan buatan, robotika, dan teknologi IoT untuk menciptakan solusi pertanian yang cerdas dan berkelanjutan."]}),h.jsx("p",{className:"text-lg md:text-xl text-muted-foreground leading-relaxed",children:"Dengan menggunakan ESP32-CAM dan model Teachable Machine, robot GREENOVA mampu memantau lingkungan secara real-time, mendeteksi kebutuhan tanaman, dan melakukan penyiraman otomatis yang tepat sasaran."})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-12",children:UAe.map((e,n)=>h.jsx(De,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:h.jsxs(Oe,{className:"text-center space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10",children:h.jsx(e.icon,{className:"h-6 w-6 text-primary"})}),h.jsx("h3",{className:"font-semibold",children:e.title}),h.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:e.description})]})},n))})]}),h.jsx(Yd,{className:"my-12"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[h.jsx(xy,{className:"h-8 w-8 text-primary"}),h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Tim Kami"})]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Tim multidisiplin yang berdedikasi untuk menghadirkan teknologi pertanian masa depan"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:zAe.map((e,n)=>h.jsx(De,{className:"team-member-card p-6 hover:shadow-xl transition-all duration-300 hover:-translate-y-2 border-0 shadow-lg",children:h.jsxs(Oe,{className:"text-center space-y-4",children:[h.jsx("div",{className:"relative mx-auto w-24 h-24 md:w-28 md:h-28",children:h.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-primary to-secondary p-1",children:h.jsx("div",{className:"w-full h-full rounded-full bg-background p-1",children:h.jsx(BAe,{src:e.avatar,alt:`${e.name} - ${e.role}`,className:"w-full h-full rounded-full object-cover"})})})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"font-semibold text-lg",children:e.name}),h.jsx("p",{className:"text-primary font-medium text-sm",children:e.role})]}),h.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:e.bio}),h.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:e.expertise.map((r,s)=>h.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:r},s))})]})},n))})]}),h.jsx(Yd,{className:"my-12"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Teknologi yang Kami Gunakan"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Stack teknologi modern untuk solusi pertanian yang handal dan scalable"})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:[{name:"ESP32-CAM",desc:"Microcontroller & Camera"},{name:"Teachable Machine",desc:"AI Model Training"},{name:"React + TypeScript",desc:"Frontend Dashboard"},{name:"IoT Sensors",desc:"Environmental Monitoring"},{name:"Computer Vision",desc:"Plant Detection"},{name:"Real-time Data",desc:"Live Monitoring"}].map((e,n)=>h.jsx(De,{className:"p-4 text-center hover:shadow-md transition-shadow",children:h.jsxs(Oe,{className:"space-y-2",children:[h.jsx("div",{className:"w-8 h-8 mx-auto bg-primary/10 rounded-lg flex items-center justify-center",children:h.jsx(uT,{className:"h-4 w-4 text-primary"})}),h.jsx("h4",{className:"font-medium text-sm",children:e.name}),h.jsx("p",{className:"text-xs text-muted-foreground",children:e.desc})]})},n))})]}),h.jsx(Yd,{className:"my-12"}),h.jsxs("div",{id:"contact-section",className:"bg-muted/30 rounded-xl p-8 space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"Hubungi Kami"}),h.jsx("p",{className:"text-muted-foreground",children:"Tertarik untuk berkolaborasi atau ingin tahu lebih lanjut tentang GREENOVA?"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx(gy,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"Email"}),h.jsx("a",{href:"mailto:hello@greenova.ai",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"hello@greenova.ai"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx(tU,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"Telepon"}),h.jsx("a",{href:"tel:+6281234567890",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"+62 896-4301-0219"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx($A,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"Lokasi"}),h.jsx("a",{href:"https://maps.google.com/?q=Surabaya,Indonesia",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-muted-foreground hover:text-primary transition-colors",children:"Surabaya, Indonesia"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-center font-medium",children:"Ikuti Kami"}),h.jsxs("div",{className:"flex justify-center gap-4",children:[h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",onClick:()=>window.open("https://github.com/greenova-ai","_blank"),children:h.jsx(Y6,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",onClick:()=>window.open("https://linkedin.com/company/greenova-ai","_blank"),children:h.jsx(J6,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",onClick:()=>window.open("https://twitter.com/greenova_ai","_blank"),children:h.jsx(oU,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",onClick:()=>window.open("https://instagram.com/greenova.ai","_blank"),children:h.jsx(Q6,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"text-center space-y-4 pt-6 border-t border-border",children:[h.jsx("h3",{className:"font-medium",children:"Siap untuk Berkolaborasi?"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsxs(Le,{className:"gap-2",onClick:()=>window.open("mailto:hello@greenova.ai?subject=Kolaborasi GREENOVA AI&body=Halo tim GREENOVA,%0A%0ASaya tertarik untuk berkolaborasi dengan tim GREENOVA AI.%0A%0ANama:%0AInstansi/Organisasi:%0AEmail:%0ATujuan kolaborasi:%0A%0ATerima kasih.","_blank"),children:[h.jsx(gy,{className:"h-4 w-4"}),"Kirim Email"]}),h.jsxs(Le,{variant:"outline",className:"gap-2",onClick:()=>window.open("https://github.com/greenova-ai/portfolio","_blank"),children:[h.jsx(uT,{className:"h-4 w-4"}),"Lihat Portfolio"]})]})]}),h.jsxs("div",{className:"text-center space-y-4 pt-6 border-t border-border",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ki,{className:"h-8 w-8 text-primary mx-auto"}),h.jsx("h3",{className:"font-medium",children:"Butuh Akses Admin Dashboard?"}),h.jsx("p",{className:"text-sm text-muted-foreground max-w-md mx-auto",children:"Ajukan akun admin untuk mengakses dashboard monitoring robot dan analitik data real-time"})]}),h.jsxs(Le,{variant:"secondary",className:"gap-2",onClick:()=>{t("support"),setTimeout(()=>{const e=document.getElementById("admin-form-section");e&&e.scrollIntoView({behavior:"smooth"})},500)},children:[h.jsx(lU,{className:"h-4 w-4"}),"Ajukan Akun Admin"]})]})]})]})}function GAe(){return h.jsxs("div",{className:"space-y-12",children:[h.jsxs("div",{className:"text-center space-y-6",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-primary to-secondary mb-4",children:h.jsx(pp,{className:"h-8 w-8 text-white"})}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Dukung Masa Depan Lingkungan"}),h.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[h.jsxs("p",{className:"text-lg md:text-xl text-muted-foreground leading-relaxed",children:[h.jsx("strong",{className:"text-foreground",children:"Setiap dukungan Anda"})," membantu kami mengembangkan teknologi pertanian yang lebih cerdas dan berkelanjutan. Bersama-sama, kita dapat menciptakan solusi inovatif yang tidak hanya menghemat air dan energi, tetapi juga meningkatkan hasil panen untuk petani di seluruh Indonesia."]}),h.jsxs("p",{className:"text-lg text-muted-foreground leading-relaxed",children:[" ",h.jsx("strong",{className:"text-primary",children:"Bayangkan"})," sebuah dunia di mana setiap tetes air digunakan dengan sempurna, setiap tanaman mendapat perhatian yang tepat waktu, dan petani dapat fokus pada inovasi daripada khawatir tentang pemeliharaan rutin."]})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{icon:Zr,number:"40%",label:"Penghematan Air",color:"text-blue-500"},{icon:yy,number:"25+",label:"Tanaman Terpantau",color:"text-green-500"},{icon:Ep,number:"60%",label:"Efisiensi Energi",color:"text-yellow-500"},{icon:xy,number:"100+",label:"Petani Terbantu",color:"text-purple-500"}].map((t,e)=>h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-3",children:[h.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted ${t.color}`,children:h.jsx(t.icon,{className:"h-6 w-6"})}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-2xl font-bold",children:t.number}),h.jsx("p",{className:"text-sm text-muted-foreground",children:t.label})]})]})},e))}),h.jsx(Yd,{}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Pilih Cara Anda Berkontribusi"}),h.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Setiap kontribusi, sebesar apapun, membuat perbedaan nyata dalam pengembangan teknologi pertanian berkelanjutan"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(De,{className:"relative overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-2",children:h.jsxs(Oe,{className:"p-8 text-center space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-500/10",children:h.jsx(Ure,{className:"h-6 w-6 text-blue-500"})}),h.jsx("h4",{className:"text-xl font-semibold",children:"Supporter"}),h.jsx("div",{className:"text-3xl font-bold text-blue-500",children:"Rp 50.000"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Setara dengan secangkir kopi premium"})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{children:"Akses eksklusif ke update progress"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{children:"Sertifikat digital sebagai supporter"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{children:"Nama Anda di Hall of Fame"})]})]}),h.jsxs(Le,{className:"w-full bg-blue-500 hover:bg-blue-600 text-white",children:[h.jsx(pp,{className:"h-4 w-4 mr-2"}),"Dukung Sekarang"]})]})}),h.jsxs(De,{className:"relative overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-2 border-2 border-primary",children:[h.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-primary to-secondary text-white text-center py-2 text-sm font-medium",children:" PALING POPULER"}),h.jsxs(Oe,{className:"p-8 text-center space-y-6 pt-12",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10",children:h.jsx(Ep,{className:"h-6 w-6 text-primary"})}),h.jsx("h4",{className:"text-xl font-semibold",children:"Sponsor"}),h.jsx("div",{className:"text-3xl font-bold text-primary",children:"Rp 200.000"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Biaya pengembangan sensor selama 1 bulan"})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-primary"}),h.jsx("span",{children:"Semua benefit Supporter"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-primary"}),h.jsx("span",{children:"Akses beta ke fitur terbaru"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-primary"}),h.jsx("span",{children:"Video call eksklusif dengan tim"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-primary"}),h.jsx("span",{children:"Logo/nama di website & aplikasi"})]})]}),h.jsxs(Le,{className:"w-full bg-primary hover:bg-primary/90 text-white text-base",children:[h.jsx(K4,{className:"h-4 w-4 mr-2"}),"Jadi Sponsor"]})]})]}),h.jsx(De,{className:"relative overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-2",children:h.jsxs(Oe,{className:"p-8 text-center space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-purple-500/10",children:h.jsx(rw,{className:"h-6 w-6 text-purple-500"})}),h.jsx("h4",{className:"text-xl font-semibold",children:"Partner"}),h.jsx("div",{className:"text-3xl font-bold text-purple-500",children:"Rp 500.000"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Investasi untuk satu unit robot prototype"})]}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{children:"Semua benefit Sponsor"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{children:"Co-branding opportunity"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{children:"Akses langsung ke source code"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(En,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{children:"Konsultasi teknis gratis"})]})]}),h.jsxs(Le,{className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:[h.jsx(rw,{className:"h-4 w-4 mr-2"}),"Jadi Partner"]})]})})]})]}),h.jsx(De,{className:"bg-gradient-to-r from-primary/5 to-secondary/5 border-primary/20",children:h.jsxs(Oe,{className:"p-8 text-center space-y-6",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10",children:h.jsx(nse,{className:"h-6 w-6 text-primary"})}),h.jsx("h3",{className:"text-xl font-semibold",children:"Kontribusi Custom"}),h.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"Ingin berkontribusi dengan jumlah yang berbeda? Setiap rupiah berarti bagi kami!"})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center max-w-md mx-auto",children:[h.jsx(Le,{variant:"outline",className:"flex-1",children:"Rp 25.000"}),h.jsx(Le,{variant:"outline",className:"flex-1",children:"Rp 100.000"}),h.jsx(Le,{variant:"outline",className:"flex-1",children:"Jumlah Lain"})]})]})}),h.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 rounded-2xl p-8 md:p-12 text-center space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:"Dampak Nyata dari Dukungan Anda"}),h.jsxs("div",{className:"max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 text-left",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-semibold text-primary",children:" Dengan Rp 50.000"}),h.jsx("p",{className:"text-muted-foreground",children:"Anda membantu mengembangkan algoritma yang dapat menghemat 1000 liter air per bulan untuk setiap petani"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-semibold text-primary",children:" Dengan Rp 200.000"}),h.jsx("p",{className:"text-muted-foreground",children:"Anda membiayai pengembangan satu fitur AI baru yang dapat meningkatkan efisiensi penyiraman hingga 40%"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-semibold text-primary",children:" Dengan Rp 500.000"}),h.jsx("p",{className:"text-muted-foreground",children:"Anda mendukung riset untuk satu jenis tanaman baru, memperluas kemampuan robot ke lebih banyak komoditas"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-semibold text-primary",children:" Dengan Donasi Besar"}),h.jsx("p",{className:"text-muted-foreground",children:"Anda membantu kami menciptakan versi open-source yang bisa diakses petani di seluruh Indonesia secara gratis"})]})]})]}),h.jsxs("div",{className:"pt-6",children:[h.jsxs("p",{className:"text-lg font-medium mb-4",children:[" ",h.jsx("strong",{children:"Target kami:"})," Mengumpulkan Rp 10 juta untuk pengembangan fase selanjutnya"]}),h.jsx("div",{className:"bg-background/50 rounded-full h-4 overflow-hidden mb-4",children:h.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary h-full w-[23%] rounded-full"})}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Rp 2.3 juta terkumpul dari 47 donatur   Target: Rp 10 juta"})]})]}),h.jsx(Yd,{}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-4",children:h.jsx(Ki,{className:"h-6 w-6 text-primary"})}),h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Daftar Akun Admin"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Ajukan akses ke dashboard admin GREENOVA AI untuk monitoring robot, analitik data real-time, dan kontrol sistem"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-500/10",children:h.jsx(sm,{className:"h-6 w-6 text-blue-500"})}),h.jsx("h4",{className:"font-semibold",children:"Real-time Monitoring"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Pantau status robot, sensor data, dan kondisi lingkungan secara real-time melalui dashboard interaktif"})]})}),h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-500/10",children:h.jsx(_A,{className:"h-6 w-6 text-green-500"})}),h.jsx("h4",{className:"font-semibold",children:"Data Analytics"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Akses laporan lengkap, analisis tren, dan insights untuk optimasi sistem pertanian"})]})}),h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-purple-500/10",children:h.jsx(sy,{className:"h-6 w-6 text-purple-500"})}),h.jsx("h4",{className:"font-semibold",children:"Remote Control"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Kontrol robot dari jarak jauh, atur jadwal penyiraman, dan konfigurasi sistem secara aman"})]})})]}),h.jsx(De,{className:"max-w-2xl mx-auto",children:h.jsxs(Oe,{className:"p-8 space-y-6",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Formulir Permintaan Akun Admin"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Isi formulir di bawah untuk mengajukan akses admin dashboard"})]}),h.jsxs("form",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Nama Lengkap"}),h.jsx("input",{type:"text",placeholder:"John Doe",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Email"}),h.jsx("input",{type:"email",placeholder:"john@example.com",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Instansi/Organisasi"}),h.jsx("input",{type:"text",placeholder:"Universitas/Perusahaan/Organisasi",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Alasan Mengajukan Akun Admin"}),h.jsx("textarea",{placeholder:"Jelaskan bagaimana Anda akan menggunakan akses admin ini...",rows:4,className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Bidang Keahlian/Minat"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Pertanian","Teknologi","Penelitian","Pendidikan","Lingkungan","IoT/Robotika","Data Science","Lainnya"].map((t,e)=>h.jsxs("label",{className:"flex items-center gap-2 p-2 border border-border rounded cursor-pointer hover:bg-muted/50",children:[h.jsx("input",{type:"checkbox",className:"text-primary"}),h.jsx("span",{className:"text-sm",children:t})]},e))})]}),h.jsx("div",{className:"pt-4",children:h.jsxs(Le,{type:"submit",className:"w-full",children:[h.jsx(lU,{className:"h-4 w-4 mr-2"}),"Kirim Permintaan Akun Admin"]})})]}),h.jsxs("div",{className:"text-center pt-4 border-t border-border",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:" Kami akan menghubungi Anda dalam 2-3 hari kerja untuk proses verifikasi"}),h.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Atau kirim email langsung ke:",h.jsx("a",{href:"mailto:admin@greenova.ai?subject=Permintaan Akun Admin",className:"text-primary hover:underline ml-1",children:"admin@greenova.ai"})]})]})]})})]}),h.jsx(Yd,{}),h.jsxs("div",{id:"collaboration-section",className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-4",children:h.jsx(H4,{className:"h-6 w-6 text-primary"})}),h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Kolaborasi & Partnership"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Kami terbuka untuk berbagai bentuk kolaborasi yang dapat mempercepat pengembangan teknologi pertanian berkelanjutan"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsx(De,{className:"p-6 hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-blue-500/10",children:h.jsx(Rre,{className:"h-5 w-5 text-blue-500"})}),h.jsx("h3",{className:"font-semibold",children:"Partnership Akademik"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Kerja sama dengan universitas untuk riset, pengembangan kurikulum, dan program magang mahasiswa dalam bidang AgriTech."}),h.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[h.jsx("li",{children:" Program riset bersama"}),h.jsx("li",{children:" Thesis & capstone projects"}),h.jsx("li",{children:" Workshop & seminar"})]})]})}),h.jsx(De,{className:"p-6 hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-green-500/10",children:h.jsx(K4,{className:"h-5 w-5 text-green-500"})}),h.jsx("h3",{className:"font-semibold",children:"Partnership Industri"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Kolaborasi dengan perusahaan teknologi, pertanian, dan startup untuk scaling dan commercialization."}),h.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[h.jsx("li",{children:" Joint product development"}),h.jsx("li",{children:" Technology licensing"}),h.jsx("li",{children:" Distribution partnership"})]})]})}),h.jsx(De,{className:"p-6 hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-purple-500/10",children:h.jsx(rw,{className:"h-5 w-5 text-purple-500"})}),h.jsx("h3",{className:"font-semibold",children:"Partnership Pemerintah"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Bekerja sama dengan pemerintah daerah dan pusat untuk implementasi smart farming dalam program ketahanan pangan."}),h.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1",children:[h.jsx("li",{children:" Pilot project desa digital"}),h.jsx("li",{children:" Program pemberdayaan petani"}),h.jsx("li",{children:" Policy development support"})]})]})})]})]}),h.jsxs("div",{className:"bg-muted/30 rounded-xl p-8 space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-2xl md:text-3xl font-bold",children:"Hubungi Kami untuk Kolaborasi"}),h.jsx("p",{className:"text-muted-foreground",children:"Mari diskusikan bagaimana kita bisa bekerja sama untuk menciptakan masa depan pertanian yang lebih baik"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx(gy,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"Email Partnership"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"partnership@greenova.ai"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx(tU,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"WhatsApp Business"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"+62 812-3456-7890"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:h.jsx($A,{className:"h-5 w-5 text-primary"})}),h.jsx("h4",{className:"font-medium",children:"Kantor"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Jakarta, Indonesia"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-center font-medium",children:"Ikuti Progress Kami"}),h.jsxs("div",{className:"flex justify-center gap-4",children:[h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",children:h.jsx(Y6,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",children:h.jsx(J6,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",children:h.jsx(oU,{className:"h-4 w-4"})}),h.jsx(Le,{variant:"outline",size:"icon",className:"hover:bg-primary hover:text-primary-foreground",children:h.jsx(Q6,{className:"h-4 w-4"})})]})]})]}),h.jsxs("div",{className:"text-center space-y-6",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Metode Pembayaran yang Aman & Mudah"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto",children:[{name:"GoPay",logo:""},{name:"OVO",logo:""},{name:"DANA",logo:""},{name:"Bank Transfer",logo:""}].map((t,e)=>h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[h.jsx("span",{className:"text-2xl",children:t.logo}),h.jsx("span",{className:"text-sm font-medium",children:t.name})]},e))}),h.jsx("p",{className:"text-sm text-muted-foreground",children:" Semua transaksi dienkripsi dan aman. Kami tidak menyimpan data kartu kredit Anda."})]}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-4",children:h.jsx(PA,{className:"h-6 w-6 text-primary"})}),h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Feedback & Laporan Bug"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Bantu kami meningkatkan GREENOVA AI dengan memberikan masukan atau melaporkan bug yang Anda temukan"})]}),h.jsx(De,{className:"max-w-2xl mx-auto",children:h.jsxs(Oe,{className:"p-8 space-y-6",children:[h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Formulir Feedback"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Setiap masukan Anda sangat berharga untuk pengembangan sistem"})]}),h.jsxs("form",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Nama"}),h.jsx("input",{type:"text",placeholder:"Nama lengkap",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Email"}),h.jsx("input",{type:"email",placeholder:"email@example.com",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Kategori"}),h.jsxs("select",{className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50",children:[h.jsx("option",{value:"",children:"Pilih kategori feedback"}),h.jsx("option",{value:"bug",children:"Bug Report"}),h.jsx("option",{value:"feature",children:"Saran Fitur Baru"}),h.jsx("option",{value:"improvement",children:"Perbaikan UI/UX"}),h.jsx("option",{value:"performance",children:"Masalah Performa"}),h.jsx("option",{value:"data",children:"Akurasi Data"}),h.jsx("option",{value:"other",children:"Lainnya"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Prioritas"}),h.jsx("div",{className:"flex gap-4",children:["Rendah","Sedang","Tinggi","Kritis"].map(t=>h.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[h.jsx("input",{type:"radio",name:"priority",value:t.toLowerCase()}),h.jsx("span",{className:"text-sm",children:t})]},t))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Deskripsi Detail"}),h.jsx("textarea",{placeholder:"Jelaskan masukan, bug, atau saran Anda secara detail...",rows:5,className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Langkah Reproduksi (untuk bug)"}),h.jsx("textarea",{placeholder:"Jika ini bug report, jelaskan langkah-langkah untuk mereproduksi masalah (opsional)",rows:3,className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50 resize-none"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Informasi Browser/Device"}),h.jsx("input",{type:"text",placeholder:"Contoh: Chrome 120.0, Windows 11, Mobile Android",className:"w-full p-3 border border-border rounded-lg bg-input-background focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",id:"follow-up"}),h.jsx("label",{htmlFor:"follow-up",className:"text-sm text-muted-foreground",children:"Saya ingin mendapat update mengenai feedback ini via email"})]}),h.jsx("div",{className:"pt-4",children:h.jsxs(Le,{type:"submit",className:"w-full",children:[h.jsx(rU,{className:"h-4 w-4 mr-2"}),"Kirim Feedback"]})})]}),h.jsx("div",{className:"text-center pt-4 border-t border-border",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Ki,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Data Aman & Privat"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Wi,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{children:"Respon dalam 24 jam"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(xy,{className:"h-4 w-4 text-purple-500"}),h.jsx("span",{children:"Ditangani Tim Ahli"})]})]})})]})})]}),h.jsx(Yd,{}),h.jsxs("div",{className:"text-center space-y-6 bg-gradient-to-r from-primary to-secondary text-white rounded-2xl p-8 md:p-12",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-2xl md:text-3xl font-bold",children:"Jadilah Bagian dari Revolusi Pertanian! "}),h.jsx("p",{className:"text-lg opacity-90 max-w-2xl mx-auto",children:"Bergabunglah dengan ratusan supporter lainnya yang percaya pada masa depan pertanian berkelanjutan. Setiap dukungan Anda adalah investasi untuk Indonesia yang lebih hijau dan sejahtera."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsxs(Le,{size:"lg",variant:"secondary",className:"text-primary font-semibold px-8",children:[h.jsx(pp,{className:"h-5 w-5 mr-2"}),"DONASI SEKARANG"]}),h.jsxs(Le,{size:"lg",variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[h.jsx(H4,{className:"h-5 w-5 mr-2"}),"AJUKAN KOLABORASI"]})]}),h.jsx("p",{className:"text-sm opacity-75",children:" Proses hanya 2 menit   Dapatkan update eksklusif langsung ke email"})]})]})]})}const HAe="modulepreload",qAe=function(t){return"/"+t},t5={},KAe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=a(n.map(c=>{if(c=qAe(c),c in t5)return;t5[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":HAe,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};var AS="Switch",[XAe,Net]=Co(AS),[YAe,QAe]=XAe(AS),rX=_.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=t,[p,g]=_.useState(null),y=Wt(e,S=>g(S)),x=_.useRef(!1),v=p?u||!!p.closest("form"):!0,[w,k]=Kl({prop:s,defaultProp:i??!1,onChange:c,caller:AS});return h.jsxs(YAe,{scope:n,checked:w,disabled:o,children:[h.jsx(bt.button,{type:"button",role:"switch","aria-checked":w,"aria-required":a,"data-state":oX(w),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:y,onClick:St(t.onClick,S=>{k(I=>!I),v&&(x.current=S.isPropagationStopped(),x.current||S.stopPropagation())})}),v&&h.jsx(aX,{control:p,bubbles:!x.current,name:r,value:l,checked:w,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});rX.displayName=AS;var sX="SwitchThumb",iX=_.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=QAe(sX,n);return h.jsx(bt.span,{"data-state":oX(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});iX.displayName=sX;var JAe="SwitchBubbleInput",aX=_.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=_.useRef(null),o=Wt(a,i),l=PR(n),c=AR(e);return _.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(u,n),u.dispatchEvent(y)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});aX.displayName=JAe;function oX(t){return t?"checked":"unchecked"}var ZAe=rX,eRe=iX;function Kr({className:t,...e}){return h.jsx(ZAe,{"data-slot":"switch",className:It("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(eRe,{"data-slot":"switch-thumb",className:It("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function tRe({className:t,...e}){return h.jsx("textarea",{"data-slot":"textarea",className:It("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function nRe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}Array(12).fill(0);let B_=1;class rRe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,i=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:B_++,a=this.toasts.find(l=>l.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...s,dismissible:o,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,a;const o=s.then(async c=>{if(a=["resolve",c],sn.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(iRe(c)&&!c.ok){i=!1;const d=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof d=="object"&&!sn.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:p,...y})}else if(c instanceof Error){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!sn.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:p,...y})}else if(n.success!==void 0){i=!1;const d=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,y=typeof d=="object"&&!sn.isValidElement(d)?d:{message:d};this.create({id:r,type:"success",description:p,...y})}}).catch(async c=>{if(a=["reject",c],n.error!==void 0){i=!1;const u=typeof n.error=="function"?await n.error(c):n.error,d=typeof n.description=="function"?await n.description(c):n.description,g=typeof u=="object"&&!sn.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:d,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=n?.id||B_++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ba=new rRe,sRe=(t,e)=>{const n=e?.id||B_++;return ba.addToast({title:t,...e,id:n}),n},iRe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",aRe=sRe,oRe=()=>ba.toasts,lRe=()=>ba.getActiveToasts(),Xc=Object.assign(aRe,{success:ba.success,info:ba.info,warning:ba.warning,error:ba.error,custom:ba.custom,message:ba.message,promise:ba.promise,dismiss:ba.dismiss,loading:ba.loading},{getHistory:oRe,getToasts:lRe});nRe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function cRe({selectedRobotId:t,onRobotSelect:e}){const{robots:n,loading:r}=yl(),[s,i]=_.useState(!1),[a,o]=_.useState(""),[l,c]=_.useState(""),[u,d]=_.useState(""),[p,g]=_.useState(""),[y,x]=_.useState(""),[v,w]=_.useState(""),[k,S]=_.useState(""),[I,E]=_.useState(!0),j=n.find(T=>T.robot_id===t);if(_.useEffect(()=>{j&&(o(j.robot_id),c("Robot GREENOVA untuk monitoring lingkungan dan perawatan tanaman otomatis."),d(j.city_loc),g(j.location.latitude.toString()),x(j.location.longitude.toString()),w("GREENOVA_Network"),S(""),E(!0))},[j]),r||!j)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsx("p",{className:"text-muted-foreground",children:"Memuat data robot..."})});const A=async()=>{i(!0);try{if(!j){Xc.error("Robot tidak ditemukan.");return}if(typeof globalThis.__firebase_config<"u")try{const{getFirestore:$,doc:D,updateDoc:R}=await KAe(async()=>{const{getFirestore:X,doc:q,updateDoc:Q}=await Promise.resolve().then(()=>hhe);return{getFirestore:X,doc:q,updateDoc:Q}},void 0),F=$(),L=D(F,"robotStatus",j.robot_id),K={name:a,description:l,city_loc:u,location:{latitude:parseFloat(p),longitude:parseFloat(y)},network:{wifi_ssid:v,wifi_password:k,auto_connect:I}};await R(L,K),Xc.success("Pengaturan berhasil disimpan ke Firebase!")}catch($){console.error("Error saving to Firebase:",$),Xc.error("Gagal menyimpan ke Firebase, menggunakan localStorage sebagai fallback"),localStorage.setItem(`robot_settings_${j.robot_id}`,JSON.stringify({name:a,description:l,city_loc:u,location:{latitude:parseFloat(p),longitude:parseFloat(y)},network:{wifi_ssid:v,wifi_password:k,auto_connect:I}})),Xc.success("Pengaturan disimpan secara lokal!")}else localStorage.setItem(`robot_settings_${j.robot_id}`,JSON.stringify({name:a,description:l,city_loc:u,location:{latitude:parseFloat(p),longitude:parseFloat(y)},network:{wifi_ssid:v,wifi_password:k,auto_connect:I}})),Xc.success("Pengaturan disimpan secara lokal!")}catch(T){console.error("Gagal menyimpan pengaturan:",T),Xc.error("Gagal menyimpan pengaturan")}finally{i(!1)}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Pengaturan Robot"}),h.jsx(Ft,{variant:"outline",children:j.robot_id})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs(hi,{value:t,onValueChange:e,children:[h.jsx(pi,{className:"w-[200px]",children:h.jsx(fi,{placeholder:"Pilih Robot"})}),h.jsx(mi,{children:n.map(T=>h.jsx(Ot,{value:T.robot_id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wn,{className:"h-4 w-4"}),h.jsx("span",{children:T.robot_id})]})},T.robot_id))})]}),h.jsxs(Le,{onClick:A,disabled:s,children:[s?h.jsx(ki,{className:"h-4 w-4 mr-2 animate-spin"}):h.jsx(nU,{className:"h-4 w-4 mr-2"}),"Simpan Semua"]})]})]}),h.jsxs(Uh,{defaultValue:"general",className:"space-y-6",children:[h.jsxs(Wh,{className:"grid w-full grid-cols-5",children:[h.jsx(Ln,{value:"general",children:"Umum"}),h.jsx(Ln,{value:"sensors",children:"Sensor"}),h.jsx(Ln,{value:"network",children:"Network"}),h.jsx(Ln,{value:"automation",children:"Otomasi"}),h.jsx(Ln,{value:"maintenance",children:"Maintenance"})]}),h.jsxs(Vn,{value:"general",className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(wn,{className:"h-4 w-4"}),"Informasi Robot"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"robot-name",children:"Nama Robot"}),h.jsx(Pt,{id:"robot-name",value:a,onChange:T=>o(T.target.value)})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"robot-id",children:"Robot ID"}),h.jsx(Pt,{id:"robot-id",defaultValue:j.robot_id,disabled:!0})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"description",children:"Deskripsi"}),h.jsx(tRe,{id:"description",placeholder:"Deskripsi robot...",defaultValue:l,onChange:T=>c(T.target.value)})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"location",children:"Lokasi"}),h.jsx(Pt,{id:"location",value:u,onChange:T=>d(T.target.value)})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"latitude",children:"Latitude"}),h.jsx(Pt,{id:"latitude",value:p,onChange:T=>g(T.target.value)})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"longitude",children:"Longitude"}),h.jsx(Pt,{id:"longitude",value:y,onChange:T=>x(T.target.value)})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(pk,{className:"h-4 w-4"}),"Pengaturan Sistem"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"update-interval",children:"Interval Update (detik)"}),h.jsxs(hi,{defaultValue:"30",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"10",children:"10 detik"}),h.jsx(Ot,{value:"30",children:"30 detik"}),h.jsx(Ot,{value:"60",children:"1 menit"}),h.jsx(Ot,{value:"300",children:"5 menit"})]})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"timezone",children:"Zona Waktu"}),h.jsxs(hi,{defaultValue:"asia-jakarta",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"asia-jakarta",children:"Asia/Jakarta (WIB)"}),h.jsx(Ot,{value:"asia-makassar",children:"Asia/Makassar (WITA)"}),h.jsx(Ot,{value:"asia-jayapura",children:"Asia/Jayapura (WIT)"})]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"auto-restart",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"auto-restart",children:"Auto Restart saat Error"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"debug-mode"}),h.jsx(Ke,{htmlFor:"debug-mode",children:"Mode Debug"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"sleep-mode"}),h.jsx(Ke,{htmlFor:"sleep-mode",children:"Mode Hemat Energi"})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(uk,{className:"h-4 w-4"}),"Manajemen Daya"]})}),h.jsx(Oe,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"low-battery-threshold",children:"Threshold Baterai Rendah (%)"}),h.jsx(Pt,{id:"low-battery-threshold",type:"number",defaultValue:"20",min:"5",max:"50"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"critical-battery-threshold",children:"Threshold Baterai Kritis (%)"}),h.jsx(Pt,{id:"critical-battery-threshold",type:"number",defaultValue:"10",min:"1",max:"20"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"charging-schedule",children:"Jadwal Charging"}),h.jsx(Pt,{id:"charging-schedule",type:"time",defaultValue:"22:00"})]})]})})]})]}),h.jsx(Vn,{value:"sensors",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(ix,{className:"h-4 w-4 text-red-500"}),"Sensor Suhu"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"temp-enabled",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"temp-enabled",children:"Aktifkan Sensor"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"temp-min",children:"Minimum (C)"}),h.jsx(Pt,{id:"temp-min",type:"number",defaultValue:"15"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"temp-max",children:"Maximum (C)"}),h.jsx(Pt,{id:"temp-max",type:"number",defaultValue:"40"})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"temp-calibration",children:"Kalibrasi Offset"}),h.jsx(Pt,{id:"temp-calibration",type:"number",step:"0.1",defaultValue:"0.0"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Zr,{className:"h-4 w-4 text-blue-500"}),"Sensor Kelembaban"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"humidity-enabled",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"humidity-enabled",children:"Aktifkan Sensor"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"humidity-min",children:"Minimum (%)"}),h.jsx(Pt,{id:"humidity-min",type:"number",defaultValue:"30"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"humidity-max",children:"Maximum (%)"}),h.jsx(Pt,{id:"humidity-max",type:"number",defaultValue:"90"})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"humidity-calibration",children:"Kalibrasi Offset"}),h.jsx(Pt,{id:"humidity-calibration",type:"number",step:"0.1",defaultValue:"0.0"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(fu,{className:"h-4 w-4 text-green-500"}),"Sensor Kualitas Udara"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"air-enabled",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"air-enabled",children:"Aktifkan Sensor"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"air-threshold",children:"Threshold Buruk"}),h.jsx(Pt,{id:"air-threshold",type:"number",defaultValue:"50"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"air-type",children:"Tipe Sensor"}),h.jsxs(hi,{defaultValue:"pm25",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"pm25",children:"PM2.5"}),h.jsx(Ot,{value:"pm10",children:"PM10"}),h.jsx(Ot,{value:"co2",children:"CO2"}),h.jsx(Ot,{value:"voc",children:"VOC"})]})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(jA,{className:"h-4 w-4 text-yellow-500"}),"Sensor Cahaya"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"light-enabled",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"light-enabled",children:"Aktifkan Sensor"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"light-sensitivity",children:"Sensitivitas"}),h.jsxs(hi,{defaultValue:"medium",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"low",children:"Rendah"}),h.jsx(Ot,{value:"medium",children:"Sedang"}),h.jsx(Ot,{value:"high",children:"Tinggi"})]})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"light-units",children:"Unit Pengukuran"}),h.jsxs(hi,{defaultValue:"lux",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"lux",children:"Lux"}),h.jsx(Ot,{value:"percent",children:"Percentage"})]})]})]})]})]})]})}),h.jsxs(Vn,{value:"network",className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(fh,{className:"h-4 w-4"}),"Koneksi WiFi"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"wifi-ssid",children:"SSID"}),h.jsx(Pt,{id:"wifi-ssid",value:v,onChange:T=>w(T.target.value)})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"wifi-password",children:"Password"}),h.jsx(Pt,{id:"wifi-password",type:"password",placeholder:"",value:k,onChange:T=>S(T.target.value)})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"wifi-auto-connect",checked:I,onCheckedChange:E}),h.jsx(Ke,{htmlFor:"wifi-auto-connect",children:"Auto Connect"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"wifi-backup",children:"Backup Network"}),h.jsx(Pt,{id:"wifi-backup",placeholder:"SSID cadangan"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Ki,{className:"h-4 w-4"}),"Server Configuration"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"server-url",children:"Server URL"}),h.jsx(Pt,{id:"server-url",defaultValue:"https://api.greenova.id"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"api-key",children:"API Key"}),h.jsx(Pt,{id:"api-key",type:"password",placeholder:""})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"heartbeat-interval",children:"Heartbeat Interval (menit)"}),h.jsxs(hi,{defaultValue:"5",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"1",children:"1 menit"}),h.jsx(Ot,{value:"5",children:"5 menit"}),h.jsx(Ot,{value:"10",children:"10 menit"}),h.jsx(Ot,{value:"30",children:"30 menit"})]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"ssl-verify",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"ssl-verify",children:"Verifikasi SSL"})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Status Koneksi"})}),h.jsx(Oe,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[h.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"WiFi"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Connected"})]})]}),h.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[h.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Server"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Online"})]})]}),h.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[h.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Signal"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.signal_strength,"%"]})]})]})]})})]})]}),h.jsxs(Vn,{value:"automation",className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Zr,{className:"h-4 w-4 text-blue-500"}),"Jadwal Penyiraman"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"auto-watering",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"auto-watering",children:"Aktifkan Penyiraman Otomatis"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"watering-time-1",children:"Jadwal 1"}),h.jsx(Pt,{id:"watering-time-1",type:"time",defaultValue:"06:00"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"watering-time-2",children:"Jadwal 2"}),h.jsx(Pt,{id:"watering-time-2",type:"time",defaultValue:"18:00"})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"watering-duration",children:"Durasi (menit)"}),h.jsx(Pt,{id:"watering-duration",type:"number",defaultValue:"5",min:"1",max:"30"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"soil-threshold",children:"Threshold Kelembaban Tanah (%)"}),h.jsx(Pt,{id:"soil-threshold",type:"number",defaultValue:"40",min:"10",max:"80"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(ts,{className:"h-4 w-4 text-yellow-500"}),"Trigger Lingkungan"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"temp-trigger",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"temp-trigger",children:"Trigger Suhu Tinggi"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"temp-trigger-value",children:"Suhu Maximum (C)"}),h.jsx(Pt,{id:"temp-trigger-value",type:"number",defaultValue:"35"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"air-trigger",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"air-trigger",children:"Trigger Kualitas Udara Buruk"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"air-trigger-value",children:"AQI Minimum"}),h.jsx(Pt,{id:"air-trigger-value",type:"number",defaultValue:"50"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"emergency-mode"}),h.jsx(Ke,{htmlFor:"emergency-mode",children:"Mode Darurat"})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Otomasi Tugas"})}),h.jsx(Oe,{children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Pembersihan Filter Otomatis"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Setiap 7 hari sekali"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Kr,{defaultChecked:!0}),h.jsx(Le,{variant:"outline",size:"sm",children:h.jsx(LC,{className:"h-3 w-3"})})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Update Firmware"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Otomatis saat tersedia"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Kr,{defaultChecked:!0}),h.jsx(Le,{variant:"outline",size:"sm",children:h.jsx(LC,{className:"h-3 w-3"})})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Laporan Harian"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Kirim laporan setiap jam 19:00"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Kr,{defaultChecked:!0}),h.jsx(Le,{variant:"outline",size:"sm",children:h.jsx(LC,{className:"h-3 w-3"})})]})]}),h.jsxs(Le,{variant:"outline",className:"w-full",children:[h.jsx(Ose,{className:"h-4 w-4 mr-2"}),"Tambah Tugas Otomatis"]})]})})]})]}),h.jsx(Vn,{value:"maintenance",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Wi,{className:"h-4 w-4"}),"Jadwal Maintenance"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"maintenance-interval",children:"Interval Maintenance (hari)"}),h.jsxs(hi,{defaultValue:"30",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"7",children:"7 hari"}),h.jsx(Ot,{value:"14",children:"14 hari"}),h.jsx(Ot,{value:"30",children:"30 hari"}),h.jsx(Ot,{value:"90",children:"90 hari"})]})]})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"next-maintenance",children:"Maintenance Berikutnya"}),h.jsx(Pt,{id:"next-maintenance",type:"date",defaultValue:"2024-01-20"})]}),h.jsxs("div",{children:[h.jsx(Ke,{htmlFor:"maintenance-technician",children:"Teknisi"}),h.jsxs(hi,{defaultValue:"ahmad",children:[h.jsx(pi,{children:h.jsx(fi,{})}),h.jsxs(mi,{children:[h.jsx(Ot,{value:"ahmad",children:"Ahmad Susanto"}),h.jsx(Ot,{value:"budi",children:"Budi Santoso"}),h.jsx(Ot,{value:"citra",children:"Citra Dewi"})]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kr,{id:"auto-notification",defaultChecked:!0}),h.jsx(Ke,{htmlFor:"auto-notification",children:"Notifikasi Otomatis"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(Ki,{className:"h-4 w-4"}),"System Health"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm",children:"Filter Status"}),h.jsx(Ft,{variant:"default",children:"Baik"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm",children:"Sensor Accuracy"}),h.jsx(Ft,{variant:"default",children:"98%"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm",children:"Motor Performance"}),h.jsx(Ft,{variant:"default",children:"Optimal"})]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-sm",children:"Last Check"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:"2 jam yang lalu"})]})]}),h.jsxs(Le,{variant:"outline",className:"w-full",children:[h.jsx(ki,{className:"h-4 w-4 mr-2"}),"Run Health Check"]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Backup & Recovery"})}),h.jsx(Oe,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs(Le,{variant:"outline",className:"h-20 flex-col gap-2",children:[h.jsx(AA,{className:"h-6 w-6"}),h.jsx("span",{children:"Backup Config"})]}),h.jsxs(Le,{variant:"outline",className:"h-20 flex-col gap-2",children:[h.jsx(vie,{className:"h-6 w-6"}),h.jsx("span",{children:"Restore Config"})]}),h.jsxs(Le,{variant:"outline",className:"h-20 flex-col gap-2 border-red-200 text-red-600 hover:bg-red-50",children:[h.jsx(hie,{className:"h-6 w-6"}),h.jsx("span",{children:"Factory Reset"})]})]})})]})]})})]})]})}function Rd({onClick:t}){return h.jsxs(Le,{variant:"outline",size:"sm",onClick:t,className:"mb-4 hover:bg-muted/80",children:[h.jsx(q6,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}function uRe({onClick:t}){return h.jsx(Le,{onClick:t,className:"fixed bottom-6 right-6 w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50 bg-gradient-to-r from-primary to-secondary hover:scale-105",size:"icon",children:h.jsx(wn,{className:"h-6 w-6 text-white"})})}function dRe(){return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center mx-auto animate-pulse",children:h.jsx("div",{className:"w-6 h-6 bg-white rounded-full"})}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"GREENOVA AI"}),h.jsx("p",{className:"text-muted-foreground",children:"Memuat dashboard..."})]})]})})}function hRe({children:t,error:e}){return e?h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:h.jsxs("div",{className:"text-center space-y-4 max-w-md mx-auto p-6",children:[h.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:h.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full"})}),h.jsx("h1",{className:"text-xl font-semibold text-red-600",children:"Terjadi Error"}),h.jsx("p",{className:"text-muted-foreground",children:"Maaf, terjadi kesalahan saat memuat aplikasi."}),h.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Muat Ulang"})]})}):h.jsx(h.Fragment,{children:t})}function fRe(){const[t,e]=_.useState(""),[n,r]=_.useState("24h"),{stations:s,plantReadings:i,loading:a}=yl(),o=t||(s.length>0?s[0].station_id:""),l=s.find(S=>S.station_id===o),c=i.filter(S=>S.station_id===o).slice(0,24),u=c.length>0?c[0]:null,d=c.map(S=>({time:S.timestamp?new Date(S.timestamp.seconds*1e3).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"N/A",moistureA:S.plant_A.moisture,moistureB:S.plant_B.moisture})).reverse(),p=(u?.plant_A.condition==="Baik"?1:0)+(u?.plant_B.condition==="Baik"?1:0),g=(u?.plant_A.condition==="Buruk"?1:0)+(u?.plant_B.condition==="Buruk"?1:0),y=u?2:0,x=u?Math.round((u.plant_A.moisture+u.plant_B.moisture)/2):0,v=S=>{switch(S){case"Baik":return"default";case"Sedang":return"secondary";case"Buruk":return"destructive";default:return"secondary"}},w=S=>{switch(S){case"Baik":return h.jsx(En,{className:"h-4 w-4 text-green-600"});case"Sedang":return h.jsx(ts,{className:"h-4 w-4 text-yellow-600"});case"Buruk":return h.jsx(ts,{className:"h-4 w-4 text-red-600"});default:return h.jsx(q4,{className:"h-4 w-4 text-gray-600"})}},k=(S,I)=>S>I+5?h.jsx(ro,{className:"h-3 w-3 text-green-500"}):S<I-5?h.jsx(jd,{className:"h-3 w-3 text-red-500"}):h.jsx(q4,{className:"h-3 w-3 text-gray-500"});return a||!l?h.jsx("div",{className:"flex items-center justify-center h-screen w-full",children:h.jsx("p",{className:"text-muted-foreground",children:"Memuat data..."})}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Kualitas Tanaman"}),h.jsx("p",{className:"text-muted-foreground",children:"Pantau kondisi dan kelembaban tanah dari jaringan stasiun penyiraman GREENOVA"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs(hi,{value:o,onValueChange:e,children:[h.jsx(pi,{className:"w-[200px]",children:h.jsx(fi,{placeholder:"Pilih Stasiun"})}),h.jsx(mi,{children:s.map(S=>h.jsx(Ot,{value:S.station_id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Zr,{className:`h-4 w-4 ${S.watering_status?"text-green-500":"text-red-500"}`}),h.jsx("span",{children:S.station_id})]})},S.station_id))})]}),h.jsx(Le,{variant:"outline",size:"icon",children:h.jsx(ki,{className:"h-4 w-4"})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Total Tanaman"}),h.jsx(hk,{className:"h-4 w-4 text-muted-foreground"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:y}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:["di ",l.city_loc||"N/A"]})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Kondisi Sehat"}),h.jsx(En,{className:"h-4 w-4 text-green-500"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:p}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"tanaman dalam kondisi baik"})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Perlu Perhatian"}),h.jsx(ts,{className:"h-4 w-4 text-red-500"})]}),h.jsxs(Oe,{children:[h.jsx("div",{className:"text-2xl font-bold",children:g}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"tanaman kondisi buruk"})]})]}),h.jsxs(De,{children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(ht,{className:"text-sm font-medium",children:"Rata-rata Kelembaban"}),h.jsx(Zr,{className:"h-4 w-4 text-blue-500"})]}),h.jsxs(Oe,{children:[h.jsxs("div",{className:"text-2xl font-bold",children:[x,"%"]}),h.jsx("p",{className:"text-xs text-muted-foreground",children:"kelembaban tanah"})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx($A,{className:"h-5 w-5"}),"Informasi Stasiun"]})}),h.jsxs(Oe,{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Status Operasi"}),h.jsx(Ft,{variant:l.watering_status?"default":"destructive",children:l.watering_status?"MENYIRAM":"STANDBY"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Baterai"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(au,{value:l.battery,className:"flex-1"}),h.jsxs("span",{className:"text-sm font-medium",children:[l.battery,"%"]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Kekuatan Sinyal"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(au,{value:l.signal_strength,className:"flex-1"}),h.jsxs("span",{className:"text-sm font-medium",children:[l.signal_strength,"%"]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm font-medium",children:"Terakhir Disiram"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Wi,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm font-medium",children:l.last_plant_watering||"N/A"})]})]})]}),h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{children:[" ",l.city_loc||"N/A"]}),h.jsx("span",{children:""}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(Wi,{className:"h-3 w-3"}),"Update: ",l.last_seen?new Date(l.last_seen.seconds*1e3).toLocaleTimeString("id-ID"):"N/A"]})]})})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u&&Object.entries(u).filter(([S,I])=>S.startsWith("plant_")).map(([S,I])=>h.jsxs(De,{className:"hover:shadow-lg transition-shadow",children:[h.jsxs(dt,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[h.jsx(ht,{className:"text-base font-medium",children:S.replace("_"," ").replace(/\b\w/g,E=>E.toUpperCase())}),w(I.condition)]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Kelembaban Tanah"}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs("span",{className:"font-medium",children:[I.moisture,"%"]}),k(I.moisture,50)," "]})]}),h.jsx(au,{value:I.moisture,className:"h-2"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Kondisi"}),h.jsx(Ft,{variant:v(I.condition),children:I.condition.toUpperCase()})]}),h.jsx("div",{className:"text-xs text-muted-foreground",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Wi,{className:"h-3 w-3"}),h.jsxs("span",{children:["Update: ",I.last_update?new Date(I.last_update.seconds*1e3).toLocaleTimeString("id-ID"):"N/A"]})]})})]})]},S))}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Riwayat Kelembaban Tanah (24 Jam Terakhir)"})}),h.jsx(Oe,{children:h.jsx(lh,{width:"100%",height:400,children:h.jsxs(Px,{data:d,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"time",tick:{fontSize:12},interval:"preserveStartEnd"}),h.jsx(_u,{}),h.jsx(oh,{}),h.jsx(bi,{type:"monotone",dataKey:"moistureA",stroke:"#3b82f6",strokeWidth:2,name:"Kelembaban Tanaman A",dot:{r:3}}),h.jsx(bi,{type:"monotone",dataKey:"moistureB",stroke:"#22c55e",strokeWidth:2,name:"Kelembaban Tanaman B",dot:{r:3}})]})})})]})]})}var lX=["PageUp","PageDown"],cX=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],uX={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Em="Slider",[z_,pRe,mRe]=gk(Em),[dX,Cet]=Co(Em,[mRe]),[gRe,RS]=dX(Em),hX=_.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:y,...x}=t,v=_.useRef(new Set),w=_.useRef(0),S=a==="horizontal"?yRe:xRe,[I=[],E]=Kl({prop:u,defaultProp:c,onChange:R=>{[...v.current][w.current]?.focus(),d(R)}}),j=_.useRef(I);function A(R){const F=SRe(I,R);D(R,F)}function T(R){D(R,w.current)}function $(){const R=j.current[w.current];I[w.current]!==R&&p(I)}function D(R,F,{commit:L}={commit:!1}){const K=ERe(i),X=TRe(Math.round((R-r)/i)*i+r,K),q=by(X,[r,s]);E((Q=[])=>{const z=wRe(Q,q,F);if(IRe(z,l*i)){w.current=z.indexOf(q);const H=String(z)!==String(Q);return H&&L&&p(z),H?z:Q}else return Q})}return h.jsx(gRe,{scope:t.__scopeSlider,name:n,disabled:o,min:r,max:s,valueIndexToChangeRef:w,thumbs:v.current,values:I,orientation:a,form:y,children:h.jsx(z_.Provider,{scope:t.__scopeSlider,children:h.jsx(z_.Slot,{scope:t.__scopeSlider,children:h.jsx(S,{"aria-disabled":o,"data-disabled":o?"":void 0,...x,ref:e,onPointerDown:St(x.onPointerDown,()=>{o||(j.current=I)}),min:r,max:s,inverted:g,onSlideStart:o?void 0:A,onSlideMove:o?void 0:T,onSlideEnd:o?void 0:$,onHomeKeyDown:()=>!o&&D(r,0,{commit:!0}),onEndKeyDown:()=>!o&&D(s,I.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:F})=>{if(!o){const X=lX.includes(R.key)||R.shiftKey&&cX.includes(R.key)?10:1,q=w.current,Q=I[q],z=i*X*F;D(Q+z,q,{commit:!0})}}})})})})});hX.displayName=Em;var[fX,pX]=dX(Em,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yRe=_.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,p]=_.useState(null),g=Wt(e,S=>p(S)),y=_.useRef(void 0),x=om(s),v=x==="ltr",w=v&&!i||!v&&i;function k(S){const I=y.current||d.getBoundingClientRect(),E=[0,I.width],A=GP(E,w?[n,r]:[r,n]);return y.current=I,A(S-I.left)}return h.jsx(fX,{scope:t.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:h.jsx(mX,{dir:x,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const I=k(S.clientX);a?.(I)},onSlideMove:S=>{const I=k(S.clientX);o?.(I)},onSlideEnd:()=>{y.current=void 0,l?.()},onStepKeyDown:S=>{const E=uX[w?"from-left":"from-right"].includes(S.key);c?.({event:S,direction:E?-1:1})}})})}),xRe=_.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=_.useRef(null),d=Wt(e,u),p=_.useRef(void 0),g=!s;function y(x){const v=p.current||u.current.getBoundingClientRect(),w=[0,v.height],S=GP(w,g?[r,n]:[n,r]);return p.current=v,S(x-v.top)}return h.jsx(fX,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:h.jsx(mX,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const v=y(x.clientY);i?.(v)},onSlideMove:x=>{const v=y(x.clientY);a?.(v)},onSlideEnd:()=>{p.current=void 0,o?.()},onStepKeyDown:x=>{const w=uX[g?"from-bottom":"from-top"].includes(x.key);l?.({event:x,direction:w?-1:1})}})})}),mX=_.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=RS(Em,n);return h.jsx(bt.span,{...c,ref:e,onKeyDown:St(t.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):lX.concat(cX).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:St(t.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:St(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:St(t.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),i(d))})})}),gX="SliderTrack",yX=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=RS(gX,n);return h.jsx(bt.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});yX.displayName=gX;var U_="SliderRange",xX=_.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=RS(U_,n),i=pX(U_,n),a=_.useRef(null),o=Wt(e,a),l=s.values.length,c=s.values.map(p=>wX(p,s.min,s.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(bt.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:o,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});xX.displayName=U_;var W_="SliderThumb",vX=_.forwardRef((t,e)=>{const n=pRe(t.__scopeSlider),[r,s]=_.useState(null),i=Wt(e,o=>s(o)),a=_.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return h.jsx(vRe,{...t,ref:i,index:a})}),vRe=_.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,a=RS(W_,n),o=pX(W_,n),[l,c]=_.useState(null),u=Wt(e,k=>c(k)),d=l?a.form||!!l.closest("form"):!0,p=AR(l),g=a.values[r],y=g===void 0?0:wX(g,a.min,a.max),x=kRe(r,a.values.length),v=p?.[o.size],w=v?NRe(v,y,o.direction):0;return _.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${w}px)`},children:[h.jsx(z_.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(bt.span,{role:"slider","aria-label":t["aria-label"]||x,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:t.style,onFocus:St(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&h.jsx(bX,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},r)]})});vX.displayName=W_;var bRe="RadioBubbleInput",bX=_.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=_.useRef(null),i=Wt(s,r),a=PR(e);return _.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),h.jsx(bt.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});bX.displayName=bRe;function wRe(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function wX(t,e,n){const i=100/(n-e)*(t-e);return by(i,[0,100])}function kRe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function SRe(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function NRe(t,e,n){const r=t/2,i=GP([0,50],[0,r]);return(r-i(e)*n)*n}function CRe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function IRe(t,e){if(e>0){const n=CRe(t);return Math.min(...n)>=e}return!0}function GP(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function ERe(t){return(String(t).split(".")[1]||"").length}function TRe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var _Re=hX,ARe=yX,RRe=xX,$Re=vX;function UE({className:t,defaultValue:e,value:n,min:r=0,max:s=100,...i}){const a=_.useMemo(()=>Array.isArray(n)?n:Array.isArray(e)?e:[r,s],[n,e,r,s]);return h.jsxs(_Re,{"data-slot":"slider",defaultValue:e,value:n,min:r,max:s,className:It("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...i,children:[h.jsx(ARe,{"data-slot":"slider-track",className:It("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:h.jsx(RRe,{"data-slot":"slider-range",className:It("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>h.jsx($Re,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const Ub=t=>{if(!t)return"N/A";const e=t.seconds?new Date(t.seconds*1e3):new Date(t);return e.toLocaleDateString("id-ID",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})},PRe=(t,e)=>t>10&&e>20?h.jsx(fh,{className:"h-4 w-4 text-green-500"}):t<=10?h.jsx(DA,{className:"h-4 w-4 text-red-500"}):h.jsx(OA,{className:"h-4 w-4 text-yellow-500"}),jRe=(t,e)=>t>10&&e>20?"Online":t<=10?"Baterai Rendah":"Maintenance",DRe=t=>t>50?{status:"Baik",color:"bg-green-500"}:t>20?{status:"Rendah",color:"bg-yellow-500"}:{status:"Kritis",color:"bg-red-500"},ORe=t=>t>70?{status:"Kuat",color:"bg-green-500"}:t>30?{status:"Sedang",color:"bg-yellow-500"}:{status:"Lemah",color:"bg-red-500"},MRe=t=>{switch(t?.toLowerCase()){case"baik":return{status:"Baik",color:"bg-green-500",textColor:"text-green-500"};case"sedang":return{status:"Sedang",color:"bg-yellow-500",textColor:"text-yellow-500"};case"buruk":return{status:"Buruk",color:"bg-red-500",textColor:"text-red-500"};default:return{status:"N/A",color:"bg-gray-500",textColor:"text-gray-500"}}},FRe=({active:t,payload:e,label:n})=>t&&e&&e.length?h.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-lg border",children:[h.jsx("p",{className:"font-medium",children:`Waktu: ${n}`}),e.map((r,s)=>h.jsx("p",{style:{color:r.color},children:`${r.dataKey}: ${r.value.toFixed(2)}${r.dataKey.includes("moisture")?"%":""}`},s))]}):null;function LRe({selectedStationId:t,onStationSelect:e}){const{stations:n,plantReadings:r,loading:s,error:i}=yl(),[a,o]=_.useState({autoMode:!0,moistureThreshold:30,wateringDuration:5,wateringInterval:12}),l=n.find(k=>k.station_id===t),c=_.useMemo(()=>!r||!t?[]:r.filter(k=>k.station_id===t).sort((k,S)=>{const I=k.timestamp?.seconds||0,E=S.timestamp?.seconds||0;return I-E}),[r,t]),u=_.useMemo(()=>c.length?c.slice(-15).map(k=>{const S=Object.keys(k).filter(E=>E!=="station_id"&&E!=="timestamp"&&typeof k[E]=="object"),I={time:Ub(k.timestamp),timestamp:k.timestamp?.seconds||0};return S.forEach(E=>{k[E]&&typeof k[E]=="object"&&(I[`${E}_moisture`]=Number(k[E].moisture)||0)}),I}):[],[c]),d=_.useMemo(()=>{if(!c.length||!l)return{uptime:0,dataPoints:0,avgMoisture:0,wateringEfficiency:0,plantsMonitored:0,lastWatering:"N/A"};const k=c.filter($=>{const D=$.timestamp?.seconds*1e3;return Date.now()-D<=1440*60*1e3}),S=l.battery>10&&l.signal_strength>20?Math.min(99.5,k.length/24*100):0;let I=0,E=0,j=0;k.forEach($=>{const D=Object.keys($).filter(R=>R!=="station_id"&&R!=="timestamp"&&typeof $[R]=="object");j=Math.max(j,D.length),D.forEach(R=>{$[R]&&typeof $[R]=="object"&&$[R].moisture&&(I+=Number($[R].moisture)||0,E++)})});const A=E>0?I/E:0,T=Math.min(100,(A>40?90:A>20?70:50)+(l.watering_status?10:0));return{uptime:Math.round(S*10)/10,dataPoints:c.length,avgMoisture:Math.round(A*10)/10,wateringEfficiency:Math.round(T),plantsMonitored:j,lastWatering:l.last_plant_watering||"N/A"}},[c,l]),p=c[c.length-1],g=_.useMemo(()=>p?Object.keys(p).filter(S=>S!=="station_id"&&S!=="timestamp"&&typeof p[S]=="object").map(S=>({id:S,name:S.charAt(0).toUpperCase()+S.slice(1),...p[S]})):[],[p]),y=()=>{Xc.success("Watering system "+(l?.watering_status?"stopped":"started"))},x=()=>{Xc.success("Watering settings saved successfully")};if(s)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ki,{className:"h-8 w-8 animate-spin mx-auto mb-2"}),h.jsx("p",{children:"Memuat data station..."})]})});if(i||!l)return h.jsx("div",{className:"flex items-center justify-center h-64",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ts,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),h.jsx("p",{children:"Station tidak ditemukan atau tidak ada data"})]})});const v=DRe(l.battery),w=ORe(l.signal_strength);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Station Dashboard"}),h.jsx("p",{className:"text-muted-foreground",children:"Monitoring dan kontrol station GREENOVA"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs(hi,{value:t,onValueChange:e,children:[h.jsx(pi,{className:"w-48",children:h.jsx(fi,{placeholder:"Pilih Station"})}),h.jsx(mi,{children:n.map(k=>h.jsx(Ot,{value:k.station_id,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yy,{className:"h-4 w-4"}),k.station_id]})},k.station_id))})]}),h.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[h.jsx(ki,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Status Station"}),h.jsx("p",{className:"text-2xl font-bold",children:jRe(l.battery,l.signal_strength)})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:PRe(l.battery,l.signal_strength)})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[h.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"}),h.jsxs("span",{className:"text-muted-foreground",children:["Update: ",Ub(l.last_seen)]})]})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Baterai"}),h.jsxs("p",{className:"text-2xl font-bold",children:[l.battery,"%"]}),h.jsx(Ft,{className:`${v.color} text-white mt-2`,children:v.status})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(uk,{className:"h-6 w-6 text-primary"})})]}),h.jsx("div",{className:"mt-4",children:h.jsx(au,{value:l.battery,className:"w-full"})})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Sinyal"}),h.jsxs("p",{className:"text-2xl font-bold",children:[l.signal_strength,"%"]}),h.jsx(Ft,{className:`${w.color} text-white mt-2`,children:w.status})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(iU,{className:"h-6 w-6 text-primary"})})]}),h.jsx("div",{className:"mt-4",children:h.jsx(au,{value:l.signal_strength,className:"w-full"})})]})}),h.jsx(De,{children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Sistem Penyiraman"}),h.jsx("p",{className:"text-2xl font-bold",children:l.watering_status?"Aktif":"Nonaktif"})]}),h.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:h.jsx(Zr,{className:"h-6 w-6 text-primary"})})]}),h.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",children:[h.jsx(X4,{className:"h-4 w-4 text-muted-foreground"}),h.jsxs("span",{className:"text-muted-foreground",children:["Last: ",l.last_plant_watering||"N/A"]})]})]})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(hk,{className:"h-5 w-5"}),"Status Tanaman Saat Ini"]})}),h.jsx(Oe,{children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.length>0?g.map((k,S)=>{const I=MRe(k.condition);return h.jsxs("div",{className:"p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h4",{className:"font-medium",children:k.name}),h.jsx(Ft,{className:`${I.color} text-white`,children:I.status})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"text-muted-foreground",children:"Kelembaban:"}),h.jsxs("span",{className:"font-medium",children:[k.moisture||"N/A","%"]})]}),h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"text-muted-foreground",children:"Last Update:"}),h.jsx("span",{className:"font-medium",children:k.last_update?Ub(k.last_update):"N/A"})]}),h.jsx(au,{value:k.moisture||0,className:"w-full"})]})]},S)}):h.jsx("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:"Tidak ada data tanaman tersedia"})})})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsxs(ht,{className:"flex items-center gap-2",children:[h.jsx(sm,{className:"h-5 w-5"}),"Performance Summary"]})}),h.jsx(Oe,{children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center",children:h.jsx(ro,{className:"h-5 w-5 text-green-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Uptime (24h)"}),h.jsxs("p",{className:"text-xl font-bold",children:[d.uptime,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:h.jsx(mk,{className:"h-5 w-5 text-blue-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Data Points"}),h.jsx("p",{className:"text-xl font-bold",children:d.dataPoints})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-cyan-50 rounded-full flex items-center justify-center",children:h.jsx(Zr,{className:"h-5 w-5 text-cyan-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Moisture (24h)"}),h.jsxs("p",{className:"text-xl font-bold",children:[d.avgMoisture,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center",children:h.jsx(yy,{className:"h-5 w-5 text-green-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Plants Monitored"}),h.jsx("p",{className:"text-xl font-bold",children:d.plantsMonitored})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center",children:h.jsx(RA,{className:"h-5 w-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Watering Efficiency"}),h.jsxs("p",{className:"text-xl font-bold",children:[d.wateringEfficiency,"%"]})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-yellow-50 rounded-full flex items-center justify-center",children:h.jsx(X4,{className:"h-5 w-5 text-yellow-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Watering"}),h.jsx("p",{className:"text-sm font-medium",children:d.lastWatering})]})]})]})]})})]}),h.jsxs(Uh,{defaultValue:"sensors",className:"space-y-6",children:[h.jsxs(Wh,{children:[h.jsx(Ln,{value:"sensors",children:"Data Sensor"}),h.jsx(Ln,{value:"watering",children:"Watering Control"}),h.jsx(Ln,{value:"maintenance",children:"Maintenance"}),h.jsx(Ln,{value:"settings",children:"Settings"})]}),h.jsx(Vn,{value:"sensors",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Grafik Kelembaban Tanaman - 15 Data Terakhir"})}),h.jsx(Oe,{children:h.jsx("div",{className:"h-80",children:h.jsx(lh,{width:"100%",height:"100%",children:h.jsxs(Px,{data:u,children:[h.jsx(Nh,{strokeDasharray:"3 3"}),h.jsx(Tu,{dataKey:"time",tick:{fontSize:12},angle:-45,textAnchor:"end",height:70}),h.jsx(_u,{}),h.jsx(oh,{content:h.jsx(FRe,{})}),Object.keys(u[0]||{}).filter(k=>k.includes("moisture")).map((k,S)=>h.jsx(bi,{type:"monotone",dataKey:k,stroke:`hsl(${S*60}, 70%, 50%)`,strokeWidth:2,name:k.replace("_moisture","").toUpperCase()},k))]})})})})]})}),h.jsx(Vn,{value:"watering",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Kontrol Penyiraman"})}),h.jsxs(Oe,{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(Ke,{className:"text-base font-medium",children:"Manual Watering"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Start/stop watering manually"})]}),h.jsx(Le,{variant:l.watering_status?"destructive":"default",onClick:y,children:l.watering_status?h.jsxs(h.Fragment,{children:[h.jsx(nie,{className:"h-4 w-4 mr-2"}),"Stop"]}):h.jsxs(h.Fragment,{children:[h.jsx(jse,{className:"h-4 w-4 mr-2"}),"Start"]})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Ke,{children:"Status Sistem:"}),h.jsx(Ft,{className:l.watering_status?"bg-green-500":"bg-gray-500",children:l.watering_status?"AKTIF":"NONAKTIF"})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Ke,{children:"Last Watering:"}),h.jsx("span",{className:"text-sm",children:l.last_plant_watering||"N/A"})]})]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Watering Schedule"})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{children:"Next scheduled watering:"}),h.jsx("span",{className:"font-medium",children:"In 6 hours"})]}),h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{children:"Daily frequency:"}),h.jsx("span",{className:"font-medium",children:"2 times"})]}),h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{children:"Duration per session:"}),h.jsx("span",{className:"font-medium",children:"5 minutes"})]})]}),h.jsxs("div",{className:"pt-4 border-t",children:[h.jsx("h4",{className:"font-medium mb-3",children:"Recent Activity"}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(En,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Watered 2 hours ago (5 min)"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(En,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Watered 8 hours ago (5 min)"})]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[h.jsx(En,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Watered 14 hours ago (5 min)"})]})]})]})]})]})]})}),h.jsx(Vn,{value:"maintenance",className:"space-y-6",children:h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Maintenance Schedule"})}),h.jsx(Oe,{children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(En,{className:"h-5 w-5 text-green-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Soil Sensor Calibration"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed 3 days ago"})]})]}),h.jsx(Ft,{className:"bg-green-500",children:"Complete"})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Wi,{className:"h-5 w-5 text-yellow-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Water Pump Check"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Due in 2 days"})]})]}),h.jsx(Ft,{className:"bg-yellow-500",children:"Pending"})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ts,{className:"h-5 w-5 text-red-500"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Nutrient Tank Refill"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Overdue by 2 days"})]})]}),h.jsx(Ft,{className:"bg-red-500",children:"Overdue"})]})]})})]})}),h.jsx(Vn,{value:"settings",className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"Watering Settings"})}),h.jsxs(Oe,{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx(Ke,{className:"text-base",children:"Auto Mode"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable automatic watering based on moisture levels"})]}),h.jsx(Kr,{checked:a.autoMode,onCheckedChange:k=>o(S=>({...S,autoMode:k}))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Ke,{children:["Moisture Threshold: ",a.moistureThreshold,"%"]}),h.jsx(UE,{value:[a.moistureThreshold],onValueChange:k=>o(S=>({...S,moistureThreshold:k[0]})),max:100,step:5,className:"w-full"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Water when moisture drops below this level"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Ke,{children:["Watering Duration: ",a.wateringDuration," minutes"]}),h.jsx(UE,{value:[a.wateringDuration],onValueChange:k=>o(S=>({...S,wateringDuration:k[0]})),min:1,max:30,step:1,className:"w-full"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Ke,{children:["Watering Interval: ",a.wateringInterval," hours"]}),h.jsx(UE,{value:[a.wateringInterval],onValueChange:k=>o(S=>({...S,wateringInterval:k[0]})),min:1,max:24,step:1,className:"w-full"})]}),h.jsxs(Le,{onClick:x,className:"w-full",children:[h.jsx(nU,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]}),h.jsxs(De,{children:[h.jsx(dt,{children:h.jsx(ht,{children:"System Information"})}),h.jsx(Oe,{className:"space-y-4",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Station ID:"}),h.jsx("span",{className:"font-medium",children:l.station_id})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Battery:"}),h.jsxs("span",{className:"font-medium",children:[l.battery,"%"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Signal:"}),h.jsxs("span",{className:"font-medium",children:[l.signal_strength,"%"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Last Seen:"}),h.jsx("span",{className:"font-medium",children:Ub(l.last_seen)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Data Points:"}),h.jsx("span",{className:"font-medium",children:c.length})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Plants Monitored:"}),h.jsx("span",{className:"font-medium",children:g.length})]})]})})]})]})})]})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VRe=1e-7,BRe=1e-4;class kX{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class HP{refCount(e){return di("refCount")}incRef(e){return di("incRef")}timerAvailable(){return!0}time(e){return di("time")}read(e){return di("read")}readSync(e){return di("readSync")}readToGPU(e,n){return di("readToGPU")}numDataIds(){return di("numDataIds")}disposeData(e,n){return di("disposeData")}write(e,n,r){return di("write")}move(e,n,r,s,i){return di("move")}createTensorFromGPUData(e,n,r){return di("createTensorFromGPUData")}memory(){return di("memory")}floatPrecision(){return di("floatPrecision")}epsilon(){return this.floatPrecision()===32?VRe:BRe}dispose(){return di("dispose")}}function di(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,op(t,e,n)}function Ih(t,e,n){return Math.max(t,Math.min(e,n))}function qP(t){return t%2===0?t:t+1}function op(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function URe(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function W(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function KP(t,e,n=""){W(rn(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function SX(t){W(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Se(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function rn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Gp(t){return t%1===0}function G_(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function wp(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function n5(t,e=s=>0,n,r){return new Promise((s,i)=>{let a=0;const o=()=>{if(t()){s();return}a++;const l=e(a);if(n!=null&&a>=n){i();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function NX(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function At(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),W(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),W(t.every(r=>Gp(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Gu(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:At(e,t).sort();let a=0;for(let o=0;o<t.length;++o){if(i!=null){if(i[a]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(i[a]==null||i[a]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),i[a]<=o&&a++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function gs(t,e){return Zn(t,e)}function Zn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function WRe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function GRe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function CX(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function O1(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function HRe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function jx(t){return typeof t=="string"||t instanceof String}function qRe(t){return typeof t=="boolean"}function H_(t){return typeof t=="number"}function Tm(t){return Array.isArray(t)?Tm(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":H_(t)?"float32":jx(t)?"string":qRe(t)?"bool":"float32"}function q_(t){return!!(t&&t.constructor&&t.call&&t.apply)}function K_(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ot(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function IX(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let a=0;a<i;a++)s[a]=n[t+a]}else{const i=e[0],a=e.slice(1),o=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=IX(t+l*o,a,n,r)}return s}function go(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return IX(0,t,e,n)}function KRe(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function XP(t,e){const n=ys(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ys(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function EX(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return go(t,new Float32Array(n));if(e==="int32")return go(t,new Int32Array(n));if(e==="bool")return go(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function yc(t){t.forEach(e=>{W(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function tl(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function _m(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function YP(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r5="tfjsflags";class XRe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=YRe,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(YP(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);r5 in e&&e[r5].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=JRe(s,i)})}}function YRe(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(QRe(e,r[0],r[1]),r.join("="))),e}function QRe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function JRe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ge(){return TX}let TX=null;function ZRe(t){TX=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let WE;function _X(){if(WE==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");WE=t}return WE}function e$e(){const t=_X();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function QP(t,e){const n=e$e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const $S="Abs",Dx="Acos",Ox="Acosh",Am="Add",JP="AddN",ZP="All",ej="Any",PS="ArgMax",jS="ArgMin",Mx="Asin",Fx="Asinh",Lx="Atan",Vx="Atanh",Bx="Atan2",DS="AvgPool",tj="AvgPoolGrad",OS="AvgPool3D",nj="AvgPool3DGrad",MS="BatchMatMul",FS="BatchToSpaceND",rj="Bincount",sj="BitwiseAnd",t$e="BroadcastTo",AX="BroadcastArgs",zx="Cast",Ux="Ceil",Wx="ClipByValue",ij="Complex",LS="ComplexAbs",VS="Concat",BS="Conv2D",aj="Conv2DBackpropFilter",zS="Conv2DBackpropInput",US="Conv3D",oj="Conv3DBackpropFilterV2",lj="Conv3DBackpropInputV2",Gx="Cos",Hx="Cosh",cj="Cumprod",WS="Cumsum",uj="CropAndResize",dj="DenseBincount",hj="DepthToSpace",GS="DepthwiseConv2dNative",fj="DepthwiseConv2dNativeBackpropFilter",pj="DepthwiseConv2dNativeBackpropInput",RX="Diag",HS="Dilation2D",X_="Dilation2DBackpropInput",Y_="Dilation2DBackpropFilter",n$e="Draw",qx="RealDiv",mj="Einsum",Kx="Elu",gj="EluGrad",Xx="Erf",qS="Equal",Yx="Exp",KS="ExpandDims",Qx="Expm1",yj="FFT",xj="Fill",vj="FlipLeftRight",Jx="Floor",Zx="FloorDiv",XS="FusedBatchNorm",YS="GatherV2",$X="GatherNd",QS="Greater",ev="GreaterEqual",tv="Identity",bj="IFFT",wj="Imag",nv="IsFinite",rv="IsInf",sv="IsNan",JS="LeakyRelu",ZS="Less",eN="LessEqual",PX="LinSpace",iv="Log",av="Log1p",tN="LogicalAnd",nN="LogicalNot",rN="LogicalOr",r$e="LogSoftmax",sN="LRN",kj="LRNGrad",iN="Max",ov="Maximum",aN="MaxPool",Sj="MaxPoolGrad",oN="MaxPool3D",Nj="MaxPool3DGrad",jX="MaxPoolWithArgmax",lN="Mean",cN="Min",lv="Minimum",uN="MirrorPad",cv="Mod",DX="Multinomial",uv="Multiply",dN="Neg",hN="NotEqual",Cj="NonMaxSuppressionV3",Ij="NonMaxSuppressionV4",Ej="NonMaxSuppressionV5",fN="OnesLike",pN="OneHot",mN="Pack",gN="PadV2",dv="Pow",yN="Prelu",xN="Prod",OX="RaggedGather",MX="RaggedRange",FX="RaggedTensorToTensor",Tj="Range",_j="Real",hv="Reciprocal",fv="Relu",vN="Reshape",bN="ResizeNearestNeighbor",Aj="ResizeNearestNeighborGrad",wN="ResizeBilinear",Rj="ResizeBilinearGrad",pv="Relu6",kN="Reverse",mv="Round",gv="Rsqrt",LX="ScatterNd",VX="TensorScatterUpdate",BX="SearchSorted",SN="Select",yv="Selu",NN="Slice",xv="Sin",vv="Sinh",bv="Sign",wv="Sigmoid",kv="Softplus",Sv="Sqrt",CN="Sum",IN="SpaceToBatchND",EN="SplitV",TN="Softmax",zX="SparseFillEmptyRows",UX="SparseReshape",WX="SparseSegmentMean",GX="SparseSegmentSum",HX="SparseToDense",Nv="SquaredDifference",$j="Square",Pj="StaticRegexReplace",jj="StridedSlice",qX="StringNGrams",KX="StringSplit",XX="StringToHashBucketFast",Cv="Sub",Iv="Tan",Ev="Tanh",Tv="Tile",Dj="TopK",Oj="Transform",kp="Transpose",Mj="Unique",_N="Unpack",AN="UnsortedSegmentSum",RN="ZerosLike",_v="Step",s$e="FromPixels",Fj="RotateWithOffset",M1="_FusedMatMul",F1="FusedConv2D",YX="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zi(...t){ge().getBool("IS_TEST")||ge().getBool("PROD")||console.warn(...t)}function i$e(...t){ge().getBool("IS_TEST")||ge().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1=QP("kernelRegistry",()=>new Map),Q_=QP("gradRegistry",()=>new Map);function s5(t,e){const n=JX(t,e);return L1.get(n)}function i5(t){return Q_.get(t)}function a5(t){const e=L1.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,a]=s,[o]=i.split("_");o===t&&n.push(a)}return n}function QX(t){const{kernelName:e,backendName:n}=t,r=JX(e,n);L1.has(r)&&zi(`The kernel '${e}' for backend '${n}' is already registered`),L1.set(r,t)}function a$e(t){const{kernelName:e}=t;Q_.has(e)&&ge().getBool("DEBUG")&&zi(`Overriding the gradient for '${e}'`),Q_.set(e,t)}function JX(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZX(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var GE,o5;function o$e(){if(o5)return GE;o5=1,GE=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(D,R,F){this.low=D|0,this.high=R|0,this.unsigned=!!F}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(D){return(D&&D.__isLong__)===!0}e.isLong=n;var r={},s={};function i(D,R){var F,L,K;return R?(D>>>=0,(K=0<=D&&D<256)&&(L=s[D],L)?L:(F=o(D,(D|0)<0?-1:0,!0),K&&(s[D]=F),F)):(D|=0,(K=-128<=D&&D<128)&&(L=r[D],L)?L:(F=o(D,D<0?-1:0,!1),K&&(r[D]=F),F))}e.fromInt=i;function a(D,R){if(isNaN(D))return R?k:w;if(R){if(D<0)return k;if(D>=y)return A}else{if(D<=-x)return T;if(D+1>=x)return j}return D<0?a(-D,R).neg():o(D%g|0,D/g|0,R)}e.fromNumber=a;function o(D,R,F){return new e(D,R,F)}e.fromBits=o;var l=Math.pow;function c(D,R,F){if(D.length===0)throw Error("empty string");if(D==="NaN"||D==="Infinity"||D==="+Infinity"||D==="-Infinity")return w;if(typeof R=="number"?(F=R,R=!1):R=!!R,F=F||10,F<2||36<F)throw RangeError("radix");var L;if((L=D.indexOf("-"))>0)throw Error("interior hyphen");if(L===0)return c(D.substring(1),R,F).neg();for(var K=a(l(F,8)),X=w,q=0;q<D.length;q+=8){var Q=Math.min(8,D.length-q),z=parseInt(D.substring(q,q+Q),F);if(Q<8){var H=a(l(F,Q));X=X.mul(H).add(a(z))}else X=X.mul(K),X=X.add(a(z))}return X.unsigned=R,X}e.fromString=c;function u(D,R){return typeof D=="number"?a(D,R):typeof D=="string"?c(D,R):o(D.low,D.high,typeof R=="boolean"?R:D.unsigned)}e.fromValue=u;var d=65536,p=1<<24,g=d*d,y=g*g,x=y/2,v=i(p),w=i(0);e.ZERO=w;var k=i(0,!0);e.UZERO=k;var S=i(1);e.ONE=S;var I=i(1,!0);e.UONE=I;var E=i(-1);e.NEG_ONE=E;var j=o(-1,2147483647,!1);e.MAX_VALUE=j;var A=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=A;var T=o(0,-2147483648,!1);e.MIN_VALUE=T;var $=e.prototype;return $.toInt=function(){return this.unsigned?this.low>>>0:this.low},$.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},$.toString=function(R){if(R=R||10,R<2||36<R)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(T)){var F=a(R),L=this.div(F),K=L.mul(F).sub(this);return L.toString(R)+K.toInt().toString(R)}else return"-"+this.neg().toString(R);for(var X=a(l(R,6),this.unsigned),q=this,Q="";;){var z=q.div(X),H=q.sub(z.mul(X)).toInt()>>>0,ee=H.toString(R);if(q=z,q.isZero())return ee+Q;for(;ee.length<6;)ee="0"+ee;Q=""+ee+Q}},$.getHighBits=function(){return this.high},$.getHighBitsUnsigned=function(){return this.high>>>0},$.getLowBits=function(){return this.low},$.getLowBitsUnsigned=function(){return this.low>>>0},$.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var R=this.high!=0?this.high:this.low,F=31;F>0&&(R&1<<F)==0;F--);return this.high!=0?F+33:F+1},$.isZero=function(){return this.high===0&&this.low===0},$.eqz=$.isZero,$.isNegative=function(){return!this.unsigned&&this.high<0},$.isPositive=function(){return this.unsigned||this.high>=0},$.isOdd=function(){return(this.low&1)===1},$.isEven=function(){return(this.low&1)===0},$.equals=function(R){return n(R)||(R=u(R)),this.unsigned!==R.unsigned&&this.high>>>31===1&&R.high>>>31===1?!1:this.high===R.high&&this.low===R.low},$.eq=$.equals,$.notEquals=function(R){return!this.eq(R)},$.neq=$.notEquals,$.ne=$.notEquals,$.lessThan=function(R){return this.comp(R)<0},$.lt=$.lessThan,$.lessThanOrEqual=function(R){return this.comp(R)<=0},$.lte=$.lessThanOrEqual,$.le=$.lessThanOrEqual,$.greaterThan=function(R){return this.comp(R)>0},$.gt=$.greaterThan,$.greaterThanOrEqual=function(R){return this.comp(R)>=0},$.gte=$.greaterThanOrEqual,$.ge=$.greaterThanOrEqual,$.compare=function(R){if(n(R)||(R=u(R)),this.eq(R))return 0;var F=this.isNegative(),L=R.isNegative();return F&&!L?-1:!F&&L?1:this.unsigned?R.high>>>0>this.high>>>0||R.high===this.high&&R.low>>>0>this.low>>>0?-1:1:this.sub(R).isNegative()?-1:1},$.comp=$.compare,$.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(S)},$.neg=$.negate,$.add=function(R){n(R)||(R=u(R));var F=this.high>>>16,L=this.high&65535,K=this.low>>>16,X=this.low&65535,q=R.high>>>16,Q=R.high&65535,z=R.low>>>16,H=R.low&65535,ee=0,G=0,Y=0,ae=0;return ae+=X+H,Y+=ae>>>16,ae&=65535,Y+=K+z,G+=Y>>>16,Y&=65535,G+=L+Q,ee+=G>>>16,G&=65535,ee+=F+q,ee&=65535,o(Y<<16|ae,ee<<16|G,this.unsigned)},$.subtract=function(R){return n(R)||(R=u(R)),this.add(R.neg())},$.sub=$.subtract,$.multiply=function(R){if(this.isZero())return w;if(n(R)||(R=u(R)),t){var F=t.mul(this.low,this.high,R.low,R.high);return o(F,t.get_high(),this.unsigned)}if(R.isZero())return w;if(this.eq(T))return R.isOdd()?T:w;if(R.eq(T))return this.isOdd()?T:w;if(this.isNegative())return R.isNegative()?this.neg().mul(R.neg()):this.neg().mul(R).neg();if(R.isNegative())return this.mul(R.neg()).neg();if(this.lt(v)&&R.lt(v))return a(this.toNumber()*R.toNumber(),this.unsigned);var L=this.high>>>16,K=this.high&65535,X=this.low>>>16,q=this.low&65535,Q=R.high>>>16,z=R.high&65535,H=R.low>>>16,ee=R.low&65535,G=0,Y=0,ae=0,ye=0;return ye+=q*ee,ae+=ye>>>16,ye&=65535,ae+=X*ee,Y+=ae>>>16,ae&=65535,ae+=q*H,Y+=ae>>>16,ae&=65535,Y+=K*ee,G+=Y>>>16,Y&=65535,Y+=X*H,G+=Y>>>16,Y&=65535,Y+=q*z,G+=Y>>>16,Y&=65535,G+=L*ee+K*H+X*z+q*Q,G&=65535,o(ae<<16|ye,G<<16|Y,this.unsigned)},$.mul=$.multiply,$.divide=function(R){if(n(R)||(R=u(R)),R.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&R.low===-1&&R.high===-1)return this;var F=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,R.low,R.high);return o(F,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?k:w;var L,K,X;if(this.unsigned){if(R.unsigned||(R=R.toUnsigned()),R.gt(this))return k;if(R.gt(this.shru(1)))return I;X=k}else{if(this.eq(T)){if(R.eq(S)||R.eq(E))return T;if(R.eq(T))return S;var q=this.shr(1);return L=q.div(R).shl(1),L.eq(w)?R.isNegative()?S:E:(K=this.sub(R.mul(L)),X=L.add(K.div(R)),X)}else if(R.eq(T))return this.unsigned?k:w;if(this.isNegative())return R.isNegative()?this.neg().div(R.neg()):this.neg().div(R).neg();if(R.isNegative())return this.div(R.neg()).neg();X=w}for(K=this;K.gte(R);){L=Math.max(1,Math.floor(K.toNumber()/R.toNumber()));for(var Q=Math.ceil(Math.log(L)/Math.LN2),z=Q<=48?1:l(2,Q-48),H=a(L),ee=H.mul(R);ee.isNegative()||ee.gt(K);)L-=z,H=a(L,this.unsigned),ee=H.mul(R);H.isZero()&&(H=S),X=X.add(H),K=K.sub(ee)}return X},$.div=$.divide,$.modulo=function(R){if(n(R)||(R=u(R)),t){var F=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,R.low,R.high);return o(F,t.get_high(),this.unsigned)}return this.sub(this.div(R).mul(R))},$.mod=$.modulo,$.rem=$.modulo,$.not=function(){return o(~this.low,~this.high,this.unsigned)},$.and=function(R){return n(R)||(R=u(R)),o(this.low&R.low,this.high&R.high,this.unsigned)},$.or=function(R){return n(R)||(R=u(R)),o(this.low|R.low,this.high|R.high,this.unsigned)},$.xor=function(R){return n(R)||(R=u(R)),o(this.low^R.low,this.high^R.high,this.unsigned)},$.shiftLeft=function(R){return n(R)&&(R=R.toInt()),(R&=63)===0?this:R<32?o(this.low<<R,this.high<<R|this.low>>>32-R,this.unsigned):o(0,this.low<<R-32,this.unsigned)},$.shl=$.shiftLeft,$.shiftRight=function(R){return n(R)&&(R=R.toInt()),(R&=63)===0?this:R<32?o(this.low>>>R|this.high<<32-R,this.high>>R,this.unsigned):o(this.high>>R-32,this.high>=0?0:-1,this.unsigned)},$.shr=$.shiftRight,$.shiftRightUnsigned=function(R){if(n(R)&&(R=R.toInt()),R&=63,R===0)return this;var F=this.high;if(R<32){var L=this.low;return o(L>>>R|F<<32-R,F>>>R,this.unsigned)}else return R===32?o(F,0,this.unsigned):o(F>>>R-32,0,this.unsigned)},$.shru=$.shiftRightUnsigned,$.shr_u=$.shiftRightUnsigned,$.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},$.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},$.toBytes=function(R){return R?this.toBytesLE():this.toBytesBE()},$.toBytesLE=function(){var R=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,R&255,R>>>8&255,R>>>16&255,R>>>24]},$.toBytesBE=function(){var R=this.high,F=this.low;return[R>>>24,R>>>16&255,R>>>8&255,R&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},e.fromBytes=function(R,F,L){return L?e.fromBytesLE(R,F):e.fromBytesBE(R,F)},e.fromBytesLE=function(R,F){return new e(R[0]|R[1]<<8|R[2]<<16|R[3]<<24,R[4]|R[5]<<8|R[6]<<16|R[7]<<24,F)},e.fromBytesBE=function(R,F){return new e(R[4]<<24|R[5]<<16|R[6]<<8|R[7],R[0]<<24|R[1]<<16|R[2]<<8|R[3],F)},GE}var eY=o$e();const tY=Ra(eY),l$e=W6({__proto__:null,default:tY},[eY]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bd=tY||l$e;function $N(t){return Bd.fromString(t,!0,16)}const nY=$N("c3a5c85c97cb3127"),Ld=$N("b492b66fbe98f273"),Ds=$N("9ae16a3b2f90404f");function J_(t){return t.xor(t.shru(47))}function rY(t,e,n){const r=t.slice(e,e+n);return Bd.fromBytes(Array.from(r),!0,!0)}function xn(t,e){return rY(t,e,8)}function l5(t,e){return rY(t,e,4)}function $r(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function cu(t,e,n=$N("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function c$e(t,e,n,r,s,i){s=s.add(t),i=$r(i.add(s).add(r),21);const a=s;return s=s.add(e),s=s.add(n),i=i.add($r(s,44)),[s.add(r),i.add(a)]}function Wb(t,e,n,r){return c$e(xn(t,e),xn(t,e+8),xn(t,e+16),xn(t,e+24),n,r)}function u$e(t,e=t.length){if(e>=8){const n=Ds.add(e*2),r=xn(t,0).add(Ds),s=xn(t,e-8),i=$r(s,37).mul(n).add(r),a=$r(r,25).add(s).mul(n);return cu(i,a,n)}if(e>=4){const n=Ds.add(e*2),r=l5(t,0);return cu(r.shl(3).add(e),l5(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),a=e+(s<<2);return J_(Ds.mul(i).xor(nY.mul(a))).mul(Ds)}return Ds}function d$e(t,e=t.length){const n=Ds.add(e*2),r=xn(t,0).mul(Ld),s=xn(t,8),i=xn(t,e-8).mul(n),a=xn(t,e-16).mul(Ds);return cu($r(r.add(s),43).add($r(i,30)).add(a),r.add($r(s.add(Ds),18)).add(i),n)}function h$e(t,e=t.length){const n=Ds.add(e*2),r=xn(t,0).mul(Ds),s=xn(t,8),i=xn(t,e-8).mul(n),a=xn(t,e-16).mul(Ds),o=$r(r.add(s),43).add($r(i,30)).add(a),l=cu(o,r.add($r(s.add(Ds),18)).add(i),n),c=xn(t,16).mul(n),u=xn(t,24),d=o.add(xn(t,e-32)).mul(n),p=l.add(xn(t,e-24)).mul(n);return cu($r(c.add(u),43).add($r(d,30)).add(p),c.add($r(u.add(r),18)).add(d),n)}function f$e(t,e=t.length){const n=Bd.fromNumber(81,!0);if(e<=32)return e<=16?u$e(t,e):d$e(t,e);if(e<=64)return h$e(t,e);let r=n,s=n.mul(Ld).add(113),i=J_(s.mul(Ds).add(113)).mul(Ds),a=[Bd.UZERO,Bd.UZERO],o=[Bd.UZERO,Bd.UZERO];r=r.mul(Ds).add(xn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=$r(r.add(s).add(a[0]).add(xn(t,l+8)),37).mul(Ld),s=$r(s.add(a[1]).add(xn(t,l+48)),42).mul(Ld),r=r.xor(o[1]),s=s.add(a[0]).add(xn(t,l+40)),i=$r(i.add(o[0]),33).mul(Ld),a=Wb(t,l,a[1].mul(Ld),r.add(o[0])),o=Wb(t,l+32,i.add(o[1]),s.add(xn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const d=Ld.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(e-1&63),a[0]=a[0].add(o[0]),o[0]=o[0].add(a[0]),r=$r(r.add(s).add(a[0]).add(xn(t,l+8)),37).mul(d),s=$r(s.add(a[1]).add(xn(t,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),s=s.add(a[0].mul(9).add(xn(t,l+40))),i=$r(i.add(o[0]),33).mul(d),a=Wb(t,l,a[1].mul(d),r.add(o[0])),o=Wb(t,l+32,i.add(o[1]),s.add(xn(t,l+16))),[i,r]=[r,i],cu(cu(a[0],o[0],d).add(J_(s).mul(nY)).add(i),cu(a[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hu(t,e){return e==="string"?uu(t):Jh([t],e)}function p$e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Jh(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Eh(t)),ge().getBool("DEBUG")&&WRe(t,e),p$e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Hs(){return ge().platform.now()}function uu(t,e="utf-8"){return e=e||"utf-8",ge().platform.encode(t,e)}function Au(t,e="utf-8"){return e=e||"utf-8",ge().platform.decode(t,e)}function _a(t){return ge().platform.isTypedArray!=null?ge().platform.isTypedArray(t):ZX(t)}function Eh(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||YP(t)||t==null||_a(t)&&n)e.push(t);else if(Array.isArray(t)||_a(t))for(let r=0;r<t.length;++r)Eh(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Eh(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m$e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new y$e)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let a;const o=Hs();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();a=Promise.resolve({kernelMs:Hs()-o})}if(ge().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{g$e(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:a}=e;r.forEach(o=>{Promise.all([o.data(),s,a]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],i,l[2])})})}}function g$e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class y$e{logKernelProfile(e,n,r,s,i,a){const o=typeof s=="number"?wp(`${s}ms`,9):s.error,l=wp(e,25),c=n.rank,u=n.size,d=wp(n.shape.toString(),14);let p="";for(const g in i){const y=i[g];if(y!=null){const x=y.shape||n.shape,v=x.length;p+=`${g}: ${v}D ${v>0?x:""} `}}console.log(`%c${l}	%c${o}	%c${c}D ${d}	%c${u}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x$e(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const p=u[d];let g=!1;for(let y=0;y<e.length;y++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,s[c.id]=!0;break}if(g)break}}const i={};i[n.id]=!0;const a={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(const p in u)i[u[p].id]=!0,a[c.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&a[c.id]){const u={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(u[p]=g)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,o.push(d)}}return o}function v$e(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],a=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?a.push(c):a.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const o=i.gradient(a);for(const l in i.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const c=n(()=>o[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!rn(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c5=20,Bg=3,HE=7;function b$e(t,e,n,r){const s=ot(e),i=w$e(t,e,n,s),a=e.length,o=pw(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join(`
`)),l.join(`
`)}function w$e(t,e,n,r){const s=Se(e),i=r[r.length-1],a=new Array(i).fill(0),o=e.length,l=n==="complex64"?Zg(t):t;if(o>1)for(let c=0;c<s/i;c++){const u=c*i;for(let d=0;d<i;d++)a[d]=Math.max(a[d],Jg(l[u+d],0,n).length)}return a}function Jg(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(HE))} + ${parseFloat(t[1].toFixed(HE))}j`:jx(t)?r=`'${t}'`:n==="bool"?r=sY(t):r=parseFloat(t.toFixed(HE)).toString(),wp(r,e)}function sY(t){return t===0?"false":"true"}function pw(t,e,n,r,s,i=!0){const a=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const x=Zg(t);return[Jg(x[0],0,n)]}return n==="bool"?[sY(t[0])]:[t[0].toString()]}if(l===1){if(o>c5){const v=Bg*a;let w=Array.from(t.slice(0,v)),k=Array.from(t.slice((o-Bg)*a,o*a));return n==="complex64"&&(w=Zg(w),k=Zg(k)),["["+w.map((S,I)=>Jg(S,s[I],n)).join(", ")+", ..., "+k.map((S,I)=>Jg(S,s[o-Bg+I],n)).join(", ")+"]"]}return["["+(n==="complex64"?Zg(t):Array.from(t)).map((v,w)=>Jg(v,s[w],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*a,p=[];if(o>c5){for(let x=0;x<Bg;x++){const v=x*d,w=v+d;p.push(...pw(t.slice(v,w),c,n,u,s,!1))}p.push("...");for(let x=o-Bg;x<o;x++){const v=x*d,w=v+d;p.push(...pw(t.slice(v,w),c,n,u,s,x===o-1))}}else for(let x=0;x<o;x++){const v=x*d,w=v+d;p.push(...pw(t.slice(v,w),c,n,u,s,x===o-1))}const g=l===2?",":"";p[0]="["+(o>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let y=`,
`;for(let x=2;x<l;x++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(i?"":y),p}function Zg(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ns{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=Se(e),r!=null){const s=r.length;W(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Zn(n,this.size),this.strides=ot(e)}set(e,...n){n.length===0&&(n=[0]),W(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ao().makeTensor(this.values,this.shape,this.dtype)}}let ao=null,lp=null;function k$e(t){ao=t}function S$e(t){lp=t}class mr{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Se(e),this.strides=ot(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return lp.buffer(this.shape,this.dtype,e)}bufferSync(){return lp.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return go(this.shape,e,this.dtype==="complex64")}arraySync(){return go(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ao().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Au(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ao().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ao().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Au(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ao().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ao().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return lp.print(this,e)}clone(){return this.throwIfDisposed(),lp.clone(this)}toString(e=!1){const n=this.dataSync();return b$e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),lp.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ao().makeVariable(this,e,n,r)}}Object.defineProperty(mr,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function we(){return QP("Tensor",()=>mr)}we();class V1 extends mr{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!rn(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ao().disposeTensor(this),this.dataId=e.dataId,ao().incRef(this,null)}dispose(){ao().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(V1,Symbol.hasInstance,{value:t=>t instanceof mr&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var u5;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(u5||(u5={}));var Z_;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(Z_||(Z_={}));var eA;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(eA||(eA={}));var tA;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(tA||(tA={}));var nA;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(nA||(nA={}));const N$e={float32:tA,int32:Z_,bool:eA,complex64:nA};function Si(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return N$e[t][e]}function Lj(t){return Si(t,"int32")}function iY(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function aY(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tr(t,e){if(t.dtype===e.dtype)return[t,e];const n=Si(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function oY(t){const e=[];return lY(t,e,new Set),e}function lY(t,e,n){if(t==null)return;if(t instanceof mr){e.push(t);return}if(!C$e(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),lY(i,e,n))}}function C$e(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qE(t){return t.kernelName!=null}class d5{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Hp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new d5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(zi(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new m$e(this.backendInstance),!0}setupRegisteredKernels(){a5(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){a5(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof HP)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,zi(`Initialization of backend ${e} failed`),zi(a.stack||a.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return zi(`Initialization of backend ${e} failed`),zi(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Hp.nextTensorId++}nextVariableId(){return Hp.nextVariableId++}clone(e){const n=ie.runKernel(tv,{x:e}),r={x:e},s=a=>({x:()=>{const o="float32",l={x:a},c={dtype:o};return ie.runKernel(zx,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(s5(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-n-i-a;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const c=qE(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(qE(e)){const{kernelName:y,inputs:x,attrs:v}=e;this.backendName==null&&this.backend;const w=s5(y,this.backendName);W(w!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),o=()=>{const k=this.backend.numDataIds();l=w.kernelFunc({inputs:x,attrs:v,backend:this.backend});const S=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,k,S);const I=S.map(E=>E.rank!=null?E:this.makeTensorFromTensorInfo(E));if(s){const E=this.getTensorsForGradient(y,x,I);r=this.saveTensorsForBackwardMode(E)}return I}}else{const{forwardFunc:y}=e,x=v=>{s&&(r=v.map(w=>this.keep(this.clone(w))))};o=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,x));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,v,w),w}}const{inputs:u,attrs:d}=e,p=qE(e)?null:e.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(g=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),s&&this.addTapeNode(c,u,n,p,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(y=>u[y]!=null?u[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=i5(e);if(s!=null){const i=s.inputsToSave||[],a=s.outputsToSave||[];let o;s.saveAllInputs?(W(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(c=>n[c])):o=i.map(c=>n[c]);const l=r.filter((c,u)=>a[u]);return o.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&jx(e[0])&&(i=e.map(l=>uu(l)));const a=s.write(i,n,r),o=new mr(n,r,a,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(a),c=HRe(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,a=new mr(s,i,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new V1(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*O1(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof V1||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*O1(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,a){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=i5(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=c=>(c=c.map((u,d)=>{if(u==null){const p=r[d],g=ys(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return u}),s(c.length>1?c:c[0],i,a))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=oY(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const a=this.state.activeScope.track[i];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(W(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));W(i instanceof mr,()=>"The result y returned by f() must be a tensor.");const a=x$e(this.state.activeTape,n,i);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[i.id]=r??I$e(i.shape),v$e(o,a,c=>this.tidy(c),E$e);const l=n.map(c=>o[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return W(q_(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{W(n.every(o=>o instanceof mr),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((o,l)=>{s[l]=o});const i=(o,l)=>(r=e(...n,l),W(r.value instanceof mr,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),W(q_(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(o,l)=>{const c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];W(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),W(u.every(p=>p instanceof mr),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((p,g)=>{d[g]=()=>p}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:a,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Hs(),r=await this.backend.time(e);return r.wallMs=Hs()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new d5;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Hp.nextTensorId=0;Hp.nextVariableId=0;function I$e(t){const e=XP(Se(t),"float32");return ie.makeTensor(e,t,"float32")}function cY(){const t=_X();if(t._tfengine==null){const e=new XRe(t);t._tfengine=new Hp(e)}return ZRe(t._tfengine.ENV),k$e(()=>t._tfengine),t._tfengine}const ie=cY();function E$e(t,e){const n={a:t,b:e};return ie.runKernel(Am,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T$e(){return typeof navigator<"u"&&navigator!=null}function uY(t){if(t||T$e()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function dY(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zs=ge();Zs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Zs.registerFlag("IS_BROWSER",()=>dY());Zs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Zs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Zs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Zs.registerFlag("PROD",()=>!1);Zs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Zs.getBool("DEBUG"));Zs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Zs.registerFlag("IS_TEST",()=>!1);Zs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Zs.getBool("DEBUG"));Zs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Zs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Zs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PN(t,e){let n=t;if(_a(t))return e==="string"?[]:[t.length];if(iY(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(aY(t))return[t.buffer.size/(e==null?4:O1(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||_a(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ge().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&hY(t,r,[]),r}function hY(t,e,n){if(n=n||[],!Array.isArray(t)&&!_a(t)){W(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}W(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),W(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)hY(t[s],r,n.concat(s))}function h5(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function Z(t,e,n,r="numeric"){if(t instanceof we())return h5(r,t.dtype,e,n),t;let s=Tm(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),h5(r,s,e,n),t==null||!_a(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=PN(t,s);!_a(t)&&!Array.isArray(t)&&(t=[t]);const o=s!=="string"?Jh(t,s):Eh(t,[],!0);return ie.makeTensor(o,i,s)}function fY(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,a)=>Z(i,`${e}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _$e="__op";function le(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+_$e;const s=(...i)=>{ie.startScope(n);try{const a=r(...i);return YP(a)&&console.error("Cannot return a Promise inside of tidy."),ie.endScope(a),a}catch(a){throw ie.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A$e(t,e){const n=Z(t,"real","complex"),r=Z(e,"imag","complex");KP(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return ie.runKernel(ij,s)}const qp=le({complex_:A$e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jN(t,e,n,r){if(r==null)r=Tm(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(aY(t)||iY(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ie.backend.createTensorFromGPUData(t,e||n,r)}if(!_a(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){yc(e);const s=Se(e),i=Se(n);W(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let a=0;a<n.length;++a){const o=n[a],l=a===n.length-1?o!==Se(e.slice(a)):!0;W(n[a]===e[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!_a(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Jh(t,r):Eh(t,[],!0),ie.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pY(t,e,n){const r=PN(t,n);return jN(t,e,r,n)}class Rm{static join(e){return new Rm(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>_a(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),a=new Uint8Array(i);let o=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+o-c.start,p=o,y=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,d,y-d);if(a.set(x,p),o+=x.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=R$e(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function R$e(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bo(){return ie}function f5(){return ie.memory()}function he(t,e){return ie.tidy(t,e)}function jt(t){oY(t).forEach(n=>n.dispose())}function nl(t){return ie.keep(t)}function mY(t,e,n=1){return ie.registerBackend(t,e,n)}function $$e(){return ie.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5=4;async function m5(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(a=>a.name):Object.keys(t);for(let a=0;a<s.length;++a){const o=s[a],l=Array.isArray(t)?t[a].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const c={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const p=await l.bytes(),g=p.reduce((v,w)=>v+w.length,0)+p5*p.length,y=new Uint8Array(g);let x=0;for(let v=0;v<p.length;v++){const w=p[v],k=new Uint8Array(new Uint32Array([w.length]).buffer);y.set(k,x),x+=p5,y.set(w,x),x+=w.length}d(y)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:P$e(i),specs:n}}function P$e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const Vj=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function g5(t){return Vj?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function j$e(t){if(Vj)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function D$e(t){if(Vj){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function O$e(t){return Rm.join(t)}function gY(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:g5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:g5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Rm(t.weightData).byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _s{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return _s.instance==null&&(_s.instance=new _s),_s.instance}static registerSaveRouter(e){_s.getInstance().saveRouters.push(e)}static registerLoadRouter(e){_s.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return _s.getHandlers(e,"save")}static getLoadHandlers(e,n){return _s.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?_s.getInstance().loadRouters:_s.getInstance().saveRouters).forEach(a=>{const o=a(e,r);o!==null&&s.push(o)}),s}}const M$e=t=>_s.getSaveHandlers(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rA="tensorflowjs",sA=1,Qd="models_store",Zc="model_info_store";function yY(){if(!ge().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function iA(t){const e=t.result;e.createObjectStore(Qd,{keyPath:"modelPath"}),e.createObjectStore(Zc,{keyPath:"modelPath"})}class Th{constructor(e){if(this.indexedDB=yY(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(rA,sA);i.onupgradeneeded=()=>iA(i),i.onsuccess=()=>{const a=i.result;if(n==null){const o=a.transaction(Qd,"readonly"),c=o.objectStore(Qd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(a.close(),s(c.error)),o.oncomplete=()=>a.close()}else{n.weightData=Rm.join(n.weightData);const o=gY(n),l=a.transaction(Zc,"readwrite");let c=l.objectStore(Zc),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(p){return s(p)}let d;u.onsuccess=()=>{d=a.transaction(Qd,"readwrite");const p=d.objectStore(Qd);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(y){return s(y)}g.onsuccess=()=>r({modelArtifactsInfo:o}),g.onerror=y=>{c=l.objectStore(Zc);const x=c.delete(this.modelPath);x.onsuccess=()=>(a.close(),s(g.error)),x.onerror=v=>(a.close(),s(g.error))}},u.onerror=p=>(a.close(),s(u.error)),l.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},i.onerror=a=>s(i.error)})}}Th.URL_SCHEME="indexeddb://";const xY=t=>ge().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Th.URL_SCHEME)?F$e(t.slice(Th.URL_SCHEME.length)):null;_s.registerSaveRouter(xY);_s.registerLoadRouter(xY);function F$e(t){return new Th(t)}function L$e(t){return t.startsWith(Th.URL_SCHEME)?t.slice(Th.URL_SCHEME.length):t}class V$e{constructor(){this.indexedDB=yY()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(rA,sA);r.onupgradeneeded=()=>iA(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Zc,"readonly"),o=i.objectStore(Zc).getAll();o.onsuccess=()=>{const l={};for(const c of o.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),n(o.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=L$e(e),new Promise((n,r)=>{const s=this.indexedDB.open(rA,sA);s.onupgradeneeded=()=>iA(s),s.onsuccess=()=>{const i=s.result,a=i.transaction(Zc,"readwrite"),o=a.objectStore(Zc),l=o.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=o.delete(e),d=()=>{c=i.transaction(Qd,"readwrite");const g=c.objectStore(Qd).delete(e);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};u.onsuccess=d,u.onerror=p=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),a.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ll="/",cp="tensorflowjs_models",vY="info",B$e="model_topology",z$e="weight_specs",U$e="weight_data",W$e="model_metadata";function bY(t){return{info:[cp,t,vY].join(Ll),topology:[cp,t,B$e].join(Ll),weightSpecs:[cp,t,z$e].join(Ll),weightData:[cp,t,U$e].join(Ll),modelMetadata:[cp,t,W$e].join(Ll)}}function wY(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function G$e(t){const e=t.split(Ll);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ll)}function H$e(t){return t.startsWith(_h.URL_SCHEME)?t.slice(_h.URL_SCHEME.length):t}class _h{constructor(e){if(!ge().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=bY(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=gY(e),i=Rm.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,j$e(i));const a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw wY(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const o=JSON.parse(i);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=D$e(a),n}}_h.URL_SCHEME="localstorage://";const kY=t=>ge().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_h.URL_SCHEME)?q$e(t.slice(_h.URL_SCHEME.length)):null;_s.registerSaveRouter(kY);_s.registerLoadRouter(kY);function q$e(t){return new _h(t)}class K$e{constructor(){W(ge().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),W(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=cp+Ll,r=Ll+vY;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const a=G$e(i);e[a]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=H$e(e);const n=bY(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return wY(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5="://";class Uo{constructor(){this.managers={}}static getInstance(){return Uo.instance==null&&(Uo.instance=new Uo),Uo.instance}static registerManager(e,n){W(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(y5)&&(e=e.slice(0,e.indexOf(y5))),W(e.length>0,()=>"scheme must not be an empty string.");const r=Uo.getInstance();W(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Uo.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Uo.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X$e{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ge().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return ZX(e)}}if(ge().get("IS_BROWSER")){ge().setPlatform("browser",new X$e);try{Uo.registerManager(_h.URL_SCHEME,new K$e)}catch{}try{Uo.registerManager(Th.URL_SCHEME,new V$e)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$e={importFetch:()=>require("node-fetch")};let KE;class Q$e{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ge().global.fetch!=null?ge().global.fetch(e,n):(KE==null&&(KE=Y$e.importFetch()),KE(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ge().get("IS_NODE")&&!ge().get("IS_BROWSER")&&ge().setPlatform("node",new Q$e);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _t(t,e="float32",n){return e=e||"float32",yc(t),new ns(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J$e(t,e){const n=Z(t,"x","cast");if(!GRe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return ie.runKernel(zx,r,s)}const Ue=le({cast_:J$e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const n={x:Z(t,"x","clone","string_or_numeric")};return ie.runKernel(tv,n)}const ch=le({clone_:Z$e});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cY();const tPe={buffer:_t,cast:Ue,clone:ch,print:ePe};S$e(tPe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t,e){let n=Z(t,"a","add"),r=Z(e,"b","add");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(Am,s)}const Pe=le({add_:nPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(t,e){let n=Z(t,"a","floorDiv"),r=Z(e,"b","floorDiv");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(Zx,s)}const SY=le({floorDiv_:rPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t,e){let n=Z(t,"a","div"),r=Z(e,"b","div");if([n,r]=tr(n,r),n.dtype==="int32"&&r.dtype==="int32")return SY(n,r);const s={a:n,b:r},i={};return ie.runKernel(qx,s,i)}const ut=le({div_:sPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iPe(t,e){let n=Z(t,"a","mul"),r=Z(e,"b","mul");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(uv,s)}const re=le({mul_:iPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(t){const e=Z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ie.runKernel(LS,n)}else{const n={x:e};return ie.runKernel($S,n)}}const Rs=le({abs_:aPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oPe(t){const n={x:Z(t,"x","acos")};return ie.runKernel(Dx,n)}const lPe=le({acos_:oPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(t){const n={x:Z(t,"x","acosh")};return ie.runKernel(Ox,n)}const uPe=le({acosh_:cPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t,e=null,n=!1){const s={x:Z(t,"x","all","bool")},i={axis:e,keepDims:n};return ie.runKernel(ZP,s,i)}const NY=le({all_:dPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(t,e=null,n=!1){const s={x:Z(t,"x","any","bool")},i={axis:e,keepDims:n};return ie.runKernel(ej,s,i)}const aA=le({any_:hPe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t,e=0){const r={x:Z(t,"x","argMax")},s={axis:e};return ie.runKernel(PS,r,s)}const qy=le({argMax_:fPe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pPe(t,e=0){const r={x:Z(t,"x","argMin")},s={axis:e};return ie.runKernel(jS,r,s)}const mPe=le({argMin_:pPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const n={x:Z(t,"x","asin")};return ie.runKernel(Mx,n)}const yPe=le({asin_:gPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xPe(t){const n={x:Z(t,"x","asinh")};return ie.runKernel(Fx,n)}const vPe=le({asinh_:xPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bPe(t){const n={x:Z(t,"x","atan")};return ie.runKernel(Lx,n)}const wPe=le({atan_:bPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kPe(t,e){let n=Z(t,"a","atan2"),r=Z(e,"b","atan2");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(Bx,s)}const SPe=le({atan2_:kPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const n={x:Z(t,"x","atanh")};return ie.runKernel(Vx,n)}const CPe=le({atanh_:NPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Av(t,e,n,r,s="NHWC",i){const a=t[3],o=[...e,a],l=vc(s);return as(t,o,n,i,r,null,null,l)}function ja(t,e,n,r,s,i,a="channelsLast"){const[o,l]=Ky(e);let c;if(a==="channelsLast")c=[o,l,t[3],t[3]];else if(a==="channelsFirst")c=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return as(t,c,n,r,s,i,!1,a)}function xc(t,e,n,r,s,i,a="NDHWC"){const[o,l,c]=oA(e);let u,d;if(a==="NDHWC")d="channelsLast",u=[o,l,c,t[4],t[4]];else if(a==="NCDHW")d="channelsFirst",u=[o,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${a}`);return qu(t,u,n,r,s,!1,d,i)}function as(t,e,n,r,s,i,a=!1,o="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d]=t;else if(o==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${o}`);const[p,g,,y]=e,[x,v]=Ky(n),[w,k]=Ky(r),S=Sp(p,w),I=Sp(g,k),{padInfo:E,outHeight:j,outWidth:A}=TPe(s,c,u,x,v,S,I,i,o),T=a?y*d:y;let $;return o==="channelsFirst"?$=[l,T,j,A]:o==="channelsLast"&&($=[l,j,A,T]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:d,outHeight:j,outWidth:A,outChannels:T,padInfo:E,strideHeight:x,strideWidth:v,filterHeight:p,filterWidth:g,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationHeight:w,dilationWidth:k,inShape:t,outShape:$,filterShape:e}}function qu(t,e,n,r,s,i=!1,a="channelsLast",o){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d,p]=t;else if(a==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${a}`);const[g,y,x,,v]=e,[w,k,S]=oA(n),[I,E,j]=oA(r),A=Sp(g,I),T=Sp(y,E),$=Sp(x,j),{padInfo:D,outDepth:R,outHeight:F,outWidth:L}=_Pe(s,c,u,d,w,k,S,A,T,$,o),K=i?v*p:v;let X;return a==="channelsFirst"?X=[l,K,R,F,L]:a==="channelsLast"&&(X=[l,R,F,L,K]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:R,outHeight:F,outWidth:L,outChannels:K,padInfo:D,strideDepth:w,strideHeight:k,strideWidth:S,filterDepth:g,filterHeight:y,filterWidth:x,effectiveFilterDepth:A,effectiveFilterHeight:T,effectiveFilterWidth:$,dilationDepth:I,dilationHeight:E,dilationWidth:j,inShape:t,outShape:X,filterShape:e}}function IPe(t,e,n,r,s){r==null&&(r=Bj(t,e,n));const i=t[0],a=t[1],o=Xy((i-e+2*r)/n+1,s),l=Xy((a-e+2*r)/n+1,s);return[o,l]}function EPe(t,e,n,r,s,i){s==null&&(s=Bj(t,e[0],r[0]));const a=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*s>=e[o]&&(a[o]=Xy((t[o]-e[o]+2*s)/r[o]+1,i));return a}function Bj(t,e,n,r=1){const s=Sp(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Ky(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function oA(t){return typeof t=="number"?[t,t,t]:t}function Sp(t,e){return e<=1?t:t+(t-1)*(e-1)}function TPe(t,e,n,r,s,i,a,o,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const g=IPe([e,n],i,r,t,o);u=g[0],d=g[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/s);const p=Math.max(0,(u-1)*r+i-e),g=Math.max(0,(d-1)*s+a-n),y=Math.floor(p/2),x=p-y,v=Math.floor(g/2),w=g-v;c={top:y,bottom:x,left:v,right:w,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),d=Math.ceil((n-a+1)/s);else if(typeof t=="object"){const p=l==="channelsLast"?t[1][0]:t[2][0],g=l==="channelsLast"?t[1][1]:t[2][1],y=l==="channelsLast"?t[2][0]:t[3][0],x=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:g,left:y,right:x,type:p===0&&g===0&&y===0&&x===0?"VALID":"EXPLICIT"},u=Xy((e-i+p+g)/r+1,o),d=Xy((n-a+y+x)/s+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function _Pe(t,e,n,r,s,i,a,o,l,c,u){let d,p,g,y;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const v=EPe([e,n,r,1],[o,l,c],1,[s,i,a],t,u);p=v[0],g=v[1],y=v[2]}else if(t==="same"){p=Math.ceil(e/s),g=Math.ceil(n/i),y=Math.ceil(r/a);const x=(p-1)*s+o-e,v=(g-1)*i+l-n,w=(y-1)*a+c-r,k=Math.floor(x/2),S=x-k,I=Math.floor(v/2),E=v-I,j=Math.floor(w/2),A=w-j;d={top:I,bottom:E,left:j,right:A,front:k,back:S,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:g,outWidth:y}}function Xy(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ah(t){const[e,n,r]=Ky(t);return e===1&&n===1&&r===1}function vs(t,e){return Ah(t)||Ah(e)}function Rh(t){return Ky(t).every(e=>e>0)}function vc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function ti(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")W(Gp(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{W(Gp(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function APe(t,e){const r={x:Z(t,"x","reshape","string_or_numeric")},s={shape:e};return ie.runKernel(vN,r,s)}const oe=le({reshape_:APe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RPe(t,e,n,r,s){const i=Z(t,"x","avgPool","float32"),a=1;W(vs(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let o=i,l=!1;i.rank===3&&(l=!0,o=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),W(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),ti("avgPool",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=ie.runKernel(DS,c,u);return d=Ue(d,i.dtype),l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const zj=le({avgPool_:RPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Pe(t,e,n,r,s,i="NDHWC"){const a=Z(t,"x","avgPool3d","float32");let o=a,l=!1;a.rank===4&&(l=!0,o=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),W(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),W(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),ti("avgPool3d",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=ie.runKernel(OS,c,u);return d=Ue(d,o.dtype),l?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const PPe=le({avgPool3d_:$Pe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jPe(t,e=0){W(t.length>=1,()=>"Pass at least one tensor to concat");const n=fY(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return ch(n[0]);const r=n,s={axis:e};return ie.runKernel(VS,r,s)}const Js=le({concat_:jPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t,e,n=!1,r=!1){let s=Z(t,"a","matMul"),i=Z(e,"b","matMul");[s,i]=tr(s,i);const a={a:s,b:i},o={transposeA:n,transposeB:r};return ie.runKernel(MS,a,o)}const en=le({matMul_:DPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(t){const n={x:Z(t,"x","sigmoid","float32")};return ie.runKernel(wv,n)}const $m=le({sigmoid_:OPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MPe(t,e,n){const r=Z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return ie.runKernel(NN,s,i)}const vn=le({slice_:MPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FPe(t){const n={x:Z(t,"x","tanh","float32")};return ie.runKernel(Ev,n)}const DN=le({tanh_:FPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LPe(t,e,n){const r=Z(t,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);W(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),W(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),W(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},a={blockShape:e,crops:n};return ie.runKernel(FS,i,a)}const Uj=le({batchToSpaceND_:LPe});function VPe(t){let e;return t.rank===0||t.rank===1?e=oe(t,[1,1,1,t.size]):t.rank===2?e=oe(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t,e,n,r,s,i){i==null&&(i=.001);const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;s!=null&&(c=Z(s,"scale","batchNorm"));let u;r!=null&&(u=Z(r,"offset","batchNorm")),W(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),W(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),W(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:VPe(a),scale:c,offset:u,mean:o,variance:l},g={varianceEpsilon:i},y=ie.runKernel(XS,p,g);return oe(y,a.shape)}const ON=le({batchNorm_:BPe});function zPe(t,e,n,r,s,i){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;s!=null&&(c=Z(s,"scale","batchNorm"));let u;return r!=null&&(u=Z(r,"offset","batchNorm")),W(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),W(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),W(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&W(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&W(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),ON(a,o,l,u,c,i)}const UPe=le({batchNorm2d_:zPe});function WPe(t,e,n,r,s,i){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;s!=null&&(c=Z(s,"scale","batchNorm"));let u;return r!=null&&(u=Z(r,"offset","batchNorm")),W(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),W(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),W(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&W(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&W(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),ON(a,o,l,u,c,i)}const GPe=le({batchNorm3d_:WPe});function HPe(t,e,n,r,s,i){const a=Z(t,"x","batchNorm"),o=Z(e,"mean","batchNorm"),l=Z(n,"variance","batchNorm");let c;s!=null&&(c=Z(s,"scale","batchNorm"));let u;return r!=null&&(u=Z(r,"offset","batchNorm")),W(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),W(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),W(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&W(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&W(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),ON(a,o,l,u,c,i)}const qPe=le({batchNorm4d_:HPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KPe(t,e,n){const r=Z(t,"x","bincount"),s=Z(e,"weights","bincount");W(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),W(n>=0,()=>`size must be non-negative, but got ${n}.`),W(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},a={size:n};return ie.runKernel(rj,i,a)}const XPe=le({bincount_:KPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YPe(t,e){let n=Z(t,"broadcastTo","x");const r=n.shape;if(yc(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=oe(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return ch(n);const o={x:n},l={reps:i};return ie.runKernel(Tv,o,l)}const fy=le({broadcastTo_:YPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QPe(t){const n={x:Z(t,"x","ceil","float32")};return ie.runKernel(Ux,n)}const JPe=le({ceil_:QPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MN(t,e,n){yc(t),n=n||Tm(e);const r={shape:t,value:e,dtype:n};return ie.runKernel(xj,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t,e,n){const r=Z(t,"x","clipByValue");if(W(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return MN(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return ie.runKernel(Wx,s,i)}const Ji=le({clipByValue_:ZPe});function eje(t){return Js(t,0)}const tje=le({concat1d_:eje});function nje(t,e){return Js(t,e)}const rje=le({concat2d_:nje});function sje(t,e){return Js(t,e)}const ije=le({concat3d_:sje});function aje(t,e){return Js(t,e)}const oje=le({concat4d_:aje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lje(t,e,n,r,s="NHWC",i=[1,1],a){const o=Z(t,"x","conv2d","float32"),l=Z(e,"filter","conv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),W(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),ti("conv2d",r,a);const d=s==="NHWC"?c.shape[3]:c.shape[1];W(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),W(vs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),W(Rh(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),W(Rh(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},y=ie.runKernel(BS,p,g);return u?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const $h=le({conv2d_:lje});function cje(t,e,n,r,s="NWC",i=1,a){const o=Z(t,"x","conv1d"),l=Z(e,"filter","conv1d");let c=o,u=!1;o.rank===2&&(u=!0,c=oe(o,[1,o.shape[0],o.shape[1]])),W(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),W(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),ti("conv1d",r,a),W(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),W(vs(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),W(Rh(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),W(Rh(n),()=>"Error in conv1D: Stride should be larger than 0."),W(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=oe(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=oe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=$h(p,d,[1,n],r,"NHWC",[1,i],a);return u?oe(v,[v.shape[2],v.shape[3]]):oe(v,[v.shape[0],v.shape[2],v.shape[3]])}const CY=le({conv1d_:cje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uje(t,e,n,r,s,i="NHWC",a){W(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,c=!1;e.rank===3&&(c=!0,l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),W(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),W(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),W(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?o[3]:o[1],d=i==="NHWC"?l.shape[3]:l.shape[1];W(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),W(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),ti("conv2dDerInput",s,a);const p={dy:l,filter:n},g={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,inputShape:o},y=ie.runKernel(zS,p,g);return c?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Wj=le({conv2DBackpropInput_:uje});function dje(t,e,n,r,s,i){const a=Z(t,"x","conv2dTranspose"),o=Z(e,"filter","conv2dTranspose");return Wj(n,a,o,r,s,"NHWC",i)}const IY=le({conv2dTranspose_:dje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hje(t,e,n,r,s="NDHWC",i=[1,1,1]){const a=Z(t,"x","conv3d"),o=Z(e,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),W(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),W(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),W(vs(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),W(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),W(Rh(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),W(Rh(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:o},d={strides:n,pad:r,dataFormat:s,dilations:i},p=ie.runKernel(US,u,d);return c?oe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const fje=le({conv3d_:hje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pje(t,e,n,r,s){W(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,a=e,o=!1;e.rank===4&&(o=!0,a=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=a.shape[4];W(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),W(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),W(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),W(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),W(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:a,filter:n},d={pad:s,strides:r,inputShape:i},p=ie.runKernel(lj,u,d);return o?oe(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const EY=le({conv3DBackpropInput_:pje});function mje(t,e,n,r,s){const i=Z(t,"x","conv3dTranspose"),a=Z(e,"filter","conv3dTranspose");return EY(n,i,a,r,s)}const gje=le({conv3dTranspose_:mje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yje(t){const n={x:Z(t,"x","cos","float32")};return ie.runKernel(Gx,n)}const Gj=le({cos_:yje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xje(t){const n={x:Z(t,"x","cosh","float32")};return ie.runKernel(Hx,n)}const TY=le({cosh_:xje});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vje(t,e=0,n=!1,r=!1){const i={x:Z(t,"x","cumprod")},a={axis:e,exclusive:n,reverse:r};return ie.runKernel(cj,i,a)}const lA=le({cumprod_:vje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bje(t,e=0,n=!1,r=!1){const i={x:Z(t,"x","cumsum")},a={axis:e,exclusive:n,reverse:r};return ie.runKernel(WS,i,a)}const _Y=le({cumsum_:bje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wje(t,e,n,r=!1){const s=Z(t,"x","denseBincount"),i=Z(e,"weights","denseBincount");W(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),W(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),W(n>=0,()=>`size must be non-negative, but got ${n}.`),W(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const a={x:s,weights:i},o={size:n,binaryOutput:r};return ie.runKernel(dj,a,o)}const x5=le({denseBincount_:wje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kje(t,e,n="NHWC"){const r=Z(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];W(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),W(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),W(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),W(a%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${a} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return ie.runKernel(hj,o,l)}const Sje=le({depthToSpace_:kje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nje(t,e,n,r,s="NHWC",i=[1,1],a){const o=Z(t,"x","depthwiseConv2d","float32"),l=Z(e,"filter","depthwiseConv2d","float32");let c=o,u=!1;o.rank===3&&(u=!0,c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),W(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];W(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),ti("depthwiseConv2d",r,a);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a},y=ie.runKernel(GS,p,g);return u?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const Hj=le({depthwiseConv2d_:Nje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cje(t,e,n,r,s=[1,1],i="NHWC"){const a=Z(t,"x","dilation2d"),o=Z(e,"filter","dilation2d");W(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),W(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),W(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=a,c=!1;a.rank===3&&(l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),W(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const u={x:l,filter:o},d={strides:n,pad:r,dilations:s},p=ie.runKernel(HS,u,d);return c?oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Ije=le({dilation2d_:Cje});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kp(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,a=t[i]||1;(e[e.length-1-s]||1)>1&&a===1&&r.unshift(i)}return r}function Nr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,a=e[i];(s==null||s===1&&a>1)&&n.unshift(i)}return n}function Nt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let a=e[e.length-s-1];if(a==null&&(a=1),i===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=i;else if(i!==a){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-s-1]=i}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(t,e){let n=Z(t,"a","equal","string_or_numeric"),r=Z(e,"b","equal","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(qS,s)}const dl=le({equal_:Eje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tje(t,e,n){const r=Z(e,"a","where"),s=Z(n,"b","where"),i=Z(t,"condition","where","bool"),a=Nt(Nt(i.shape,r.shape),s.shape),o=fy(i,a),l=fy(r,a),c=fy(s,a),u={condition:o,t:l,e:c};return ie.runKernel(SN,u)}const Ms=le({where_:Tje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _je(t){const n={x:Z(t,"x","zerosLike")};return ie.runKernel(RN,n)}const Ut=le({zerosLike_:_je});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aje(t,e){let n=Z(t,"a","div"),r=Z(e,"b","div");[n,r]=tr(n,r);const s=ut(n,r),i=Ut(s),a=dl(r,i);return Ms(a,i,s)}const Rje=le({divNoNan_:Aje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t,e){const n=Z(t,"t1","dot"),r=Z(e,"t2","dot");W((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(W(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const a=oe(n,[1,-1]),o=oe(r,[-1,1]),l=en(a,o);return oe(l,[])}else if(n.rank===1&&r.rank===2){const a=oe(n,[1,-1]),o=oe(r,[r.shape[0],r.shape[1]]),l=en(a,o);return oe(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=oe(r,[-1,1]),o=en(n,a);return oe(o,[o.size])}else{const a=oe(r,[r.shape[0],r.shape[1]]);return en(n,a)}}const Pje=le({dot_:$je});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jje(t,...e){const n=e.map((s,i)=>Z(s,`tensors${i}`,"einsum")),r={equation:t};return ie.runKernel(mj,n,r)}const zg=le({einsum_:jje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dje(t){const n={x:Z(t,"x","elu","float32")};return ie.runKernel(Kx,n)}const FN=le({elu_:Dje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(t){let e=Z(t,"x","erf");W(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ue(e,"float32"));const n={x:e};return ie.runKernel(Xx,n)}const AY=le({erf_:Oje});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qj(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RY(t,e,n){const r=t.length+e.length,s=[];let i=0,a=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?s.push(t[i++]):s.push(e[a++]);return s}function Vr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function ur(t,e){const n=e.map(r=>1);return RY(t,n,e)}function os(t,e,n){W(qj(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Gn(t,e){if(qj(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Ku(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function nr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mje(t,e=null,n=!1){const s={x:Z(t,"x","max")},i={reductionIndices:e,keepDims:n};return ie.runKernel(iN,s,i)}const yo=le({max_:Mje});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fje(t,e=null,n=!1){const s={x:Z(t,"x","min")},i={axis:e,keepDims:n};return ie.runKernel(cN,s,i)}const B1=le({min_:Fje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lje(t,e){let n=Z(t,"base","pow"),r=Z(e,"exp","pow");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(dv,s)}const Ph=le({pow_:Lje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(t,e){if((_a(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&_a(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return jN(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vje(t){const n={x:Z(t,"x","sqrt","float32")};return ie.runKernel(Sv,n)}const xs=le({sqrt_:Vje});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bje(t){const e=Z(t,"x","square"),n={};return ie.runKernel("Square",{x:e},n)}const An=le({square_:Bje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zje(t,e=null,n=!1){let r=Z(t,"x","sum");r.dtype==="bool"&&(r=Ue(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return ie.runKernel(CN,s,i)}const lt=le({sum_:zje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uje(t,e="euclidean",n=null,r=!1){t=Z(t,"x","norm");const s=$Y(t,e,n);let i=s.shape;if(r){const a=At(n,t.shape);i=ur(s.shape,a)}return oe(s,i)}function $Y(t,e,n=null){if(t.rank===0)return Rs(t);if(t.rank!==1&&n===null)return $Y(oe(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return lt(Rs(t),n);if(e===1/0)return yo(Rs(t),n);if(e===-1/0)return B1(Rs(t),n);if(e==="euclidean"||e===2)return xs(lt(Ph(Rs(t),tn(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return yo(lt(Rs(t),n[0]),n[1]-1);if(e===1/0)return yo(lt(Rs(t),n[1]),n[0]);if(e===-1/0)return B1(lt(Rs(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return xs(lt(An(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const LN=le({norm_:Uje});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wje(t,e=null,n=!1){return LN(t,"euclidean",e,n)}const Gje=le({euclideanNorm_:Wje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hje(t){const n={x:Z(t,"x","exp")};return ie.runKernel(Yx,n)}const hl=le({exp_:Hje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qje(t,e=0){const n=Z(t,"x","expandDims","string_or_numeric");W(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return ie.runKernel(KS,r,s)}const qs=le({expandDims_:qje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kje(t){const n={x:Z(t,"x","expm1")};return ie.runKernel(Qx,n)}const Xje=le({expm1_:Kje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yje(t,e){const n=Z(t,"x","tile","string_or_numeric");W(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return ie.runKernel(Tv,r,s)}const ho=le({tile_:Yje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qje(t,e,n,r="float32"){e==null&&(e=t);const s=_t([t,e],r),i=t<=e?t:e;for(let o=0;o<i;++o)s.set(1,o,o);const a=oe(s.toTensor(),[t,e]);if(n==null)return a;if(n.length===1)return ho(qs(a,0),[n[0],1,1]);if(n.length===2)return ho(qs(qs(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return ho(qs(qs(qs(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const PY=le({eye_:Qje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jje(t){const n={x:Z(t,"x","floor","float32")};return ie.runKernel(Jx,n)}const VN=le({floor_:Jje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zje(t,e,n=0,r=0){const s=Z(t,"x","gather"),i=Z(e,"indices","gather","int32"),a={x:s,indices:i},o={axis:n,batchDims:r};return ie.runKernel(YS,a,o)}const Kj=le({gather_:Zje});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t,e){let n=Z(t,"a","greater","string_or_numeric"),r=Z(e,"b","greater","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(QS,s)}const ta=le({greater_:eDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t,e){let n=Z(t,"a","greaterEqual","string_or_numeric"),r=Z(e,"b","greaterEqual","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(ev,s)}const Zh=le({greaterEqual_:tDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nDe(t){const n={input:Z(t,"input","imag")};return ie.runKernel(wj,n)}const Xj=le({imag_:nDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const n={x:Z(t,"x","isFinite")};return ie.runKernel(nv,n)}const sDe=le({isFinite_:rDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const n={x:Z(t,"x","isInf")};return ie.runKernel(rv,n)}const aDe=le({isInf_:iDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const n={x:Z(t,"x","isNaN")};return ie.runKernel(sv,n)}const lDe=le({isNaN_:oDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t,e=.2){const r={x:Z(t,"x","leakyRelu")},s={alpha:e};return ie.runKernel(JS,r,s)}const Yj=le({leakyRelu_:cDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t,e){let n=Z(t,"a","less","string_or_numeric"),r=Z(e,"b","less","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(ZS,s)}const z1=le({less_:uDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(t,e){let n=Z(t,"a","lessEqual","string_or_numeric"),r=Z(e,"b","lessEqual","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(eN,s)}const Pm=le({lessEqual_:dDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t,e=5,n=1,r=1,s=.5){const i=Z(t,"x","localResponseNormalization");W(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),W(Gp(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let a=i,o=!1;i.rank===3&&(o=!0,a=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:a},c={depthRadius:e,bias:n,alpha:r,beta:s},u=ie.runKernel(sN,l,c);return o?oe(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const fDe=le({localResponseNormalization_:hDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t){const n={x:Z(t,"x","log","float32")};return ie.runKernel(iv,n)}const fl=le({log_:pDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(t){const n={x:Z(t,"x","log1p")};return ie.runKernel(av,n)}const jY=le({log1p_:mDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t,e){W(q_(t),()=>"The f passed in variableGrads(f) must be a function"),W(e==null||Array.isArray(e)&&e.every(c=>c instanceof V1),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in ie.registeredVariables)e.push(ie.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),W(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:a,grads:o}=ie.gradients(t,e,null,i);W(o.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),W(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return e.forEach((c,u)=>{o[u]!=null&&(l[c.name]=o[u])}),r?.forEach(c=>l[c.name]=null),{value:a,grads:l}}function Xp(t){return ie.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t){const n={x:Z(t,"x","neg")};return ie.runKernel(dN,n)}const er=le({neg_:yDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(t){const n={x:Z(t,"x","softplus")};return ie.runKernel(kv,n)}const Rv=le({softplus_:xDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const e=Z(t,"x","logSigmoid");return Xp(r=>({value:er(Rv(er(r))),gradFunc:a=>re(a,$m(er(r)))}))(e)}const bDe=le({logSigmoid_:vDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t,e){let n=Z(t,"a","sub"),r=Z(e,"b","sub");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(Cv,s)}const yt=le({sub_:wDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t,e=-1){const n=Z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Xp((s,i)=>{const o=yo(s,e,!0),l=yt(s,o),c=yt(Ue(l,"float32"),fl(lt(hl(l),e,!0)));return i([c]),{value:c,gradFunc:(d,p)=>{const[g]=p,y=!0,x=hl(g);return yt(d,re(lt(d,e,y),x))}}})(n)}const DY=le({logSoftmax_:kDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t,e=null,n=!1){const r=Z(t,"x","logSumExp"),s=At(e,r.shape),i=yo(r,s,!0),a=yt(r,i),o=hl(a),l=lt(o,s),c=fl(l),u=Pe(oe(i,c.shape),c);if(n){const d=ur(u.shape,s);return oe(u,d)}return u}const OY=le({logSumExp_:SDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t,e){const n=Z(t,"a","logicalAnd","bool"),r=Z(e,"b","logicalAnd","bool");Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(tN,s)}const ac=le({logicalAnd_:NDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const n={x:Z(t,"x","logicalNot","bool")};return ie.runKernel(nN,n)}const Qj=le({logicalNot_:CDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t,e){const n=Z(t,"a","logicalOr","bool"),r=Z(e,"b","logicalOr","bool");Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(rN,s)}const MY=le({logicalOr_:IDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t,e){const n=Z(t,"a","logicalXor","bool"),r=Z(e,"b","logicalXor","bool");return Nt(n.shape,r.shape),ac(MY(t,e),Qj(ac(t,e)))}const TDe=le({logicalXor_:EDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t,e,n,r,s){const i=Z(t,"x","maxPool"),a=1;let o=i,l=!1;i.rank===3&&(l=!0,o=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),W(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),W(vs(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),ti("maxPool",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=ie.runKernel(aN,c,u);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Jj=le({maxPool_:_De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t,e=[1,1,1],n,r,s,i="NDHWC"){const a=Z(t,"x","maxPool3d");let o=a,l=!1;a.rank===4&&(l=!0,o=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),W(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),W(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),ti("maxPool3d",r,s);const c={x:o},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=ie.runKernel(oN,c,u);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const RDe=le({maxPool3d_:ADe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(t,e){let n=Z(t,"a","maximum"),r=Z(e,"b","maximum");[n,r]=tr(n,r),n.dtype==="bool"&&(n=Ue(n,"int32"),r=Ue(r,"int32")),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(ov,s)}const Xu=le({maximum_:$De});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t,e=null,n=!1){const s={x:Z(t,"x","mean")},i={axis:e,keepDims:n};return ie.runKernel(lN,s,i)}const lr=le({mean_:PDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pr(t,e="float32"){if(yc(t),e==="complex64"){const r=Pr(t,"float32"),s=Pr(t,"float32");return qp(r,s)}const n=ys(Se(t),e);return ie.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yu(t,e="float32"){if(yc(t),e==="complex64"){const r=Yu(t,"float32"),s=Pr(t,"float32");return qp(r,s)}const n=XP(Se(t),e);return ie.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t,e){let n=Z(t,"a","minimum"),r=Z(e,"b","minimum");[n,r]=tr(n,r),n.dtype==="bool"&&(n=Ue(n,"int32"),r=Ue(r,"int32")),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(lv,s)}const Yy=le({minimum_:jDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t,e,n){W(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=Z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");W(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)W(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),W(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},a={x:r};return ie.runKernel(uN,a,i)}const ODe=le({mirrorPad_:DDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t,e){let n=Z(t,"a","mod"),r=Z(e,"b","mod");[n,r]=tr(n,r);const s={a:n,b:r};return ie.runKernel(cv,s)}const FDe=le({mod_:MDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t,e=null,n=!1){t=Z(t,"x","moments");const r=At(e,t.shape),s=lr(t,r,n);let i=s.shape;n||(i=ur(s.shape,r));const a=An(yt(Ue(t,"float32"),oe(s,i))),o=lr(a,r,n);return{mean:s,variance:o}}const Zj=le({moments_:LDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t,e){let n=Z(t,"a","notEqual","string_or_numeric"),r=Z(e,"b","notEqual","string_or_numeric");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r};return ie.runKernel(hN,s)}const U1=le({notEqual_:VDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const a={indices:Z(t,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:n,offValue:r};return ie.runKernel(pN,a,o)}const FY=le({oneHot_:BDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDe(t){const n={x:Z(t,"x","onesLike")};return ie.runKernel(fN,n)}const Aa=le({onesLike_:zDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t,e,n=0){const r=Z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return ie.runKernel(gN,i,s)}const eD=le({pad_:UDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t,e,n){const r=Z(t,"x","spaceToBatchND");W(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),W(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),W(r.shape.reduce((a,o,l)=>l>0&&l<=e.length?a&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return ie.runKernel(IN,s,i)}const tD=le({spaceToBatchND_:WDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GDe(t,e,n,r,s,i,a){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const o=Z(t,"x","maxPool");let l=o,c=!1;o.rank===3&&(c=!0,l=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),W(vs(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=ja(l.shape,e,i,s,r),d=[u.dilationHeight,u.dilationWidth];let p;r==="same"?p=qDe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];const g=d[0]===1&&d[1]===1,[y,x]=HDe([u.inHeight,u.inWidth],d,p),v=g?r:"valid",w=g?l:tD(l,d,y),S=(n==="avg"?()=>zj(w,e,i,v,a):()=>Jj(w,e,i,v,a))(),I=g?S:Uj(S,d,x);return c?oe(I,[I.shape[1],I.shape[2],I.shape[3]]):I}function HDe(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),a=e.map((u,d)=>(u-i[d]%u)%u),o=s.map((u,d)=>u+a[d]),l=e.map((u,d)=>[r[d],o[d]]),c=e.map((u,d)=>[0,a[d]]);return[l,c]}function qDe(t,e){const r=t.map((a,o)=>a+(a-1)*(e[o]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),i=r.map((a,o)=>a-s[o]);return r.map((a,o)=>[s[o],i[o]])}const KDe=le({pool_:GDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t,e){const n=Z(t,"x","prelu"),r=Z(e,"alpha","prelu"),s={x:n,alpha:r};return ie.runKernel(yN,s)}const nD=le({prelu_:XDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t,e=null,n=!1){let r=Z(t,"x","prod");r.dtype==="bool"&&(r=Ue(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return ie.runKernel(xN,s,i)}const QDe=le({prod_:YDe});var mw={exports:{}},JDe=mw.exports,v5;function ZDe(){return v5||(v5=1,(function(t){(function(e,n,r){function s(l){var c=this,u=o();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var u=new s(l),d=c&&c.state,p=u.next;return p.int32=function(){return u.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,d&&(typeof d=="object"&&i(d,u),p.state=function(){return i(u,{})}),p}function o(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(JDe,t)})(mw)),mw.exports}var gw={exports:{}},eOe=gw.exports,b5;function tOe(){return b5||(b5=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(eOe,t)})(gw)),gw.exports}var yw={exports:{}},nOe=yw.exports,w5;function rOe(){return w5||(w5=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(nOe,t)})(yw)),yw.exports}var xw={exports:{}},sOe=xw.exports,k5;function iOe(){return k5||(k5=1,(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var u=l.x,d=l.i,p,g;return p=u[d],p^=p>>>7,g=p^p<<24,p=u[d+1&7],g^=p^p>>>10,p=u[d+3&7],g^=p^p>>>3,p=u[d+4&7],g^=p^p<<7,p=u[d+7&7],p=p^p<<13,g^=p^p<<9,u[d]=g,l.i=d+1&7,g};function c(u,d){var p,g=[];if(d===(d|0))g[0]=d;else for(d=""+d,p=0;p<d.length;++p)g[p&7]=g[p&7]<<15^d.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],u.x=g,u.i=0,p=256;p>0;--p)u.next()}c(l,o)}function i(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(sOe,t)})(xw)),xw.exports}var vw={exports:{}},aOe=vw.exports,S5;function oOe(){return S5||(S5=1,(function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var u=l.w,d=l.X,p=l.i,g,y;return l.w=u=u+1640531527|0,y=d[p+34&127],g=d[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=d[p]=y^g,l.i=p,y+(u^u>>>16)|0};function c(u,d){var p,g,y,x,v,w=[],k=128;for(d===(d|0)?(g=d,d=null):(d=d+"\0",g=0,k=Math.max(k,d.length)),y=0,x=-32;x<k;++x)d&&(g^=d.charCodeAt((x+32)%d.length)),x===0&&(v=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(v=v+1640531527|0,p=w[x&127]^=g+v,y=p==0?y+1:0);for(y>=128&&(w[(d&&d.length||0)&127]=-1),y=127,x=512;x>0;--x)g=w[y+34&127],p=w[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,w[y]=g^p;u.w=v,u.X=w,u.i=y}c(l,o)}function i(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(aOe,t)})(vw)),vw.exports}var bw={exports:{}},lOe=bw.exports,N5;function cOe(){return N5||(N5=1,(function(t){(function(e,n,r){function s(o){var l=this,c="";l.next=function(){var d=l.b,p=l.c,g=l.d,y=l.a;return d=d<<25^d>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-d|0,l.b=d=d<<20^d>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var c=new s(o),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(lOe,t)})(bw)),bw.exports}var ww={exports:{}};const uOe={},dOe=Object.freeze(Object.defineProperty({__proto__:null,default:uOe},Symbol.toStringTag,{value:"Module"})),hOe=are(dOe);var fOe=ww.exports,C5;function pOe(){return C5||(C5=1,(function(t){(function(e,n,r){var s=256,i=6,a=52,o="random",l=r.pow(s,i),c=r.pow(2,a),u=c*2,d=s-1,p;function g(I,E,j){var A=[];E=E==!0?{entropy:!0}:E||{};var T=w(v(E.entropy?[I,S(n)]:I??k(),3),A),$=new y(A),D=function(){for(var R=$.g(i),F=l,L=0;R<c;)R=(R+L)*s,F*=s,L=$.g(1);for(;R>=u;)R/=2,F/=2,L>>>=1;return(R+L)/F};return D.int32=function(){return $.g(4)|0},D.quick=function(){return $.g(4)/4294967296},D.double=D,w(S($.S),n),(E.pass||j||function(R,F,L,K){return K&&(K.S&&x(K,$),R.state=function(){return x($,{})}),L?(r[o]=R,F):R})(D,T,"global"in E?E.global:this==r,E.state)}function y(I){var E,j=I.length,A=this,T=0,$=A.i=A.j=0,D=A.S=[];for(j||(I=[j++]);T<s;)D[T]=T++;for(T=0;T<s;T++)D[T]=D[$=d&$+I[T%j]+(E=D[T])],D[$]=E;(A.g=function(R){for(var F,L=0,K=A.i,X=A.j,q=A.S;R--;)F=q[K=d&K+1],L=L*s+q[d&(q[K]=q[X=d&X+F])+(q[X]=F)];return A.i=K,A.j=X,L})(s)}function x(I,E){return E.i=I.i,E.j=I.j,E.S=I.S.slice(),E}function v(I,E){var j=[],A=typeof I,T;if(E&&A=="object")for(T in I)try{j.push(v(I[T],E-1))}catch{}return j.length?j:A=="string"?I:I+"\0"}function w(I,E){for(var j=I+"",A,T=0;T<j.length;)E[d&T]=d&(A^=E[d&T]*19)+j.charCodeAt(T++);return S(E)}function k(){try{var I;return p&&(I=p.randomBytes)?I=I(s):(I=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(I)),S(I)}catch{var E=e.navigator,j=E&&E.plugins;return[+new Date,e,j,e.screen,S(n)]}}function S(I){return String.fromCharCode.apply(0,I)}if(w(r.random(),n),t.exports){t.exports=g;try{p=hOe}catch{}}else r["seed"+o]=g})(typeof self<"u"?self:fOe,[],Math)})(ww)),ww.exports}var XE,I5;function mOe(){if(I5)return XE;I5=1;var t=ZDe(),e=tOe(),n=rOe(),r=iOe(),s=oOe(),i=cOe(),a=pOe();return a.alea=t,a.xor128=e,a.xorwow=n,a.xorshift7=r,a.xor4096=s,a.tychei=i,XE=a,XE}var rD=mOe();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LY{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=i||Math.random();this.random=rD.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,a;do s=2*this.random()-1,i=2*this.random()-1,a=s*s+i*i;while(a>=1||a===0);const o=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*i*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class gOe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=rD.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(t,e=0,n=1,r,s){if(yc(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new LY(e,n,r,!1,s),a=_t(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const xOe=le({randomNormal_:yOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vOe(t,e=0,n=1,r="float32",s){yc(t);const i=_t(t,r),a=new gOe(e,n,null,s);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const $v=le({randomUniform_:vOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qy(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return ie.runKernel(Tj,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(t){const n={input:Z(t,"input","real")};return ie.runKernel(_j,n)}const W1=le({real_:bOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wOe(t){const n={x:Z(t,"x","reciprocal")};return ie.runKernel(hv,n)}const kOe=le({reciprocal_:wOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SOe(t){const n={x:Z(t,"x","relu")};return ie.runKernel(fv,n)}const ef=le({relu_:SOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(t){const n={x:Z(t,"x","relu6")};return ie.runKernel(pv,n)}const VY=le({relu6_:NOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function COe(t,e){const r={x:Z(t,"x","reverse")},s={dims:e};return ie.runKernel(kN,r,s)}const jh=le({reverse_:COe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(t){const n={x:Z(t,"x","round")};return ie.runKernel(mv,n)}const BY=le({round_:IOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(t){const n={x:Z(t,"x","rsqrt","float32")};return ie.runKernel(gv,n)}const zY=le({rsqrt_:EOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(t){const n={x:Z(t,"x","selu")};return ie.runKernel(yv,n)}const UY=le({selu_:TOe});function _Oe(t,e,n,r,s,i=[1,1],a="NHWC"){const o=Z(t,"x","separableConv2d"),l=Z(e,"depthwiseFilter","separableConv2d"),c=Z(n,"pointwiseFilter","separableConv2d");let u=o,d=!1;if(o.rank===3&&(d=!0,u=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");W(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),W(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),W(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),W(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),W(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];W(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const y=Hj(u,l,r,s,a,i),v=$h(y,c,1,"valid",a);return d?oe(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const WY=le({separableConv2d_:_Oe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AOe(t){const n={x:Z(t,"x","sign")};return ie.runKernel(bv,n)}const ROe=le({sign_:AOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(t){const n={x:Z(t,"x","sin","float32")};return ie.runKernel(xv,n)}const GY=le({sin_:$Oe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(t){const n={x:Z(t,"x","sinh")};return ie.runKernel(vv,n)}const HY=le({sinh_:POe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(t,e,n){const r=Z(t,"x","slice1d");return W(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),vn(r,[e],[n])}const sD=le({slice1d_:jOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(t,e,n){const r=Z(t,"x","slice2d");return W(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),vn(r,e,n)}const qY=le({slice2d_:DOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(t,e,n){const r=Z(t,"x","slice3d");return W(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),vn(r,e,n)}const iD=le({slice3d_:OOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(t,e,n){const r=Z(t,"x","slice4d");return W(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),vn(r,e,n)}const G1=le({slice4d_:MOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(t,e=-1){const n=Z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return ie.runKernel(TN,r,s)}const aD=le({softmax_:FOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(t){W(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ie.runKernel(yj,e)}const KY=le({fft_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VOe(t){W(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ie.runKernel(bj,e)}const cA=le({ifft_:VOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=oe(t,[n,e]);r=cA(s)}else{const s=[n,2*(e-1)],i=oe(W1(t),[n,e]),a=oe(Xj(t),[n,e]),o=jh(vn(i,[0,1],[n,e-2]),1),l=re(jh(vn(a,[0,1],[n,e-2]),1),tn(-1)),c=Js([i,o],1),u=Js([a,l],1),d=oe(qp(c,u),[s[0],s[1]]);r=cA(d)}if(r=W1(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=oe(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const zOe=le({irfft_:BOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(t,e,n=0){const s={x:Z(t,"x","split")},i={numOrSizeSplits:e,axis:n};return ie.runKernel(EN,s,i)}const qi=le({split_:UOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WOe(t,e){W(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const y=t.shape.map(v=>0),x=t.shape.map(v=>v);x[t.shape.length-1]=e,s=vn(t,y,x),n=e}else if(e!=null&&e>n){const y=t.shape.map(x=>x);y[t.shape.length-1]=e-n,s=Js([t,Pr(y)],t.shape.length-1),n=e}else s=t;const i=Ut(s),a=oe(qp(s,i),[r,n]),o=KY(a),l=Math.floor(n/2)+1,c=W1(o),u=Xj(o),d=qi(c,[l,n-l],c.shape.length-1),p=qi(u,[l,n-l],u.shape.length-1),g=s.shape.slice();return g[s.shape.length-1]=l,oe(qp(d[0],p[0]),g)}const GOe=le({rfft_:WOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HOe(t,e){let n=Z(t,"a","squaredDifference"),r=Z(e,"b","squaredDifference");[n,r]=tr(n,r),Nt(n.shape,r.shape);const s={a:n,b:r},i={};return ie.runKernel(Nv,s,i)}const qOe=le({squaredDifference_:HOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KOe(t,e){const n=Z(t,"x","squeeze","string_or_numeric");return oe(n,Gu(n.shape,e).newShape)}const Pv=le({squeeze_:KOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XOe(t,e=0){const n=fY(t,"tensors","stack","string_or_numeric");W(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&W(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return ie.runKernel(mN,r,s)}const oc=le({stack_:XOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YOe(t,e=0){const r={x:Z(t,"x","step")},s={alpha:e};return ie.runKernel(_v,r,s)}const jv=le({step_:YOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QOe(t,e,n,r,s=0,i=0,a=0,o=0,l=0){const u={x:Z(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};return ie.runKernel(jj,u,d)}const JOe=le({stridedSlice_:QOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZOe(t){const n={x:Z(t,"x","tan","float32")};return ie.runKernel(Iv,n)}const eMe=le({tan_:ZOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wi(t,e){SX(t);const n=PN(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return jN(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Np(t,e,n){if(SX(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=PN(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return jN(t,e,r,n)}function XY(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==e.shape[a])throw new Error(i+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${e.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==t[a+r])throw new Error(i+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${t[a+s]})`)}function tMe(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}XY(n,e,t)}function tf(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let a=1;for(let d=s;d<i;++d)a*=n[d];const o=s<1?1:s,l=Se(e.shape)/o,c=[...ot(n.slice(0,s)),1],u=Se(n);return{sliceRank:s,numUpdates:l,sliceSize:a,strides:c,outputSize:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(t,e=1,n=!0){const r=Z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},a={k:e,sorted:n},[o,l]=ie.runKernel(Dj,i,a);return{values:o,indices:l}}const rMe=le({topk_:nMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sMe(t,e=0,n=1,r,s){if(yc(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new LY(e,n,r,!0,s),a=_t(t,r);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const YY=le({truncatedNormal_:sMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iMe(t,e=0){const n=Z(t,"x","unique","string_or_numeric");W(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,a]=ie.runKernel(Mj,r,s);return{values:i,indices:a}}const aMe=le({unique_:iMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(t,e,n){const r=Z(t,"x","unsortedSegmentSum"),s=Z(e,"segmentIds","unsortedSegmentSum","int32");W(Gp(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},a={numSegments:n};return ie.runKernel(AN,i,a)}const QY=le({unsortedSegmentSum_:oMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lMe(t,e=0){const n=Z(t,"x","unstack","string_or_numeric");W(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return ie.runKernel(_N,r,s)}const Dh=le({unstack_:lMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cMe(t,e=!0,n,r){return ie.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=_t(t,"int32"),s=_t([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const a=r.indexToLoc(n[i]),o=i*t.length;s.values.set(a,o)}return s.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uMe(t,e,n){const r=Z(t,"x","transpose");if(e==null&&(e=r.shape.map((a,o)=>o).reverse()),W(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(a=>{W(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?he(()=>{let a=W1(r),o=Xj(r);return a=ie.runKernel(kp,{x:a},i),o=ie.runKernel(kp,{x:o},i),n&&(o=er(o)),qp(a,o)}):ie.runKernel(kp,s,i)}const zt=le({transpose_:uMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(t,e){if(e==null)return t.shape.slice();if(rn(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(t,e,n,r){const s=Z(t,"x","dropout");if(W(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),W(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof mr?s.clone():s;const i=dMe(s,n),a=1-e,o=ut(VN(Pe($v(i,0,1,"float32",r),a)),a);return re(s,o)}const fMe=le({dropout_:hMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t,e,n,r,s,i="NHWC",a){let o=t;t.rank===3&&(o=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]])),W(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),W(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),W(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?o.shape[3]:o.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];W(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),W(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),ti("conv2dDerFilter",s,a);const d={x:o,dy:l},p={strides:r,pad:s,dataFormat:i,dimRoundingMode:a,filterShape:n};return ie.runKernel(aj,d,p)}const oD=le({conv2DBackpropFilter_:pMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lD(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return re(t,jv(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function cD(t,e){let n=e;const r=Nr(t.shape,e.shape);return r.length>0&&(n=lt(n,r)),oe(n,t.shape)}function uD(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ef(t);if(e==="elu")return FN(t);if(e==="relu6")return VY(t);if(e==="prelu")return nD(t,n);if(e==="leakyrelu")return Yj(t,r);if(e==="sigmoid")return $m(t);throw new Error(`Unknown fused activation ${e}.`)}const dD=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:a,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",dD(ie.state.gradientDepth,l)===!1){W(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let j=$h(t,e,n,r,s,i,a);return o!=null&&(j=Pe(j,o)),uD(j,l,c,u)}const d=Z(t,"x","conv2d","float32"),p=Z(e,"filter","conv2d","float32");let g=d,y=!1;d.rank===3&&(y=!0,g=oe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),W(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),W(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),ti("fused conv2d",r,a);const x=s==="NHWC"?g.shape[3]:g.shape[1];W(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),W(vs(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const v=as(g.shape,p.shape,n,i,r,a);let w;o!=null&&(w=Z(o,"bias","fused conv2d"),[w]=tr(w,d),s==="NHWC"?Nt(v.outShape,w.shape):(W(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),W(w.shape.length===0||w.shape[0]===v.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let k;if(c!=null){const j=c.shape;if(W(j.length<=1||j.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${j.length}.`),j.length===1)W(j[0]===1||j[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${j}) is not compatible with the number of output channels (${v.outChannels}).`);else if(j.length===3)try{Nt(j,v.outShape)}catch{const T=`Error in fused conv2d: PReLU activation weights (${j}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(T)}k=Z(c,"prelu weights","fused conv2d")}const S=(j,A)=>{W(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[T,$,D,R]=A,F=lD(j,D,l);W(Ah(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const L=Wj($.shape,F,T,n,r),K=oD($,F,T.shape,n,r),X=[L,K];if(R!=null){const q=cD(R,F);X.push(q)}return X},I={x:g,filter:p,bias:w,preluActivationWeights:k},E={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:a,activation:l,leakyreluAlpha:u};return o==null?Xp((A,T,$)=>{let D=ie.runKernel(F1,I,E);return $([T,A,D]),y&&(D=oe(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:S}})(g,p):Xp((A,T,$,D)=>{let R=ie.runKernel(F1,I,E);return D([T,A,R,$]),y&&(R=oe(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:S}})(g,p,w)}const gMe=le({fusedConv2d_:mMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t,e,n,r,s,i=[1,1],a){let o=t;t.rank===3&&(o=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:o,dy:l},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,filterShape:n};return ie.runKernel(fj,c,u)}const xMe=le({depthwiseConv2dNativeBackpropFilter_:yMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(t,e,n,r,s,i=[1,1],a){let o=e,l=!1;e.rank===3&&(l=!0,o=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:o,filter:n},u={strides:r,pad:s,dimRoundingMode:a,dilations:i,inputShape:t},d=ie.runKernel(pj,c,u);return l?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const bMe=le({depthwiseConv2dNativeBackpropInput_:vMe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:a,leakyreluAlpha:o=.2}){if(dD(ie.state.gradientDepth,i)===!1){let R=en(t,e,n,r);return s!=null&&(R=Pe(R,s)),uD(R,i,a,o)}let l=Z(t,"a","fused matMul"),c=Z(e,"b","fused matMul");[l,c]=tr(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),x=c.shape.slice(0,-2),v=Se(y),w=Se(x);W(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const S=Nt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),I=n?oe(l,[v,u,p]):oe(l,[v,p,u]),E=r?oe(c,[w,g,d]):oe(c,[w,d,g]);let j;s!=null&&(j=Z(s,"bias","fused matMul"),[j]=tr(j,l),Nt(S,j.shape));let A;a!=null&&(A=Z(a,"prelu weights","fused matMul"));const T=(R,F)=>{const[L,K,X,q]=F,Q=lD(oe(R,X.shape),X,i);let z,H;if(!n&&!r?(z=en(Q,K,!1,!0),H=en(L,Q,!0,!1)):!n&&r?(z=en(Q,K,!1,!1),H=en(Q,L,!0,!1)):n&&!r?(z=en(K,Q,!1,!0),H=en(L,Q,!1,!1)):(z=en(K,Q,!0,!0),H=en(Q,L,!0,!0)),s!=null){const ee=cD(q,Q);return[z,H,ee]}else return[z,H]},$={a:I,b:E,bias:j,preluActivationWeights:A},D={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:o};return s==null?Xp((F,L,K)=>{const X=ie.runKernel(M1,$,D);return K([F,L,X]),{value:oe(X,S),gradFunc:T}})(I,E):Xp((F,L,K,X)=>{const q=ie.runKernel(M1,$,D);return X([F,L,q,K]),{value:oe(q,S),gradFunc:T}})(I,E,j)}const E5=le({fusedMatMul_:wMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(t,e,n,r,s="bilinear",i=0){const a=Z(t,"image","cropAndResize"),o=Z(e,"boxes","cropAndResize","float32"),l=Z(n,"boxInd","cropAndResize","int32"),c=o.shape[0];W(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),W(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),W(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),W(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),W(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),W(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:a,boxes:o,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return ie.runKernel(uj,u,d)}const SMe=le({cropAndResize_:kMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(t){const e=Z(t,"image","flipLeftRight","float32");W(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ie.runKernel(vj,n,{})}const CMe=le({flipLeftRight_:NMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(t){const e=Z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];W(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),W(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,ho(e,s)}const EMe=le({grayscaleToRGB_:IMe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t){const e=Z(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];W(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),W(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Ue(e,"float32"),a=wi([.2989,.587,.114]);let o;switch(e.rank){case 2:o=zg("ij,j->i",i,a);break;case 3:o=zg("ijk,k->ij",i,a);break;case 4:o=zg("ijkl,l->ijk",i,a);break;case 5:o=zg("ijklm,m->ijkl",i,a);break;case 6:o=zg("ijklmn,n->ijklm",i,a);break;default:throw new Error("Not a valid tensor rank.")}return o=qs(o,-1),Ue(o,s)}const _Me=le({rgbToGrayscale_:TMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(t,e,n=0,r=.5){const s=Z(t,"image","rotateWithOffset","float32");W(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},a={radians:e,fillValue:n,center:r};return ie.runKernel(Fj,i,a)}const RMe=le({rotateWithOffset_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jm(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const a=t.shape[0];return n=Math.min(n,a),W(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),W(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),W(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),W(e.rank===1,()=>"scores must be a 1D tensor"),W(e.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${e.shape[0]}`),W(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=Z(t,"boxes","nonMaxSuppression","float32"),a=Z(e,"scores","nonMaxSuppression","float32"),o=jm(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ie.runKernel(Cj,{boxes:i,scores:a},l)}const PMe=le({nonMaxSuppression_:$Me});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t,e,n){const r=DMe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function DMe(t,e,n){return MMe(t,e,n||OMe)}function OMe(t,e){return t>e?1:t<e?-1:0}function MMe(t,e,n){let r=0,s=t.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(s=i,a=!o)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hD(t,e,n,r,s){return mD(t,e,n,r,s,0)}function fD(t,e,n,r,s,i){return mD(t,e,n,r,s,0,!1,i,!0)}function pD(t,e,n,r,s,i){return mD(t,e,n,r,s,i,!0)}function mD(t,e,n,r,s,i,a=!1,o=!1,l=!1){const c=[];for(let v=0;v<e.length;v++)e[v]>s&&c.push({score:e[v],boxIndex:v,suppressBeginIndex:0});c.sort(T5);const u=i>0?-.5/i:0,d=[],p=[];for(;d.length<n&&c.length>0;){const v=c.pop(),{score:w,boxIndex:k,suppressBeginIndex:S}=v;if(w<s)break;let I=!1;for(let E=d.length-1;E>=S;--E){const j=FMe(t,k,d[E]);if(j>=r){I=!0;break}if(v.score=v.score*LMe(r,u,j),v.score<=s)break}v.suppressBeginIndex=d.length,I||(v.score===w?(d.push(k),p.push(v.score)):v.score>s&&jMe(c,v,T5))}const g=d.length,y=n-g;o&&y>0&&(d.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const x={selectedIndices:d};return a&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function FMe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),p=Math.max(s[1],s[3]),g=(o-i)*(l-a),y=(d-c)*(p-u);if(g<=0||y<=0)return 0;const x=Math.max(i,c),v=Math.max(a,u),w=Math.min(o,d),k=Math.min(l,p),S=Math.max(w-x,0)*Math.max(k-v,0);return S/(g+y-S)}function LMe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function T5(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function VMe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=Z(t,"boxes","nonMaxSuppressionAsync"),a=Z(e,"scores","nonMaxSuppressionAsync"),o=jm(i,a,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([i.data(),a.data()]),c=l[0],u=l[1],{selectedIndices:d}=hD(c,u,n,r,s);return i!==t&&i.dispose(),a!==e&&a.dispose(),wi(d,"int32")}const BMe=VMe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=Z(t,"boxes","nonMaxSuppression"),o=Z(e,"scores","nonMaxSuppression"),l=jm(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:a,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=ie.runKernel(Ej,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const UMe=le({nonMaxSuppressionWithScore_:zMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function WMe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const a=Z(t,"boxes","nonMaxSuppressionAsync"),o=Z(e,"scores","nonMaxSuppressionAsync"),l=jm(a,o,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([a.data(),o.data()]),u=c[0],d=c[1],{selectedIndices:p,selectedScores:g}=pD(u,d,n,r,s,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:wi(p,"int32"),selectedScores:wi(g)}}const GMe=WMe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=Z(t,"boxes","nonMaxSuppression"),o=Z(e,"scores","nonMaxSuppression"),l=jm(a,o,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:a,scores:o},g={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},y=ie.runKernel(Ij,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const qMe=le({nonMaxSuppressionPadded_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function KMe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const a=Z(t,"boxes","nonMaxSuppressionAsync"),o=Z(e,"scores","nonMaxSuppressionAsync"),l=jm(a,o,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[p,g]=await Promise.all([a.data(),o.data()]),{selectedIndices:y,validOutputs:x}=fD(p,g,c,u,d,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),{selectedIndices:wi(y,"int32"),validOutputs:tn(x,"int32")}}const XMe=KMe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e,n=!1,r=!1){const s=Z(t,"images","resizeBilinear");W(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),W(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),W(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=ie.runKernel(wN,o,l);return a?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const ZY=le({resizeBilinear_:YMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QMe(t,e,n=!1,r=!1){const s=Z(t,"images","resizeNearestNeighbor");W(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),W(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),W(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),W(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,a=!1;s.rank===3&&(a=!0,i=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=ie.runKernel(bN,o,l);return a?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const eQ=le({resizeNearestNeighbor_:QMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(t,e="binary",n=!1,r=.5){const s=Z(t,"image","threshold"),i=.2989,a=.587,o=.114,l=s.shape[0]*s.shape[1];let c=re(wi([r]),255),u,d,p,g;if(W(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),W(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),W(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),W(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,d,p]=qi(s,[1,1,1],-1);const v=re(u,i),w=re(d,a),k=re(p,o);g=Pe(Pe(v,w),k)}else g=t;if(e==="otsu"){const v=XPe(Ue(BY(g),"int32"),pY([]),256);c=ZMe(v,l)}const y=n?Pm(g,c):ta(g,c);return Ue(re(y,255),"int32")}function ZMe(t,e){let n=wi([-1]),r=wi([0]),s=wi([0]),i,a,o,l,c,u;for(let d=0;d<t.size-1;d++){i=vn(t,0,d+1),a=vn(t,d+1),c=ut(lt(i),e),u=ut(lt(a),e);const p=lt(re(i,Qy(0,i.size)));o=ut(p,lt(i));const g=MN(a.shape,i.size),y=Pe(Qy(0,a.size),g),x=re(a,y);l=ut(lt(x),lt(a));const v=yt(o,l),w=yt(o,l),k=re(c,u);s=re(re(k,v),w);const S=ta(s,r);r=Ms(S,s,r),n=Ms(S,wi([d]),n)}return n}const e4e=le({threshold_:JMe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t4e(t,e,n="nearest",r="constant",s=0,i){const a=Z(t,"image","transform","float32"),o=Z(e,"transforms","transform","float32");W(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),W(o.rank===2&&(o.shape[0]===a.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),W(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:a,transforms:o},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return ie.runKernel(Oj,l,c)}const n4e=le({transform_:t4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r4e(t,e,n){const r=Z(t,"a","bandPart");W(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,a]=r.shape.slice(-2);let o,l;typeof e=="number"?(W(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),W(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),o=Z(e<0?i:e,"numLower","bandPart")):(W(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=Ms(z1(e,0),i,Yy(e,i))),typeof n=="number"?(W(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),W(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=Z(n<0?a:n,"numUpper","bandPart")):(W(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Ms(z1(n,0),a,Yy(n,a)));const c=oe(Qy(0,i,1,"int32"),[-1,1]),u=Qy(0,a,1,"int32"),d=yt(c,u),p=ac(Pm(d,o),Zh(d,er(l))),g=Pr([i,a],r.dtype);return oe(oc(Dh(oe(r,[-1,i,a])).map(y=>Ms(p,y,g))),s)}const s4e=le({bandPart_:r4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(t){let e;if(Array.isArray(t)){e=!1,W(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)W(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=qi(t,t.shape[0],0).map(s=>Pv(s,[0]));W(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ie.tidy(()=>{let i=r[s];if(s>0)for(let a=0;a<s;++a){const o=re(lt(re(n[a],i)),n[a]);i=yt(i,o)}return ut(i,LN(i,"euclidean"))}));return e?oc(n,0):n}const a4e=le({gramSchmidt_:i4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o4e(t,e=!1){if(W(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return _5(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Dh(oe(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=_5(l,e);s.push(c),i.push(u)});const a=oe(oc(s,0),t.shape),o=oe(oc(i,0),t.shape);return[a,o]}}function _5(t,e=!1){return ie.tidy(()=>{W(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=PY(n),i=ch(t);const a=Np([[1]],[1,1]);let o=ch(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,d=o,p=s;[o,i,s]=ie.tidy(()=>{const g=vn(i,[c,c],[n-c,1]),y=LN(g),x=vn(i,[c,c],[1,1]),v=Ms(ta(x,0),Np([[-1]]),Np([[1]])),w=yt(x,re(v,y)),k=ut(g,w);k.shape[0]===1?o=ch(a):o=Js([a,vn(k,[1,0],[k.shape[0]-1,k.shape[1]])],0);const S=er(ut(en(v,w),y)),I=vn(i,[c,0],[n-c,r]),E=re(S,o),j=zt(o);if(c===0)i=yt(I,en(E,en(j,I)));else{const $=yt(I,en(E,en(j,I)));i=Js([vn(i,[0,0],[c,r]),$],0)}const A=zt(E),T=vn(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=yt(T,en(en(T,o),A));else{const $=yt(T,en(en(T,o),A));s=Js([vn(s,[0,0],[n,c]),$],1)}return[o,i,s]}),jt([u,d,p])}return!e&&n>r&&(s=vn(s,[0,0],[n,r]),i=vn(i,[0,0],[r,r])),[s,i]})}const l4e=le({qr_:o4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zl={flipLeftRight:CMe,grayscaleToRGB:EMe,resizeNearestNeighbor:eQ,resizeBilinear:ZY,rgbToGrayscale:_Me,rotateWithOffset:RMe,cropAndResize:SMe,nonMaxSuppression:PMe,nonMaxSuppressionAsync:BMe,nonMaxSuppressionWithScore:UMe,nonMaxSuppressionWithScoreAsync:GMe,nonMaxSuppressionPadded:qMe,nonMaxSuppressionPaddedAsync:XMe,threshold:e4e,transform:n4e},c4e={bandPart:s4e,gramSchmidt:a4e,qr:l4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=new Map,d4e=new Map;class Dm{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Sa{constructor(){this.classNameMap={}}static getMap(){return Sa.instance==null&&(Sa.instance=new Sa),Sa.instance}static register(e){Sa.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ae(t,e,n){W(t.className!=null,()=>"Class being registered does not have the static className property defined."),W(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),W(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Sa.register(t),u4e.set(s,t),d4e.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qu extends Dm{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const a=r.map(o=>({name:o.name,tensor:i[o.name]}));this.applyGradients(a)}else this.applyGradients(i);return jt(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return gDe(e,n)}dispose(){this.iterations_!=null&&jt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:tn(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Qu,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tQ extends Qu{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ie.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:he(()=>Ut(i).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:he(()=>Ut(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;he(()=>{const u=Pe(re(l,this.rho),re(An(o),1-this.rho)),d=re(ut(xs(Pe(c,this.epsilon)),xs(Pe(l,this.epsilon))),o),p=Pe(re(c,this.rho),re(An(d),1-this.rho));l.assign(u),c.assign(p);const g=Pe(re(d,-this.learningRate),i);i.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(jt(this.accumulatedGrads.map(e=>e.variable)),jt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nQ extends Qu{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ie.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:he(()=>MN(i.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const o=this.accumulatedGrads[s].variable;he(()=>{const l=Pe(o,An(a));o.assign(l);const c=Pe(re(ut(a,xs(Pe(l,ie.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&jt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rQ extends Qu{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],he(()=>{this.accBeta1=tn(n).variable(),this.accBeta2=tn(r).variable()}),s==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);he(()=>{const r=yt(1,this.accBeta1),s=yt(1,this.accBeta2);n.forEach((i,a)=>{const o=ie.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:he(()=>Ut(o).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:he(()=>Ut(o).variable(l))});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,p=Pe(re(u,this.beta1),re(c,1-this.beta1)),g=Pe(re(d,this.beta2),re(An(c),1-this.beta2)),y=ut(p,r),x=ut(g,s);u.assign(p),d.assign(g);const v=Pe(re(ut(y,Pe(xs(x),this.epsilon)),-this.learningRate),o);o.assign(v)}),this.accBeta1.assign(re(this.accBeta1,this.beta1)),this.accBeta2.assign(re(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&jt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&jt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),he(()=>{this.accBeta1.assign(Ph(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ph(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sQ extends Qu{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],he(()=>{this.iteration=tn(0).variable(),this.accBeta1=tn(n).variable()}),s==null&&(this.epsilon=ie.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);he(()=>{const r=yt(1,this.accBeta1),s=ut(-this.learningRate,Pe(re(this.iteration,this.decay),1));n.forEach((i,a)=>{const o=ie.registeredVariables[i],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Ut(o).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:Ut(o).variable(l)});const c=Array.isArray(e)?e[a].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,p=Pe(re(u,this.beta1),re(c,1-this.beta1)),g=re(d,this.beta2),y=Rs(c),x=Xu(g,y);u.assign(p),d.assign(x);const v=Pe(re(ut(s,r),ut(p,Pe(x,this.epsilon))),o);o.assign(v)}),this.iteration.assign(Pe(this.iteration,1)),this.accBeta1.assign(re(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&jt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&jt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gD extends Qu{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const a=ie.registeredVariables[r];he(()=>{const o=Pe(re(this.c,i),a);a.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=nl(tn(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iQ extends gD{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=tn(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ie.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:he(()=>Ut(i).variable(!1))});const a=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&he(()=>{let l;const c=Pe(re(this.m,a),o);this.useNesterov?l=Pe(re(this.c,Pe(o,re(c,this.m))),i):l=Pe(re(this.c,c),i),a.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&jt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aQ extends Qu{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=ie.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=ie.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:he(()=>Ut(i).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:he(()=>Ut(i).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:he(()=>Ut(i).variable(a))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;he(()=>{const u=Pe(re(l,this.decay),re(An(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,p=Pe(re(d,this.decay),re(o,1-this.decay)),g=ut(re(o,this.learningRate),xs(yt(u,Pe(An(p),this.epsilon)))),y=Pe(re(c,this.momentum),g);l.assign(u),d.assign(p),c.assign(y);const x=yt(i,y);i.assign(x)}else{const d=Pe(re(l,this.decay),re(An(o),1-this.decay)),p=Pe(re(c,this.momentum),ut(re(o,this.learningRate),xs(Pe(d,this.epsilon))));l.assign(d),c.assign(p);const g=yt(i,p);i.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&jt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&jt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&jt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e=[tQ,nQ,rQ,sQ,iQ,aQ,gD];function f4e(){for(const t of h4e)Ae(t)}function yD(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(Se(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let a=1;for(let d=0;d<s.length-1;++d)a*=s[d];const o=t.shape,l=s.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=o[d],l.push(o[d]);const u=[...ot(t.shape).map(d=>d/c),1].slice(0,i);return[l,a,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uA=-2,p4e=-1;function xD(t,e,n){const r=t.shape.length;W(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),W(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)W(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function m4e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function vD(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function oQ(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function lQ(t,e,n){return n<=t?n:n-(e-1)}function cQ(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function g4e(t,e,n,r,s,i,a,o,l){const c=t.length;let u=new Array(c),d=new Array(c),p=new Array(c);if(e.length&&n>0){const g=e[0],y=n+1;u=uQ(a,g,y,r,t),d=dQ(o,g,y,s,t),p=oQ(i,g,y,t)}else for(let g=0;g<c;g++)u[g]=fQ(a,r,i,t,g,l),d[g]=pQ(o,s,i,t,g,l),p[g]=hQ(i,g,l);return{begin:u,end:d,strides:p}}function uQ(t,e,n,r,s){const i=[...s],a=cQ(n,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=0;else{const l=lQ(e,n,o);let c=r[l];t&1<<l&&(c=0),i[o]=c}return i}function dQ(t,e,n,r,s){const i=[...s],a=cQ(n,e);for(let o=0;o<i.length;o++)if(a.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{const l=lQ(e,n,o);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[o]=c}for(let o=0;o<i.length;o++){const l=s[o];i[o]<0&&(i[o]+=l),i[o]=Ih(0,i[o],s[o])}return i}function hQ(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function fQ(t,e,n,r,s,i){let a=e[s];const o=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),a=Ih(0,a,l-1),a}function pQ(t,e,n,r,s,i){let a=e[s];const o=n[s]||1;(t&1<<s||i&1<<s||a==null)&&(o>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),o>0?a=Ih(0,a,l):a=Ih(-1,a,l-1),a}function bD(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function wD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function BN(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(a=>{W(a!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((a,o)=>a>=0?a:(W(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,i]}function kD(t,e,n,r,s,i,a,o,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:a,newAxisMask:o,shrinkAxisMask:l};for(let S=0;S<d.dims;S++)u&&(1<<S&o)!==0&&d.numAddAxisAfterEllipsis++,1<<S&a&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};y4e(d,p);let g=!0,y=!0,x=!0;const v=[],w=[];for(let S=0;S<t.length;++S){if(p.strides[S]===0)throw Error(`strides[${S}] must be non-zero`);const I=!!(p.shrinkAxisMask&1<<S),E=t[S];if(E===-1){v.push(I?1:-1);continue}const j=[p.beginMask&1<<S,p.endMask&1<<S],A=[p.strides[S]>0?0:-1,p.strides[S]>0?E:E-1];if(I&&p.strides[S]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[S]===1;const T=!!(p.beginMask&1<<S&&p.endMask&1<<S);if(p.beginValid&&p.endValid){if(I){const F=p.begin[S]<0?E+p.begin[S]:p.begin[S];if(p.begin[S]=F,p.end[S]=p.begin[S]+1,F<0||F>=E)throw Error(`slice index ${p.begin[S]} of dimension ${S} out of bounds.`)}else p.begin[S]=A5(p.begin[S],0,p.strides[S],E,j,A),p.end[S]=A5(p.end[S],1,p.strides[S],E,j,A);const R=p.strides[S]===1&&p.begin[S]===0&&p.end[S]===E;g=g&&R,y=y&&(S===0&&p.strides[S]===1||R)}else g=g&&p.strides[S]===1&&T,y=y&&(S===0&&p.strides[S]===1||T);let $,D=!1;if(p.beginValid&&p.endValid?($=p.end[S]-p.begin[S],D=!0):I?($=1,D=!0):T&&E>=0&&(p.strides[S]<0?$=-E:$=E,D=!0),D){let R;$===0||$<0!=p.strides[S]<0?R=0:R=Math.trunc($/p.strides[S])+($%p.strides[S]!==0?1:0),v.push(R)}else v.push(-1)}for(let S=0;S<p.finalShapeGatherIndices.length;++S){const I=p.finalShapeGatherIndices[S];I>=0?w.push(v[I]):I===uA&&w.push(1)}return{finalShapeSparse:w.filter((S,I)=>p.finalShapeGatherIndices[I]!==uA),finalShape:w,isIdentity:g,sliceDim0:y,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function y4e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(uA),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(p4e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function A5(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const a=t<0?r+t:t;return a<i[0]?i[0]:a>i[1]?i[1]:a}}const x4e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:xD,computeFlatOffset:wD,computeOutShape:vD,getNormalizedAxes:g4e,isSliceContinous:bD,maskToAxes:m4e,parseSliceParams:BN,sliceInfo:kD,startForAxis:fQ,startIndicesWithElidedDims:uQ,stopForAxis:pQ,stopIndicesWithElidedDims:dQ,stridesForAxis:hQ,stridesWithElidedDims:oQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v4e{static sgd(e){return new gD(e)}static momentum(e,n,r=!1){return new iQ(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new aQ(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new rQ(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new tQ(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new sQ(e,n,r,s,i)}static adagrad(e,n=.1){return new nQ(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vd=v4e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function mQ(){return new Promise(t=>b4e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SD(t,e){const n=t[0].length;t.forEach((s,i)=>{W(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),W(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let a=0;a<n;a++)W(a===e||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function rl(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(oo||(oo={}));function gQ(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],a=r[r.length-n.length+s],o=r[a];if(i>=0)if(o>=0){if(o!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${o}`)}else r[a]=i}return r}function yQ(t){const e={FIRST_DIM_SIZE:oo.FIRST_DIM_SIZE,VALUE_ROWIDS:oo.VALUE_ROWIDS,ROW_LENGTHS:oo.ROW_LENGTHS,ROW_SPLITS:oo.ROW_SPLITS,ROW_LIMITS:oo.ROW_LIMITS,ROW_STARTS:oo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function xQ(t){return t.length===0?0:t[0]===oo.FIRST_DIM_SIZE?t.length-1:t.length}function vQ(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],a=e[s+1];if(i>=0&&a>=0&&i!==1&&i!==a)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ND=30;function zN(t){return t<=ND?t:K_(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dv(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let a=0;a<i;++a)s=s.concat([t[a+1]/e[a],e[a]]);s=s.concat(t.slice(i+1))}return s}function Ov(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let a=1;a<t;++a)a>=e*2+1||a%2===1?i.push(a):s.push(a);r.push(...s),r.push(0),r.push(...i)}return r}function Mv(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function ID(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function ED(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UN=1.7580993408473768,WN=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TD=.3275911,_D=.254829592,AD=-.284496736,RD=1.421413741,$D=-1.453152027,PD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lc(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function bQ(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function wQ(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function kQ(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function jD(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function SQ(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function NQ(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function CQ(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YE="->",w4e=/->/g,R5=",",$5="...";function DD(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(w4e,"").length)/YE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${YE}").`);const[r,s]=t.split(YE);W(r.indexOf($5)===-1,()=>`The ellipsis notation ("${$5}") is not supported yet.`);const i=r.split(R5),a=i.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let p=0;p<s.length;++p){const g=s[p];if(!i.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);o.indexOf(g)===-1&&o.push(g)}for(let p=0;p<r.length;++p){const g=r[p];o.indexOf(g)===-1&&g!==R5&&o.push(g)}const l=new Array(i.length);for(let p=0;p<a;++p){if(new Set(i[p].split("")).size!==i[p].length)throw new Error(`Found duplicate axes in input component ${i[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<i[p].length;++g)l[p].push(o.indexOf(i[p][g]))}const c=o.length,u=s.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:o,summedDims:d,idDims:l}}function OD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function MD(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let a=0;a<e[s].length;++a)r[e[s][a]]===void 0?r[e[s][a]]=i[a]:W(r[e[s][a]]===i[a],()=>`Expected dimension ${r[e[s][a]]} at axis ${a} of input shaped ${JSON.stringify(i)}, but got dimension ${i[a]}`)}}function FD(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let a=0;a<s;++a)r.push([]);const i=[];for(let a=0;a<n.length;++a){const o=n[a],l=k4e(e,o);for(const c of l)i.indexOf(c)===-1&&(r[a].push(c),i.push(c))}return{path:n,steps:r}}function LD(t){return t.every((e,n)=>e===n)}function k4e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function VD(t,e,n=0){let r=[];if(typeof e=="number")W(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((a,o)=>(o===-1&&(a+=1),a),0);W(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const a=e.reduce((o,l)=>l>0?o+l:o);e[i]=t.shape[n]-a}W(t.shape[n]===e.reduce((a,o)=>a+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function EQ(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function TQ(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function AQ(t,e){return`size ${t} must be non-negative, not ${e}`}function RQ(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function $Q(t,e){const n=Se(t),r=Se(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function PQ(t,e){const n=Se(t),r=Se(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dA(){return"segment ids must be >= 0"}function jQ(){return"segment ids are not increasing"}function DQ(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function OQ(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MQ(t,e){let n=!1,r;for(t<=ND?(r=t,n=!0):r=K_(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=K_(t,r+1);return r}function FQ(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function BD(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const a=t.shape[n],o=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)o.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<s;d++)o.push(e.shape[d]);for(let d=n+1;d<i;d++)o.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:o}}const S4e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:BD,computeOutShape:FQ,segOpComputeOptimalWindowSize:MQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cc(t){try{return t.map(e=>Au(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function LQ(t){return t.map(e=>uu(e))}const N4e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:_D,ERF_A2:AD,ERF_A3:RD,ERF_A4:$D,ERF_A5:PD,ERF_P:TD,PARALLELIZE_THRESHOLD:ND,get RowPartitionType(){return oo},SELU_SCALE:WN,SELU_SCALEALPHA:UN,applyActivation:uD,assertAndGetBroadcastShape:Nt,assertAxesAreInnerMostDims:os,assertParamsConsistent:SD,assignToTypedArray:SQ,axesAreInnerMostDims:qj,calculateShapes:tf,checkEinsumDimSizes:MD,checkPadOnDimRoundingMode:ti,combineLocations:RY,combineRaggedTensorToTensorShapes:gQ,complexWithEvenIndex:wQ,complexWithOddIndex:kQ,computeConv2DInfo:as,computeConv3DInfo:qu,computeDefaultPad:Bj,computeDilation2DInfo:Av,computeOptimalWindowSize:zN,computeOutAndReduceShapes:Vr,computeOutShape:rl,computePool2DInfo:ja,computePool3DInfo:xc,convertConv2DDataFormat:vc,decodeEinsumEquation:DD,eitherStridesOrDilationsAreOne:vs,expandShapeToKeepDim:ur,exponent:CQ,exponents:NQ,fromStringArrayToUint8:LQ,fromUint8ToStringArray:cc,getAxesPermutation:Gn,getBroadcastDims:Kp,getComplexWithIndex:jD,getEinsumComputePath:FD,getEinsumPermutation:OD,getFusedBiasGradient:cD,getFusedDyActivation:lD,getImageCenter:CD,getInnerMostAxes:nr,getPermuted:Ov,getRaggedRank:xQ,getReductionAxes:Nr,getReshaped:Dv,getReshapedPermuted:Mv,getRowPartitionTypesHelper:yQ,getSliceBeginCoords:ID,getSliceSize:ED,getSparseFillEmptyRowsIndicesDenseShapeMismatch:IQ,getSparseFillEmptyRowsNegativeIndexErrorMessage:EQ,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:TQ,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:RQ,getSparseReshapeInputOutputMismatchErrorMessage:PQ,getSparseReshapeInputOutputMultipleErrorMessage:$Q,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:_Q,getSparseReshapeNegativeOutputDimErrorMessage:AQ,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:OQ,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:dA,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:jQ,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:DQ,getUndoAxesPermutation:Ku,isIdentityPermutation:LD,log:i$e,mergeRealAndImagArrays:lc,prepareAndValidate:yD,prepareSplitSize:VD,segment_util:S4e,shouldFuse:dD,slice_util:x4e,splitRealAndImagArrays:bQ,stridesOrDilationsArePositive:Rh,tupleValuesAreOne:Ah,upcastType:Si,validateDefaultValueShape:vQ,validateInput:tMe,validateUpdateShape:XY,warn:zi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */f4e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VQ={kernelName:$S,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,jv(Ue(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:Dx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=An(Ue(n,"float32")),s=xs(yt(tn(1),r));return er(ut(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e={kernelName:Ox,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=xs(yt(An(Ue(n,"float32")),1));return ut(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e={kernelName:Am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{let o=t;const l=Nr(n.shape,s);return l.length>0&&(o=lt(o,l)),oe(o,n.shape)},b:()=>{let o=t;const l=Nr(r.shape,s);return l.length>0&&(o=lt(o,l)),oe(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:JP,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:PS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:jS,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ut(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e={kernelName:Mx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,xs(yt(tn(1),An(Ue(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:Fx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=xs(Pe(tn(1),An(Ue(n,"float32"))));return ut(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:Bx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{const o=Pe(An(n),An(r));let l=re(t,ut(r,o));const c=Nr(n.shape,s);return c.length>0&&(l=lt(l,c)),oe(l,n.shape)},b:()=>{const o=Pe(An(n),An(r));let l=er(re(t,ut(n,o)));const c=Nr(r.shape,s);return c.length>0&&(l=lt(l,c)),oe(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:Lx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Pe(An(Ue(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,yt(tn(1),An(Ue(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O4e(t,e,n,r,s,i){const a=Z(t,"dy","avgPool3dGrad"),o=Z(e,"input","avgPool3dGrad");let l=a,c=o,u=!1;o.rank===4&&(u=!0,l=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),c=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),W(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),W(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),ti("avgPool3dGrad",s,i);const d={dy:l,input:c},p={filterSize:n,strides:r,pad:s,dimRoundingMode:i},g=ie.runKernel(nj,d,p);return u?oe(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const M4e=le({avgPool3dGrad_:O4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:OS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a,dimRoundingMode:o}=n;return{x:()=>M4e(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L4e(t,e,n,r,s){const i=Z(t,"dy","avgPoolGrad"),a=Z(e,"input","avgPoolGrad");W(a.rank===i.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${i.rank})`);let o=a,l=i,c=!1;a.rank===3&&(c=!0,o=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),W(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),W(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const u={dy:l,input:o},d={filterSize:n,strides:r,pad:s},p=ie.runKernel(tj,u,d);return c?oe(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const V4e=le({avgPoolGrad_:L4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e={kernelName:DS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:a}=n;return{x:()=>V4e(t,r,s,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e={kernelName:MS,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:a}=n;return!i&&!a?{a:()=>en(t,s,!1,!0),b:()=>en(r,t,!0,!1)}:!i&&a?{a:()=>en(t,s,!1,!1),b:()=>en(t,r,!0,!1)}:i&&!a?{a:()=>en(s,t,!1,!0),b:()=>en(r,t,!1,!1)}:{a:()=>en(s,t,!0,!0),b:()=>en(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:FS,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>tD(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:t$e,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,a=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])a[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<a.length;l++)a[l]>1&&o.push(l);return{x:()=>lt(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:zx,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e={kernelName:Ux,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Ms(ac(Zh(r,s),Pm(r,i)),t,Ut(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e={kernelName:LS,inputsToSave:["x"],gradFunc:VQ.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X4e={kernelName:VS,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=At(s,e[0].shape)[0],a=r.map(l=>l[i]);return qi(t,a,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e={kernelName:BS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:a,pad:o,dataFormat:l}=n;return W(Ah(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>Wj(r.shape,t,s,a,o,l),filter:()=>oD(r,t,s.shape,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q4e={kernelName:zS,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:a,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>$h(t,s,i,a,o,1,l),filter:()=>oD(t,r,s.shape,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(t,e,n,r,s){let i=t;t.rank===4&&(i=oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let a=e;a.rank===4&&(a=oe(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),W(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),W(a.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),W(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),W(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),W(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:i,dy:a},l={strides:r,pad:s,filterShape:n};return ie.runKernel(oj,o,l)}const Z4e=le({conv3DBackpropFilter_:J4e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3e={kernelName:US,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;W(Ah(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[a,o]=e;return{x:()=>EY(a.shape,t,o,s,i),filter:()=>Z4e(a,t,o.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t3e={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(er(GY(Ue(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n3e={kernelName:Hx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(HY(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3e={kernelName:WS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:a}=n;return{x:()=>{const o=Gn([s],r.rank);let l=_Y(t,s,i,!a);return o!=null&&(l=zt(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s3e={kernelName:GS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:a}=n,o=r??[1,1];W(Ah(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,c]=e;return W(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),W(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),W(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),W(vs(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),ti("depthwiseConv2d",i,a),{x:()=>bMe(l.shape,t,c,s,i,o,a),filter:()=>xMe(l,t,c.shape,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i3e={kernelName:HS,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},a={x:r,filter:s,dy:t};return{x:()=>ie.runKernel(X_,i,n),filter:()=>ie.runKernel(Y_,a,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a3e={kernelName:Kx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ie.runKernel(gj,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o3e={kernelName:Xx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=re(hl(er(An(n))),2/Math.sqrt(Math.PI));return{x:()=>re(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3e={kernelName:Yx,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c3e={kernelName:KS,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u3e={kernelName:Qx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,hl(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d3e={kernelName:Jx,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e={kernelName:Zx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{const o=ut(t,Ue(r,"float32")),l=Nr(n.shape,s);return l.length>0?oe(lt(o,l),n.shape):o},b:()=>{let o=re(t,Ue(n,"float32"));const l=Nr(r.shape,s);l.length>0&&(o=oe(lt(o,l),r.shape));const c=An(r);return er(ut(o,Ue(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e={kernelName:XS,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,a,o]=e,l=o??tn(1),c=Nr(i.shape,s.shape),u=[];if(i.rank===1){for(let I=0;I<s.shape.length-1;++I)u.push(s.shape[I]);u.push(1)}const d=yt(s,i),p=re(t,l),g=zY(Pe(a,tn(r))),y=re(re(re(g,g),g),tn(-.5));return{x:()=>i.rank===1?oe(re(re(t,ho(oe(g,[1,1,1,i.shape[0]]),u)),l),s.shape):oe(re(re(t,g),l),s.shape),mean:()=>{let I=re(re(g,tn(-1)),p);return i.rank===1&&(I=lt(I,c)),oe(I,i.shape)},variance:()=>{let I=re(re(y,d),p);return i.rank===1&&(I=lt(I,c)),oe(I,i.shape)},scale:()=>{const I=re(d,g);let E=re(t,I);return i.rank===1&&(E=lt(E,c)),oe(E,i.shape)},offset:()=>{let I=t;return i.rank===1&&(I=lt(I,c)),oe(I,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3e={kernelName:YS,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:a}=n,o=At(i,r.shape)[0],l=(c,u,d)=>()=>{const p=c.shape,g=u.size,y=p.slice(0,o),x=y.length,v=p.slice(i,p.length).slice(1),w=v.length,k=P5(0,x),S=P5(x+1,x+1+w),I=j5([y,[g],v]),E=oe(d,I),j=oe(u,[g]),A=j5([[x],k,S]),T=zt(E,A);let $=QY(T,j,c.shape[o]);const D=Ku(A);return $=zt($,D),$};if(a===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>oc(u.map((g,y)=>l(g,s.slice(y,1),t.slice(y,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function P5(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function j5(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m3e={kernelName:ev,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Ut(n),b:()=>Ut(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g3e={kernelName:tv,gradFunc:t=>({x:()=>Ue(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y3e={kernelName:nv,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x3e={kernelName:rv,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v3e={kernelName:sv,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b3e={kernelName:JS,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=ta(r,0);return{x:()=>Ms(i,t,re(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w3e={kernelName:av,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Pe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k3e={kernelName:iv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,Ue(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e={kernelName:r$e,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const a=hl(r);return yt(t,re(lt(t,s,!0),a))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(t,e,n,r=5,s=1,i=1,a=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:a};return ie.runKernel(kj,o,l)}const C3e=le({localResponseNormalizationBackprop_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e={kernelName:sN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:a,alpha:o,beta:l}=n;return{x:()=>C3e(r,s,t,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(t,e,n,r){return e.rank<n.rank&&(e=oe(e,ur(e.shape,r))),t.rank<n.rank&&(t=oe(t,ur(t.shape,r))),{x:()=>re(t,Ue(dl(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D5={kernelName:iN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],a=e[1],o=At(s,i.shape),l=BQ(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3e={kernelName:ov,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>re(t,Ue(Zh(n,r),"float32")),b:()=>re(t,Ue(z1(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t,e,n,r,s,i,a){const o=Z(t,"dy","maxPool3dGrad"),l=Z(e,"input","maxPool3dGrad"),c=Z(n,"output","maxPool3dGrad");let u=o,d=l,p=c,g=!1;l.rank===4&&(g=!0,u=oe(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=oe(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=oe(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),W(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),W(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),W(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),ti("maxPool3dGrad",i,a);const y={dy:u,input:d,output:p},x={filterSize:r,strides:s,pad:i,dimRoundingMode:a},v=ie.runKernel(Nj,y,x);return g?oe(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}const _3e=le({maxPool3dGrad_:T3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e={kernelName:oN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=n;return{x:()=>_3e(t,r,s,i,a,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(t,e,n,r,s,i,a){const o=Z(t,"dy","maxPoolGrad"),l=Z(e,"input","maxPoolGrad"),c=Z(n,"output","maxPoolGrad");W(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),W(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),W(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),ti("maxPoolGrad",i,a);const u={dy:o,input:l,output:c},d={filterSize:r,strides:s,pad:i,dimRoundingMode:a};return ie.runKernel(Sj,u,d)}const $3e=le({maxPoolGrad_:R3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P3e={kernelName:aN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>$3e(t,r,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j3e={kernelName:lN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=At(s,r.shape),o=Vr(r.shape,i)[1],l=Se(o);return{x:()=>{const u=r.shape.slice();i.forEach(g=>{u[g]=1});const d=oe(t,u);return ut(re(d,Yu(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3e={kernelName:cN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,a]=e,o=At(s,i.shape),l=BQ(t,a,i,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e={kernelName:lv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>re(t,Ue(Pm(n,r),"float32")),b:()=>re(t,Ue(ta(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M3e={kernelName:uN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>vn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3e={kernelName:cv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{const o=Nr(n.shape,s);return o.length>0?oe(lt(t,o),n.shape):t},b:()=>{const o=re(t,er(VN(ut(n,r)))),l=Nr(r.shape,s);return l.length>0?oe(lt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3e={kernelName:uv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{const o=re(t,Ue(r,"float32")),l=Nr(n.shape,s);return l.length>0?oe(lt(o,l),n.shape):o},b:()=>{const o=re(t,Ue(n,"float32")),l=Nr(r.shape,s);return l.length>0?oe(lt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V3e={kernelName:dN,gradFunc:t=>({x:()=>er(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B3e={kernelName:pN,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>Pr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z3e={kernelName:fN,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U3e={kernelName:mN,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Dh(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5={kernelName:gN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(a=>a[0]);return{x:()=>vn(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W3e={kernelName:dv,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,a=r,o=Nt(i.shape,a.shape);return{a:()=>{const u=Ue(a,"float32");let d=re(t,re(u,Ph(i,yt(u,tn(1)))));const p=Nr(i.shape,o);return p.length>0&&(d=lt(d,p)),oe(d,i.shape)},b:()=>{const u=ta(i,0),d=Ms(u,fl(i),Ut(i));let p=re(t,re(s,d));const g=Nr(a.shape,o);return g.length>0&&(p=lt(p,g)),oe(p,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G3e={kernelName:yN,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=ta(n,0);return{x:()=>Ms(s,t,re(t,r)),alpha:()=>{let i=Ms(s,Ut(t),re(t,n));const a=Nr(r.shape,t.shape);return a.length>0&&(i=lt(i,a)),oe(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(t,e,n){const r=t.shape.slice();r[n]=1;const s=oe(e,r),i=lA(t,n,!0,!1),a=lA(t,n,!0,!0),o=re(i,a);return re(s,o)}function q3e(t,e,n){const r=t.shape.length,s=r-n.length,i=Gn(n,r);let a=t;i!=null&&(a=zt(t,i));const o=a.shape.slice(),c=o.splice(r-n.length,n.length).reduce((p,g)=>p*g,1);o.push(c);const u=a.reshape(o);let d=H3e(u,e,s);if(d=d.reshape(a.shape),i!=null){const p=Ku(i);d=zt(d,p)}return d}const K3e={kernelName:xN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((a,o)=>o):typeof s=="number"?i=[s]:i=s,{x:()=>q3e(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X3e={kernelName:qx,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{const o=ut(t,Ue(r,"float32")),l=Nr(n.shape,s);return l.length>0?oe(lt(o,l),n.shape):o},b:()=>{let o=re(t,Ue(n,"float32"));const l=Nr(r.shape,s);l.length>0&&(o=oe(lt(o,l),r.shape));const c=An(r);return er(ut(o,Ue(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y3e={kernelName:hv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,er(An(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e={kernelName:pv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=re(Pm(n,6),jv(n));return{x:()=>re(t,Ue(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J3e={kernelName:fv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,Ue(jv(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e={kernelName:vN,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>oe(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eFe={kernelName:wN,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ie.runKernel(Rj,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tFe={kernelName:bN,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ie.runKernel(Aj,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nFe={kernelName:kN,gradFunc:(t,e,n)=>{const{dims:r}=n,s=At(r,t.shape);return{x:()=>jh(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rFe={kernelName:mv,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sFe={kernelName:gv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>er(ut(t,re(Ph(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iFe={kernelName:SN,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ue(Ut(n),"float32"),t:()=>re(t,Ue(n,t.dtype)),e:()=>re(t,Ue(Qj(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aFe={kernelName:yv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ta(n,tn(0)),s=tn(UN),i=tn(WN),a=re(t,i),o=re(re(t,s),hl(Ue(n,"float32")));return Ms(r,a,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe={kernelName:wv,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,re(n,yt(tn(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lFe={kernelName:bv,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cFe={kernelName:xv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(Gj(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uFe={kernelName:vv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(TY(Ue(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dFe={kernelName:NN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,a=r.shape,[o,l]=BN(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([o[u],a[u]-o[u]-l[u]]);return{x:()=>eD(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hFe={kernelName:TN,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,a=re(t,r);return{logits:()=>yt(a,re(lt(a,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fFe={kernelName:kv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,$m(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5={kernelName:IN,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>Uj(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5={kernelName:EN,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Js(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pFe={kernelName:Sv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,re(xs(Ue(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mFe={kernelName:$j,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(t,re(Ue(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gFe={kernelName:Nv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=tn(2);return{a:()=>re(t,re(s,yt(n,r))),b:()=>re(t,re(s,yt(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yFe={kernelName:_v,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xFe={kernelName:Cv,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=Nt(n.shape,r.shape);return{a:()=>{let o=t;const l=Nr(n.shape,s);return l.length>0&&(o=lt(o,l)),oe(o,n.shape)},b:()=>{let o=t;const l=Nr(r.shape,s);return l.length>0&&(o=lt(o,l)),oe(er(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vFe={kernelName:CN,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;At(i,r.shape).forEach(c=>{s[c]=1});const o=oe(t,s),l=re(o,Yu(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bFe={kernelName:Iv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ut(t,An(Gj(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wFe={kernelName:Ev,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>re(yt(tn(1),An(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kFe={kernelName:Tv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let a=Ut(r);if(r.rank===1)for(let o=0;o<s[0];++o)a=Pe(a,vn(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)a=Pe(a,vn(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)a=Pe(a,vn(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)a=Pe(a,vn(t,[o*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SFe={kernelName:kp,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Ku(s);return{x:()=>zt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NFe={kernelName:_N,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>oc(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CFe={kernelName:AN,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>IFe(t,n)}}};function IFe(t,e){const n=Xu(e,Ut(e)),r=Kj(t,n);let s=Zh(e,tn(0,"int32"));const i=r.rank-s.rank;for(let o=0;o<i;++o)s=qs(s,o+1);s=ac(s,Yu(r.shape,"bool"));const a=Ut(r);return Ms(s,r,a)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EFe={kernelName:RN,gradFunc:t=>({x:()=>Ut(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFe=[VQ,C4e,I4e,E4e,T4e,_4e,A4e,R4e,$4e,P4e,j4e,D4e,F4e,B4e,z4e,U4e,W4e,G4e,H4e,q4e,K4e,X4e,Q4e,Y4e,e3e,t3e,n3e,r3e,s3e,i3e,X3e,a3e,o3e,l3e,c3e,u3e,h3e,d3e,f3e,p3e,m3e,g3e,y3e,x3e,v3e,b3e,w3e,k3e,S3e,I3e,D5,D5,E3e,A3e,P3e,j3e,D3e,O3e,M3e,F3e,L3e,V3e,B3e,z3e,U3e,O5,O5,W3e,G3e,K3e,Y3e,Q3e,J3e,Z3e,eFe,tFe,nFe,rFe,sFe,iFe,aFe,oFe,lFe,cFe,uFe,dFe,hFe,fFe,M5,M5,F5,F5,pFe,gFe,mFe,yFe,xFe,vFe,bFe,wFe,kFe,SFe,NFe,CFe,EFe];for(const t of TFe)a$e(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.abs=function(){return this.throwIfDisposed(),Rs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.acos=function(){return this.throwIfDisposed(),lPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.acosh=function(){return this.throwIfDisposed(),uPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.add=function(t){return this.throwIfDisposed(),Pe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.all=function(t,e){return this.throwIfDisposed(),NY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.any=function(t,e){return this.throwIfDisposed(),aA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.argMax=function(t){return this.throwIfDisposed(),qy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.argMin=function(t){return this.throwIfDisposed(),mPe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asScalar=function(){return this.throwIfDisposed(),W(this.size===1,()=>"The array must have only 1 element."),oe(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asType=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as1D=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as2D=function(t,e){return this.throwIfDisposed(),oe(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),oe(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),oe(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),oe(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asin=function(){return this.throwIfDisposed(),yPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.asinh=function(){return this.throwIfDisposed(),vPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atan=function(){return this.throwIfDisposed(),wPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atan2=function(t){return this.throwIfDisposed(),SPe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.atanh=function(){return this.throwIfDisposed(),CPe(this)};we().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),zj(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Uj(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),ON(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.broadcastTo=function(t){return this.throwIfDisposed(),fy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cast=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.ceil=function(){return this.throwIfDisposed(),JPe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Ji(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof mr&&(t=[t]),Js([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),CY(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),IY(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),$h(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cos=function(){return this.throwIfDisposed(),Gj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cosh=function(){return this.throwIfDisposed(),TY(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),lA(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),_Y(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Sje(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Hj(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),Ije(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.divNoNan=function(t){return this.throwIfDisposed(),Rje(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.div=function(t){return this.throwIfDisposed(),ut(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.dot=function(t){return this.throwIfDisposed(),Pje(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.elu=function(){return this.throwIfDisposed(),FN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.equal=function(t){return this.throwIfDisposed(),dl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.erf=function(){return this.throwIfDisposed(),AY(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),Gje(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.exp=function(){return this.throwIfDisposed(),hl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.expandDims=function(t){return this.throwIfDisposed(),qs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.expm1=function(){return this.throwIfDisposed(),Xje(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.fft=function(){return this.throwIfDisposed(),KY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.flatten=function(){return this.throwIfDisposed(),oe(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.floor=function(){return this.throwIfDisposed(),VN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.floorDiv=function(t){return this.throwIfDisposed(),SY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.gather=function(t,e,n){return this.throwIfDisposed(),Kj(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Zh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.greater=function(t){return this.throwIfDisposed(),ta(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.ifft=function(){return this.throwIfDisposed(),cA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.irfft=function(){return this.throwIfDisposed(),zOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isFinite=function(){return this.throwIfDisposed(),sDe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isInf=function(){return this.throwIfDisposed(),aDe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.isNaN=function(){return this.throwIfDisposed(),lDe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Yj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.lessEqual=function(t){return this.throwIfDisposed(),Pm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.less=function(t){return this.throwIfDisposed(),z1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),fDe(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSigmoid=function(){return this.throwIfDisposed(),bDe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSoftmax=function(t){return this.throwIfDisposed(),DY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),OY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.log=function(){return this.throwIfDisposed(),fl(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.log1p=function(){return this.throwIfDisposed(),jY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ac(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalNot=function(){return this.throwIfDisposed(),Qj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalOr=function(t){return this.throwIfDisposed(),MY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.logicalXor=function(t){return this.throwIfDisposed(),TDe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),en(this,t,e,n)};we().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Jj(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.max=function(t,e){return this.throwIfDisposed(),yo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.maximum=function(t){return this.throwIfDisposed(),Xu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mean=function(t,e){return this.throwIfDisposed(),lr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.min=function(t,e){return this.throwIfDisposed(),B1(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.minimum=function(t){return this.throwIfDisposed(),Yy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),ODe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mod=function(t){return this.throwIfDisposed(),FDe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.mul=function(t){return this.throwIfDisposed(),re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.neg=function(){return this.throwIfDisposed(),er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.norm=function(t,e,n){return this.throwIfDisposed(),LN(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.notEqual=function(t){return this.throwIfDisposed(),U1(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),FY(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.onesLike=function(){return this.throwIfDisposed(),Aa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.pad=function(t,e){return this.throwIfDisposed(),eD(this,t,e)};we().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),KDe(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.pow=function(t){return this.throwIfDisposed(),Ph(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.prelu=function(t){return this.throwIfDisposed(),nD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.prod=function(t,e){return this.throwIfDisposed(),QDe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reciprocal=function(){return this.throwIfDisposed(),kOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.relu=function(){return this.throwIfDisposed(),ef(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.relu6=function(){return this.throwIfDisposed(),VY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reshapeAs=function(t){return this.throwIfDisposed(),oe(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reshape=function(t){return this.throwIfDisposed(),oe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),ZY(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),eQ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.reverse=function(t){return this.throwIfDisposed(),jh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.rfft=function(){return this.throwIfDisposed(),GOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.round=function(){return this.throwIfDisposed(),BY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.rsqrt=function(){return this.throwIfDisposed(),zY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.selu=function(){return this.throwIfDisposed(),UY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),WY(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sigmoid=function(){return this.throwIfDisposed(),$m(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sign=function(){return this.throwIfDisposed(),ROe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sin=function(){return this.throwIfDisposed(),GY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sinh=function(){return this.throwIfDisposed(),HY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.slice=function(t,e){return this.throwIfDisposed(),vn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.softmax=function(t){return this.throwIfDisposed(),aD(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.softplus=function(){return this.throwIfDisposed(),Rv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),tD(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.split=function(t,e){return this.throwIfDisposed(),qi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sqrt=function(){return this.throwIfDisposed(),xs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.square=function(){return this.throwIfDisposed(),An(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.squaredDifference=function(t){return this.throwIfDisposed(),qOe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.squeeze=function(t){return this.throwIfDisposed(),Pv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof mr?[this,t]:[this,...t];return oc(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.step=function(t){return this.throwIfDisposed(),jv(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.stridedSlice=function(t,e,n,r,s,i,a,o){return this.throwIfDisposed(),JOe(this,t,e,n,r,s,i,a,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sub=function(t){return this.throwIfDisposed(),yt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.sum=function(t,e){return this.throwIfDisposed(),lt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tan=function(){return this.throwIfDisposed(),eMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tanh=function(){return this.throwIfDisposed(),DN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.tile=function(t){return this.throwIfDisposed(),ho(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toBool=function(){return this.throwIfDisposed(),Ue(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toFloat=function(){return this.throwIfDisposed(),Ue(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.toInt=function(){return this.throwIfDisposed(),Ue(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.topk=function(t,e){return this.throwIfDisposed(),rMe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.transpose=function(t){return this.throwIfDisposed(),zt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unique=function(t){return this.throwIfDisposed(),aMe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),QY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.unstack=function(t){return this.throwIfDisposed(),Dh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.where=function(t,e){return this.throwIfDisposed(),Ms(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */we().prototype.zerosLike=function(){return this.throwIfDisposed(),Ut(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Wo.prototype)}}class Ca extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ca.prototype)}}class ne extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ne.prototype)}}class Tt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Tt.prototype)}}class zD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,zD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zQ{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oh(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Go(t,e){if(!t)throw new zD(e)}function L5(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ks(t){return t.length===1?t[0]:t}function an(t){return Array.isArray(t)?t:[t]}function Ol(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function zd(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let ya={};function UD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function hA(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>hA(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:hA(r))}}}function Fv(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let a;if(i in n)a=n[i];else if(i in ya)a=ya[i];else if(a=e[i],a==null)throw new ne(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return a}else{const i=t;if(i.className==null||i.config==null)throw new ne(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const a=i.className;let o,l;if(a in n?[o,l]=n[a]:a in ya?[o,l]=ya.className:a in e&&([o,l]=e[a]),o==null)throw new ne(`Unknown ${r}: ${a}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const g of Object.keys(ya))c[g]=ya[g];for(const g of Object.keys(n))c[g]=n[g];const u=i.config;u.customObjects=c;const d=Object.assign({},ya);for(const g of Object.keys(n))ya[g]=n[g];hA(i.config);const p=l(o,i.config,n,s);return ya=Object.assign({},d),p}else{const c=Object.assign({},ya);for(const d of Object.keys(n))ya[d]=n[d];const u=new o(i.config);return ya=Object.assign({},c),u}}}function _Fe(t,e){return t<e?-1:t>e?1:0}function Gb(t,e){return-1*_Fe(t,e)}function du(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function AFe(t){if(t==null)throw new ne(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function nf(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ne(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function WD(t,e,n=0,r=1/0){return Go(n>=0),Go(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function jr(t,e){Array.isArray(t)?(W(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>jr(n,`element ${r+1} of ${e}`))):W(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${UQ(t)}.`)}function UQ(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>UQ(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function RFe(t,e,n){let r=n!=null?n():Hs(),s;return(...a)=>{const o=n!=null?n():Hs();return o-r<e||(r=o,s=t(...a)),s}}function WQ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let $Fe=0;function GQ(){return $Fe++}const Hb={};function GN(t=""){return t in Hb||(Hb[t]=0),Hb[t]+=1,t+Hb[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PFe=["channelsFirst","channelsLast"],jFe=["nearest","bilinear"],DFe=["valid","same","causal"],OFe=["max","avg"],MFe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const tp=new Map;function rr(t){nf(PFe,"DataFormat",t)}function FFe(t){nf(jFe,"InterpolationFormat",t)}function na(t){nf(DFe,"PaddingMode",t)}function HQ(t){nf(OFe,"PoolMode",t)}const py=[],V5="/";function uh(t,e){py.push(t);try{const n=e();return py.pop(),n}catch(n){throw py.pop(),n}}function LFe(){return py.length===0?"":py.join(V5)+V5}function qQ(t){if(!XQ(t))throw new Error("Not a valid tensor name: '"+t+"'");return LFe()+t}function KQ(t){if(!XQ(t))throw new Error("Not a valid tensor name: '"+t+"'");tp.has(t)||tp.set(t,0);const e=tp.get(t);if(tp.set(t,tp.get(t)+1),e>0){const n=`${t}_${e}`;return tp.set(n,1),n}else return t}const VFe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function XQ(t){return!!t.match(VFe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BFe(t){return t===parseInt(t.toString(),10)}function hu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Yp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Ru(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ko(t,e){if(e<t)throw new ne(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let QE;function vr(){return QE==null&&(QE=$$e().epsilon()),QE}function So(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sl(t,e){return Ue(t,e)}function Lv(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),oe(t,n)}function zFe(t,e){return he(()=>{if(t.shape.length!==2)throw new ne(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Lv(t,1);return fA(n,[1,e,1])})}function UFe(t){const e=[hu(t.shape)];return oe(t,e)}function WFe(t){if(t.rank<=1)throw new ne(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],hu(t.shape,1)];return oe(t,e)}function dh(t,e,n){return he(()=>{switch(t.rank){case 1:return sD(t,e,n);case 2:return qY(t,[e,0],[n,t.shape[1]]);case 3:return iD(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return G1(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return vn(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return vn(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function JE(t,e,n){return he(()=>{switch(t.rank){case 1:return sD(t,e,n);case 2:return qY(t,[0,e],[t.shape[0],n]);case 3:return iD(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return G1(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function qb(t,e,n,r){return he(()=>{switch(t.rank){case 1:return sD(t,e,n);case 2:switch(r){case 1:return dh(t,e,n);case 2:return JE(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return dh(t,e,n);case 2:return iD(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return JE(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return dh(t,e,n);case 2:return G1(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return G1(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return JE(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function GD(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Js(t,e)}function B5(t,e){switch(t.rank){case 1:return tje([t,e]);case 2:return rje([t,e],0);case 3:return ije([t,e],0);case 4:return oje([t,e],0);default:throw new ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function fA(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ne(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return ho(t,e)}function HN(t,e=0,n=1,r,s){return xOe(t,e,n,r,s)}function il(t,e,n,r){if(t.rank<2||e.rank<2)throw new Tt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new Tt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return E5({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?pA(t.rank,r,So()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=oe(t,[-1,i]);const a=e.shape.slice(),o=a.pop(),l=a.pop(),c=[...a,o],u=Array.from({length:e.rank},(y,x)=>x===0?e.rank-2:x<=e.rank-2?x-1:x);e=oe(zt(e,u),[l,-1]);const d=[...s,...c];return oe(E5({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?pA(t.rank,r,So()):null,activation:n}),d)}}function YQ(t,e,n){return he(()=>(Array.isArray(e)?e=wi(e,"int32"):e=Ue(e,"int32"),Kj(t,e,n)))}function Vv(t){return re(t,t)}function pA(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ne(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1,1]):oe(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1,1]):oe(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,1,r[0]]):oe(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?oe(e,[1,r[0],1]):oe(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?oe(e,[1,1,r[0]]):oe(e,[1].concat(r))}else if(t<3)return e;throw new ne(`Unsupported input rank by biasAdd: ${e.rank}`)}function To(t,e,n){return he(()=>(n==null&&(n=So()),rr(n),Pe(t,pA(t.rank,e,n))))}function GFe(t,e=1){if(e!==1)throw new Tt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return FN(t)}function HFe(t){return he(()=>ut(t,Pe(Rs(t),1)))}function QQ(t,e,n,r){return he(()=>fMe(t,e,n,r))}function qFe(t){return he(()=>{const e=Pe(.5,re(.2,t));return Ji(e,0,1)})}function Bv(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const KFe=["fanIn","fanOut","fanAvg"],XFe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YFe(t){nf(KFe,"FanMode",t)}function QFe(t){nf(XFe,"Distribution",t)}class Da extends Dm{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class JQ extends Da{apply(e,n){return Pr(e,n)}}JQ.className="Zeros";Ae(JQ);class HD extends Da{apply(e,n){return Yu(e,n)}}HD.className="Ones";Ae(HD);class ZQ extends Da{constructor(e){if(super(),typeof e!="object")throw new ne(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ne(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return he(()=>re(tn(this.value),Yu(e,n)))}getConfig(){return{value:this.value}}}ZQ.className="Constant";Ae(ZQ);class eJ extends Da{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return $v(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}eJ.className="RandomUniform";Ae(eJ);class tJ extends Da{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Tt(`randomNormal does not support dType ${n}.`);return HN(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}tJ.className="RandomNormal";Ae(tJ);class nJ extends Da{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Tt(`truncatedNormal does not support dType ${n}.`);return YY(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}nJ.className="TruncatedNormal";Ae(nJ);class rJ extends Da{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return he(()=>{if(e.length!==2||e[0]!==e[1])throw new ne("Identity matrix initializer can only be used for 2D square matrices.");return re(this.gain,PY(e[0]))})}getConfig(){return{gain:this.gain}}}rJ.className="Identity";Ae(rJ);function JFe(t,e="channelsLast"){let n,r;if(rr(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=hu(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=hu(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=hu(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Ni extends Da{constructor(e){if(super(),e.scale<0)throw new ne(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,YFe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,QFe(this.distribution),this.seed=e.seed}apply(e,n){const r=JFe(e),s=r[0],i=r[1];let a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,s):this.mode==="fanOut"?a/=Math.max(1,i):a/=Math.max(1,(s+i)/2),this.distribution==="normal"){const o=Math.sqrt(a);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Tt(`${this.getClassName()} does not support dType ${n}.`);return YY(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*a);return $v(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ni.className="VarianceScaling";Ae(Ni);class qD extends Ni{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}qD.className="GlorotUniform";Ae(qD);class KD extends Ni{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}KD.className="GlorotNormal";Ae(KD);class XD extends Ni{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}XD.className="HeNormal";Ae(XD);class YD extends Ni{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}YD.className="HeUniform";Ae(YD);class QD extends Ni{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}QD.className="LeCunNormal";Ae(QD);class JD extends Ni{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ni.className}}JD.className="LeCunUniform";Ae(JD);class sJ extends Da{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return he(()=>{if(e.length<2)throw new Tt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=Se(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const a=[Math.max(s,r),Math.min(s,r)],o=HN(a,0,1,n,this.seed),l=c4e.qr(o,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=re(c,d.sign()),r<s&&(c=c.transpose()),re(tn(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}sJ.className="Orthogonal";Ae(sJ);const z5={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function U5(t,e={}){return Fv(t,Sa.getMap().classNameMap,e,"initializer")}function Un(t){return UD(t)}function jn(t){if(typeof t=="string"){const e=t in z5?z5[t]:t;if(e==="GlorotNormal")return new KD;if(e==="GlorotUniform")return new qD;if(e==="HeNormal")return new XD;if(e==="HeUniform")return new YD;if(e==="LeCunNormal")return new QD;if(e==="LeCunUniform")return new JD;{const n={};return n.className=e,n.config={},U5(n)}}else return t instanceof Da?t:U5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mA(t){return Array.isArray(t)&&Array.isArray(t[0])}function H1(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function xt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ne(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Xt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ne(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function q1(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const W5="Variable";class ZFe{constructor(e,n="float32",r=W5,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=GQ(),r=r??W5,this.originalName=qQ(r),this.name=KQ(this.originalName),this.trainable_=s,this.constraint=i,this.val=cMe(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),eLe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function eLe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function gA(t){return t.map(e=>e.read())}function ZD(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class br{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class pl{constructor(e,n,r,s,i,a,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=o,this.id=GQ(),a!=null&&(this.originalName=qQ(a),this.name=KQ(this.originalName)),this.rank=n.length}}let tLe=0,qN=class{constructor(e,n){this.callArgs=n,this.id=tLe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},nLe=0;class Rt extends Dm{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=nLe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Ol(r)+"_"+GN(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ca(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ne(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ks(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ks(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Wo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Wo(`Layer ${this.name} is not connected, no input to return.`);return Ks(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Wo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Wo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ks(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=an(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=an(this.inputSpec);if(n.length!==r.length)throw new ne(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],a=r[s];if(a==null)continue;const o=i.rank;if(a.ndim!=null&&o!==a.ndim)throw new ne(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${o}`);if(a.maxNDim!=null&&o>a.maxNDim)throw new ne(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${o}`);if(a.minNDim!=null&&o<a.minNDim)throw new ne(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${o}.`);if(a.dtype!=null&&i.dtype!==a.dtype)throw new ne(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){const l=i.shape;for(const c in a.axes){const u=Number(c),d=a.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new ne(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(a.shape!=null)for(let l=0;l<a.shape.length;++l){const c=a.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new ne(`Input ${s} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=an(e),s=iLe(e),i=aLe(e);if(s===i)throw new ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return uh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const a=[];for(const o of an(e))a.push(o.shape);this.build(Ks(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);const o=an(a),l=[];for(let c of o)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(a=Ks(l),this.activityRegularizer!=null)throw new Tt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}else{const a=rLe(e),o=this.computeOutputShape(a);let l;const c=sLe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((u,d)=>new pl(c,u,this,an(e),n,this.name,d)):l=new pl(c,o,this,an(e),n,this.name),this.addInboundNode(e,l,null,null,a,o,n),this._refCount++,this.activityRegularizer!=null)throw new Tt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Wo(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Wo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ca(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return q1(this.weights)}build(e){this.built=!0}getWeights(e=!1){return gA(e?this.trainableWeights:this.weights)}setWeights(e){he(()=>{const n=this.weights;if(n.length!==e.length)throw new ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=gA(n);for(let i=0;i<s.length;++i){const a=s[i],o=n[i],l=e[i];if(!rn(a.shape,l.shape))throw new ne(`Layer weight shape ${a.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}ZD(r)})}addWeight(e,n,r,s,i,a,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ne(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():jn("zeros"));const c=s.apply(n,r),u=new ZFe(c,r,e,a,o);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),a==null&&(a=!0),a?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=an(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=an(n),a=an(s);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let o=0;o<i.length;o++)i[o].kerasMask=a[o]}addInboundNode(e,n,r,s,i,a,o=null){const l=an(e);n=an(n),r=an(r),s=an(s),i=H1(i),a=H1(a);const c=[],u=[],d=[];for(const p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new qN({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:a},o);for(let p=0;p<n.length;p++)n[p].sourceLayer=this,n[p].nodeIndex=this.inboundNodes.length-1,n[p].tensorIndex=p}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function rLe(t){t=an(t);const e=[];for(const n of t)e.push(n.shape);return Ks(e)}function sLe(t){return"float32"}function iJ(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const a=r.inputTensors[i],o=r.inboundLayers[i],l=r.nodeIndices[i],c=iJ(a,o,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function iLe(t){let e=!0;for(const n of an(t))if(!(n instanceof pl)){e=!1;break}return e}function aLe(t){let e=!0;for(const n of an(t))if(n instanceof pl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zv extends Rt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:GN("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new pl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new qN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}zv.className="InputLayer";Ae(zv);function oLe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new zv({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function lLe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ue(e,t.dtype)}catch{throw new ne(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class eu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof eu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=lLe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ne(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof pl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof pl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&jt(this.id2Mask)}}const K1=new zQ,X1=new zQ;function cLe(t){K1?.setMaxEntries(t),X1?.setMaxEntries(t)}function ey(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),a=i?t:[t],o=a.map(y=>y.name),l=[],c=e.names();for(const y of o)c.indexOf(y)!==-1?l.push(e.getValue(y)):l.push(null);const u=o.join(",")+"|"+e.names().sort().join(",");let d=K1.get(u),p;if(d==null){const y=uLe(a,e);d=y.sorted,p=y.recipientCounts,K1.put(u,d),X1.put(u,p)}p={},s||Object.assign(p,X1.get(u));const g=new eu(e);for(let y=0;y<d.length;++y){const x=d[y],v=x.sourceLayer;if(v instanceof zv)continue;const w=[],k=[],S=[];let I=!1;for(const $ of x.inputs){const D=g.getValue($),R=g.getMask($);w.push(D),k.push(R),R!=null&&(I=!0),s||(p[$.name]--,p[$.name]===0&&!e.hasKey($)&&o.indexOf($.name)===-1&&!D.isDisposed&&$.sourceLayer.stateful!==!0&&S.push(D))}I&&(n=n||{},n.mask=k[0]);const E=an(v.apply(w,n));let j=null;v.supportsMasking&&(j=v.computeMask(w,k));const A=hLe(x),T=Array.isArray(A)?A:[A];for(let $=0;$<T.length;++$){g.hasKey(T[$])||g.add(T[$],E[$],Array.isArray(j)?j[0]:j);const D=o.indexOf(T[$].name);D!==-1&&(l[D]=E[$])}s||jt(S)}return g.disposeMasks(),i?l:l[0]}function uLe(t,e){W(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=G5(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:a,recipientMap:o}=G5(i,e);for(const l of a)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:dLe(r)}}function dLe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function G5(t,e){const n=new Set,r=[],s={};for(const o of e.names())n.add(o);const i=[],a=[];for(i.push(t);i.length>0;){const o=i[i.length-1];if(n.has(o.name)){i.pop();continue}const l=a[a.length-1]===i.length-1;if(o.inputs.length===0||l)i.pop(),r.push(o),n.add(o.name),l&&a.pop();else{a.push(i.length-1);for(const c of o.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(o.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function hLe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fLe=ge();fLe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,cLe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eO(t,e){return he(()=>xs(lt(re(t,t),e,!0)))}class Uv extends Dm{getConfig(){return{}}}class aJ extends Uv{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>{const n=eO(e,this.axis),r=Ji(n,0,this.maxValue);return re(e,ut(r,Pe(vr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}aJ.className="MaxNorm";Ae(aJ);class oJ extends Uv{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>ut(e,Pe(vr(),eO(e,this.axis))))}getConfig(){return{axis:this.axis}}}oJ.className="UnitNorm";Ae(oJ);class lJ extends Uv{apply(e){return ef(e)}}lJ.className="NonNeg";Ae(lJ);class cJ extends Uv{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return he(()=>{const n=eO(e,this.axis),r=Pe(re(this.rate,Ji(n,this.minValue,this.maxValue)),re(1-this.rate,n));return re(e,ut(r,Pe(vr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}cJ.className="MinMaxNorm";Ae(cJ);const H5={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kr(t){return UD(t)}function q5(t,e={}){return Fv(t,Sa.getMap().classNameMap,e,"constraint")}function Sr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in H5?H5[t]:t,config:{}};return q5(n)}else return t instanceof Uv?t:q5(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function $d(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const a=i;e.push(a.data()),n.push(s),r.push(a)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];jt(r)}}function uJ(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var K5;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(K5||(K5={}));const pLe=125;class Jy{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class mLe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class gLe extends Jy{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let a;s in this.totals?a=this.totals[s]:this.totals[s]=0;const o=he(()=>Pe(this.totals[s],re(i,r)));this.totals[s]=o,a?.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:he(()=>{const s=re(ut(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),nl(n[r])}))}}class yLe extends Jy{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const a=this.history[i];for(let o=0;o<a.length;++o)if(typeof a[o]!="number"){const l=a[o];e.push(l.data()),n.push(i),r.push(o)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class xLe extends Jy{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||mQ,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=pLe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");H_(this.yieldEvery)&&(this.maybeWait=RFe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await $d(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await $d(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await $d(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await $d(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await $d(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):H_(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await $d(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await $d(e),await this.trainEnd(e))}}function dJ(t,e){return t==null&&(t={}),t instanceof Jy?[t]:Array.isArray(t)&&t[0]instanceof Jy?t:an(t).map(r=>new xLe(r,e))}class wa{constructor(){}static registerCallbackConstructor(e,n){W(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),wa.checkForDuplicate(n),wa.constructors[e]==null&&(wa.constructors[e]=[]),wa.constructors[e].push(n)}static checkForDuplicate(e){for(const n in wa.constructors)wa.constructors[+n].forEach(s=>{if(s===e)throw new ne("Duplicate callback constructor.")})}static clear(){wa.constructors={}}static createCallbacks(e){const n=[];for(const r in wa.constructors){const s=+r;e>=s&&n.push(...wa.constructors[s])}return n.map(r=>new r)}}wa.constructors={};function hJ(t,e,n,r,s,i,a,o,l){const c=new yLe,u=[new gLe,...wa.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new mLe(u);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:a,verbose:e,doValidation:o,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ql(t,e={},n=!1){return Fv(t,Sa.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Y1(t,e){return he(()=>{t.dtype!=="float32"&&(t=Ue(t,"float32"));const n=lt(Vv(t),e,!0),r=MN(n.shape,vr()),s=xs(Xu(n,r));return ut(t,s)})}function KN(t,e){return he(()=>lr(Vv(yt(e,t)),-1))}function tO(t,e){return he(()=>lr(Rs(yt(e,t)),-1))}function nO(t,e){return he(()=>{const n=yt(t,e),r=Ji(Rs(t),vr(),Number.MAX_VALUE),s=Rs(ut(n,r));return re(100,lr(s,-1))})}function vLe(t,e){return he(()=>{const n=Ji(e,vr(),Number.MAX_VALUE),r=fl(Pe(1,n)),s=Ji(t,vr(),Number.MAX_VALUE),i=fl(Pe(1,s));return lr(Vv(yt(r,i)),-1)})}function bLe(t,e){return he(()=>{const n=Xu(0,yt(1,re(t,e)));return lr(Vv(n),-1)})}function wLe(t,e){return he(()=>{const n=Xu(0,yt(1,re(t,e)));return lr(n,-1)})}function kLe(t,e){return he(()=>{const n=lt(re(t,e),-1),r=yo(re(yt(1,t),e),-1);return Xu(0,Pe(1,yt(r,n)))})}function SLe(t,e){return he(()=>{const n=Math.log(2),r=yt(e,t),s=yt(Pe(r,Rv(re(-2,r))),n);return lr(s,-1)})}function Zy(t,e,n=!1){return he(()=>{if(n)e=aD(e);else{const r=lt(e,e.shape.length-1,!0);e=ut(e,r)}return e=Ji(e,vr(),1-vr()),er(lt(re(Ue(t,"float32"),fl(e)),e.shape.length-1))})}function Q1(t,e,n=!1){return he(()=>{const r=Ue(VN(UFe(t)),"int32");e=Ji(e,vr(),1-vr());const s=e.shape,i=oe(FY(r,s[s.length-1]),s);return Zy(i,e,n)})}function NLe(t,e){if(!rn(t.shape,e.shape))throw new ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return he(()=>{const n=ef(e),r=er(Rs(e));return Pe(yt(n,re(e,t)),jY(hl(r)))})}function XN(t,e){return he(()=>{let n;return n=Ji(e,vr(),1-vr()),n=fl(ut(n,yt(1,n))),lr(NLe(t,n),-1)})}function CLe(t,e){return he(()=>{const n=Ji(t,vr(),1),r=Ji(e,vr(),1);return lt(re(t,fl(ut(n,r))),-1)})}function ILe(t,e){return he(()=>{const n=fl(Pe(vr(),e));return lr(yt(e,re(t,n)),-1)})}function fJ(t,e){return he(()=>{const n=Y1(t,-1),r=Y1(e,-1),s=re(n,r);return er(lt(s,-1))})}const J1={meanSquaredError:KN,meanAbsoluteError:tO,meanAbsolutePercentageError:nO,meanSquaredLogarithmicError:vLe,squaredHinge:bLe,hinge:wLe,categoricalHinge:kLe,logcosh:SLe,categoricalCrossentropy:Zy,sparseCategoricalCrossentropy:Q1,binaryCrossentropy:XN,kullbackLeiblerDivergence:CLe,poisson:ILe,cosineProximity:fJ};function ZE(t){if(typeof t=="string"){if(t in J1)return J1[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ne(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pJ(t,e){return he(()=>{const n=re(.5,Aa(e)),r=sl(ta(e,n),t.dtype);return lr(dl(t,r),-1)})}function mJ(t,e){return he(()=>sl(dl(qy(t,-1),qy(e,-1)),"float32"))}function ELe(t,e){return he(()=>Ue(lt(ac(dl(t,1),dl(e,1))),"float32"))}function TLe(t,e){return he(()=>Ue(lt(ac(dl(t,0),dl(e,1))),"float32"))}function _Le(t,e){return he(()=>{const n=ELe(t,e),r=TLe(t,e),s=Pe(n,r);return Ue(Ms(ta(s,0),ut(n,s),0),"float32")})}function ALe(t,e){return XN(t,e)}function RLe(t,e){return t.rank===e.rank&&(t=Pv(t,[t.rank-1])),e=qy(e,-1),e.dtype!==t.dtype&&(e=Ue(e,t.dtype)),Ue(dl(t,e),"float32")}const $Le=KN,PLe=KN,jLe=tO,DLe=tO,OLe=nO,MLe=nO,gJ=Zy,FLe=fJ,yJ=Q1,Z1={binaryAccuracy:pJ,categoricalAccuracy:mJ,precision:_Le,categoricalCrossentropy:gJ,sparseCategoricalCrossentropy:yJ,mse:$Le,MSE:PLe,mae:jLe,MAE:DLe,mape:OLe,MAPE:MLe,cosine:FLe};function LLe(t){if(typeof t=="string"&&t in Z1)return Z1[t];if(typeof t!="string"&&t!=null)return t;throw new ne(`Unknown metric ${t}`)}function Kb(t){if(Go(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(J1))if(J1[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(Z1))if(Z1[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VLe(t){const e={Adagrad:()=>Vd.adagrad(.01),Adadelta:()=>Vd.adadelta(1,.95,vr()),Adam:()=>Vd.adam(.001,.9,.999,vr()),Adamax:()=>Vd.adamax(.002,.9,.999,vr(),0),RMSProp:()=>Vd.rmsprop(.001,.9,0,vr()),SGD:()=>Vd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ne(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const X5=1*1024*1024;function Y5(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!yA(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>X5&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${X5}.`)}}function yA(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!yA(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!yA(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BLe(t,e,n,r=console.log){const s=ULe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let a;if(!s){i.push("Receives inputs"),a=[];for(const u in t.nodesByDepth)a.push(...t.nodesByDepth[u])}r("_".repeat(e)),ek(i,n,r),r("=".repeat(e));const o=t.layers;for(let u=0;u<o.length;++u)s?WLe(o[u],n,r):GLe(o[u],n,a,r),r((u===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=zLe(t),c=q1(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function zLe(t){let e;return t.collectedTrainableWeights!=null?e=q1(t.collectedTrainableWeights):e=q1(t.trainableWeights),e}function ULe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const a of s.inboundNodes)if(r.indexOf(a)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function ek(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function WLe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,a=t.getClassName(),o=[`${i} (${a})`,s,r,t.countParams().toString()];ek(o,e,n)}function GLe(t,e,n,r){let s,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const a=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){const g=d.inboundLayers[p].name,y=d.nodeIndices[p],x=d.tensorIndices[p];a.push(`${g}[${y}][${x}]`)}const o=t.name,l=t.getClassName(),c=a.length===0?"":a[0],u=[`${o} (${l})`,i,s,t.countParams().toString(),c];ek(u,e,r);for(let d=1;d<a.length;++d)ek(["","","","",a[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xJ(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function xA(t,e){if(t===null)return null;if(typeof t=="string")return zd(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];xJ(e,s,i)?n.push(i):n.push(xA(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=zd(r);n[i]=xA(s,i)}}return n}}function vA(t,e){if(t==null)return null;if(typeof t=="string")return Ol(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];xJ(e,s,i)?n.push(i):n.push(vA(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=Ol(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=vA(s,r)}return n}}/** @license See the LICENSE file. */const vJ="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const HLe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class no extends Rt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const k=this.getClassName().toLowerCase();this.name=GN(k)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],du(this.inputs).length!==this.inputs.length)throw new ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(k=>k.name)}`);du(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(k=>k.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const k of this.outputs){const S=k.sourceLayer,I=k.nodeIndex,E=k.tensorIndex;this.outputLayers.push(S),this.outputLayersNodeIndices.push(I),this.outputLayersTensorIndices.push(E)}for(const k of this.inputs){const S=k.sourceLayer,I=k.nodeIndex,E=k.tensorIndex;Go(I===0,"input layer has >1 nodes"),Go(E===0,"input layer has >1 tensors"),this.inputLayers.push(S),this.inputLayersNodeIndices.push(I),this.inputLayersTensorIndices.push(E)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let k=0;k<this.inputLayers.length;k++){const S=this.inputLayers[k];if(!(S instanceof zv))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${k} (0-based) originates from layer type ${S.getClassName()}.`);this.inputNames.push(S.name),this.feedInputShapes.push(S.batchInputShape),this.feedInputNames.push(S.name)}for(const k of this.outputLayers)this.outputNames.push(k.name);this.internalInputShapes=this.inputs.map(k=>k.shape),this.internalOutputShapes=this.outputs.map(k=>k.shape);const n={},r={},s={},i={},a={},o=[],l=(k,S,I,E,j,A)=>{(E==null||j==null||A==null)&&(E=k.sourceLayer,j=k.nodeIndex,A=k.tensorIndex);const T=E.inboundNodes[j];if(I.indexOf(T)!==-1)throw new Ca(`The tensor ${k.name} at layer "${E.name}" is part of a cycle.`);if(S.indexOf(T)!==-1)return;this.containerNodes.add(no.nodeKey(E,j)),E.id in a||(a[E.id]=Object.keys(a).length),I.indexOf(T)===-1&&I.push(T);const $=T.inboundLayers.length;for(let D=0;D<$;D++){const R=T.inputTensors[D],F=T.inboundLayers[D],L=T.nodeIndices[D],K=T.tensorIndices[D];l(R,S,I,F,L,K)}for(S.push(T);I.indexOf(T)>=0;)I.splice(I.indexOf(T),1);o.push(T)},c=[],u=[];for(const k of this.outputs)l(k,c,u);const d=o.slice().reverse();for(const k of d){r[k.id]=k,k.id in n||(n[k.id]=0);let S=n[k.id];const I=s[k.outboundLayer.id]==null?0:s[k.outboundLayer.id];S=Math.max(S,I),s[k.outboundLayer.id]=S,i[k.outboundLayer.id]=k.outboundLayer,n[k.id]=S;for(let E=0;E<k.inboundLayers.length;E++){const j=k.inboundLayers[E],A=k.nodeIndices[E],T=j.inboundNodes[A],$=n[T.id]==null?0:n[T.id];n[T.id]=Math.max(S+1,$),r[T.id]=T}}const p={};for(const k in n){const S=n[k];S in p||(p[S]=[]),p[S].push(r[k])}const g={};for(const k in s){const S=s[k];S in g||(g[S]=[]),g[S].push(i[k])}let y=Object.keys(g).map(k=>parseInt(k,10)).sort(Gb);this.layers=[];for(const k of y){const S=g[k];S.sort((I,E)=>{const j=a[I.id],A=a[E.id];return j<A?-1:j>A?1:0});for(const I of S)I instanceof no&&this.internalContainerRefs.push(I),this.layers.push(I)}this.layersByDepth=g,y=Object.keys(p).map(k=>parseInt(k,10)).sort(Gb);const x=this.inputs.slice(),v=[];for(const k of y)for(const S of p[k]){const I=S.outboundLayer;if(I!=null){for(const E of S.inputTensors)if(x.indexOf(E)===-1)throw new Ca(`Graph disconnected: cannot obtain value for tensor ${E} at layer "${I.name}". The following previous layers were accessed without issue: ${v}`);for(const E of S.outputTensors)x.push(E);v.push(I.name)}}this.nodesByDepth=p;const w=this.layers.map(k=>k.name);for(const k of w){const S=w.filter(I=>I===k).length;if(S!==1)throw new Ca(`The name "${k}" is used ${S} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new qN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(k=>null),outputMasks:this.outputs.map(k=>null),inputShapes:this.inputs.map(k=>k.shape),outputShapes:this.outputs.map(k=>k.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=HLe(e);i&&this.parseWeights(e);for(const o of this.layers)for(const[l,c]of o.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ne(`Duplicate weight name: ${u}`);r[u]=c,s++}const a=[];for(const o in e){let l=o;if(r[o]==null){const c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)a.push([r[l],e[o]]);else if(n)throw new ne(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new ne(`${o.length} of ${s} weights are not set: ${o}`)}ZD(a)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(a=>a.startsWith("_")?a.slice(1):a).filter(a=>!s.includes(a)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${vJ}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=vA(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return he(()=>{e=an(e);const r=new eu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return ey(this.outputs,r,n)})}computeMask(e,n){return he(()=>{e=an(e);let r;return n==null?r=Oh(null,e.length):r=an(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=H1(e);if(n.length!==this.inputLayers.length)throw new ne(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],c=n[o],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Gb);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(x=>x.id).indexOf(u.id)!==-1)continue;const d=[];for(let x=0;x<c.inboundLayers.length;x++){const v=c.inboundLayers[x],w=c.nodeIndices[x],k=c.tensorIndices[x],S=`${v.name}_${w}_${k}`,I=r[S];d.push(I)}const p=u.computeOutputShape(Ks(d)),g=H1(p),y=u.inboundNodes.indexOf(c);for(let x=0;x<g.length;x++){const v=`${u.name}_${y}_${x}`;r[v]=g[x]}}}const i=[],a=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],c=this.outputLayersNodeIndices[o],u=this.outputLayersTensorIndices[o],d=`${l.name}_${c}_${u}`;a.push(d)}for(let o=0;o<a.length;o++){const l=a[o];Go(l in r),i.push(r[l])}return Ks(i)}runInternalGraph(e,n){n==null&&(n=Oh(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Gb);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,p=u.inputTensors,g=u.outputTensors,y=new Array;for(const x of p)x.id in r&&y.push(r[x.id]);if(y.length===p.length){let x={},v,w,k,S;if(u.callArgs!=null&&(x=u.callArgs),y.length===1){const[I,E]=y[0];x.mask==null&&(x.mask=E),k=an(d.call(I,x)),S=an(d.computeMask(I,E)),v=[I],w=[E]}else v=y.map(I=>I[0]),w=y.map(I=>I[1]),x.mask==null&&(x.mask=w),k=an(d.call(v,x)),S=an(d.computeMask(v,w));if(d.activityRegularizer)throw new Tt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let I=0;I<g.length;++I){const E=g[I],j=k[I],A=S[I];r[E.id]=[j,A]}}}}const i=[],a=[],o=[];for(const l of this.outputs){Go(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];o.push(c.shape),i.push(c),a.push(u)}return[i,a,o]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof no?1:0;for(let i=0;i<s.inboundNodes.length;i++){const a=no.nodeKey(s,i);this.containerNodes.has(a)&&(n[a]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ne("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ne(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ne(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return he(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=no.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const a of this.layers){const o=a.getClassName(),l=a.getConfig(),c=[];for(let d=0;d<a.inboundNodes.length;d++){const p=a.inboundNodes[d],g=no.nodeKey(a,d);let y={};if(this.containerNodes.has(g)){if(p.callArgs)try{JSON.stringify(p.callArgs),y=p.callArgs}catch{console.warn(`Layer ${a.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),y={}}if(p.inboundLayers.length>0){const x=[];for(let v=0;v<p.inboundLayers.length;v++){const w=p.inboundLayers[v],k=p.nodeIndices[v],S=p.tensorIndices[v],I=no.nodeKey(w,k);let E=n[I];E==null&&(E=0),x.push([w.name,E,S,y])}c.push(x)}}}const u={};u.name=a.name,u.className=o,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let a=0;a<this.inputLayers.length;a++){const o=this.inputLayers[a],l=this.inputLayersNodeIndices[a],c=no.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[a];s.push([o.name,u,d])}e.inputLayers=s;const i=[];for(let a=0;a<this.outputLayers.length;a++){const o=this.outputLayers[a],l=this.outputLayersNodeIndices[a],c=no.nodeKey(o,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[a];i.push([o.name,u,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},a={};function o(v,w){v.name in a?a[v.name].push(w):a[v.name]=[w]}function l(v,w){const k=[];let S;for(const I of w){const E=I[0],j=I[1],A=I[2];if(S=I[3]==null?{}:I[3],!(E in i)){o(v,w);return}const T=i[E];if(T.inboundNodes.length<=j){o(v,w);return}const $=T.inboundNodes[j];k.push($.outputTensors[A])}k.length>0&&v.apply(Ks(k),S)}function c(v){const w=v.name,k=ql(v,n.customObjects!=null?n.customObjects:{});k.setFastWeightInitDuringBuild(s),i[w]=k,v.inboundNodes.forEach(I=>{if(!(I instanceof Array))throw new ne(`Corrupted configuration, expected array for nodeData: ${I}`);o(k,I)})}const u=n.name,d=n.layers;for(const v of d)c(v);for(;!AFe(a);)for(const v of d){const w=i[v.name];if(w.name in a){const k=a[w.name];delete a[w.name];for(const S of k)l(w,S)}}const p=[],g=[],y=n.inputLayers;for(const v of y){const w=v[0],k=v[1],S=v[2];Go(w in i);const E=i[w].inboundNodes[k].outputTensors;p.push(E[S])}const x=n.outputLayers;for(const v of x){const w=v[0],k=v[1],S=v[2];Go(w in i);const E=i[w].inboundNodes[k].outputTensors;g.push(E[S])}return new e({inputs:p,outputs:g,name:u})}get stateful(){if(this._stateful)throw new ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){he(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function qLe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function bJ(t,e){return qLe(t,e,"classWeight")}async function wJ(t,e,n,r){if(n!=null){const s=he(()=>{if(t.shape.length===1)return ch(t);if(t.shape.length===2){if(t.shape[1]>1)return qy(t,1);if(t.shape[1]===1)return oe(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());jt(s);const a=[];return i.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);a.push(n[o])}),wi(a,"float32")}else return null}function KLe(t,e){return re(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const XLe=32;function kJ(t,e){let n,r;const s=e;n=s.xs,r=s.ys,W(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=Q5("input",t.inputNames,n),a=Q5("output",t.outputNames,r),o=i[0].shape[0];W(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),W(a.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)W(i[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<a.length;l++)W(a[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:i,ys:a}}function Q5(t,e,n){if(n instanceof mr)return[n];if(Array.isArray(n))return W(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new ne(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function YLe(t){if(t.length===3)throw new Tt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function QLe(t,e,n){const r=n.batchesPerEpoch!=null;if(W(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),W(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),W(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),W(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),W(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,a;if(s)if(J5(n.validationData))W(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const v=YLe(n.validationData);i=v.xs,a=v.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(v=>"val_"+v)):c=l.slice();const u=dJ(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:p,history:g}=hJ(u,d,n.epochs,null,null,JLe(e,n),null,s,c);p.setModel(t),t.history=g,await p.onTrainBegin(),t.stopTraining_=!1;let y=n.initialEpoch==null?0:n.initialEpoch,x=await e.iterator();for(;y<n.epochs;){const v={};await p.onEpochBegin(y);let w=0,k=0;for(r||(x=await e.iterator());!r||w<n.batchesPerEpoch;){const S=await x.next();if(r&&S.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(S.value!=null){const{xs:I,ys:E}=kJ(t,S.value),j={};j.batch=k,j.size=I[0].shape[0],await p.onBatchBegin(k,j);const A=[];if(n.classWeight!=null){const D=bJ(n.classWeight,t.outputNames);for(let R=0;R<D.length;++R)A.push(await wJ(E[R],null,D[R]))}const T=I.concat(E).concat(A),$=o(T);jt(T);for(let D=0;D<l.length;++D){const R=l[D],F=$[D];j[R]=F,nl(F)}await p.onBatchEnd(k,j),uJ(j),k++,w++}if(r?w>=n.batchesPerEpoch:S.done){if(s){let I;J5(n.validationData)?I=an(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):I=an(t.evaluate(i,a,{batchSize:n.validationBatchSize==null?XLe:n.validationBatchSize,verbose:0}));for(let E=0;E<t.metricsNames.length;++E)v[`val_${t.metricsNames[E]}`]=I[E]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(y,v),y++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function JLe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function J5(t){return typeof t.iterator=="function"}function ZLe(t){return typeof t.next=="function"}async function eVe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new Tt("Verbose mode is not implemented yet.");W(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const a=ZLe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const c=await a.next();if(i=he(()=>{if(c.value){const{xs:u,ys:d}=kJ(t,c.value),p=u.concat(d),g=he(()=>s(p));if(jt(p),l===0)for(let x=0;x<g.length;++x)i.push(tn(0));const y=p[0].shape[0];for(let x=0;x<g.length;++x){const v=g[x],w=i[x];i[x]=he(()=>Pe(i[x],re(y,v))),l>0&&jt(w)}jt(g),o+=y,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=ut(i[c],o),jt(u)}return Ks(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eT(t){W(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function Ug(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>dh(r,e,n-e)):dh(t,e,n-e)}function bA(t,e){return he(()=>t==null?null:Array.isArray(t)?t.map(n=>bA(n,e)):YQ(t,e.dtype==="int32"?e:Ue(e,"int32")))}function tT(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function SJ(t){const e=[];t instanceof mr&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Lv(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function eo(t,e){if(t==null)return;const n=[];if(e instanceof mr)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof mr)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tVe(t){return t instanceof mr}function wA(t){return Array.isArray(t)}function Z5(t){return!tVe(t)&&!wA(t)}function e6(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let a=!1;if(wA(t)&&t.length>0)a=!0;else if(Z5(t)){for(const o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new ne(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(a=>null);let i;if(Z5(t)){t=t,i=[];for(const a of e){if(t[a]==null)throw new ne(`No data provided for "${a}". Need data for each key in: ${e}`);i.push(t[a])}}else if(wA(t)){if(t=t,t.length!==e.length)throw new ne(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new ne(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=SJ(i),n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new ne(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=n[a][l];if(u!=null&&u>=0&&c!==u)throw new ne(`${s} expected a batch of elements where each example has shape [${n[a].slice(1,n[a].length)}] (i.e.,tensor shape [*,${n[a].slice(1,n[a].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return i}function nVe(t,e,n){const r=du(t.map(i=>i.shape[0]));r.sort();const s=du(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!rn(r,s))throw new ne(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function rVe(t,e,n){const r=[KN,XN,Zy];for(let s=0;s<t.length;++s){const i=t[s],a=e[s],o=n[s];if(a!=null){if(a===Zy&&i.shape[i.shape.length-1]===1)throw new ne(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(a)!==-1){const l=i.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){const d=l[u],p=c[u];if(p!=null&&d!==p)throw new ne(`A target Tensor with shape ${i.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function t6(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new ne(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new ne(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let a=0;a<e.length;++a){if(n[a]==null)continue;const o=i[a];if(o.shape.length!==n[a].length)throw new ne(`Error when checking ${s}: expected ${e[a]} to have ${n[a].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[a].length;++l){if(l===0&&!r)continue;const c=o.shape[l],u=n[a][l];if(u!=null&&u!==c)throw new ne(`Error when checking ${s}: expected ${e[a]} to have shape ${JSON.stringify(n[a])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function sVe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const iVe="layers-model";class Cp extends no{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");BLe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=VLe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Qu))throw new ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new ne(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(const a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(ZE(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>ZE(o))}else{const a=ZE(e.loss);this.outputs.forEach(o=>{n.push(a)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){const o=this.internalOutputShapes[a],l=this.outputNames[a];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[a])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],uh("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([o,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});const s=sVe(e.metrics,this.outputNames),i=(a,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[a]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,a])};uh("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;const o=s[a];(c=>{let d,p,g;for(const y of c){if(typeof y=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(y)!==-1){const v=this.internalOutputShapes[a];v[v.length-1]===1||this.lossFunctions[a]===XN?["accuracy","acc"].indexOf(y)!==-1?p=pJ:["crossentropy","ce"].indexOf(y)!==-1&&(p=ALe):this.lossFunctions[a]===Q1?["accuracy","acc"].indexOf(y)!==-1?p=RLe:["crossentropy","ce"].indexOf(y)!==-1&&(p=yJ):["accuracy","acc"].indexOf(y)!==-1?p=mJ:["crossentropy","ce"].indexOf(y)!==-1&&(p=gJ);let w;["accuracy","acc"].indexOf(y)!==-1?w="acc":["crossentropy","ce"].indexOf(y)!==-1&&(w="ce"),g=p,d=""+w}else g=LLe(y),d=""+Kb(y);let x;uh(d,()=>{x=g}),i(a,d,x)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;eT(s);const a=this.standardizeUserDataXY(e,n,!0,s);try{const o=a[0].concat(a[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,o,s,r.verbose,r.steps);return Ks(c)}finally{eo(a[0],e),eo(a[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),eVe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new ne(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new ne(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ne("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),a=new eu;if(e instanceof mr&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ne(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)a.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ne(`No value is provided for the model's input ${l.name}`);a.add(l,c)}const o=ey(i,a);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Oh(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],a=i.map(o=>o.name);for(let o=0;o<e.length;++o){const l=a.indexOf(e[o]);if(l!==-1&&(n[o]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,a)=>{i==null&&s.push(e[a])}),new ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return he(()=>{const s=this.checkNumSamples(e);if(r)throw new Tt("Verbose predictLoop() is not implemented yet.");const i=tT(s,n),a=this.outputs.map(o=>[]);for(let o=0;o<i.length;++o)he(()=>{const c=i[o][0],u=i[o][1],d=Ug(e,c,u),p=[];if(Array.isArray(d))for(let y=0;y<d.length;++y)p.push({key:this.inputs[y],value:d[y]});else p.push({key:this.inputs[0],value:d});const g=new eu(p);return ey(this.outputs,g)}).forEach((c,u)=>a[u].push(c));return Ks(a.map(o=>Js(o,0)))})}predict(e,n={}){const r=SJ(e);t6(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return eT(s),this.predictLoop(r,s)}finally{eo(r,e)}}predictOnBatch(e){t6(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Ca("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let a=0;a<this.feedOutputShapes.length;++a){const o=this.feedOutputShapes[a];this.feedLossFns[a]===Q1?i.push(o.slice(0,o.length-1).concat([1])):i.push(o)}if(e=e6(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=e6(n,this.feedOutputNames,i,!1,"target"),nVe(e,n),rVe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,a){const[o,l]=this.standardizeUserDataXY(e,n,i,a);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=bJ(s,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await wJ(l[d],null,u[d]))}return[o,l,c]}testLoop(e,n,r,s=0,i){return he(()=>{const a=this.checkNumSamples(n,r,i,"steps"),o=[];if(s>0)throw new Tt("Verbose mode is not implemented yet.");if(i!=null)throw new Tt("steps mode in testLoop() is not implemented yet");{const l=tT(a,r),c=wi(ko(0,a));for(let u=0;u<l.length;++u){const d=l[u][0],p=l[u][1],g=dh(c,d,p-d),y=bA(n,g),x=e(y);if(u===0)for(let v=0;v<x.length;++v)o.push(tn(0));for(let v=0;v<x.length;++v){const w=x[v];o[v]=Pe(o[v],re(p-d,w))}}for(let u=0;u<o.length;++u)o[u]=ut(o[u],a)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(L5(e,s)>1){const a=L5(e.slice(0,r),s);i+=`_${a}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],o=()=>{const d=[];for(let x=0;x<this.inputs.length;++x)d.push({key:this.inputs[x],value:r[x]});const p=new eu(d),g=ey(this.outputs,p,{training:!0});let y;for(let x=0;x<this.lossFunctions.length;++x){const v=this.lossFunctions[x];let w=v(s[x],g[x]);i[x]!=null&&(w=KLe(w,i[x]));const k=lr(w);n.push(k),x===0?y=w:y=Pe(y,w)}for(let x=0;x<this.metricsTensors.length;++x){let v;if(this.outputs.length>1&&x<this.outputs.length)v=n[x];else{const w=this.metricsTensors[x][0],k=this.metricsTensors[x][1];v=lr(w(s[k],g[k]))}nl(v),a.push(v)}return y=lr(y),this.calculateLosses().forEach(x=>{y=Pe(y,x)}),y},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(a)}}makeTestFunction(){this.testFunction=e=>he(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let c=0;c<this.inputs.length;++c)a.push({key:this.inputs[c],value:s[c]});const o=new eu(a),l=ey(this.outputs,o);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=lr(u(i[c],l[c]));c===0?r=d:r=Pe(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],p=lr(u(i[d],l[d]));n.push(p)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,a,o,l,c,u,d,p;try{const g=r.batchSize==null?32:r.batchSize;eT(g);const x=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,g);s=x[0],i=x[1],p=x[2];let v=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(v=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new Tt("validationData including sample weights is not supported yet."):new ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const D=await this.standardizeUserData(l,c,null,null,!0,g);u=D[0],d=D[1],w=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){v=!0;const $=Math.floor(s[0].shape[0]*(1-r.validationSplit)),D=s[0].shape[0];u=Ug(s,$,D),a=s,s=Ug(s,0,$),d=Ug(i,$,D),o=i,i=Ug(i,0,$),w=u.concat(d)}else r.validationSteps!=null&&(v=!0);const k=s.concat(i).concat(p);this.checkTrainableWeightsConsistency();const S=this.makeTrainFunction(),I=this.getDedupedMetricsNames();let E,j;v?(this.makeTestFunction(),E=this.testFunction,j=I.slice().concat(I.map($=>"val_"+$))):(E=null,w=[],j=I.slice());const A=dJ(r.callbacks,r.yieldEvery);return await this.fitLoop(S,k,I,g,r.epochs,r.verbose,A,E,w,r.shuffle,j,r.initialEpoch,null,null)}finally{this.isTraining=!1,eo(s,e),eo(i,n),eo(a,e),eo(o,n),eo(u,l),eo(d,c),p!=null&&jt(p)}}async fitLoop(e,n,r,s,i,a,o,l,c,u,d,p,g,y){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),p==null&&(p=0);let x=!1;if(l!=null&&c!=null&&(x=!0),y!=null&&(x=!0,g==null))throw new ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const v=this.checkNumSamples(n,s,g,"steps_per_epoch");let w;v!=null&&(w=ko(0,v)),a==null&&(a=1);const{callbackList:k,history:S}=hJ(o,a,i,p,v,g,s,x,d);k.setModel(this),this.history=S,await k.onTrainBegin(),this.stopTraining_=!1;for(let I=p;I<i;++I){await k.onEpochBegin(I);const E={};if(g!=null)throw new Tt("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new Tt("batch shuffling is not implemneted yet");u&&zRe(w);const j=wi(w),A=tT(v,s);for(let T=0;T<A.length;++T){const $={};if(await k.onBatchBegin(T,$),he(()=>{const D=A[T][0],R=A[T][1],F=dh(j,D,R-D);$.batch=T,$.size=R-D;const L=bA(n,F),K=e(L);for(let X=0;X<r.length;++X){const q=r[X],Q=K[X];$[q]=Q,nl(Q)}if(T===A.length-1&&x){const X=this.testLoop(l,c,s);for(let q=0;q<r.length;++q){const Q=r[q],z=X[q];nl(z),E["val_"+Q]=z}}}),await k.onBatchEnd(T,$),uJ($),this.stopTraining_)break}j.dispose()}if(await k.onEpochEnd(I,E),this.stopTraining_)break}return await k.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return QLe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],o=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of o){const u=await c.data();l.push(u[0])}return jt(o),eo(r[0],e),eo(r[1],n),Ks(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let a=0;a<s.length;++a)r&&!s[a].trainable||n.push({name:s[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=f5().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-f5().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Ol(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Ol(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Ol(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Ol(Kb(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Ol(Kb(e)));{const e={};for(const n in this.metrics)e[n]=Ol(Kb(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=xA(e.optimizer_config),r=ql(n);let s;if(typeof e.loss=="string")s=zd(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(a=>zd(a));else if(e.loss!=null){s={};for(const a in e.loss)s[a]=zd(e.loss[a])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(a=>zd(a));else if(e.metrics!=null){i={};for(const a in e.metrics)i[a]=zd(e.metrics[a])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=M$e(e);if(c.length===0)throw new ne(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ne(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await m5(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:iVe,generatedBy:`TensorFlow.js tfjs-layers v${vJ}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await m5(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=O$e([r.data,u])}return this.userDefinedMetadata!=null&&(Y5(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){Y5(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Cp.className="Model";Ae(Cp);class NJ extends Cp{}NJ.className="Functional";Ae(NJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Qp extends Cp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:GN("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ne(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Qp||e instanceof Cp;let r;if(n){if(r=e,r.outputs.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=oLe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=iJ(this.outputs[0])}this.inboundNodes=[],new qN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Oh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Xt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Cp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ca("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,a={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ne("Legacy serialization format not supported yet.");i=n}else W(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,a=n;const o=new e(a);if(!(o instanceof Qp))throw new Tt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of i){const u=ql(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),o.add(u)}return o}set stopTraining(e){if(this.model==null)throw new ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Qp.className="Sequential";Ae(Qp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aVe(t){return new Qp(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let bs=class extends Dm{getConfig(){return{}}};class CJ extends bs{apply(e,n=1){return GFe(e,n)}}CJ.className="elu";Ae(CJ);class IJ extends bs{apply(e){return UY(e)}}IJ.className="selu";Ae(IJ);class EJ extends bs{apply(e){return ef(e)}}EJ.className="relu";Ae(EJ);class TJ extends bs{apply(e){return he(()=>Yy(6,ef(e)))}}TJ.className="relu6";Ae(TJ);class _J extends bs{apply(e){return e}}_J.className="linear";Ae(_J);class AJ extends bs{apply(e){return $m(e)}}AJ.className="sigmoid";Ae(AJ);class RJ extends bs{apply(e){return qFe(e)}}RJ.className="hardSigmoid";Ae(RJ);class $J extends bs{apply(e){return Rv(e)}}$J.className="softplus";Ae($J);class PJ extends bs{apply(e){return HFe(e)}}PJ.className="softsign";Ae(PJ);class jJ extends bs{apply(e){return DN(e)}}jJ.className="tanh";Ae(jJ);let rO=class extends bs{apply(e,n=-1){return aD(e,n)}};rO.className="softmax";Ae(rO);class DJ extends bs{apply(e,n=-1){return DY(e,n)}}DJ.className="logSoftmax";Ae(DJ);class OJ extends bs{apply(e){return he(()=>he(()=>{const n=Math.sqrt(2),r=re(.5,Pe(1,AY(ut(e,n))));return re(e,r)}))}}OJ.className="gelu";Ae(OJ);class MJ extends bs{apply(e){return he(()=>re(.5,re(e,Pe(1,DN(re(xs(ut(2,Math.PI)),Pe(e,re(.044715,Ph(e,3)))))))))}}MJ.className="gelu_new";Ae(MJ);class FJ extends bs{apply(e){return he(()=>re(e,DN(Rv(e))))}}FJ.className="mish";Ae(FJ);class LJ extends bs{apply(e,n=1){return he(()=>re($m(re(e,n)),e))}}LJ.className="swish";Ae(LJ);function $u(t){return t.getClassName()}function nT(t,e={}){return Fv(t,Sa.getMap().classNameMap,e,"activation")}function Pu(t){if(t==null){const e={};return e.className="linear",e.config={},nT(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},nT(e)}else return t instanceof bs?t:nT(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oVe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class VJ extends Dm{}class BJ extends VJ{constructor(e){super(),oVe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return he(()=>{let n=Pr([1]);return this.hasL1&&(n=Pe(n,lt(re(this.l1,Rs(e))))),this.hasL2&&(n=Pe(n,lt(re(this.l2,Vv(e))))),oe(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}BJ.className="L1L2";Ae(BJ);const n6={l1l2:"L1L2"};function gn(t){return UD(t)}function r6(t,e={}){return Fv(t,Sa.getMap().classNameMap,e,"regularizer")}function On(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in n6?n6[t]:t,config:{}};return r6(n)}else return t instanceof VJ?t:r6(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zJ extends Rt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=xt(e);let r=ef(e);return this.maxValue!=null&&(r=Ji(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}zJ.className="ReLU";Ae(zJ);class UJ extends Rt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=xt(e);return Yj(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}UJ.className="LeakyReLU";Ae(UJ);class WJ extends Rt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=jn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=On(e.alphaRegularizer),this.alphaConstraint=Sr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ne(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Xt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new br({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=xt(e),nD(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Un(this.alphaInitializer),alphaRegularizer:gn(this.alphaRegularizer),alphaConstraint:kr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}WJ.className="PReLU";Ae(WJ);let GJ=class extends Rt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Tt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=xt(e);return FN(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};GJ.className="ELU";Ae(GJ);class HJ extends Rt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=xt(e);return re(r,Ue(ta(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}HJ.className="ThresholdedReLU";Ae(HJ);class qJ extends Rt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new rO().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return he(()=>{let r=xt(e);const s=n.mask;if(s!=null){const i=re(yt(Yu(r.shape),Ue(s,r.dtype)),tn(-1e9));r=Pe(r,i)}return this.axis instanceof Array?this.axis.length>1?hl(yt(r,OY(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}qJ.className="Softmax";Ae(qJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ip(t,e,n){if(typeof t=="number")return Oh(t,e);if(t.length!==e)throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!BFe(s))throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function xo(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let a;return n==="same"?a=t:a=t-i+1,Math.floor((a+r-1)/r)}function Ho(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Ru([n-e,0]);else if(r==="same")t=t*e;else throw new ne(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sO(t,e){return he(()=>(rr(e),e==="channelsFirst"?zt(t,[0,2,3,1]):t))}function KJ(t,e){return he(()=>(rr(e),e==="channelsFirst"?zt(t,[0,2,3,4,1]):t))}function lVe(t,e,n,r=1,s="valid",i,a=1){return he(()=>{if(i==null&&(i=So()),rr(i),t.shape.length!==3)throw new ne(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ne(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ne(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=zt(t,[0,2,1])),s==="causal")throw new Tt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=CY(t,e,r,s==="same"?"same":"valid","NWC",a);return n!=null&&(o=To(o,n)),o})}function s6(t,e,n,r=[1,1],s="valid",i,a,o=null){return he(()=>{if(i==null&&(i=So()),rr(i),t.rank!==3&&t.rank!==4)throw new ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=sO(t,i);if(s==="causal")throw new Tt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=gMe({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:o}),i==="channelsFirst"&&(l=zt(l,[0,3,1,2])),l})}function cVe(t,e,n,r=[1,1,1],s="valid",i,a){return he(()=>{if(i==null&&(i=So()),rr(i),t.rank!==4&&t.rank!==5)throw new ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=KJ(t,i);if(s==="causal")throw new Tt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=fje(o,e,r,s==="same"?"same":"valid","NDHWC",a),n!=null&&(o=To(o,n)),i==="channelsFirst"&&(o=zt(o,[0,4,1,2,3])),o})}class YN extends Rt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",YN.verifyArgs(n),this.rank=e,jr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Tt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Ip(n.kernelSize,e,"kernelSize"),this.strides=Ip(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,na(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rr(this.dataFormat),this.activation=Pu(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=jn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Sr(n.biasConstraint),this.biasRegularizer=On(n.biasRegularizer),this.activityRegularizer=On(n.activityRegularizer),this.dilationRate=Ip(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Go("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!WD(e.kernelSize,"number",1,3))throw new ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:$u(this.activation),useBias:this.useBias,biasInitializer:Un(this.biasInitializer),biasRegularizer:gn(this.biasRegularizer),activityRegularizer:gn(this.activityRegularizer),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Om extends YN{constructor(e,n){super(e,n),this.kernel=null,Om.verifyArgs(n),this.filters=n.filters,jr(this.filters,"filters"),this.kernelInitializer=jn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Sr(n.kernelConstraint),this.kernelRegularizer=On(n.kernelRegularizer)}build(e){e=Xt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return he(()=>{e=xt(e);let r;const s=this.bias==null?null:this.bias.read(),i=WQ(this.activation.getClassName());if(i!=null&&this.rank===2)r=s6(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=lVe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=s6(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=cVe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Tt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Xt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const a=xo(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(a)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Un(this.kernelInitializer),kernelRegularizer:gn(this.kernelRegularizer),kernelConstraint:kr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Wv extends Om{constructor(e){super(2,e),Wv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!WD(e.kernelSize,"number",1,2))throw new ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Wv.className="Conv2D";Ae(Wv);class Gv extends Om{constructor(e){super(3,e),Gv.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Gv.className="Conv3D";Ae(Gv);class XJ extends Wv{constructor(e){if(super(e),this.inputSpec=[new br({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Xt(e),e.length!==4)throw new ne("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new br({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return he(()=>{let r=xt(e);if(r.shape.length!==4)throw new ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o;this.dataFormat==="channelsFirst"?(a=2,o=3):(a=1,o=2);const l=s[a],c=s[o],u=this.kernelSize[0],d=this.kernelSize[1],p=this.strides[0],g=this.strides[1],y=Ho(l,p,u,this.padding),x=Ho(c,g,d,this.padding),v=[i,y,x,this.filters];this.dataFormat!=="channelsLast"&&(r=zt(r,[0,2,3,1]));let w=IY(r,this.kernel.read(),v,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=zt(w,[0,3,1,2])),this.bias!=null&&(w=To(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Xt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const a=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=Ho(n[s],l,a,this.padding),n[i]=Ho(n[i],c,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}XJ.className="Conv2DTranspose";Ae(XJ);class YJ extends Gv{constructor(e){if(super(e),this.inputSpec=[new br({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Xt(e),e.length!==5)throw new ne("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new br({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return he(()=>{let r=xt(e);if(r.shape.length!==5)throw new ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let a,o,l;this.dataFormat==="channelsFirst"?(l=2,a=3,o=4):(l=1,a=2,o=3);const c=s[l],u=s[a],d=s[o],p=this.kernelSize[0],g=this.kernelSize[1],y=this.kernelSize[2],x=this.strides[0],v=this.strides[1],w=this.strides[2],k=Ho(c,x,p,this.padding),S=Ho(u,v,g,this.padding),I=Ho(d,w,y,this.padding),E=[i,k,S,I,this.filters];this.dataFormat!=="channelsLast"&&(r=zt(r,[0,2,3,4,1]));let j=gje(r,this.kernel.read(),E,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(j=zt(j,[0,4,1,2,3])),this.bias!==null&&(j=To(j,this.bias.read(),this.dataFormat)),this.activation!==null&&(j=this.activation.apply(j)),j})}computeOutputShape(e){e=Xt(e);const n=e.slice();let r,s,i,a;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,a=4):(r=4,s=1,i=2,a=3);const o=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],p=this.strides[2];return n[r]=this.filters,n[s]=Ho(n[s],u,o,this.padding),n[i]=Ho(n[i],d,l,this.padding),n[a]=Ho(n[a],p,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}YJ.className="Conv3DTranspose";Ae(YJ);class QJ extends Om{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=jn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=On(n.depthwiseRegularizer),this.depthwiseConstraint=Sr(n.depthwiseConstraint),this.pointwiseInitializer=jn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=On(n.pointwiseRegularizer),this.pointwiseConstraint=Sr(n.pointwiseConstraint)}build(e){if(e=Xt(e),e.length<this.rank+2)throw new ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);const a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new br({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return he(()=>{e=xt(e);let r;if(this.rank===1)throw new Tt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=zt(e,[0,2,3,1])),r=WY(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=To(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=zt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.pointwiseInitializer=Un(this.pointwiseInitializer),e.depthwiseRegularizer=gn(this.depthwiseRegularizer),e.pointwiseRegularizer=gn(this.pointwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseConstraint),e.pointwiseConstraint=kr(this.pointwiseConstraint),e}}QJ.className="SeparableConv";class JJ extends QJ{constructor(e){super(2,e)}}JJ.className="SeparableConv2D";Ae(JJ);class QN extends Om{constructor(e){super(1,e),QN.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!WD(e.kernelSize,"number",1,1))throw new ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}QN.className="Conv1D";Ae(QN);class ZJ extends Rt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return he(()=>{if(e=xt(e),this.dataFormat==="channelsLast"){const r=qb(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return qb(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=qb(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return qb(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}ZJ.className="Cropping2D";Ae(ZJ);class eZ extends Rt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,FFe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return he(()=>{let r=xt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=zt(r,[0,2,3,1]);const i=this.size[0]*s[2],a=this.size[1]*s[3],o=this.interpolation==="nearest"?zl.resizeNearestNeighbor(r,[i,a]):zl.resizeBilinear(r,[i,a]);return zt(o,[0,3,1,2])}else{const i=this.size[0]*s[1],a=this.size[1]*s[2];return this.interpolation==="nearest"?zl.resizeNearestNeighbor(r,[i,a]):zl.resizeBilinear(r,[i,a])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}eZ.className="UpSampling2D";Ae(eZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uVe(t,e,n=[1,1],r="valid",s,i){return he(()=>{s==null&&(s=So()),rr(s);let a=sO(t,s);if(t.rank!==4)throw new ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ne(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return a=Hj(a,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(a=zt(a,[0,3,1,2])),a})}class tZ extends YN{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=jn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Sr(e.depthwiseConstraint),this.depthwiseRegularizer=On(e.depthwiseRegularizer)}build(e){if(e=Xt(e),e.length<4)throw new ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return he(()=>{e=xt(e);let r=uVe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=To(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Xt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=xo(n,this.kernelSize[0],this.padding,this.strides[0]),a=xo(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,a]:[e[0],i,a,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.depthwiseRegularizer=gn(this.depthwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseRegularizer),e}}tZ.className="DepthwiseConv2D";Ae(tZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function nZ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ne("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function rZ(t,e,n,r=!1,s,i,a=!1,o=!1){return he(()=>{const l=e.shape.length;if(l<3)throw new ne(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(ko(2,l));e=zt(e,c),a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Ue(Ue(s,"bool"),"float32"),s.rank===l-1&&(s=qs(s,-1)),s=zt(s,c)),r&&(e=jh(e,0),s!=null&&(s=jh(s,0)));const u=[];let d,p=n;const g=e.shape[0],y=Dh(e);let x;s!=null&&(x=Dh(s));for(let w=0;w<g;++w){const k=y[w],S=he(()=>t(k,p));if(s==null)d=S[0],p=S[1];else{const I=he(()=>{const E=x[w],j=yt(Aa(E),E),A=Pe(re(S[0],E),re(p[0],j)),T=p.map(($,D)=>Pe(re(S[1][D],E),re($,j)));return{output:A,newStates:T}});d=I.output,p=I.newStates}o&&u.push(d)}let v;return o&&(v=oc(u,1)),[d,v,p]})}class Ju extends Rt{constructor(e){super(e);let n;if(e.cell==null)throw new ne("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new oO({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new br({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ko(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){mA(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const a of n)i.push([e[0],a]);return[s].concat(i)}else return s}computeMask(e,n){return he(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Tt("Constants support is not implemented in RNN yet.");mA(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new br({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!rn(this.stateSpec.map(a=>a.shape[a.shape.length-1]),i))throw new ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(a=>new br({shape:[null,a]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){he(()=>{if(!this.stateful)throw new Wo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_=[Pr([r,this.cell.stateSize])];else if(e==null)jt(this.states_),this.keptStates!=null&&(jt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>Pr([r,s])):this.states_[0]=Pr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):jt(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,a];if(!rn(i.shape,o))throw new ne(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>nl(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=nZ(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let a=[],o=[];if(r!=null){n.initialState=r,a=a.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new br({shape:c.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(n.constants=s,a=a.concat(s),this.numConstants=s.length),a[0]instanceof pl){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return he(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=xt(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==a)throw new ne(`RNN Layer has ${a} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},c=rZ((y,x)=>{const v=this.cell.call([y].concat(x),o);return[v[0],v.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],p=c[2];this.stateful&&this.resetStates(p,s);const g=this.returnSequences?d:u;return this.returnState?[g].concat(p):g})}getInitialState(e){return he(()=>{let n=Pr(e.shape);return n=lt(n,[1,2]),n=Lv(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?fA(n,[1,r]):n):this.cell.stateSize>1?[fA(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Ju.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=ql(s,r);return new e(Object.assign(n,{cell:i}))}}Ju.className="RNN";Ae(Ju);class JN extends Rt{}class iO extends JN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,jr(this.units,"units"),this.activation=Pu(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=jn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=jn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=jn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=On(e.kernelRegularizer),this.recurrentRegularizer=On(e.recurrentRegularizer),this.biasRegularizer=On(e.biasRegularizer),this.kernelConstraint=Sr(e.kernelConstraint),this.recurrentConstraint=Sr(e.recurrentConstraint),this.biasConstraint=Sr(e.biasConstraint),this.dropout=Yp([1,Ru([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Yp([1,Ru([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Xt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return he(()=>{if(e=e,e.length!==2)throw new ne(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ju({ones:()=>Aa(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ju({ones:()=>Aa(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const a=this.dropoutMask,o=this.recurrentDropoutMask;a!=null?i=il(re(e,a),this.kernel.read()):i=il(e,this.kernel.read()),this.bias!=null&&(i=To(i,this.bias.read())),o!=null&&(r=re(r,o));let l=Pe(i,il(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$u(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:gn(this.kernelRegularizer),recurrentRegularizer:gn(this.recurrentRegularizer),biasRegularizer:gn(this.biasRegularizer),activityRegularizer:gn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}iO.className="SimpleRNNCell";Ae(iO);class sZ extends Ju{constructor(e){e.cell=new iO(e),super(e)}call(e,n){return he(()=>{this.cell.dropoutMask!=null&&(jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}sZ.className="SimpleRNN";Ae(sZ);class aO extends JN{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ne("GRUCell does not support reset_after parameter set to true.");this.units=e.units,jr(this.units,"units"),this.activation=Pu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=jn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=jn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=jn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=On(e.kernelRegularizer),this.recurrentRegularizer=On(e.recurrentRegularizer),this.biasRegularizer=On(e.biasRegularizer),this.kernelConstraint=Sr(e.kernelConstraint),this.recurrentConstraint=Sr(e.recurrentConstraint),this.biasConstraint=Sr(e.biasConstraint),this.dropout=Yp([1,Ru([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Yp([1,Ru([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Xt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return he(()=>{if(e=e,e.length!==2)throw new ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ju({ones:()=>Aa(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ju({ones:()=>Aa(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let o,l,c;0<this.dropout&&this.dropout<1&&(e=re(e,i[0]));let u=il(e,this.kernel.read());this.useBias&&(u=To(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=re(s,a[0]));const d=this.recurrentKernel.read(),[p,g]=qi(d,[2*this.units,this.units],d.rank-1),y=il(s,p),[x,v,w]=qi(u,3,u.rank-1),[k,S]=qi(y,2,y.rank-1);o=this.recurrentActivation.apply(Pe(x,k)),l=this.recurrentActivation.apply(Pe(v,S));const I=il(re(l,s),g);c=this.activation.apply(Pe(w,I));const E=Pe(re(o,s),re(Pe(1,er(o)),c));return[E,E]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$u(this.activation),recurrentActivation:$u(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:gn(this.kernelRegularizer),recurrentRegularizer:gn(this.recurrentRegularizer),biasRegularizer:gn(this.biasRegularizer),activityRegularizer:gn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}aO.className="GRUCell";Ae(aO);class iZ extends Ju{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new aO(e),super(e)}call(e,n){return he(()=>{this.cell.dropoutMask!=null&&(jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}iZ.className="GRU";Ae(iZ);class ZN extends JN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,jr(this.units,"units"),this.activation=Pu(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pu(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=jn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=jn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=jn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=On(e.kernelRegularizer),this.recurrentRegularizer=On(e.recurrentRegularizer),this.biasRegularizer=On(e.biasRegularizer),this.kernelConstraint=Sr(e.kernelConstraint),this.recurrentConstraint=Sr(e.recurrentConstraint),this.biasConstraint=Sr(e.biasConstraint),this.dropout=Yp([1,Ru([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Yp([1,Ru([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Xt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,a=this.units;s=new(n=class extends Da{apply(l,c){const u=i.apply([a]),d=new HD().apply([a]),p=i.apply([a*2]);return B5(B5(u,d),p)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return he(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ju({ones:()=>Aa(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ju({ones:()=>Aa(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=re(e,a[0]));let p=il(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=re(s,o[0])),p=Pe(p,il(s,this.recurrentKernel.read())),this.useBias&&(p=To(p,this.bias.read()));const[g,y,x,v]=qi(p,4,p.rank-1);l=this.recurrentActivation.apply(g),c=this.recurrentActivation.apply(y),u=Pe(re(c,i),re(l,this.activation.apply(x))),d=this.recurrentActivation.apply(v);const w=re(d,this.activation.apply(u));return[w,w,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:$u(this.activation),recurrentActivation:$u(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:gn(this.kernelRegularizer),recurrentRegularizer:gn(this.recurrentRegularizer),biasRegularizer:gn(this.biasRegularizer),activityRegularizer:gn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}ZN.className="LSTMCell";Ae(ZN);class aZ extends Ju{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ZN(e),super(e)}call(e,n){return he(()=>{this.cell.dropoutMask!=null&&(jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}aZ.className="LSTM";Ae(aZ);class oO extends JN{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return he(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let a;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=l.call(a,n),i.push(a.slice(1))}r=[];for(const o of i.slice().reverse())r.push(...o);return[a[0]].concat(r)})}build(e){mA(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{uh(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(ql(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return gA(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let a=0;a<r.weights.length;++a)n.push([r.weights[a],i[a]])}ZD(n)}}oO.className="StackedRNNCells";Ae(oO);function ju(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,a=()=>i!=null?i(e(),n):QQ(e(),n),o=()=>Bv(a,e,r);return!s||s<=1?nl(o().clone()):Array(s).fill(void 0).map(o).map(c=>nl(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var dVe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class oZ extends Ju{constructor(e){if(e.unroll)throw new Tt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Tt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new br({ndim:5})]}call(e,n){return he(()=>{if(this.cell.dropoutMask!=null&&(jt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(jt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ne("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return he(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],a=Pr(i);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){he(()=>{if(!this.stateful)throw new Wo("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(i)):this.states_=[Pr(i)];else if(e==null)jt(this.states_),this.keptStates!=null&&(jt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Pr(i)):this.states_[0]=Pr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):jt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],c=i;if(!rn(l.shape,c))throw new ne(`State ${o} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>nl(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:a,dilationRate:o}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=xo(c,s[0],i,a[0],o[0]),p=xo(u,s[1],i,a[1],o[1]);return[...e.slice(0,2),...l?[r,d,p]:[d,p,r]]}}oZ.className="ConvRNN2D";class lO extends ZN{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:a,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,jr(this.filters,"filters"),this.kernelSize=Ip(r,2,"kernelSize"),this.kernelSize.forEach(l=>jr(l,"kernelSize")),this.strides=Ip(s||1,2,"strides"),this.strides.forEach(l=>jr(l,"strides")),this.padding=i||"valid",na(this.padding),this.dataFormat=a||"channelsLast",rr(this.dataFormat),this.dilationRate=Ip(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>jr(l,"dilationRate"))}build(e){var n;e=Xt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,a=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Da{apply(p,g){const y=c.apply([u]),x=Yu([u]),v=c.apply([u*2]);return GD([y,x,v])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return he(()=>{if(e.length!==3)throw new ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],a=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ju({ones:()=>Aa(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(ee,G,Y)=>!G||!G[Y]?ee:re(G[Y],ee);let u=c(s,l,0),d=c(s,l,1),p=c(s,l,2),g=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ju({ones:()=>Aa(i),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const y=this.recurrentDropoutMask;let x=c(i,y,0),v=c(i,y,1),w=c(i,y,2),k=c(i,y,3);const S=3,[I,E,j,A]=qi(this.kernel.read(),o,S),[T,$,D,R]=this.useBias?qi(this.bias.read(),o):[null,null,null,null];u=this.inputConv(u,I,T,this.padding),d=this.inputConv(d,E,$,this.padding),p=this.inputConv(p,j,D,this.padding),g=this.inputConv(g,A,R,this.padding);const[F,L,K,X]=qi(this.recurrentKernel.read(),o,S);x=this.recurrentConv(x,F),v=this.recurrentConv(v,L),w=this.recurrentConv(w,K),k=this.recurrentConv(k,X);const q=this.recurrentActivation.apply(Pe(u,x)),Q=this.recurrentActivation.apply(Pe(d,v)),z=Pe(re(Q,a),re(q,this.activation.apply(Pe(p,w)))),H=re(this.recurrentActivation.apply(Pe(g,k)),this.activation.apply(z));return[H,H,z]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=dVe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const i=$h(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?To(i,r,this.dataFormat):i}recurrentConv(e,n){return $h(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}lO.className="ConvLSTM2DCell";Ae(lO);class lZ extends oZ{constructor(e){const n=new lO(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}lZ.className="ConvLSTM2D";Ae(lZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cO extends Rt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return Bv(()=>QQ(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}cO.className="Dropout";Ae(cO);class cZ extends cO{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}cZ.className="SpatialDropout1D";Ae(cZ);class uO extends Rt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,jr(this.units,"units"),this.activation=Pu(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=jn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=jn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Sr(e.kernelConstraint),this.biasConstraint=Sr(e.biasConstraint),this.kernelRegularizer=On(e.kernelRegularizer),this.biasRegularizer=On(e.biasRegularizer),this.activityRegularizer=On(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Xt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Xt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e),s=WQ(this.activation.getClassName());let i;return s!=null?i=il(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=il(r,this.kernel.read()),this.bias!=null&&(i=To(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:$u(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:gn(this.kernelRegularizer),biasRegularizer:gn(this.biasRegularizer),activityRegularizer:gn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}uO.className="Dense";Ae(uO);class uZ extends Rt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Xt(e);for(const n of e.slice(1))if(n==null)throw new ne(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],hu(e,1)]}call(e,n){return he(()=>{this.invokeCallHook(e,n);let r=xt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=zt(r,s)}return WFe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}uZ.className="Flatten";Ae(uZ);class dZ extends Rt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Pu(e.activation)}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e);return this.activation.apply(r)})}getConfig(){const e={activation:$u(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}dZ.className="Activation";Ae(dZ);class hZ extends Rt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return he(()=>(e=xt(e),zFe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}hZ.className="RepeatVector";Ae(hZ);class fZ extends Rt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,a=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(a===null)a=l;else throw new ne("Can only specifiy one unknown dimension.");else i*=c}const o=hu(e);if(a!==null){if(i===0||o%i!==0)throw new ne(r);s[a]=o/i}else if(o!==i)throw new ne(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return oe(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}fZ.className="Reshape";Ae(fZ);class pZ extends Rt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ko(1,e.dims.length+1);if(!rn(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new br({ndim:this.dims.length+1})]}computeOutputShape(e){e=Xt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return zt(xt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}pZ.className="Permute";Ae(pZ);class mZ extends Rt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=xt(e);return aA(U1(r,this.maskValue),-1)}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e),a=aA(U1(r,this.maskValue),-1,!0);return re(r,Ue(a,r.dtype))})}}mZ.className="Masking";Ae(mZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gZ extends Rt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(an(e.inputLength))}this.inputDim=e.inputDim,jr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,jr(this.outputDim,"outputDim"),this.embeddingsInitializer=jn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=On(e.embeddingsRegularizer),this.activityRegularizer=On(e.activityRegularizer),this.embeddingsConstraint=Sr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return he(()=>this.maskZero?(e=xt(e),U1(e,Ut(e))):null)}computeOutputShape(e){if(e=Xt(e),this.inputLength==null)return[...e,this.outputDim];const n=an(this.inputLength);if(n.length!==e.length-1)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],a=e[s+1];if(i!=null&&a!=null&&i!==a)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=a),r++}}return[e[0],...n,this.outputDim]}call(e,n){return he(()=>{this.invokeCallHook(e,n);let r=xt(e);r.dtype!=="int32"&&(r=sl(r,"int32"));const s=YQ(this.embeddings.read(),oe(r,[r.size]));return oe(s,Xt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Un(this.embeddingsInitializer),embeddingsRegularizer:gn(this.embeddingsRegularizer),activityRegularizer:gn(this.activityRegularizer),embeddingsConstraint:kr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}gZ.className="Embedding";Ae(gZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rf extends Rt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Tt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],a=n[s];if(i==null||a==null||i<0||a<0)r.push(null);else if(i===1)r.push(a);else if(a===1)r.push(i);else{if(i!==a)throw new ne("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Xt(e)]),e=e,e.length<2)throw new ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=du(n),n.length>1)throw new ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,a)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&du(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return he(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=Ru(s);for(let a of e){const o=a.rank;for(let l=0;l<i-o;++l)a=Lv(a,1);r.push(a)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],p=u.slice(1).concat([d]);let g=oe(l,[d].concat(hu(u.slice(1))));g=zt(g,[1,0]),g=oe(g,p),r.push(g),i=!0}else if(c>1){const u=ko(1,c).concat([0]);r.push(zt(l,u)),i=!0}else r.push(l)}let a=this.mergeFunction(r);const o=a.rank;if(i){if(o==null){const l=a.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));a=oe(zt(oe(a,[-1,u]),[1,0]),d)}else if(o>1){const l=[o-1].concat(ko(0,o-1));a=zt(a,l)}}return a}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=du(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return he(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an Array");if(!Array.isArray(e))throw new ne("`inputs` should be an Array");if(n.length!==e.length)throw new ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:qs(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=ac(r,n[s]);return r})}}class yZ extends rf{constructor(e){super(e)}mergeFunction(e){return he(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Pe(n,e[r]);return n})}}yZ.className="Add";Ae(yZ);class xZ extends rf{constructor(e){super(e)}mergeFunction(e){return he(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=re(n,e[r]);return n})}}xZ.className="Multiply";Ae(xZ);class vZ extends rf{constructor(e){super(e)}mergeFunction(e){return he(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Pe(n,e[r]);return re(1/e.length,n)})}}vZ.className="Average";Ae(vZ);class bZ extends rf{constructor(e){super(e)}mergeFunction(e){return he(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Xu(n,e[r]);return n})}}bZ.className="Maximum";Ae(bZ);class wZ extends rf{constructor(e){super(e)}mergeFunction(e){return he(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Yy(n,e[r]);return n})}}wZ.className="Minimum";Ae(wZ);class kZ extends rf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ne("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let a=!1;for(const o of r)if(rn(o,i)){a=!0;break}a||r.push(i)}if(r.length>1)throw new ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return he(()=>GD(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ne("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ne("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ne(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return he(()=>{let r=!0;if(n.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;const s=[];for(let a=0;a<e.length;++a)n[a]==null?s.push(Ue(Aa(e[a]),"bool")):n[a].rank<e[a].rank?s.push(qs(n[a],-1)):s.push(n[a]);const i=Js(s,this.axis);return NY(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}kZ.className="Concatenate";Ae(kZ);function Wg(t,e){for(;t<0;)t+=e;return t}function hVe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Tt("batchDot is not implemented for tensors of 4D or higher rank yet");if(W(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),W(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Tt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return he(()=>{let a;if(r>s){a=r-s;const l=[];for(let c=0;c<a;++c)l.push(1);e=oe(e,e.shape.concat(l))}else if(s>r){a=s-r;const l=[];for(let c=0;c<a;++c)l.push(1);t=oe(t,t.shape.concat(l))}else a=0;let o;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?o=lt(re(t,e),i[0]):o=lt(re(zt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;o=en(t,e,l,c)}if(a>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+a;++u)c.push(u);o=Pv(o,c)}return o.shape.length===1&&(o=qs(o,1)),o})}class SZ extends rf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){W(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Tt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new ne(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,a)=>Wg(i,e[a].shape.length)):s=[Wg(this.axes,n.shape.length),Wg(this.axes,r.shape.length)],this.normalize&&(n=Y1(n,s[0]),r=Y1(r,s[1])),hVe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Wg(this.axes,e.length),Wg(this.axes,n.length)],r}computeOutputShape(e){W(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Tt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}SZ.className="Dot";Ae(SZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class NZ extends Rt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e);return Bv(()=>Pe(HN(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}NZ.className="GaussianNoise";Ae(NZ);class CZ extends Rt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return he(()=>{this.invokeCallHook(e,n);const r=xt(e);return this.rate>0&&this.rate<1?Bv(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return re(r,HN(r.shape,1,i))},()=>r,n.training||!1):r})}}CZ.className="GaussianDropout";Ae(CZ);class IZ extends Rt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||xt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return he(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Bv(()=>{const i=xt(e),o=-1.6732632423543772*1.0507009873554805;let l=Zh($v(r),this.rate);l=sl(l,"float32");const c=((1-this.rate)*(1+this.rate*o**2))**-.5,u=-c*o*this.rate,d=Pe(re(i,l),re(Pe(l,-1),o));return Pe(re(d,c),u)},()=>xt(e),n.training||!1)}return e})}}IZ.className="AlphaDropout";Ae(IZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ex(t,e,n,r,s,i=.001){let a;if(t.rank===2)a=UPe(t,e,n,r,s,i);else if(t.rank===3)a=GPe(t,e,n,r,s,i);else if(t.rank===4)a=qPe(t,e,n,r,s,i);else throw new Tt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return a}function fVe(t,e,n,r,s=.001){return he(()=>{const i=Zj(t,r),a=i.mean,o=i.variance;return[ex(t,a,o,n,e,s),a,o]})}function pVe(t,e,n,r,s=.001){return he(()=>{const i=Zj(t,r),a=i.mean,o=i.variance,l=[];for(const y of ko(0,t.rank))r.indexOf(y)!==-1?l.push(1):l.push(t.shape[y]);const c=oe(a,l),u=oe(o,l),d=e==null?null:oe(e,l),p=n==null?null:oe(n,l);return[ex(t,c,u,p,d,s),a,o]})}function mVe(t,e,n,r,s=.001){return rn(r.slice().sort(),ko(0,t.rank-1))?fVe(t,e,n,r,s):pVe(t,e,n,r,s)}class EZ extends Rt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=jn(e.betaInitializer||"zeros"),this.gammaInitializer=jn(e.gammaInitializer||"ones"),this.movingMeanInitializer=jn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=jn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Sr(e.betaConstraint),this.gammaConstraint=Sr(e.gammaConstraint),this.betaRegularizer=On(e.betaRegularizer),this.gammaRegularizer=On(e.gammaRegularizer)}build(e){e=Xt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ne(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new br({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return he(()=>{const r=n.training==null?!1:n.training,s=xt(e),i=s.shape,a=i.length,o=ko(0,a),l=this.axis>=0?this.axis:this.axis+a;o.splice(l,1);const c=Oh(1,a);c[l]=i[l];const u=o.slice();u.sort();const d=!rn(u,ko(0,a).slice(0,a-1)),p=()=>{if(d){const k=oe(this.movingMean.read(),c),S=oe(this.movingVariance.read(),c),I=this.center?oe(this.beta.read(),c):null,E=this.scale?oe(this.gamma.read(),c):null;return ex(s,k,S,I,E,this.epsilon)}else return ex(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return p();const[g,y,x]=mVe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),v=(k,S,I)=>{he(()=>{const E=1-I,j=k.read(),A=re(yt(j,S),E);k.write(yt(j,A))})};return(()=>{v(this.movingMean,y,this.momentum),v(this.movingVariance,x,this.momentum)})(),g})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),movingMeanInitializer:Un(this.movingMeanInitializer),movingVarianceInitializer:Un(this.movingVarianceInitializer),betaRegularizer:gn(this.betaRegularizer),gammaRegularizer:gn(this.gammaRegularizer),betaConstraint:kr(this.betaConstraint),gammaConstraint:kr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}EZ.className="BatchNormalization";Ae(EZ);class TZ extends Rt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=jn(e.betaInitializer||"zeros"),this.gammaInitializer=jn(e.gammaInitializer||"ones"),this.betaRegularizer=On(e.betaRegularizer),this.gammaRegularizer=On(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Xt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==du(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=xt(e),s=r.shape,i=s.length;return he(()=>{let{mean:o,variance:l}=Zj(r,this.axis,!0);const c=Oh(1,i);for(const x of this.axis)c[x]=s[x];const u=x=>x!=null&&x.shape.length!==i?oe(x,c):x;let d=this.scale?u(this.gamma.read()):null,p=this.center?u(this.beta.read()):null;const g=[],y=[];for(let x=0;x<i;++x)this.axis.indexOf(x)!==-1?(g.push(s[x]),y.push(1)):(g.push(1),y.push(s[x]));return o=ho(o,g),l=ho(l,g),d!=null&&(d=ho(d,y)),p!=null&&(p=ho(p,y)),ex(r,o,l,p,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),betaRegularizer:gn(this.betaRegularizer),gammaRegularizer:gn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}TZ.className="LayerNormalization";Ae(TZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gVe(t,e,n){return he(()=>{if(t.rank!==4)throw new ne(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=So()),n!=="channelsLast"&&n!=="channelsFirst")throw new ne(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],eD(t,r)})}class _Z extends Rt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?So():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new br({ndim:4})]}computeOutputShape(e){e=Xt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return he(()=>gVe(xt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}_Z.className="ZeroPadding2D";Ae(_Z);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function e2(t,e,n,r,s,i){return he(()=>{rr(s),HQ(i),na(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=So()),i==null&&(i="max"),t=sO(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=Jj(t,e,n,o):a=zj(t,e,n,o),s==="channelsFirst"&&(a=zt(a,[0,3,1,2])),a})}function AZ(t,e,n,r,s,i){return he(()=>{rr(s),HQ(i),na(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=So()),i==null&&(i="max"),t=KJ(t,s);let a;const o=r==="same"?"same":"valid";return i==="max"?a=RDe(t,e,n,o):a=PPe(t,e,n,o),s==="channelsFirst"&&(a=zt(a,[0,4,1,2,3])),a})}class RZ extends Rt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(jr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,na(this.padding),this.inputSpec=[new br({ndim:3})]}computeOutputShape(e){e=Xt(e);const n=xo(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return he(()=>{this.invokeCallHook(e,n),e=Lv(xt(e),2);const r=this.poolingFunction(xt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Pv(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class $Z extends RZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),e2(e,n,r,s,i,"max")}}$Z.className="MaxPooling1D";Ae($Z);class PZ extends RZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),e2(e,n,r,s,i,"avg")}}PZ.className="AveragePooling1D";Ae(PZ);class jZ extends Rt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];jr(this.poolSize,"poolSize"),jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),na(this.padding),this.inputSpec=[new br({ndim:4})]}computeOutputShape(e){e=Xt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=xo(n,this.poolSize[0],this.padding,this.strides[0]),r=xo(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return he(()=>(this.invokeCallHook(e,n),this.poolingFunction(xt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class DZ extends jZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),e2(e,n,r,s,i,"max")}}DZ.className="MaxPooling2D";Ae(DZ);class OZ extends jZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),e2(e,n,r,s,i,"avg")}}OZ.className="AveragePooling2D";Ae(OZ);class MZ extends Rt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];jr(this.poolSize,"poolSize"),jr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),na(this.padding),this.inputSpec=[new br({ndim:5})]}computeOutputShape(e){e=Xt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=xo(n,this.poolSize[0],this.padding,this.strides[0]),r=xo(r,this.poolSize[1],this.padding,this.strides[1]),s=xo(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return he(()=>(this.invokeCallHook(e,n),this.poolingFunction(xt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class FZ extends MZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),AZ(e,n,r,s,i,"max")}}FZ.className="MaxPooling3D";Ae(FZ);class LZ extends MZ{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return rr(i),na(s),AZ(e,n,r,s,i,"avg")}}LZ.className="AveragePooling3D";Ae(LZ);class VZ extends Rt{constructor(e){super(e),this.inputSpec=[new br({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Tt}}class BZ extends VZ{constructor(e){super(e||{})}call(e,n){return he(()=>{const r=xt(e);return lr(r,1)})}}BZ.className="GlobalAveragePooling1D";Ae(BZ);class zZ extends VZ{constructor(e){super(e||{})}call(e,n){return he(()=>{const r=xt(e);return yo(r,1)})}}zZ.className="GlobalMaxPooling1D";Ae(zZ);class UZ extends Rt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rr(this.dataFormat),this.inputSpec=[new br({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Tt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class WZ extends UZ{call(e,n){return he(()=>{const r=xt(e);return this.dataFormat==="channelsLast"?lr(r,[1,2]):lr(r,[2,3])})}}WZ.className="GlobalAveragePooling2D";Ae(WZ);class GZ extends UZ{call(e,n){return he(()=>{const r=xt(e);return this.dataFormat==="channelsLast"?yo(r,[1,2]):yo(r,[2,3])})}}GZ.className="GlobalMaxPooling2D";Ae(GZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class HZ extends Rt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=ql(s,r);delete n.layer;const a={layer:i};return Object.assign(a,n),new e(a)}}class qZ extends HZ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Xt(e),e.length<3)throw new ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Xt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return he(()=>(e=xt(e),rZ((a,o)=>[xt(this.layer.call(a,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}qZ.className="TimeDistributed";Ae(qZ);function yVe(t){nf(MFe,"BidirectionalMergeMode",t)}const xVe="concat";class KZ extends HZ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=ql(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=ql(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?xVe:e.mergeMode,yVe(this.mergeMode),e.weights)throw new Tt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Ks(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=nZ(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const a=[],o=[];if(r!=null){const c=r.length;if(c%2>0)throw new ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,a.push(...r);const u=r.map(d=>new br({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),o.push(...u)}if(s!=null)throw new Tt("Support for constants in Bidirectional layers is not implemented yet.");const l=a[0]instanceof pl;for(const c of a)if(c instanceof pl!==l)throw new ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(a),u=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=u;const p=super.apply(c,n);return this.inputSpec=d,p}else return super.apply(e,n)}call(e,n){return he(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let a;this.returnState&&(Array.isArray(s)&&(a=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=jh(i,1));let o;return this.mergeMode==="concat"?o=GD([s,i]):this.mergeMode==="sum"?o=Pe(s,i):this.mergeMode==="ave"?o=re(.5,Pe(s,i)):this.mergeMode==="mul"?o=re(s,i):this.mergeMode==null&&(o=[s,i]),this.returnState?this.mergeMode==null?o.concat(a):[o].concat(a):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){uh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),uh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=ql(n.layer);if(delete n.layer,n.numConstants!=null)throw new Tt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}KZ.className="Bidirectional";Ae(KZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XZ extends Rt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return he(()=>(e=xt(e),e.dtype!=="float32"&&(e=sl(e,"float32")),Pe(re(e,this.scale),this.offset)))}}XZ.className="Rescaling";Ae(XZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:vVe,cropAndResize:bVe}=zl;class YZ extends Rt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,a,o,l){return he(()=>{let c,u=!1;const d=n/a,p=r/o,g=(s+n)/a,y=(i+r)/o,x=[d,p,g,y],v=[];e.rank===3?(u=!0,c=oc([e])):c=e;for(let E=0;E<c.shape[0];E++)v.push(x);const w=pY(v,[v.length,4]),k=Qy(0,v.length,1,"int32"),I=bVe(c,w,k,[s,i],"nearest");return sl(u?xt(Dh(I)):I,l)})}upsize(e,n,r,s){return he(()=>{const i=vVe(e,[n,r]);return sl(i,s)})}call(e,n){return he(()=>{const r=xt(e),s=r.dtype,i=r.shape,a=i[i.length-3],o=i[i.length-2];let l=0;a!==this.height&&(l=Math.floor((a-this.height)/2));let c=0;return o!==this.width&&(c=Math.floor((o-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,a,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Xt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}YZ.className="CenterCrop";Ae(YZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function wVe(t,e,n,r){let s=xt(t);if(s.dtype!=="int32"&&(s=sl(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=qs(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=qs(s,-1)),s.rank>2)throw new ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const a=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=x5(o,r,n,a):l=x5(o,[],n,a),e!=="tfIdf")return l;if(r)return re(l,r);throw new ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class QZ extends Rt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Xt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return he(()=>{e=xt(e),e.dtype!=="int32"&&(e=sl(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=xt(n.countWeights)}const s=yo(e),i=B1(e),a=ta(this.numTokens,s).bufferSync().get(0),o=Zh(i,0).bufferSync().get(0);if(!(a&&o))throw new ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return wVe(e,this.outputMode,this.numTokens,r)})}}QZ.className="CategoryEncoding";Ae(QZ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kVe=["bilinear","nearest"],i6=new Set(kVe);class JZ extends Rt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(i6.has(e.interpolation))this.interpolation=e.interpolation;else throw new ne(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Xt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return he(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return zl.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return zl.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...i6]} are supported`)})}}JZ.className="Resizing";Ae(JZ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ZZ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}ZZ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eee extends Rt{constructor(e){super(e),this.randomGenerator=new ZZ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}eee.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const SVe=["bilinear","nearest"],a6=new Set(SVe);class tee extends eee{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(a6.has(r))this.interpolation=r;else throw new ne(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Xt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return he(()=>{const r=xt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=$v([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return zl.resizeBilinear(e,a);case"nearest":return zl.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...a6]} are supported`)}})}}tee.className="RandomWidth";Ae(tee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NVe(t){return new uO(t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CVe=ge();CVe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var o6;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(o6||(o6={}));var l6;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(l6||(l6={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var c6;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(c6||(c6={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Je(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&W(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe=JY;class t2 extends HP{nextDataId(){return t2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new kX(this,Bo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ge().get("IS_NODE")&&zi(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&jx(r[0])){const i=r.map(a=>uu(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return lc(s,i)}return KRe(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Au(s));return _t(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return _t(e.shape,e.dtype,n)}makeOutput(e,n,r){return Bo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Hs();return e(),{kernelMs:Hs()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Je([e],"where");const n=this.readSync(e.dataId);return IVe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}t2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const EVe=t=>{const{x:e}=t.inputs,n=t.backend;Je(e,"abs");let r=new Float32Array(Se(e.shape));const s=n.data.get(e.dataId).values;return r=nee(s),n.makeOutput(r,e.shape,e.dtype)},TVe={kernelName:$S,backendName:"cpu",kernelFunc:EVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sr(t){return(e,n,r,s,i)=>{const a=Nt(e,n),o=a.length,l=ot(a),c=Se(a),u=gs(i,c),d=e.length,p=n.length,g=ot(e),y=ot(n),x=Kp(e,a),v=Kp(n,a);if(x.length+v.length===0)for(let w=0;w<u.length;++w)u[w]=t(r[w%r.length],s[w%s.length]);else for(let w=0;w<u.length;++w){const k=_m(w,o,l),S=k.slice(-d);x.forEach(A=>S[A]=0);const I=tl(S,d,g),E=k.slice(-p);v.forEach(A=>E[A]=0);const j=tl(E,p,y);u[w]=t(r[I],s[j])}return[u,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xi(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",a)},o}const _Ve={kernelName:ij,backendName:"cpu",kernelFunc:xi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tk(t,e,n="float32"){if(n==="complex64"){const s=tk(t,e,"float32"),i=tk(t,e,"float32");return xi({inputs:{real:s,imag:i},backend:t})}const r=ys(Se(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ml(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const AVe={kernelName:tv,backendName:"cpu",kernelFunc:ml};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const RVe={kernelName:_j,backendName:"cpu",kernelFunc:Mh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ree(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Jh([0],n),[i,a]=sr((o,l)=>o!==l?1:0)(e,[],t,s,"bool");return[a,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Du(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return ml({inputs:{x:s},backend:n});const u=tk(n,s.shape,s.dtype),d=Du({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),p=xi({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),p}if(s.dtype==="complex64"){const u=Mh({inputs:{input:s},backend:n}),d=Du({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),d}if(!CX(s.dtype,i)){const u=ml({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const a=n.data.get(s.dataId).values,[o,l,c]=ree(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,c)}const $Ve={kernelName:zx,backendName:"cpu",kernelFunc:Du};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;Je([a,o],t);const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=a.dtype==="string"?cc(c):c,p=a.dtype==="string"?cc(u):u,g=r||a.dtype,[y,x]=e(a.shape,o.shape,d,p,g);return l.makeTensorInfo(x,g,y)}:({inputs:s,backend:i})=>{const{a,b:o}=s,l=i;if(a.dtype==="complex64"||o.dtype==="complex64"){const c=Du({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,g=l.data.get(d.dataId).values,y=l.data.get(p.dataId).values,x=Du({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(x.dataId),w=v.complexTensorInfos.real,k=v.complexTensorInfos.imag,S=l.data.get(w.dataId).values,I=l.data.get(k.dataId).values,[E,j,A]=n(a.shape,o.shape,g,y,S,I),T=l.makeTensorInfo(A,"float32",E),$=l.makeTensorInfo(A,"float32",j),D=xi({inputs:{real:T,imag:$},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(x),l.disposeIntermediateTensorInfo(T),l.disposeIntermediateTensorInfo($),D}else{const c=l.data.get(a.dataId).values,u=l.data.get(o.dataId).values,d=r||a.dtype,[p,g]=e(a.shape,o.shape,c,u,d);return l.makeTensorInfo(g,d,p)}}}function dO(t){return(e,n,r,s,i,a)=>{const o=Nt(e,n),l=Se(o),c=o.length,u=ot(o),d=gs("float32",l),p=gs("float32",l),g=Kp(e,o),y=Kp(n,o),x=lc(r,s),v=lc(i,a),w=e.length,k=ot(e),S=n.length,I=ot(n);if(g.length+y.length===0)for(let E=0;E<d.length;E++){const j=E%x.length,A=E%v.length,T=t(x[j*2],x[j*2+1],v[A*2],v[A*2+1]);d[E]=T.real,p[E]=T.imag}else for(let E=0;E<d.length;E++){const j=_m(E,c,u),A=j.slice(-w);g.forEach(F=>A[F]=0);const T=tl(A,w,k),$=j.slice(-S);y.forEach(F=>$[F]=0);const D=tl($,S,I),R=t(x[T*2],x[T*2+1],v[D*2],v[D*2+1]);d[E]=R.real,p[E]=R.imag}return[d,p,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const see=sr(((t,e)=>t+e)),PVe=dO(((t,e,n,r)=>({real:t+n,imag:e+r}))),Jp=Cr(Am,see,PVe),jVe={kernelName:Am,backendName:"cpu",kernelFunc:Jp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hO(t,e,n,r,s){const i=Se(r),a=ys(s,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?a[l]+=e[o]:a[l]+=1)}return a}function iee(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],a=_t([s,n],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<i;l++){const c=t.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,o,c):e.size>0?a.set(a.get(o,c)+e.get(o,l),o,c):a.set(a.get(o,c)+1,o,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aee=sr(((t,e)=>t&e)),DVe=Cr(sj,aee),OVe={kernelName:sj,backendName:"cpu",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vl(t){return(e,n,r)=>{const s=Zn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ln(t,e,n){const r=vl(e);return Zu(t,r,n)}function Zu(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:a}=r;Je(a,t);const o=i,l=o.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=cc(l)}else c=l;const u=n||a.dtype,d=e(c,u,s);return o.makeTensorInfo(a.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oee=vl(t=>Math.ceil(t)),MVe=Zu(Ux,oee),FVe={kernelName:Ux,backendName:"cpu",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(t,e,n,r){const s=Zn(n,Se(e));if(r&&n!=="string"){let i=0;t.forEach(a=>{const o=Se(a.shape);s.set(a.vals,i),i+=o})}else{let i=0;t.forEach(a=>{const o=n==="string"?cc(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const u=c*e[1]+i;for(let d=0;d<a.shape[1];++d)s[u+d]=o[l++]}i+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cee=sr((t,e)=>t===e?1:0),uee=Cr(qS,cee,null,"bool"),LVe={kernelName:qS,backendName:"cpu",kernelFunc:uee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dee=vl(t=>Math.exp(t)),hee=Zu(Yx,dee,"float32"),VVe={kernelName:Yx,backendName:"cpu",kernelFunc:hee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fee=vl(t=>Math.expm1(t)),BVe=Zu(Qx,fee),zVe={kernelName:Qx,backendName:"cpu",kernelFunc:BVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pee=vl(t=>Math.floor(t)),UVe=Zu(Jx,pee),WVe={kernelName:Jx,backendName:"cpu",kernelFunc:UVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mee=sr((t,e)=>Math.floor(t/e)),GVe=Cr(Zx,mee,null,"int32"),HVe={kernelName:Zx,backendName:"cpu",kernelFunc:GVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gee(t,e,n,r,s,i,a,o,l){const c=_t([r,i],n);for(let u=0;u<r;u++){const d=[];let p=0;for(let g=0;g<s;g++){const y=t[u*s+g];p+=y*a[g],d.push(y)}if(p<0||p>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let g=0;g<i;g++)c.values[u*i+g]=e.get(...e.indexToLoc(p*i+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(t,e,n){const r=_t(n,t.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),o=a[0],l=a[2],c=e.locToIndex([o,l]);a[2]=e.values[c];const u=t.locToIndex(a);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xee=sr((t,e)=>t>e?1:0),qVe=Cr(QS,xee,null,"bool"),KVe={kernelName:QS,backendName:"cpu",kernelFunc:qVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vee=sr((t,e)=>t>=e?1:0),XVe=Cr(ev,vee,null,"bool"),YVe={kernelName:ev,backendName:"cpu",kernelFunc:XVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bee=sr((t,e)=>t<e?1:0),QVe=Cr(ZS,bee,null,"bool"),JVe={kernelName:ZS,backendName:"cpu",kernelFunc:QVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wee=sr((t,e)=>t<=e?1:0),ZVe=Cr(eN,wee,null,"bool"),eBe={kernelName:eN,backendName:"cpu",kernelFunc:ZVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kee(t,e,n){const r=(e-t)/(n-1),s=ys(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const See=vl(t=>Math.log(t)),tBe=Zu(iv,See),nBe={kernelName:iv,backendName:"cpu",kernelFunc:tBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t,e,n,r){const s=gs(r,Se(n));for(let i=0;i<s.length;++i){const a=i*e;let o=t[a];for(let l=0;l<e;++l){const c=t[a+l];(Number.isNaN(c)||c>o)&&(o=c)}s[i]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cee=sr(((t,e)=>Math.max(t,e))),rBe=Cr(ov,Cee),sBe={kernelName:ov,backendName:"cpu",kernelFunc:rBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iee=sr(((t,e)=>Math.min(t,e))),iBe=Cr(lv,Iee),aBe={kernelName:lv,backendName:"cpu",kernelFunc:iBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fO=sr(((t,e)=>t*e)),oBe=dO(((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n}))),n2=Cr(uv,fO,oBe),lBe={kernelName:uv,backendName:"cpu",kernelFunc:n2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eee(t,e,n){const r=Hu(-1,n);return fO([],e,r,t,n)}function cBe(t){const{inputs:e,backend:n}=t,{x:r}=e;Je(r,"neg");const s=n.data.get(r.dataId).values,[i,a]=Eee(s,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,i)}const uBe={kernelName:dN,backendName:"cpu",kernelFunc:cBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tee=sr(((t,e)=>t!==e?1:0)),dBe=Cr(hN,Tee,null,"bool"),hBe={kernelName:hN,backendName:"cpu",kernelFunc:dBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(t,e,n,r,s){const i=e.length,a=Se(e),o=ot(e),l=ot(s),c=gs(n,Se(s));for(let u=0;u<a;++u){const d=_m(u,i,o),p=new Array(d.length);for(let y=0;y<p.length;y++)p[y]=d[r[y]];const g=tl(p,i,l);c[g]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ei(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Je(s,"transpose");const a=s.shape.length,o=new Array(a);for(let d=0;d<o.length;d++)o[d]=s.shape[i[d]];const l=r.data.get(s.dataId).values,c=pO(l,s.shape,s.dtype,i,o);return{dataId:r.write(c,o,s.dtype),shape:o,dtype:s.dtype}}const fBe={kernelName:kp,backendName:"cpu",kernelFunc:ei};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(t,e,n,r){const[s,i]=Vr(t,r),a=Si(e,"int32"),o=ys(Se(s),a),l=Se(i);for(let c=0;c<o.length;++c){const u=c*l;let d=1;for(let p=0;p<l;++p)d*=n[u+p];o[c]=d}return{outVals:o,outShape:s,outDtype:a}}function pBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Je(s,"prod");const o=s.shape.length,l=At(i,s.shape),c=Gn(l,o);let u=l,d=s;const p=[];c!=null&&(d=ei({inputs:{x:s},backend:n,attrs:{perm:c}}),p.push(d),u=nr(u.length,o));const g=n.data.get(d.dataId).values,{outVals:y,outShape:x,outDtype:v}=_ee(d.shape,d.dtype,g,u);let w=x;return a&&(w=ur(x,l)),p.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.makeTensorInfo(w,v,y)}const mBe={kernelName:xN,backendName:"cpu",kernelFunc:pBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gBe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=_m(s,e.length,ot(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function yBe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function xBe(t,e,n,r){const s=[];let i=0;const a=e.length-1+n.length,o=new Array(a).fill(null).map(()=>[0]);yBe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)o[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+e.length-1;if(y>=0){const x=o[y],v=x[x.length-1]-g[u];for(let w=u;w<d;++w)o[y].push(g[w+1]+v)}u=g[u],d=g[d]}d!==u&&(s.push([u,d]),i+=d-u)}return{outSplits:o,valueSlices:s,numValues:i}}function vBe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Zn("int32",r);e.push(s),t[n].forEach((i,a)=>s[a]=i)}return e}function u6(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function bBe(t,e,n,r,s,i){const a=u6(e,2)[1],o=u6(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)s[l*o+d]=t[u*a+d];++l}}function wBe(t,e,n,r,s){const i=e.slice();i[0]=s;const a=Zn(n,Se(i)),o=t.length,l=o===0?0:o/e[0];return bBe(t,e,r,l,a,i),[a,i]}function Aee(t,e,n,r,s,i,a,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(gBe(i,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:p}=xBe(i,a,t,c),g=vBe(u),y=wBe(n,r,s,d,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6=2147483647;function Ree(t,e,n,r,s,i,a){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,c=a.length===0,u=[];o||u.push(e[0]),l||u.push(s[0]),c||u.push(a[0]);for(let v=1;v<u.length;++v)if(u[v]!==u[v-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],p=Zn("int32",d+1);p[0]=0;for(let v=0;v<d;++v){const w=o?t[0]:t[v],k=l?r[0]:r[v],S=c?i[0]:i[v];if(S===0)throw new Error("Requires delta != 0");let I;if(S>0&&k<w||S<0&&k>w)I=0;else if(I=Math.ceil(Math.abs((k-w)/S)),I>d6)throw new Error(`Requires ((limit - start) / delta) <= ${d6}`);p[v+1]=p[v]+I}const g=p[d],y=Zn(n,g);let x=0;for(let v=0;v<d;++v){const w=p[v+1]-p[v];let k=o?t[0]:t[v];const S=c?i[0]:i[v];for(let I=0;I<w;++I)y[x++]=k,k+=S}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xa=oo;class nk{constructor(e,n,r,s,i,a,o,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=a,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=yQ(u),this.raggedRank=xQ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xa.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xa.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xa.VALUE_ROWIDS:return nk.getMaxWidthValueRowID(n);case xa.ROW_SPLITS:return nk.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${xa[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let a=1;a<n;++a){const o=e[a];o!==s&&(s=o,i=Math.max(a-r,i),r=a)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return f6(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;vQ(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=gQ(this.raggedRank,s,n);a[0]<0&&(a[0]=e);for(let o=1;o<=this.raggedRank;++o)a[o]<0&&(a[o]=this.getMaxWidth(o));return a}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let a=0;for(let o=0;o<s;++o,a+=n)i.push(a);for(let o=s;o<e;++o)i.push(-1);return W(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,a=[];for(let o=0;o<i-1;++o){const l=e[o+1]-e[o];let c=Math.min(s,l),u=n[o];u===-1&&(c=0);for(let d=0;d<c;++d)a.push(u),u+=r;for(let d=0;d<l-c;++d)a.push(-1)}if(i>0&&a.length!==e[i-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,a=[];if(i===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let u=1;u<i;++u){const d=e[u];if(d===l)c>=0&&(++o,o<s?c+=r:c=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==e.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),a=this.getRowPartitionTypeByDimension(e);switch(a){case xa.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case xa.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${xa[a]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case xa.FIRST_DIM_SIZE:return e[0];case xa.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xa.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xa[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=f6(r,!1),a=Zn(this.valuesDType,Se(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,a,i)}return[i,a]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,a=r;let o=s.slice();o=o.slice(e+1);const l=Se(o),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const y=this.defaultValueShape;he(()=>{const x=oe(u,y);u=fy(x,o).dataSync()})}let d=0,p=0,g=0;for(let y=0;y<=c;++y){let x=y<c?n[y]:-1;if(x===g){++g;continue}if(p<g){const v=i.subarray(d*l),w=a.subarray(p*l),k=(g-p)*l;h6(w,v,k)}if(y>=c){const v=r.length;x=Math.floor(v/l)}if(x>g)if(this.defaultValue.length===1)a.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const v=a.slice(g*l);h6(v,u,l),++g}x<0?(d=y+1,p=g):(d=y,p=g,g=p+1)}}}function h6(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function f6(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function $ee(t,e,n,r,s,i,a,o,l,c){return new nk(t,e,n,r,s,i,a,o,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t,e,n,r){const s=t===e,i=t<e&&n<0,a=e<t&&n>1;if(s||i||a)return ys(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=ys(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jee=vl(t=>1/Math.sqrt(t)),kBe=Zu(gv,jee),SBe={kernelName:gv,backendName:"cpu",kernelFunc:kBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jd(t,e,n,r,s,i,a,o,l,c){const u=[r/s,s],d=t.values,p=e.values;if(r===0)return _t(n,e.dtype);const g=l instanceof ns?l:_t(u,e.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<i;y++){const x=[];let v=0;for(let w=0;w<a;w++){const k=d[y*a+w];x.push(k),v+=k*o[w]}if(v<0||v>=r/s)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let w=0;w<s;w++)c?g.values[v*s+w]+=p[y*s+w]:g.values[v*s+w]=e.rank===0?p[0]:p[y*s+w]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NBe=vl(t=>1/(1+Math.exp(-t))),Dee=ln(wv,t=>1/(1+Math.exp(-t))),CBe={kernelName:wv,backendName:"cpu",kernelFunc:Dee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t,e,n,r,s){const i=bD(r,e,n),a=Se(n),o=ot(r);if(i){const d=wD(e,o);return s==="string"?t.slice(d,d+a):t.subarray(d,d+a)}const l=s==="string"?cc(t):t,c=_t(r,s,l),u=_t(n,s);for(let d=0;d<u.size;++d){const p=u.indexToLoc(d),g=p.map((y,x)=>y+e[x]);u.set(c.get(...g),...p)}return s==="string"?LQ(u.values):u.values}function Fh(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r;Je(s,"slice");const[o,l]=BN(s,i,a);xD(s,o,l);const c=n.data.get(s.dataId).values,u=Oee(c,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const IBe={kernelName:NN,backendName:"cpu",kernelFunc:Fh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t,e,n,r,s,i,a){const o=e[0],l=i[0],c=new Array(l),u=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(IQ(o));const v=Zn(n,0),w=Zn(s,0);return[v,[0,d],w,c,u]}let p=!0,g=0;const y=new Array(l).fill(0);for(let v=0;v<o;++v){const w=t[v*d];if(w<0)throw new Error(EQ(v,w));if(w>=l)throw new Error(TQ(v,w,l));++y[w],p=p&&w>=g,g=w}let x=!0;for(let v=0;v<l;++v){const w=y[v]===0;c[v]=w,x=x&&!w,y[v]=Math.max(y[v],1),v>0&&(y[v]+=y[v-1])}if(x&&p){const v=t,w=r;for(let k=0;k<o;++k)u[k]=k;return[v,[o,d],w,c,u]}else{const v=y[l-1],w=Zn(n,v*d),k=Zn(s,v),S=new Array(l).fill(0);for(let I=0;I<o;++I){const E=t[I*d],j=S[E],A=(E===0?0:y[E-1])+j;S[E]++;for(let T=0;T<d;++T)w[A*d+T]=t[I*d+T];k[A]=r[I],u[I]=A}for(let I=0;I<l;++I)if(S[I]===0){const j=I===0?0:y[I-1];w[j*d+0]=I;for(let A=1;A<d;++A)w[j*d+A]=0;k[j]=a}return[w,[v,d],k,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fee(t,e,n,r,s){const i=Se(r),a=e[0],o=s.length,l=[];let c=1,u=-1;for(let v=0;v<o;++v){const w=s[v];if(w===-1){if(u!==-1)throw new Error(_Q(u,v));u=v,l.push(1)}else{if(w<0)throw new Error(AQ(v,w));c*=w,l.push(w)}}if(u!==-1){if(c<=0)throw new Error(RQ());const v=Math.trunc(i/c);if(c*v!==i)throw new Error($Q(r,l));l[u]=v}if(Se(l)!==i)throw new Error(PQ(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let v=p-2;v>=0;--v)g[v]=g[v+1]*r[v+1]}const y=[];if(o>0){y[o-1]=1;for(let v=o-2;v>=0;--v)y[v]=y[v+1]*l[v+1]}const x=Zn(n,a*o);for(let v=0;v<a;++v){let w=0;for(let k=0;k<p;++k)w+=t[v*p+k]*g[k];for(let k=0;k<o;++k)x[v*o+k]=Math.trunc(w/y[k]),w%=y[k]}return[x,[a,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mO(t,e,n,r,s,i=!1,a=0){const o=r.length,l=[e[0],t.length/e[0]],c=l[1],d=o>0?s[o-1]+1:0;if(d<0)throw new Error(dA());const p=e.slice();p[0]=d;const g=p.reduce((S,I)=>S*I,1),y=Zn(n,g);if(o===0)return d>0&&y.fill(a),[y,p];if(d<=0)throw new Error(dA());let x=0,v=1,w=0,k=s[x];for(;;){let S=0;if(v<o){if(S=s[v],k===S){++v;continue}if(k>=S)throw new Error(jQ())}if(k<0||k>=d)throw new Error(DQ(k,d));k>w&&y.fill(a,w*c,k*c);for(let I=x;I<v;++I){const E=r[I];if(E<0||E>=l[0])throw new Error(OQ(I,r[I],l[0]));for(let j=0;j<c;j++)y[k*c+j]+=t[E*c+j]}if(i)for(let I=0;I<c;I++)y[k*c+I]/=v-x;if(x=v,++v,w=k+1,k=S,v>o)break}return w<d&&y.fill(a,w*c,d*c),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EBe=vl(t=>Math.sqrt(t)),TBe=ln(Sv,t=>Math.sqrt(t)),_Be={kernelName:Sv,backendName:"cpu",kernelFunc:TBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lee=sr(((t,e)=>{const n=t-e;return n*n})),ABe=Cr(Nv,Lee),RBe={kernelName:Nv,backendName:"cpu",kernelFunc:ABe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vee=vl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),$Be=Zu(Pj,Vee),PBe={kernelName:Pj,backendName:"cpu",kernelFunc:$Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee(t,e,n,r){const s=_t(t,e.dtype);for(let i=0;i<s.size;i++){const a=s.indexToLoc(i),o=new Array(a.length);for(let l=0;l<o.length;l++)o[l]=a[l]*n[l]+r[l];s.set(e.get(...o),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jBe{constructor(e,n,r,s,i,a){this.separator=uu(e),this.nGramWidths=n,this.leftPad=uu(r),this.rightPad=uu(s),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,a){for(let o=0;o<i;++o){const l=this.getPadWidth(a),c=Math.max(0,l-o),u=Math.max(0,l-(i-(o+1))),d=a-(c+u),p=n+(c>0?0:o-l);let g=0;g+=c*this.leftPad.length;for(let k=0;k<d;++k)g+=e[p+k].length;g+=u*this.rightPad.length;const y=c+u+d-1;g+=y*this.separator.length,r[s+o]=new Uint8Array(g);const x=r[s+o];let v=0;const w=k=>k.forEach(S=>x[v++]=S);for(let k=0;k<c;++k)w(this.leftPad),w(this.separator);for(let k=0;k<d-1;++k)w(e[p+k]),w(this.separator);if(d>0){w(e[p+d-1]);for(let k=0;k<u;++k)w(this.separator),w(this.rightPad)}else{for(let k=0;k<u-1;++k)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,a=Zn("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),a[l]=a[l-1]+u}const o=new Array(a[i]);for(let l=0;l<i;++l){const c=n[l];let u=a[l];if(this.nGramWidths.forEach(d=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,d);this.createNGrams(e,c,o,u,g,d),u+=g}),this.preserveShort&&u===a[l]){const d=n[l+1]-n[l];if(d===0)continue;const p=d+2*this.padWidth;this.createNGrams(e,c,o,u,1,p)}}return[o,a]}}function zee(t,e,n,r,s,i,a,o){return new jBe(n,r,s,i,a,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let a=t.indexOf(i);for(;a!==-1;){const o=t.subarray(0,a);(!n||o.length!==0)&&r.push(o),t=t.subarray(a+1),a=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const a=t.subarray(s,i);(!n||a.length!==0)&&r.push(a),s=i+1}}function Uee(t,e,n){const r=t.length,s=[];let i=0,a=0;const o=new Array(r);for(let p=0;p<r;++p){const g=s.length;DBe(t[p],e,n,s);const y=s.length-g;o[p]=y,i+=y,a=Math.max(a,y)}const l=Zn("int32",i*2),c=new Array(i),u=[r,a];let d=0;for(let p=0;p<r;++p)for(let g=0;g<o[p];++g)l[d*2]=p,l[d*2+1]=g,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(t,e){const n=Zn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=f$e(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gee=sr(((t,e)=>t-e)),OBe=dO(((t,e,n,r)=>({real:t-n,imag:e-r}))),gO=Cr(Cv,Gee,OBe),MBe={kernelName:Cv,backendName:"cpu",kernelFunc:gO};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=_t(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),a=new Array(t.rank);for(let l=0;l<a.length;l++)a[l]=i[l]%t.shape[l];const o=t.locToIndex(a);r.values[s]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ty=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function qee(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2),p=Math.max(n,Math.floor(e-l*u/o+d)),g=Math.min(r,Math.floor(e+(o-l)*u/o+d));qee(t,e,p,g)}const s=t[e];let i=n,a=r;for(op(t,n,e),ty(t[r],s)>0&&op(t,n,r);i<a;){for(op(t,i,a),i++,a--;ty(t[i],s)<0;)i=i+1;for(;ty(t[a],s)>0;)a=a-1}ty(t[n],s)===0?op(t,n,a):(a=a+1,op(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function Kee(t,e,n,r,s){const i=e[e.length-1],[a,o]=[t.length/i,i],l=gs(n,a*r),c=gs("int32",a*r);for(let d=0;d<a;d++){const p=d*o,g=t.subarray(p,p+o);let y=new Array(g.length);g.forEach((k,S)=>y[S]={value:k,index:S}),r<y.length&&(qee(y,r),y=y.slice(0,r)),s&&y.sort(ty);const x=d*r,v=l.subarray(x,x+r),w=c.subarray(x,x+r);for(let k=0;k<r;k++)v[k]=y[k].value,w[k]=y[k].index}const u=e.slice();return u[u.length-1]=r,[_t(u,n,l),_t(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xee(t,e,n,r){const s=At(e,n)[0],i=[1,n[0],1];for(let y=0;y<s;y++)i[0]*=n[y];i[1]=n[s];for(let y=s+1;y<n.length;y++)i[2]*=n[y];const a=new Map,o=new Int32Array(n[s]),l=new ns(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let y=0;y<n[s];y++){let x;if(u)x=t[y].toString();else{const w=[];for(let k=0;k<i[0];k++)for(let S=0;S<i[2];S++)w.push(l.get(k,y,S));x=w.join(",")}const v=a.get(x);if(v!=null)o[y]=v;else{const w=a.size;a.set(x,w),o[y]=w,c.push(y)}}const d=i.slice();d[1]=a.size;const p=new ns(d,r);c.forEach((y,x)=>{for(let v=0;v<i[0];v++)for(let w=0;w<i[2];w++)p.set(l.get(v,y,w),v,x,w)});const g=n.slice();return g[s]=d[1],{outputValues:p.values,outputShape:g,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FBe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:see,bincountImpl:hO,bincountReduceImpl:iee,bitwiseAndImpl:aee,castImpl:ree,ceilImpl:oee,concatImpl:lee,equalImpl:cee,expImpl:dee,expm1Impl:fee,floorDivImpl:mee,floorImpl:pee,gatherNdImpl:gee,gatherV2Impl:yee,greaterEqualImpl:vee,greaterImpl:xee,lessEqualImpl:wee,lessImpl:bee,linSpaceImpl:kee,logImpl:See,maxImpl:Nee,maximumImpl:Cee,minimumImpl:Iee,multiplyImpl:fO,negImpl:Eee,notEqualImpl:Tee,prodImpl:_ee,raggedGatherImpl:Aee,raggedRangeImpl:Ree,raggedTensorToTensorImpl:$ee,rangeImpl:Pee,rsqrtImpl:jee,scatterImpl:Jd,sigmoidImpl:NBe,simpleAbsImpl:nee,sliceImpl:Oee,sparseFillEmptyRowsImpl:Mee,sparseReshapeImpl:Fee,sparseSegmentReductionImpl:mO,sqrtImpl:EBe,squaredDifferenceImpl:Lee,staticRegexReplaceImpl:Vee,stridedSliceImpl:Bee,stringNGramsImpl:zee,stringSplitImpl:Uee,stringToHashBucketFastImpl:Wee,subImpl:Gee,tileImpl:Hee,topKImpl:Kee,transposeImpl:pO,uniqueImpl:Xee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */mY("cpu",()=>new t2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yee=ln(Kx,t=>t>=0?t:Math.exp(t)-1),LBe={kernelName:Kx,backendName:"cpu",kernelFunc:Yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Je([s],"leakyRelu");const a=Se(s.shape),o=n.data.get(s.dataId).values,l=gs("float32",a);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(s.shape,"float32",l)}const VBe={kernelName:JS,backendName:"cpu",kernelFunc:Qee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BBe=sr((t,e)=>t<0?e*t:t);function Jee(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Je([r,s],"prelu");const i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,[o,l]=BBe(r.shape,s.shape,i,a,"float32");return n.makeTensorInfo(l,"float32",o)}const zBe={kernelName:yN,backendName:"cpu",kernelFunc:Jee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zee=ln(fv,t=>Math.max(0,t)),UBe={kernelName:fv,backendName:"cpu",kernelFunc:Zee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ete=ln(pv,t=>Math.min(Math.max(0,t),6)),WBe={kernelName:pv,backendName:"cpu",kernelFunc:ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rk(t,e,n,r,s){if(n==="linear")return ml({inputs:{x:e},backend:t});if(n==="relu")return Zee({inputs:{x:e},backend:t});if(n==="elu")return Yee({inputs:{x:e},backend:t});if(n==="relu6")return ete({inputs:{x:e},backend:t});if(n==="prelu")return Jee({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Qee({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return Dee({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=Se(s.shape),o=NX(i,a),l=Se(o);W(a===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=o,d.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const GBe={kernelName:vN,backendName:"cpu",kernelFunc:Sn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tte(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;Je([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=a?s.shape[l-2]:s.shape[l-1],d=o?i.shape[c-1]:i.shape[c-2],p=a?s.shape[l-1]:s.shape[l-2],g=o?i.shape[c-2]:i.shape[c-1],y=s.shape.slice(0,-2),x=i.shape.slice(0,-2),v=Se(y),w=Se(x),S=Nt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,g]);W(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${a} and transposeB=${o} must match.`);const I=a?[v,u,p]:[v,p,u],E=o?[w,g,d]:[w,d,g],j=Sn({inputs:{x:s},backend:n,attrs:{shape:I}}),A=Sn({inputs:{x:i},backend:n,attrs:{shape:E}}),T=a?j.shape[1]:j.shape[2],$=a?j.shape[2]:j.shape[1],D=o?A.shape[1]:A.shape[2],R=Math.max(v,w),F=n.data.get(j.dataId).values,L=n.data.get(A.dataId).values,K=ot(j.shape),X=ot(A.shape),[q,Q,z]=a?[K[0],1,K[1]]:[K[0],K[1],1],[H,ee,G]=o?[1,X[1],X[0]]:[X[1],1,X[0]],Y=$*D,ae=_t([R,$,D],j.dtype),ye=ae.values,xe=n.blockSize;for(let Ce=0;Ce<R;Ce++){const fe=Ce%v,Te=Ce%w;for(let ue=0;ue<$;ue+=xe){const Ne=Math.min(ue+xe,$);for(let Ee=0;Ee<D;Ee+=xe){const me=Math.min(Ee+xe,D);for(let Ze=0;Ze<T;Ze+=xe){const Xe=Math.min(Ze+xe,T);for(let pt=ue;pt<Ne;pt++)for(let ft=Ee;ft<me;ft++){let Et=0;for(let Qt=Ze;Qt<Xe;Qt++){const ks=F[fe*q+pt*Q+Qt*z],hn=L[Qt*H+ft*ee+Te*G];Et+=ks*hn}ye[Ce*Y+(pt*D+ft)]+=Et}}}}}return n.disposeIntermediateTensorInfo(j),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(S,ae.dtype,ae.values)}const HBe={kernelName:MS,backendName:"cpu",kernelFunc:tte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qBe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let p,g,y;const x=[];p=tte({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(g=Jp({inputs:{a:p,b:a},backend:n}),x.push(p),p=g),u&&(y=rk(n,p,u,o,d),x.push(p),p=y);for(const w of x)n.disposeIntermediateTensorInfo(w);return p}const KBe={kernelName:M1,backendName:"cpu",kernelFunc:qBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XBe=ln(Dx,t=>Math.acos(t)),YBe={kernelName:Dx,backendName:"cpu",kernelFunc:XBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QBe=ln(Ox,t=>Math.acosh(t)),JBe={kernelName:Ox,backendName:"cpu",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZBe(t){const{inputs:e,backend:n}=t,r=e;Je(e,"addN");const s=r.map(o=>n.data.get(o.dataId).values),i=_t(r[0].shape,r[0].dtype),a=i.values;for(let o=0;o<r.length;o++){const l=s[o];for(let c=0;c<a.length;c++)a[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const eze={kernelName:JP,backendName:"cpu",kernelFunc:ZBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Je(s,"all");const o=At(i,s.shape);let l=o;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=ei({inputs:{x:s},backend:n,attrs:{perm:c}}),l=nr(l.length,s.shape.length)),os("all",l,u.shape.length);const[d,p]=Vr(u.shape,l),g=Se(p),y=ys(Se(d),u.dtype),x=n.data.get(u.dataId).values;for(let w=0;w<y.length;++w){const k=w*g;let S=x[k];for(let I=0;I<g;++I){const E=x[k+I];S=S&&E}y[w]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,y);if(a){const w=ur(d,o),k=Sn({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),k}return v}const nze={kernelName:ZP,backendName:"cpu",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Je(s,"any");const o=At(i,s.shape);let l=o;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=ei({inputs:{x:s},backend:n,attrs:{perm:c}}),l=nr(l.length,s.shape.length)),os("any",l,u.shape.length);const[d,p]=Vr(u.shape,l),g=Se(p),y=ys(Se(d),u.dtype),x=n.data.get(u.dataId).values;for(let w=0;w<y.length;++w){const k=w*g;let S=x[k];for(let I=0;I<g;++I){const E=x[k+I];S=S||E}y[w]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,y);if(a){const w=ur(d,o),k=Sn({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),k}return v}const sze={kernelName:ej,backendName:"cpu",kernelFunc:rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ize(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Je(s,"argMax");let a=At(i,s.shape);const o=Gn(a,s.shape.length);let l=s;const c=[];o!=null&&(l=ei({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=nr(a.length,l.shape.length)),a=[a[0]],os("argMax",a,l.shape.length);const[u,d]=Vr(l.shape,a),p=Se(u),g=ys(p,"int32"),y=Se(d),x=n.data.get(l.dataId).values;for(let v=0;v<g.length;++v){const w=v*y;let k=x[w],S=0;for(let I=0;I<y;++I){const E=x[w+I];E>k&&(k=E,S=I)}g[v]=S}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",g)}const aze={kernelName:PS,backendName:"cpu",kernelFunc:ize};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Je(s,"argMin");let a=At(i,s.shape);const o=Gn(a,s.shape.length);let l=s;const c=[];o!=null&&(l=ei({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=nr(a.length,l.shape.length)),a=[a[0]],os("argMin",a,l.shape.length);const[u,d]=Vr(l.shape,a),p=Se(u),g=ys(p,"int32"),y=Se(d),x=n.data.get(l.dataId).values;for(let v=0;v<g.length;++v){const w=v*y;let k=x[w],S=0;for(let I=0;I<y;++I){const E=x[w+I];E<k&&(k=E,S=I)}g[v]=S}return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(u,"int32",g)}const lze={kernelName:jS,backendName:"cpu",kernelFunc:oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cze=ln(Mx,t=>Math.asin(t)),uze={kernelName:Mx,backendName:"cpu",kernelFunc:cze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze=ln(Fx,t=>Math.asinh(t)),hze={kernelName:Fx,backendName:"cpu",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fze=ln(Lx,t=>Math.atan(t)),pze={kernelName:Lx,backendName:"cpu",kernelFunc:fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mze=sr((t,e)=>Math.atan2(t,e)),gze=Cr(Bx,mze),yze={kernelName:Bx,backendName:"cpu",kernelFunc:gze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze=ln(Vx,t=>Math.atanh(t)),vze={kernelName:Vx,backendName:"cpu",kernelFunc:xze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yO(t,e,n,r,s,i){const a=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,p=s.padInfo.top,g=s.padInfo.left,y=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=_t(s.outShape,n),v=x.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3],k=s.outShape[2]*s.outShape[3],S=s.outShape[3];for(let I=0;I<s.batchSize;++I){const E=I*w,j=I*r[0];for(let A=0;A<s.inChannels;++A)for(let T=0;T<s.outHeight;++T){const $=T*a-p,D=Math.max(0,$),R=Math.min(s.inHeight,u+$),F=E+T*k;for(let L=0;L<s.outWidth;++L){const K=L*o-g,X=Math.max(0,K),q=Math.min(s.inWidth,d+K);let Q=y,z=0,H=0;for(let G=D;G<R;G+=l){const Y=j+G*r[1];for(let ae=X;ae<q;ae+=c){const ye=Y+ae*r[2],xe=t[ye+A];i==="max"&&xe>Q?Q=xe:i==="avg"&&(z+=xe,H++)}if(isNaN(Q))break}const ee=F+L*S+A;v[ee]=i==="avg"?z/H:Q}}}return x}function nte(t,e,n,r,s=!1,i=!1){const a=_t(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,g=r.padInfo.top,y=r.padInfo.left,x=_t(e,n,t);for(let v=0;v<r.batchSize;++v)for(let w=0;w<r.inChannels;++w)for(let k=0;k<r.outHeight;++k){const S=k*o-g;let I=S;for(;I<0;)I+=c;const E=Math.min(r.inHeight,d+S);for(let j=0;j<r.outWidth;++j){const A=j*l-y;let T=A;for(;T<0;)T+=u;const $=Math.min(r.inWidth,p+A);let D=Number.NEGATIVE_INFINITY,R=-1;for(let F=I;F<E;F+=c){const L=F-S;for(let K=T;K<$;K+=u){const X=K-A,q=x.get(v,F,K,w);q>D&&(D=q,s?R=i?((v*r.inHeight+F)*r.inWidth+K)*r.inChannels+w:(F*r.inWidth+K)*r.inChannels+w:R=L*p+X)}}a.set(R,v,k,j,w)}}return a}function rte(t,e,n,r,s,i){const a=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,p=s.effectiveFilterDepth,g=s.effectiveFilterHeight,y=s.effectiveFilterWidth,x=s.padInfo.front,v=s.padInfo.top,w=s.padInfo.left,k=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=_t(s.outShape,n),I=S.values,E=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],j=s.outShape[2]*s.outShape[3]*s.outShape[4],A=s.outShape[3]*s.outShape[4],T=s.outShape[4];for(let $=0;$<s.batchSize;++$){const D=$*E,R=$*r[0];for(let F=0;F<s.inChannels;++F)for(let L=0;L<s.outDepth;++L){const K=L*a-x;let X=K;for(;X<0;)X+=c;const q=Math.min(s.inDepth,p+K),Q=D+L*j;for(let z=0;z<s.outHeight;++z){const H=z*o-v;let ee=H;for(;ee<0;)ee+=u;const G=Math.min(s.inHeight,g+H),Y=Q+z*A;for(let ae=0;ae<s.outWidth;++ae){const ye=ae*l-w;let xe=ye;for(;xe<0;)xe+=d;const Ce=Math.min(s.inWidth,y+ye),fe=Y+ae*T;let Te=k,ue=0,Ne=0;for(let me=X;me<q;me+=c){const Ze=R+me*r[1];for(let Xe=ee;Xe<G;Xe+=u){const pt=Ze+Xe*r[2];for(let ft=xe;ft<Ce;ft+=d){const Et=pt+ft*r[3],Qt=t[Et+F];if(i==="max"&&Qt>Te?Te=Qt:i==="avg"&&(ue+=Qt,Ne++),isNaN(Te))break}if(isNaN(Te))break}if(isNaN(Te))break}const Ee=fe+F;I[Ee]=i==="avg"?ue/Math.max(Ne,1):Te}}}}return S}function bze(t,e){const n=_t(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;for(let x=0;x<e.batchSize;++x)for(let v=0;v<e.inChannels;++v)for(let w=0;w<e.outDepth;++w){const k=w*r-p;let S=k;for(;S<0;)S+=a;const I=Math.min(e.inDepth,c+k);for(let E=0;E<e.outHeight;++E){const j=E*s-g;let A=j;for(;A<0;)A+=o;const T=Math.min(e.inHeight,u+j);for(let $=0;$<e.outWidth;++$){const D=$*i-y;let R=D;for(;R<0;)R+=l;const F=Math.min(e.inWidth,d+D);let L=Number.NEGATIVE_INFINITY,K=-1;for(let X=S;X<I;X+=a){const q=X-k;for(let Q=A;Q<T;Q+=o){const z=Q-j;for(let H=R;H<F;H+=l){const ee=H-D,G=t.get(x,X,Q,H,v);G>=L&&(L=G,K=q*u*d+z*u+ee)}}}n.set(K,x,w,E,$,v)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Je(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;W(vs(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ja(s.shape,i,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&rn(u.inShape,u.outShape))d=ml({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,g=ot(s.shape),y=yO(p,s.shape,s.dtype,g,u,"avg");d=n.makeTensorInfo(u.outShape,s.dtype,y.values)}return d}const kze={kernelName:DS,backendName:"cpu",kernelFunc:wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Je(s,"avgPool3d");const u=xc(s.shape,i,a,1,o,l,c),d=n.data.get(s.dataId).values,p=rte(d,s.shape,s.dtype,ot(s.shape),u,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}const Nze={kernelName:OS,backendName:"cpu",kernelFunc:Sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Je([s,i],"avgPool3DGrad");const u=xc(i.shape,a,o,1,l,c),d=u.strideDepth,p=u.strideHeight,g=u.strideWidth,y=u.filterDepth,x=u.filterHeight,v=u.filterWidth,w=u.dilationDepth,k=u.dilationHeight,S=u.dilationWidth,I=u.effectiveFilterDepth,E=u.effectiveFilterHeight,j=u.effectiveFilterWidth,A=I-1-u.padInfo.front,T=j-1-u.padInfo.left,$=E-1-u.padInfo.top,D=_t(i.shape,"float32"),R=1/(y*x*v),F=n.bufferSync(s);for(let L=0;L<u.batchSize;++L)for(let K=0;K<u.inChannels;++K)for(let X=0;X<u.inDepth;++X)for(let q=0;q<u.inHeight;++q)for(let Q=0;Q<u.inWidth;++Q){const z=X-A,H=q-$,ee=Q-T;let G=0;for(let Y=0;Y<I;Y+=w){const ae=(z+Y)/d;if(!(ae<0||ae>=u.outDepth||Math.floor(ae)!==ae))for(let ye=0;ye<E;ye+=k){const xe=(H+ye)/p;if(!(xe<0||xe>=u.outHeight||Math.floor(xe)!==xe))for(let Ce=0;Ce<j;Ce+=S){const fe=(ee+Ce)/g;if(fe<0||fe>=u.outWidth||Math.floor(fe)!==fe)continue;const Te=F.get(L,ae,xe,fe,K);G+=Te}}}D.set(G*R,L,X,q,Q,K)}return n.makeTensorInfo(D.shape,D.dtype,D.values)}const Ize={kernelName:nj,backendName:"cpu",kernelFunc:Cze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;Je([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=ja(a.shape,o,l,1,c),d=u.strideHeight,p=u.strideWidth,g=u.filterHeight,y=u.filterWidth,x=u.dilationHeight,v=u.dilationWidth,w=u.effectiveFilterHeight,k=u.effectiveFilterWidth,S=k-1-u.padInfo.left,I=w-1-u.padInfo.top,E=_t(a.shape,"float32"),j=1/(g*y),A=n.data.get(s.dataId).values,T=_t(s.shape,"float32",A);for(let $=0;$<u.batchSize;++$)for(let D=0;D<u.inChannels;++D)for(let R=0;R<u.inHeight;++R)for(let F=0;F<u.inWidth;++F){const L=R-I,K=F-S;let X=0;for(let q=0;q<w;q+=x){const Q=(L+q)/d;if(!(Q<0||Q>=u.outHeight||Math.floor(Q)!==Q))for(let z=0;z<k;z+=v){const H=(K+z)/p;if(H<0||H>=u.outWidth||Math.floor(H)!==H)continue;const ee=T.get($,Q,H,D);X+=ee}}E.set(X*j,$,R,F,D)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const Tze={kernelName:tj,backendName:"cpu",kernelFunc:Eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:a,mean:o,variance:l}=e;W(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),W(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),W(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Je([s,o,l,i,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,p=n.data.get(l.dataId).values,g=i?n.data.get(i.dataId).values:new Float32Array([1]),y=a?n.data.get(a.dataId).values:new Float32Array([0]),x=new Float32Array(u.length),v=y.length,w=g.length,k=p.length,S=d.length;let I=0,E=0,j=0,A=0;for(let T=0;T<u.length;++T)x[T]=y[I++]+(u[T]-d[E++])*g[j++]/Math.sqrt(p[A++]+c),I>=v&&(I=0),E>=S&&(E=0),j>=w&&(j=0),A>=k&&(A=0);return n.makeTensorInfo(s.shape,s.dtype,x)}const Aze={kernelName:XS,backendName:"cpu",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;Je([s],"batchToSpaceND");const o=i.reduce((w,k)=>w*k),l=Dv(s.shape,i,o),c=Ov(l.length,i.length),u=Mv(s.shape,i,o),d=ID(a,i.length),p=ED(u,a,i.length),g=Sn({inputs:{x:s},backend:n,attrs:{shape:l}}),y=ei({inputs:{x:g},backend:n,attrs:{perm:c}}),x=Sn({inputs:{x:y},backend:n,attrs:{shape:u}}),v=Fh({inputs:{x},backend:n,attrs:{begin:d,size:p}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),v}const $ze={kernelName:FS,backendName:"cpu",kernelFunc:Rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=hO(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}const jze={kernelName:rj,backendName:"cpu",kernelFunc:Pze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dze(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,o=Nt(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const Oze={kernelName:AX,backendName:"cpu",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mze=ln(Wx,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),Fze={kernelName:Wx,backendName:"cpu",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(Se(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values;for(let c=0;c<o.length;c++){const u=o[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},Vze={kernelName:LS,backendName:"cpu",kernelFunc:Lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const Bze={kernelName:wj,backendName:"cpu",kernelFunc:Zp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function em(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=At(s,e[0].shape)[0],a=e.map(x=>x.shape);SD(a,i);let o=rl(e.map(x=>x.shape),i);if(Se(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(x=>Se(x.shape)>0);if(l.length===1)return ml({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const x=l.map(I=>Mh({inputs:{input:I},backend:n})),v=l.map(I=>Zp({inputs:{input:I},backend:n})),w=em({inputs:x,backend:n,attrs:{axis:i}}),k=em({inputs:v,backend:n,attrs:{axis:i}}),S=xi({inputs:{real:w,imag:k},backend:n});return x.forEach(I=>n.disposeIntermediateTensorInfo(I)),v.forEach(I=>n.disposeIntermediateTensorInfo(I)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),S}const c=l.map(x=>{const w=[-1,Se(x.shape.slice(i))];return Sn({inputs:{x},backend:n,attrs:{shape:w}})}),u=c.map(x=>({vals:n.data.get(x.dataId).values,shape:x.shape}));o=rl(c.map(x=>x.shape),1);const d=c[0].shape[0]===1,p=lee(u,o,e[0].dtype,d),g=rl(l.map(x=>x.shape),i),y=n.makeTensorInfo(g,e[0].dtype,p);return c.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const zze={kernelName:VS,backendName:"cpu",kernelFunc:em};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ste(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Je([s,i],"conv2d");const d=vc(l),p=as(s.shape,i.shape,a,c,o,u,!1,d),g=p.filterHeight,y=p.filterWidth,x=p.dilationHeight,v=p.dilationWidth,w=p.padInfo.left,k=p.padInfo.top,S=p.dataFormat==="channelsLast",I=new ns(p.outShape,s.dtype),E=ot(s.shape),j=ot(i.shape),A=E[0],T=S?E[1]:E[2],$=S?E[2]:1,D=S?1:E[1],R=I.strides[0],F=S?I.strides[1]:I.strides[2],L=S?I.strides[2]:1,K=S?1:I.strides[1],X=n.data.get(s.dataId).values,q=n.data.get(i.dataId).values,Q=I.values;for(let z=0;z<p.batchSize;++z){const H=z*A,ee=z*R;for(let G=0;G<p.outHeight;++G){const Y=ee+G*F,ae=G*p.strideHeight-k;for(let ye=0;ye<g;++ye){const xe=ae+ye*x;if(xe<0||xe>=p.inHeight)continue;const Ce=ye*j[0],fe=H+xe*T;for(let Te=0;Te<p.outWidth;++Te){const ue=Y+Te*L,Ne=Te*p.strideWidth-w;for(let Ee=0;Ee<y;++Ee){const me=Ne+Ee*v;if(me<0||me>=p.inWidth)continue;const Ze=Ce+Ee*j[1],Xe=fe+me*$;let pt=Ze;for(let ft=0;ft<p.inChannels;++ft){const Et=X[Xe+ft*D];for(let Qt=0;Qt<p.outChannels;++Qt)Q[ue+Qt*K]+=Et*q[pt+Qt];pt+=p.outChannels}}}}}}return n.makeTensorInfo(I.shape,I.dtype,Q)}const Uze={kernelName:BS,backendName:"cpu",kernelFunc:ste};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Je([s,i],"conv2dBackpropFilter");const d=vc(l),p=as(s.shape,u,a,1,o,c,!1,d),{strideHeight:g,strideWidth:y,filterHeight:x,filterWidth:v}=p,w=p.dataFormat==="channelsLast",k=new ns(p.filterShape,"float32"),S=p.padInfo.left,I=p.padInfo.top,E=n.data.get(s.dataId).values,j=n.data.get(i.dataId).values,A=new ns(s.shape,s.dtype,E),T=new ns(i.shape,i.dtype,j);for(let $=0;$<x;++$){const D=Math.max(0,Math.ceil((I-$)/g)),R=Math.min(p.outHeight,(p.inHeight+I-$)/g);for(let F=0;F<v;++F){const L=Math.max(0,Math.ceil((S-F)/y)),K=Math.min(p.outWidth,(p.inWidth+S-F)/y);for(let X=0;X<p.inChannels;++X)for(let q=0;q<p.outChannels;++q){let Q=0;for(let z=0;z<p.batchSize;++z)for(let H=D;H<R;++H){const ee=$+H*g-I;for(let G=L;G<K;++G){const Y=F+G*y-S;w?Q+=A.get(z,ee,Y,X)*T.get(z,H,G,q):Q+=A.get(z,X,ee,Y)*T.get(z,q,H,G)}}k.set(Q,$,F,X,q)}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Gze={kernelName:aj,backendName:"cpu",kernelFunc:Wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;Je([s,i],"conv2dBackpropInput");const d=ot(i.shape),p=ot(s.shape);let g=vc(c);const y=as(a,i.shape,o,1,l,u,!1,g),x=new ns(y.inShape,"float32"),v=x.values,w=n.data.get(s.dataId).values,k=n.data.get(i.dataId).values,[S,I,E]=d,{batchSize:j,filterHeight:A,filterWidth:T,inChannels:$,inHeight:D,inWidth:R,outChannels:F,outHeight:L,outWidth:K,strideHeight:X,strideWidth:q}=y;g=y.dataFormat;const Q=A-1-y.padInfo.top,z=T-1-y.padInfo.left,H=g==="channelsLast",ee=x.strides[0],G=H?x.strides[1]:x.strides[2],Y=H?x.strides[2]:1,ae=H?1:x.strides[1],ye=p[0],xe=H?p[1]:p[2],Ce=H?p[2]:1,fe=H?1:p[1];for(let Te=0;Te<j;++Te)for(let ue=0;ue<$;++ue)for(let Ne=0;Ne<D;++Ne){const Ee=Ne-Q,me=Math.max(0,Math.ceil(Ee/X)),Ze=Math.min(L,(A+Ee)/X);for(let Xe=0;Xe<R;++Xe){const pt=Xe-z,ft=Math.max(0,Math.ceil(pt/q)),Et=Math.min(K,(T+pt)/q);let Qt=0;for(let hn=me;hn<Ze;++hn){const Br=hn*X-Ee;for(let Ir=ft;Ir<Et;++Ir){const ni=Ir*q-pt,zr=ye*Te+xe*hn+Ce*Ir,Bs=S*(A-1-Br)+I*(T-1-ni)+E*ue;for(let fn=0;fn<F;++fn){const pn=w[zr+fe*fn],Ur=k[Bs+fn];Qt+=pn*Ur}}}const ks=ee*Te+G*Ne+Y*Xe+ae*ue;v[ks]=Qt}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const qze={kernelName:zS,backendName:"cpu",kernelFunc:Hze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r;Je([s,i],"conv3d");const c=qu(s.shape,i.shape,a,l,o),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:g,dilationHeight:y,dilationWidth:x,padInfo:v}=c,w=v.front,k=v.left,S=v.top,I=new ns(c.outShape,s.dtype),E=n.data.get(s.dataId).values,j=n.data.get(i.dataId).values,A=I.values,T=ot(s.shape),$=ot(i.shape);for(let D=0;D<c.batchSize;++D){const R=D*T[0],F=D*I.strides[0];for(let L=0;L<c.outDepth;++L){const K=F+L*I.strides[1],X=L*c.strideDepth-w;for(let q=0;q<u;++q){const Q=X+q*g;if(Q<0||Q>=c.inDepth)continue;const z=q*$[0],H=R+Q*T[1];for(let ee=0;ee<c.outHeight;++ee){const G=K+ee*I.strides[2],Y=ee*c.strideHeight-S;for(let ae=0;ae<d;++ae){const ye=Y+ae*y;if(ye<0||ye>=c.inHeight)continue;const xe=z+ae*$[1],Ce=H+ye*T[2];for(let fe=0;fe<c.outWidth;++fe){const Te=G+fe*c.outChannels,ue=fe*c.strideWidth-k;for(let Ne=0;Ne<p;++Ne){const Ee=ue+Ne*x;if(Ee<0||Ee>=c.inWidth)continue;const me=xe+Ne*$[2],Ze=Ce+Ee*c.inChannels;let Xe=me;for(let pt=0;pt<c.inChannels;++pt){const ft=E[Ze+pt];for(let Et=0;Et<c.outChannels;++Et)A[Te+Et]+=ft*j[Xe+Et];Xe+=c.outChannels}}}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const Xze={kernelName:US,backendName:"cpu",kernelFunc:Kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r;Je([s,i],"conv3dBackpropFilterV2");const c=ot(s.shape),u=ot(i.shape),d=qu(s.shape,l,a,1,o),p=d.strideDepth,g=d.strideHeight,y=d.strideWidth,x=d.filterDepth,v=d.filterHeight,w=d.filterWidth,k=new ns(d.filterShape,"float32"),S=k.values,[I,E,j,A]=k.strides,T=n.data.get(i.dataId).values,[$,D,R,F]=u,L=n.data.get(s.dataId).values,[K,X,q,Q]=c,z=d.padInfo.front,H=d.padInfo.left,ee=d.padInfo.top;for(let G=0;G<x;++G){const Y=Math.max(0,Math.ceil((z-G)/p)),ae=Math.min(d.outDepth,(d.inDepth+z-G)/p),ye=G*I;for(let xe=0;xe<v;++xe){const Ce=Math.max(0,Math.ceil((ee-xe)/g)),fe=Math.min(d.outHeight,(d.inHeight+ee-xe)/g),Te=xe*E+ye;for(let ue=0;ue<w;++ue){const Ne=Math.max(0,Math.ceil((H-ue)/y)),Ee=Math.min(d.outWidth,(d.inWidth+H-ue)/y),me=ue*j+Te;for(let Ze=0;Ze<d.inChannels;++Ze){const Xe=Ze*A+me;for(let pt=0;pt<d.outChannels;++pt){let ft=0;for(let Et=0;Et<d.batchSize;++Et){const Qt=Et*K,ks=Et*$;for(let hn=Y;hn<ae;++hn){const Ir=(G+hn*p-z)*X+Qt,ni=hn*D+ks;for(let zr=Ce;zr<fe;++zr){const fn=(xe+zr*g-ee)*q+Ir,pn=zr*R+ni;for(let Ur=Ne;Ur<Ee;++Ur){const ra=(ue+Ur*y-H)*Q+fn,Fa=Ur*F+pn;ft+=L[ra+Ze]*T[Fa+pt]}}}}S[Xe+pt]=ft}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const Qze={kernelName:oj,backendName:"cpu",kernelFunc:Yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jze(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r;Je([s],"conv3dBackpropInputV2");const c=ot(s.shape),u=ot(i.shape),d=qu(l,i.shape,o,1,a),p=new ns(d.inShape,"float32"),g=p.values,[y,x,v,w]=p.strides,k=n.data.get(s.dataId).values,[S,I,E,j]=c,A=n.data.get(i.dataId).values,[T,$,D,R]=u,{batchSize:F,filterDepth:L,filterHeight:K,filterWidth:X,inChannels:q,inDepth:Q,inHeight:z,inWidth:H,outChannels:ee,outDepth:G,outHeight:Y,outWidth:ae,strideDepth:ye,strideHeight:xe,strideWidth:Ce}=d,fe=L-1-d.padInfo.front,Te=K-1-d.padInfo.top,ue=X-1-d.padInfo.left;for(let Ne=0;Ne<F;++Ne)for(let Ee=0;Ee<q;++Ee)for(let me=0;me<Q;++me){const Ze=me-fe,Xe=Math.max(0,Math.ceil(Ze/ye)),pt=Math.min(G,(L+Ze)/ye);for(let ft=0;ft<z;++ft){const Et=ft-Te,Qt=Math.max(0,Math.ceil(Et/xe)),ks=Math.min(Y,(K+Et)/xe);for(let hn=0;hn<H;++hn){const Br=hn-ue,Ir=Math.max(0,Math.ceil(Br/Ce)),ni=Math.min(ae,(X+Br)/Ce);let zr=0;for(let Bs=Xe;Bs<pt;++Bs){const fn=Bs*ye-Ze;for(let pn=Qt;pn<ks;++pn){const Ur=pn*xe-Et;for(let Ma=Ir;Ma<ni;++Ma){const ra=Ma*Ce-Br,Fa=S*Ne+I*Bs+E*pn+j*Ma,bl=T*(L-1-fn)+$*(K-1-Ur)+D*(X-1-ra)+R*Ee;for(let _o=0;_o<ee;++_o){const td=k[Fa+_o],nd=A[bl+_o];zr+=td*nd}}}}g[y*Ne+x*me+v*ft+w*hn+Ee]=zr}}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Zze={kernelName:lj,backendName:"cpu",kernelFunc:Jze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5e=ln(Gx,t=>Math.cos(t)),t5e={kernelName:Gx,backendName:"cpu",kernelFunc:e5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n5e=ln(Hx,t=>Math.cosh(t)),r5e={kernelName:Hx,backendName:"cpu",kernelFunc:n5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,[u,d,p,g]=s.shape,y=i.shape[0],[x,v]=o,w=_t([y,x,v,g],"float32"),k=n.data.get(i.dataId).values,S=n.data.get(a.dataId).values,I=n.data.get(s.dataId).values,E=ot(s.shape),j=ot(w.shape);for(let A=0;A<y;A++){const T=A*4,$=k[T],D=k[T+1],R=k[T+2],F=k[T+3],L=S[A];if(L>=u)continue;const K=x>1?(R-$)*(d-1)/(x-1):0,X=v>1?(F-D)*(p-1)/(v-1):0;for(let q=0;q<x;q++){const Q=x>1?$*(d-1)+q*K:.5*($+R)*(d-1);if(Q<0||Q>d-1){for(let z=0;z<v;z++)for(let H=0;H<g;H++){const ee=H+z*j[2]+q*j[1]+A*j[0];w.values[ee]=c}continue}if(l==="bilinear"){const z=Math.floor(Q),H=Math.ceil(Q),ee=Q-z;for(let G=0;G<v;G++){const Y=v>1?D*(p-1)+G*X:.5*(D+F)*(p-1);if(Y<0||Y>p-1){for(let Ce=0;Ce<g;Ce++){const fe=Ce+G*j[2]+q*j[1]+A*j[0];w.values[fe]=c}continue}const ae=Math.floor(Y),ye=Math.ceil(Y),xe=Y-ae;for(let Ce=0;Ce<g;Ce++){let fe=Ce+ae*E[2]+z*E[1]+L*E[0];const Te=I[fe];fe=Ce+ye*E[2]+z*E[1]+L*E[0];const ue=I[fe];fe=Ce+ae*E[2]+H*E[1]+L*E[0];const Ne=I[fe];fe=Ce+ye*E[2]+H*E[1]+L*E[0];const Ee=I[fe],me=Te+(ue-Te)*xe,Ze=Ne+(Ee-Ne)*xe;fe=Ce+G*j[2]+q*j[1]+A*j[0],w.values[fe]=me+(Ze-me)*ee}}}else for(let z=0;z<v;++z){const H=v>1?D*(p-1)+z*X:.5*(D+F)*(p-1);if(H<0||H>p-1){for(let Y=0;Y<g;Y++){const ae=Y+z*j[2]+q*j[1]+A*j[0];w.values[ae]=c}continue}const ee=Math.round(H),G=Math.round(Q);for(let Y=0;Y<g;Y++){const ae=Y+ee*E[2]+G*E[1]+L*E[0],ye=Y+z*j[2]+q*j[1]+A*j[0];w.values[ye]=I[ae]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const i5e={kernelName:uj,backendName:"cpu",kernelFunc:s5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;Je(s,"cumprod");const l=Gn([i],s.shape.length);let c=s;l!=null&&(c=ei({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=nr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Si(c.dtype,"int32"),p=XP(Se(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=o?(w,k)=>w+y-k-1:(w,k)=>w+k;for(let w=0;w<g.length;w+=y)for(let k=0;k<y;k++){const S=x(w,k);if(k===0)p[S]=a?1:g[S];else{const I=x(w,k-1);p[S]=a?g[I]*p[I]:g[S]*p[I]}}const v=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Ku(l),k=ei({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),k}return v}const o5e={kernelName:cj,backendName:"cpu",kernelFunc:a5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;Je(s,"cumsum");const l=Gn([i],s.shape.length);let c=s;l!=null&&(c=ei({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=nr(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Si(c.dtype,"int32"),p=ys(Se(c.shape),d),g=n.data.get(c.dataId).values,y=c.shape[c.shape.length-1],x=o?(w,k)=>w+y-k-1:(w,k)=>w+k;for(let w=0;w<g.length;w+=y)for(let k=0;k<y;k++){const S=x(w,k);if(k===0)p[S]=a?0:g[S];else{const I=x(w,k-1);p[S]=a?g[I]+p[I]:g[S]+p[I]}}const v=n.makeTensorInfo(c.shape,d,p);if(l!=null){const w=Ku(l),k=ei({inputs:{x:v},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(c),k}return v}const c5e={kernelName:WS,backendName:"cpu",kernelFunc:l5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=hO(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=iee(l,c,a,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const d5e={kernelName:dj,backendName:"cpu",kernelFunc:u5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r;W(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const o=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*i,p=c*i,g=u/(i*i),y=n.data.get(s.dataId).values,x=new Float32Array(o*d*p*g);let v=0;for(let w=0;w<o;++w)for(let k=0;k<d;++k){const S=Math.floor(k/i),I=k%i;for(let E=0;E<p;++E){const j=Math.floor(E/i),A=E%i,T=(I*i+A)*g;for(let $=0;$<g;++$){const R=$+T+u*(j+c*(S+l*w));x[v++]=y[R]}}}return n.makeTensorInfo([o,d,p,g],s.dtype,x)}const f5e={kernelName:hj,backendName:"cpu",kernelFunc:h5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ite(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;Je([s,i],"depthwiseConv2DNative");const u=ot(s.shape),d=ot(i.shape);let p=l;p==null&&(p=[1,1]),W(vs(a,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${p}'`);const g=as(s.shape,i.shape,a,p,o,c,!0),{filterHeight:y,filterWidth:x,dilationHeight:v,dilationWidth:w,padInfo:k}=g,S=k.left,I=k.top,E=g.outChannels/g.inChannels,j=new ns(g.outShape,s.dtype),A=n.data.get(s.dataId).values,T=n.data.get(i.dataId).values,$=j.values;for(let D=0;D<g.batchSize;++D){const R=D*u[0],F=D*j.strides[0];for(let L=0;L<g.outHeight;++L){const K=F+L*j.strides[1],X=L*g.strideHeight-I;for(let q=0;q<y;++q){const Q=X+q*v;if(Q<0||Q>=g.inHeight)continue;const z=q*d[0],H=R+Q*u[1];for(let ee=0;ee<g.outWidth;++ee){const G=K+ee*j.strides[2],Y=ee*g.strideWidth-S;for(let ae=0;ae<x;++ae){const ye=Y+ae*w;if(ye<0||ye>=g.inWidth)continue;const xe=z+ae*d[1],Ce=H+ye*g.inChannels;let fe=G,Te=xe;for(let ue=0;ue<g.inChannels;++ue){const Ne=A[Ce+ue];for(let Ee=0;Ee<E;++Ee)$[fe+Ee]+=Ne*T[Te+Ee];fe+=E,Te+=E}}}}}}return n.makeTensorInfo(j.shape,j.dtype,j.values)}const p5e={kernelName:GS,backendName:"cpu",kernelFunc:ite};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;Je([s,i],"depthwiseConv2dNativeBackpropFilter");const d=as(s.shape,u,a,o,l,c,!0),{strideHeight:p,strideWidth:g,filterHeight:y,filterWidth:x}=d,v=new ns(d.filterShape,"float32"),w=d.padInfo.left,k=d.padInfo.top,S=d.outChannels/d.inChannels,I=n.data.get(s.dataId).values,E=new ns(s.shape,s.dtype,I),j=n.data.get(i.dataId).values,A=new ns(i.shape,i.dtype,j);for(let T=0;T<y;++T){const $=Math.max(0,Math.ceil((k-T)/p)),D=Math.min(d.outHeight,(d.inHeight+k-T)/p);for(let R=0;R<x;++R){const F=Math.max(0,Math.ceil((w-R)/g)),L=Math.min(d.outWidth,(d.inWidth+w-R)/g);for(let K=0;K<d.outChannels;++K){const X=Math.trunc(K/S),q=K%S;let Q=0;for(let z=0;z<d.batchSize;++z)for(let H=$;H<D;++H){const ee=T+H*p-k;for(let G=F;G<L;++G){const Y=R+G*g-w;Q+=E.get(z,ee,Y,X)*A.get(z,H,G,K)}}v.set(Q,T,R,X,q)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const g5e={kernelName:fj,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;Je([s,i],"depthwiseConv2DNativeBackpropInput");const d=ot(s.shape),p=ot(i.shape),g=as(u,i.shape,a,o,l,c,!0),y=new ns(g.inShape,"float32"),x=y.values,[v,w,k]=y.strides,S=n.data.get(s.dataId).values,[I,E,j]=d,A=n.data.get(i.dataId).values,[T,$,D]=p,{batchSize:R,filterHeight:F,filterWidth:L,inChannels:K,inHeight:X,inWidth:q,outChannels:Q,outHeight:z,outWidth:H,strideHeight:ee,strideWidth:G}=g,Y=F-1-g.padInfo.top,ae=L-1-g.padInfo.left,ye=Q/K;for(let xe=0;xe<R;++xe)for(let Ce=0;Ce<K;++Ce)for(let fe=0;fe<X;++fe){const Te=fe-Y,ue=Math.max(0,Math.ceil(Te/ee)),Ne=Math.min(z,(F+Te)/ee);for(let Ee=0;Ee<q;++Ee){const me=Ee-ae,Ze=Math.max(0,Math.ceil(me/G)),Xe=Math.min(H,(L+me)/G);let pt=0;for(let ft=ue;ft<Ne;++ft){const Et=ft*ee-Te;for(let Qt=Ze;Qt<Xe;++Qt){const ks=Qt*G-me,hn=I*xe+E*ft+j*Qt,Br=T*(F-1-Et)+$*(L-1-ks)+D*Ce;for(let Ir=0;Ir<ye;++Ir){const ni=Ce*ye+Ir,zr=S[hn+ni],Bs=A[Br+Ir];pt+=zr*Bs}}}x[v*xe+w*fe+k*Ee+Ce]=pt}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const x5e={kernelName:pj,backendName:"cpu",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=Se(r.shape),i=n.data.get(r.dataId).values,a=_t([s,s],r.dtype),o=a.values;for(let c=0;c<i.length;c++)o[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}const b5e={kernelName:RX,backendName:"cpu",kernelFunc:v5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e={kernelName:HS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:a,dilations:o}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(s.dataId).values,p=s.shape.length,{batchSize:g,inHeight:y,inWidth:x,inChannels:v,outHeight:w,outWidth:k,padInfo:S,strideHeight:I,strideWidth:E,filterHeight:j,filterWidth:A,dilationHeight:T,dilationWidth:$,outShape:D}=Av(r.shape,s.shape,i,a,"NHWC",o),R=Se(D),F=D.length,L=Zn(r.dtype,R);for(let X=0;X<g;++X)for(let q=0;q<w;++q){const Q=q*I-S.top;for(let z=0;z<k;++z){const H=z*E-S.left;for(let ee=0;ee<v;++ee){let G=Number.MIN_SAFE_INTEGER;for(let ae=0;ae<j;++ae){const ye=Q+ae*T;if(ye>=0&&ye<y)for(let xe=0;xe<A;++xe){const Ce=H+xe*$;if(Ce>=0&&Ce<x){const fe=tl([X,ye,Ce,ee],u,ot(r.shape)),Te=tl([ae,xe,ee],p,ot(s.shape)),ue=c[fe]+d[Te];ue>G&&(G=ue)}}}const Y=tl([X,q,z,ee],F,ot(D));L[Y]=G}}}return{dataId:l.write(Jh(L,r.dtype),D,r.dtype),shape:D,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5e={kernelName:Y_,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=go(r.shape,c.data.get(r.dataId).values),d=go(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:v,outWidth:w,padInfo:k,strideHeight:S,strideWidth:I,filterHeight:E,filterWidth:j,dilationHeight:A,dilationWidth:T,outShape:$}=Av(r.shape,s.shape,a,o,"NHWC",l);W(i.rank===$.length,()=>`Error in ${Y_}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const D=go($,c.data.get(i.dataId).values),R=EX(s.shape,s.dtype);for(let L=0;L<p;++L)for(let K=0;K<v;++K){const X=K*S-k.top;for(let q=0;q<w;++q){const Q=q*I-k.left;for(let z=0;z<x;++z){let H=Number.MIN_SAFE_INTEGER,ee=0,G=0;for(let Y=0;Y<E;++Y){const ae=X+Y*A;if(ae>=0&&ae<g)for(let ye=0;ye<j;++ye){const xe=Q+ye*T;if(xe>=0&&xe<y){const Ce=u[L][ae][xe][z]+d[Y][ye][z];Ce>H&&(H=Ce,ee=Y,G=ye)}}}R[ee][G][z]+=D[L][K][q][z]}}}return{dataId:c.write(Jh(R,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S5e={kernelName:X_,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:a,pad:o,dilations:l}=n,c=e,u=go(r.shape,c.data.get(r.dataId).values),d=go(s.shape,c.data.get(s.dataId).values),{batchSize:p,inHeight:g,inWidth:y,inChannels:x,outHeight:v,outWidth:w,padInfo:k,strideHeight:S,strideWidth:I,filterHeight:E,filterWidth:j,dilationHeight:A,dilationWidth:T,outShape:$}=Av(r.shape,s.shape,a,o,"NHWC",l);W(i.rank===$.length,()=>`Error in ${X_}, dy must have the same rank as output ${$.length}, but got ${i.rank}`);const D=go($,c.data.get(i.dataId).values),R=EX(r.shape,r.dtype);for(let L=0;L<p;++L)for(let K=0;K<v;++K){const X=K*S-k.top;for(let q=0;q<w;++q){const Q=q*I-k.left;for(let z=0;z<x;++z){let H=Number.MIN_SAFE_INTEGER,ee=X<0?0:X,G=Q<0?0:Q;for(let Y=0;Y<E;++Y){const ae=X+Y*A;if(ae>=0&&ae<g)for(let ye=0;ye<j;++ye){const xe=Q+ye*T;if(xe>=0&&xe<y){const Ce=u[L][ae][xe][z]+d[Y][ye][z];Ce>H&&(H=Ce,ee=ae,G=xe)}}}R[L][ee][G][z]+=D[L][K][q][z]}}}return{dataId:c.write(Jh(R,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:a}=r,{contextOptions:o,imageOptions:l}=a||{},c=l?.alpha||1,u=o?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=i.getContext(u,o?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[p,g]=s.shape.slice(0,2),y=s.shape.length===2?1:s.shape[2],x=n.data.get(s.dataId).values,v=s.dtype==="float32"?255:1,w=new Uint8ClampedArray(g*p*4);for(let S=0;S<p*g;++S){const I=[0,0,0,255*c];for(let j=0;j<y;j++){const A=x[S*y+j];if(s.dtype==="float32"){if(A<0||A>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${A}.`)}else if(s.dtype==="int32"&&(A<0||A>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${A}.`);y===1?(I[0]=A*v,I[1]=A*v,I[2]=A*v):I[j]=A*v}const E=S*4;w[E+0]=Math.round(I[0]),w[E+1]=Math.round(I[1]),w[E+2]=Math.round(I[2]),w[E+3]=Math.round(I[3])}i.width=g,i.height=p;const k=new ImageData(w,g,p);return d.putImageData(k,0,0),s}const C5e={kernelName:n$e,backendName:"cpu",kernelFunc:N5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hv(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Je(s,"sum");let o;s.dtype==="bool"?o=Du({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):o=ml({inputs:{x:s},backend:n});const l=o.shape.length,c=At(i,o.shape),u=Gn(c,l);let d=c,p=o;u!=null&&(p=ei({inputs:{x:o},backend:n,attrs:{perm:u}}),d=nr(d.length,l)),os("sum",d,p.shape.length);const[g,y]=Vr(p.shape,d),x=Si(p.dtype,"int32");let v=tk(n,g,x);const w=Se(y),k=n.data.get(v.dataId).values,S=n.data.get(p.dataId).values;for(let I=0;I<k.length;++I){const E=I*w;let j=0;for(let A=0;A<w;++A)j+=S[E+A];k[I]=j}if(a){const I=ur(v.shape,c),E=v;v=Sn({inputs:{x:v},backend:n,attrs:{shape:I}}),n.disposeIntermediateTensorInfo(E)}return n.disposeIntermediateTensorInfo(o),u!=null&&n.disposeIntermediateTensorInfo(p),v}const I5e={kernelName:CN,backendName:"cpu",kernelFunc:Hv};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=DD(s,i.length);MD(a.length,l,i);const{path:c,steps:u}=FD(o,l),d=u.length;let p=null,g=a.length;const y=[];for(let x=0;x<d;++x){for(const v of u[x]){const{permutationIndices:w,expandDims:k}=OD(g,l[v]);let S;LD(w)?S=i[v]:(S=ei({inputs:{x:i[v]},backend:n,attrs:{perm:w}}),y.push(S));const I=S.shape.slice();for(let E=0;E<k.length;++E)I.splice(k[E],0,1);rn(S.shape,I)||(S=Sn({inputs:{x:S},backend:n,attrs:{shape:I}}),y.push(S)),p===null?p=S:(p=n2({inputs:{a:S,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=Hv({inputs:{x:p},backend:n,attrs:{axis:c[x]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const T5e={kernelName:mj,backendName:"cpu",kernelFunc:E5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Je([r,s],"eluGrad");const i=new Float32Array(Se(s.shape)),a=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<a.length;++l){const c=a[l];c>=0?i[l]=o[l]:i[l]=o[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const A5e={kernelName:gj,backendName:"cpu",kernelFunc:_5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=TD,$5e=_D,P5e=AD,j5e=RD,D5e=$D,O5e=PD,M5e=ln(Xx,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+R5e*n);return e*(1-((((O5e*r+D5e)*r+j5e)*r+P5e)*r+$5e)*r*Math.exp(-n*n))}),F5e={kernelName:Xx,backendName:"cpu",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sk(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,a=s.shape.length,o=s.shape.slice();let l=i;return i<0&&(W(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),o.splice(l,0,1),Sn({inputs:{x:s},backend:n,attrs:{shape:o}})}const L5e={kernelName:KS,backendName:"cpu",kernelFunc:sk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=sr((t,e)=>t/e),xO=Cr(qx,V5e),kA={kernelName:qx,backendName:"cpu",kernelFunc:xO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ate(t,e,n){const r=t.shape,s=r[0],i=r[1],a=n.data.get(t.dataId),o=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,c=[s,i],u=Se(c),d=gs("float32",u),p=gs("float32",u);for(let v=0;v<s;v++){const w=Fh({inputs:{x:o},backend:n,attrs:{begin:[v,0],size:[1,i]}}),k=Fh({inputs:{x:l},backend:n,attrs:{begin:[v,0],size:[1,i]}}),S=xi({inputs:{real:w,imag:k},backend:n}),{real:I,imag:E}=B5e(S,e,n),j=lc(I,E);for(let A=0;A<i;A++){const T=jD(j,A);d[v*i+A]=T.real,p[v*i+A]=T.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(S)}const g=n.makeTensorInfo(c,"float32",d),y=n.makeTensorInfo(c,"float32",p),x=xi({inputs:{real:g,imag:y},backend:n});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}function B5e(t,e,n){const r=Se(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,a=n.data.get(s.complexTensorInfos.imag.dataId).values;if(z5e(r)){const o=SA(i,a,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",o.real),u=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",Hu(r,"float32")),p=ml({inputs:{x:d},backend:n}),g=kA.kernelFunc({inputs:{a:c,b:d},backend:n}),y=kA.kernelFunc({inputs:{a:u,b:p},backend:n}),x=n.data.get(g.dataId).values,v=n.data.get(y.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),{real:x,imag:v}}return o}else{const o=lc(i,a),l=U5e(o,r,e);return bQ(l)}}function z5e(t){return(t&t-1)===0}function SA(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=lc(t,e),a=n/2,o=wQ(i),l=o.real,c=o.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),p=s.makeTensorInfo(u,"float32",c),g=xi({inputs:{real:d,imag:p},backend:s}),y=kQ(i),x=y.real,v=y.imag,w=[x.length],k=s.makeTensorInfo(w,"float32",x),S=s.makeTensorInfo(w,"float32",v),I=xi({inputs:{real:k,imag:S},backend:s}),E=SA(l,c,a,r,s),j=E.real,A=E.imag,T=[j.length],$=s.makeTensorInfo(T,"float32",j),D=s.makeTensorInfo(T,"float32",A),R=xi({inputs:{real:$,imag:D},backend:s}),F=SA(x,v,a,r,s),L=F.real,K=F.imag,X=[L.length],q=s.makeTensorInfo(X,"float32",L),Q=s.makeTensorInfo(X,"float32",K),z=xi({inputs:{real:q,imag:Q},backend:s}),H=NQ(n,r),ee=[H.real.length],G=s.makeTensorInfo(ee,"float32",H.real),Y=s.makeTensorInfo(ee,"float32",H.imag),ae=xi({inputs:{real:G,imag:Y},backend:s}),ye=n2({inputs:{a:ae,b:z},backend:s}),xe=Jp({inputs:{a:R,b:ye},backend:s}),Ce=gO({inputs:{a:R,b:ye},backend:s}),fe=Mh({inputs:{input:xe},backend:s}),Te=Mh({inputs:{input:Ce},backend:s}),ue=Zp({inputs:{input:xe},backend:s}),Ne=Zp({inputs:{input:Ce},backend:s}),Ee=em({inputs:[fe,Te],backend:s,attrs:{axis:0}}),me=em({inputs:[ue,Ne],backend:s,attrs:{axis:0}}),Ze=s.data.get(Ee.dataId).values,Xe=s.data.get(me.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(g),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo(I),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(D),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(G),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(ae),s.disposeIntermediateTensorInfo(ye),s.disposeIntermediateTensorInfo(xe),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo(fe),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(Te),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(Ee),s.disposeIntermediateTensorInfo(me),{real:Ze,imag:Xe}}function U5e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,a=0;for(let o=0;o<e;o++){const l=CQ(s*o,e,n),c=jD(t,o);i+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}n&&(i/=e,a/=e),SQ(r,i,a,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Se(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Sn({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=ate(o,!1,n),c=Sn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const G5e={kernelName:yj,backendName:"cpu",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vO(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,a=i||Tm(s),o=Zn(a,Se(r));return q5e(o,s,a),e.makeTensorInfo(r,a,o)}const H5e={kernelName:xj,backendName:"cpu",kernelFunc:vO};function q5e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K5e={kernelName:vj,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=gs(r.dtype,Se(r.shape)),[a,o,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let p=0;p<a;p++){const g=p*l*o*c;for(let y=0;y<o;y++){const x=y*(l*c);for(let v=0;v<l;v++){const w=v*c;for(let k=0;k<c;k++){const S=Math.round(l-v-1),I=g+x+w+k;let E=u[I];if(S>=0&&S<l){const j=S*c,A=g+x+j+k;E=u[A]}i[I]=E}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=ste({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(a){const v=x;if(u==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const w=Sn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});x=Jp({inputs:{a:x,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else x=Jp({inputs:{a:x,b:a},backend:n});n.disposeIntermediateTensorInfo(v)}if(g){const v=x;if(u==="NCHW"&&g==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=Sn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});x=rk(n,x,g,w,y),n.disposeIntermediateTensorInfo(w)}else x=rk(n,x,g,o,y);n.disposeIntermediateTensorInfo(v)}return x}const Y5e={kernelName:F1,backendName:"cpu",kernelFunc:X5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r;let x=ite({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(a){const v=x;x=Jp({inputs:{a:x,b:a},backend:n}),n.disposeIntermediateTensorInfo(v)}if(g){const v=x;x=rk(n,x,g,o,y),n.disposeIntermediateTensorInfo(v)}return x}const J5e={kernelName:YX,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=Se(r.shape),a=s.shape,o=a[a.length-1],[l,c,u,d]=yD(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const p=n.data.get(s.dataId).values,g=n.bufferSync(r),y=gee(p,g,r.dtype,c,o,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,y.values)}const e6e={kernelName:$X,backendName:"cpu",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r;Je([s,i],"gatherV2");const l=At(a,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let I=0;I<c.length;++I){const E=c[I];W(E<=u-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${u-1}]`)}let d=o;o==null&&(d=0);const p=Se(i.shape),g=BD(s,i,l,d),y=Sn({inputs:{x:s},backend:n,attrs:{shape:[g.batchSize,g.outerSize,g.dimSize,g.sliceSize]}}),x=Sn({inputs:{x:i},backend:n,attrs:{shape:[g.batchSize,p/g.batchSize]}}),v=[g.batchSize,g.outerSize,p/g.batchSize,g.sliceSize],w=n.bufferSync(x),k=n.bufferSync(y),S=yee(k,w,v);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(g.outputShape,S.dtype,S.values)}const n6e={kernelName:YS,backendName:"cpu",kernelFunc:t6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r6e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=Se(r.shape),i=r.shape[r.shape.length-1],a=s/i,o=Sn({inputs:{x:r},backend:n,attrs:{shape:[a,i]}}),l=ate(o,!0,n),c=Sn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const s6e={kernelName:bj,backendName:"cpu",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i6e=ln(nv,t=>Number.isFinite(t)?1:0,"bool"),a6e={kernelName:nv,backendName:"cpu",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o6e=ln(rv,t=>Math.abs(t)===1/0?1:0,"bool"),l6e={kernelName:rv,backendName:"cpu",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c6e=ln(sv,t=>Number.isNaN(t)?1:0,"bool"),u6e={kernelName:sv,backendName:"cpu",kernelFunc:c6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d6e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=kee(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const h6e={kernelName:PX,backendName:"cpu",kernelFunc:d6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6e=ln(av,t=>Math.log1p(t)),p6e={kernelName:av,backendName:"cpu",kernelFunc:f6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6e=sr((t,e)=>t&&e),g6e=Cr(tN,m6e,null,"bool"),y6e={kernelName:tN,backendName:"cpu",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6e=ln(nN,t=>t?0:1,"bool"),v6e={kernelName:nN,backendName:"cpu",kernelFunc:x6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b6e=sr((t,e)=>t||e),w6e=Cr(rN,b6e,null,"bool"),k6e={kernelName:rN,backendName:"cpu",kernelFunc:w6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r;Je(s,"LRN");const c=s.shape[3],u=c-1,d=n.data.get(s.dataId).values,p=Se(s.shape),g=new Float32Array(p);function y(x){const v=x%c;let w=x-v+Math.max(0,v-i);const k=x-v+Math.min(v+i,u);let S=0;for(;w<=k;w++){const I=d[w];S+=I*I}return S}for(let x=0;x<p;x++){const v=y(x),w=d[x]*Math.pow(a+o*v,-l);g[x]=w}return n.makeTensorInfo(s.shape,s.dtype,g)}const N6e={kernelName:sN,backendName:"cpu",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r;Je(a,"LRNGrad");const d=Se(a.shape),p=a.shape[3],g=n.data.get(a.dataId).values,y=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,v=new Float32Array(d),w=d;for(let k=0;k<w;k++){const S=k%p,I=k-S+Math.max(0,S-o),E=k-S+Math.min(p,S+o+1);let j=0;for(let A=I;A<E;A++)j+=Math.pow(y[A],2);j=c*j+l;for(let A=I;A<E;A++){let T=-2*c*u*y[A]*x[k]/j;k===A&&(T+=Math.pow(j,-u)),T*=g[k],v[A]+=T}}return n.makeTensorInfo(a.shape,s.dtype,v)}const I6e={kernelName:kj,backendName:"cpu",kernelFunc:C6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ote(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=n;let l=s.shape;const c=l.length,u=At(i,l);let d=u;const p=Gn(d,c);let g=o.data.get(s.dataId).values;if(p!=null){const I=new Array(c);for(let E=0;E<I.length;E++)I[E]=l[p[E]];g=pO(g,l,s.dtype,p,I),d=nr(d.length,c),l=I}Je(s,"max"),os("max",d,c);const[y,x]=Vr(l,d),v=Se(x),w=Nee(g,v,y,s.dtype),k=o.write(w,y,s.dtype);let S=y;return a&&(S=ur(y,u)),{dataId:k,shape:S,dtype:s.dtype}}const E6e={kernelName:iN,backendName:"cpu",kernelFunc:ote};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Je(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;W(vs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ja(s.shape,i,a,c,o,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&rn(u.inShape,u.outShape))d=ml({inputs:{x:s},backend:n});else{const p=n.data.get(s.dataId).values,g=ot(s.shape),y=yO(p,s.shape,s.dtype,g,u,"max");d=n.makeTensorInfo(u.outShape,s.dtype,y.values)}return d}const _6e={kernelName:aN,backendName:"cpu",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r;Je(s,"maxPool3d");const u=xc(s.shape,i,a,1,o,l,c),d=n.data.get(s.dataId).values,p=rte(d,s.shape,s.dtype,ot(s.shape),u,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}const R6e={kernelName:oN,backendName:"cpu",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:a,strides:o,pad:l,dimRoundingMode:c}=r;Je([s,i],"maxPool3DGrad");const u=xc(i.shape,a,o,1,l,c),d=n.bufferSync(i),p=bze(d,u),g=u.strideDepth,y=u.strideHeight,x=u.strideWidth,v=u.dilationDepth,w=u.dilationHeight,k=u.dilationWidth,S=u.effectiveFilterDepth,I=u.effectiveFilterHeight,E=u.effectiveFilterWidth,j=S-1-u.padInfo.front,A=E-1-u.padInfo.left,T=I-1-u.padInfo.top,$=_t(i.shape,"float32"),D=n.bufferSync(s);for(let R=0;R<u.batchSize;++R)for(let F=0;F<u.inChannels;++F)for(let L=0;L<u.inDepth;++L)for(let K=0;K<u.inHeight;++K)for(let X=0;X<u.inWidth;++X){const q=L-j,Q=K-T,z=X-A;let H=0;for(let ee=0;ee<S;ee+=v){const G=(q+ee)/g;if(!(G<0||G>=u.outDepth||Math.floor(G)!==G))for(let Y=0;Y<I;Y+=w){const ae=(Q+Y)/y;if(!(ae<0||ae>=u.outHeight||Math.floor(ae)!==ae))for(let ye=0;ye<E;ye+=k){const xe=(z+ye)/x;if(xe<0||xe>=u.outWidth||Math.floor(xe)!==xe)continue;const Ce=S*I*E-1-p.get(R,G,ae,xe,F),fe=ee*I*E+Y*E+ye,Te=Ce===fe?1:0;if(Te===0)continue;const ue=D.get(R,G,ae,xe,F);H+=ue*Te}}}$.set(H,R,L,K,X,F)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const P6e={kernelName:Nj,backendName:"cpu",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;Je([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=ja(o.shape,l,c,1,u,d),g=n.data.get(o.dataId).values,y=_t(p.outShape,o.dtype,nte(g,o.shape,o.dtype,p).values),x=p.strideHeight,v=p.strideWidth,w=p.dilationHeight,k=p.dilationWidth,S=p.effectiveFilterHeight,I=p.effectiveFilterWidth,E=I-1-p.padInfo.left,j=S-1-p.padInfo.top,A=_t(o.shape,"float32"),T=n.data.get(s.dataId).values,$=_t(s.shape,"float32",T);for(let D=0;D<p.batchSize;++D)for(let R=0;R<p.inChannels;++R)for(let F=0;F<p.inHeight;++F)for(let L=0;L<p.inWidth;++L){const K=F-j,X=L-E;let q=0;for(let Q=0;Q<S;Q+=w){const z=(K+Q)/x;if(!(z<0||z>=p.outHeight||Math.floor(z)!==z))for(let H=0;H<I;H+=k){const ee=(X+H)/v;if(ee<0||ee>=p.outWidth||Math.floor(ee)!==ee)continue;const G=S*I-1-y.get(D,z,ee,R),Y=Q*I+H,ae=G===Y?1:0;if(ae===0)continue;const ye=$.get(D,z,ee,R);q+=ye*ae}}A.set(q,D,F,L,R)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const D6e={kernelName:Sj,backendName:"cpu",kernelFunc:j6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(t,e,n,r,s){const i=ot(e),a=yO(t,e,n,i,s,"max"),o=nte(t,e,n,s,!0,r);return[a.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6e={kernelName:jX,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;Je(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=ja(r.shape,s,i,[1,1],a),[d,p]=O6e(c,r.shape,r.dtype,o,u),g=l.write(d,u.outShape,r.dtype),y=l.write(p,u.outShape,r.dtype);return[{dataId:g,shape:u.outShape,dtype:r.dtype},{dataId:y,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=At(i,s.shape),c=Vr(s.shape,o)[1],u=Se(c),d=[],p=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);const g=Du({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(g);const y=xO({inputs:{a:g,b:p},backend:n});d.push(y);const x=Hv({inputs:{x:y},backend:n,attrs:{axis:i,keepDims:a}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),x}const L6e={kernelName:lN,backendName:"cpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;Je(s,"min");const o=At(i,s.shape);let l=o;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=ei({inputs:{x:s},backend:n,attrs:{perm:c}}),l=nr(l.length,s.shape.length)),os("min",l,u.shape.length);const[d,p]=Vr(u.shape,l),g=Se(p),y=ys(Se(d),u.dtype),x=n.data.get(u.dataId).values;for(let w=0;w<y.length;++w){const k=w*g;let S=x[k];for(let I=0;I<g;++I){const E=x[k+I];(Number.isNaN(E)||E<S)&&(S=E)}y[w]=S}c!=null&&n.disposeIntermediateTensorInfo(u);const v=n.makeTensorInfo(d,u.dtype,y);if(a){const w=ur(d,o),k=Sn({inputs:{x:v},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(v),k}return v}const B6e={kernelName:cN,backendName:"cpu",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:a}=r;Je(s,"mirrorPad");const o=i.map((S,I)=>S[0]+s.shape[I]+S[1]),l=i.map(S=>S[0]),c=i.map((S,I)=>S[0]+s.shape[I]),u=a==="reflect"?0:1,d=n.data.get(s.dataId).values,p=s.shape.length,g=ot(s.shape),y=Se(o),x=o.length,v=ot(o),w=gs(s.dtype,y);for(let S=0;S<y;S++){let I=_m(S,x,v);for(let j=0;j<x;j++)I[j]<l[j]?I[j]=l[j]*2-I[j]-u:I[j]>=c[j]&&(I[j]=(c[j]-1)*2-I[j]+u);I=I.map((j,A)=>j-l[A]);const E=tl(I,p,g);w[S]=d[E]}return{dataId:n.write(w,o,s.dtype),shape:o,dtype:s.dtype}}const U6e={kernelName:uN,backendName:"cpu",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e=sr(((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})),G6e=Cr(cv,W6e),H6e={kernelName:cv,backendName:"cpu",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lte(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=s.shape.length;let o=i;if(o===-1&&(o=a-1),o!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${o}`);const l=At([o],s.shape),c=ote({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=ur(c.shape,l),d=Sn({inputs:{x:c},backend:n,attrs:{shape:u}}),p=gO({inputs:{a:s,b:d},backend:n}),g=hee({inputs:{x:p},backend:n}),y=Hv({inputs:{x:g},backend:n,attrs:{axis:l,keepDims:!1}}),x=Sn({inputs:{x:y},backend:n,attrs:{shape:u}}),v=xO({inputs:{a:g,b:x},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),v}const q6e={kernelName:TN,backendName:"cpu",kernelFunc:lte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r;Je(s,"multinomial");const l=o?s:lte({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,p=[c,i],g=ys(Se(p),"int32");for(let y=0;y<c;++y){const x=y*u,v=new Float32Array(u-1);v[0]=d[x];for(let S=1;S<v.length;++S)v[S]=v[S-1]+d[x+S];const w=rD.alea(a.toString()),k=y*i;for(let S=0;S<i;++S){const I=w();g[k+S]=v.length;for(let E=0;E<v.length;E++)if(I<v[E]){g[k+S]=E;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(p,"int32",g)}const X6e={kernelName:DX,backendName:"cpu",kernelFunc:K6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e=hD;function Q6e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r;Je(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=Y6e(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const J6e={kernelName:Cj,backendName:"cpu",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e=fD;function eUe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Je(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:p,validOutputs:g}=Z6e(u,d,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const tUe={kernelName:Ij,backendName:"cpu",kernelFunc:eUe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nUe=pD;function rUe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Je(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,p=a,g=o,y=l,x=c,{selectedIndices:v,selectedScores:w}=nUe(u,d,p,g,y,x);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const sUe={kernelName:Ej,backendName:"cpu",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iUe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r;Je(s,"oneHot");const c=Se(s.shape),u=new Float32Array(c*a);u.fill(l);const d=n.data.get(s.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<a&&(u[p*a+d[p]]=o);return n.makeTensorInfo([...s.shape,a],i,u)}const aUe={kernelName:pN,backendName:"cpu",kernelFunc:iUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ik(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Mh({inputs:{input:r},backend:n}),i=ik({inputs:{x:s},backend:n}),a=Zp({inputs:{input:r},backend:n}),o=ik({inputs:{x:a},backend:n}),l=xi({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return vO({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const oUe={kernelName:RN,backendName:"cpu",kernelFunc:ik};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cte(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Mh({inputs:{input:r},backend:n}),i=cte({inputs:{x:s},backend:n}),a=Zp({inputs:{input:r},backend:n}),o=ik({inputs:{x:a},backend:n}),l=xi({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return vO({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const lUe={kernelName:fN,backendName:"cpu",kernelFunc:cte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ute(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return sk({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{KP(i,u.shape,"All tensors passed to stack must have matching shapes"),W(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=sk({inputs:{input:u},backend:n,attrs:{dim:s}});return o.push(d),d}),c=em({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const cUe={kernelName:mN,backendName:"cpu",kernelFunc:ute};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;Je(s,"pad");const o=i.map((k,S)=>k[0]+s.shape[S]+k[1]),l=i.map(k=>k[0]),c=n.data.get(s.dataId).values,u=Se(s.shape),d=s.shape.length,p=ot(s.shape),g=Se(o),y=o.length,x=ot(o),v=gs(s.dtype,g);a!==0&&v.fill(a);for(let k=0;k<u;k++){const I=_m(k,d,p).map((j,A)=>j+l[A]),E=tl(I,y,x);v[E]=c[k]}return{dataId:n.write(v,o,s.dtype),shape:o,dtype:s.dtype}}const dte={kernelName:gN,backendName:"cpu",kernelFunc:uUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dUe=sr((t,e)=>Math.pow(t,e)),hUe=Cr(dv,dUe),fUe={kernelName:dv,backendName:"cpu",kernelFunc:hUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pUe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(w=>n.data.get(w.dataId).values),c=s.map(w=>w.shape),u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,[p,g,y]=Aee(l,c,u,i.shape,i.dtype,d,a.shape),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(y,i.dtype,g);return x.concat([v])}const mUe={kernelName:OX,backendName:"cpu",kernelFunc:pUe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gUe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=Ree(a,r.shape,r.dtype,o,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([u.length],r.dtype,u);return[d,p]}const yUe={kernelName:MX,backendName:"cpu",kernelFunc:gUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xUe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,p=o.map(v=>n.data.get(v.dataId).values),g=o.map(v=>v.shape),[y,x]=$ee(c,s.shape,u,i.shape,i.dtype,d,a.shape,p,g,l);return n.makeTensorInfo(y,i.dtype,x)}const vUe={kernelName:FX,backendName:"cpu",kernelFunc:xUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:a}=n,o=Pee(r,s,a,i);return e.makeTensorInfo([o.length],i,o)}const wUe={kernelName:Tj,backendName:"cpu",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kUe=ln(hv,t=>1/t),SUe={kernelName:hv,backendName:"cpu",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;Je(s,"resizeBilinear");const l=ot(s.shape),[c,u]=o,[d,p,g,y]=s.shape,x=n.data.get(s.dataId).values,v=new Float32Array(Se([d,c,u,y])),w=[i&&c>1?p-1:p,i&&u>1?g-1:g],k=[i&&c>1?c-1:c,i&&u>1?u-1:u];let S=0;const I=w[0]/k[0],E=w[1]/k[1];for(let j=0;j<d;j++)for(let A=0;A<c;A++){let T;a?T=I*(A+.5)-.5:T=I*A;const $=Math.max(0,Math.floor(T)),D=T-$,R=Math.min(p-1,Math.ceil(T)),F=j*l[0]+$*l[1],L=j*l[0]+R*l[1];for(let K=0;K<u;K++){let X;a?X=E*(K+.5)-.5:X=E*K;const q=Math.max(0,Math.floor(X)),Q=X-q,z=Math.min(g-1,Math.ceil(X)),H=F+q*l[2],ee=L+q*l[2],G=F+z*l[2],Y=L+z*l[2];for(let ae=0;ae<y;ae++){const ye=x[H+ae],xe=x[ee+ae],Ce=x[G+ae],fe=x[Y+ae],Te=ye+(Ce-ye)*Q,ue=xe+(fe-xe)*Q,Ne=Te+(ue-Te)*D;v[S++]=Ne}}}return n.makeTensorInfo([d,c,u,y],"float32",v)}const CUe={kernelName:wN,backendName:"cpu",kernelFunc:NUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;Je([i,s],"resizeBilinearGrad");const o=ot(s.shape),[l,c,u,d]=s.shape,[,p,g]=i.shape,y=new Float32Array(l*c*u*d),x=[a&&p>1?c-1:c,a&&g>1?u-1:u],v=[a&&p>1?p-1:p,a&&g>1?g-1:g],w=x[0]/v[0],k=x[1]/v[1],S=n.data.get(i.dataId).values;let I=0;for(let E=0;E<l;E++){const j=E*o[0];for(let A=0;A<p;A++){const T=A*w,$=Math.floor(T),D=Math.min(Math.ceil(T),c-1),R=j+$*o[1],F=j+D*o[1],L=T-$,K=1-L;for(let X=0;X<g;X++){const q=X*k,Q=Math.floor(q),z=Math.min(Math.ceil(q),u-1),H=q-Q,ee=1-H,G=R+Q*o[2],Y=R+z*o[2],ae=F+Q*o[2],ye=F+z*o[2],xe=K*ee,Ce=K*H,fe=L*ee,Te=L*H;for(let ue=0;ue<d;ue++){const Ne=S[I++];y[G+ue]+=Ne*xe,y[Y+ue]+=Ne*Ce,y[ae+ue]+=Ne*fe,y[ye+ue]+=Ne*Te}}}}return n.makeTensorInfo([l,u,c,d],"float32",y)}const EUe={kernelName:Rj,backendName:"cpu",kernelFunc:IUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r;Je(s,"resizeNearestNeighbor");const l=ot(s.shape),[c,u]=o,[d,p,g,y]=s.shape,x=n.data.get(s.dataId).values,v=new Float32Array(d*c*u*y),w=[i&&c>1?p-1:p,i&&u>1?g-1:g],k=[i&&c>1?c-1:c,i&&u>1?u-1:u],S=w[0]/k[0],I=w[1]/k[1];let E=0;for(let j=0;j<d;j++){const A=j*l[0];for(let T=0;T<c;T++){const $=a?S*(T+.5):S*T;let D=Math.min(p-1,i?Math.round($):Math.floor($));a&&(D=Math.max(0,D));const R=A+D*l[1];for(let F=0;F<u;F++){const L=a?I*(F+.5):I*F;let K=Math.min(g-1,i?Math.round(L):Math.floor(L));a&&(K=Math.max(0,K));const X=R+K*l[2];for(let q=0;q<y;q++){const Q=x[X+q];v[E++]=Q}}}}return n.makeTensorInfo([d,c,u,y],s.dtype,v)}const _Ue={kernelName:bN,backendName:"cpu",kernelFunc:TUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AUe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r;Je([i,s],"resizeNearestNeighborGrad");const o=ot(s.shape),l=ot(i.shape),[c,u,d,p]=s.shape,[,g,y]=i.shape,x=new Float32Array(c*u*d*p),v=n.data.get(i.dataId).values,w=[a&&g>1?u-1:u,a&&y>1?d-1:d],k=[a&&g>1?g-1:g,a&&y>1?y-1:y],S=w[0]/k[0],I=w[1]/k[1],E=1/S,j=1/I,A=Math.ceil(E)*2+2,T=Math.ceil(j)*2+2;for(let $=0;$<c;$++){const D=$*o[0];for(let R=0;R<u;R++){const F=D+R*o[1],L=Math.floor(R*E),K=Math.floor(L-A/2);for(let X=0;X<d;X++){const q=F+X*o[2],Q=Math.floor(X*j),z=Math.floor(Q-T/2);for(let H=0;H<p;H++){let ee=0;for(let G=0;G<A;G++){const Y=G+K;if(Y<0||Y>=g)continue;const ae=D+Y*l[1],ye=Y*S,xe=Math.min(u-1,a?Math.round(ye):Math.floor(ye));if(R===xe)for(let Ce=0;Ce<T;Ce++){const fe=Ce+z;if(fe<0||fe>=y)continue;const Te=ae+fe*l[2],ue=fe*I,Ne=Math.min(d-1,a?Math.round(ue):Math.floor(ue));X===Ne&&(ee+=v[Te+H])}}x[q+H]=ee}}}}return n.makeTensorInfo(s.shape,s.dtype,x)}const RUe={kernelName:Aj,backendName:"cpu",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Je(s,"reverse");const a=s.shape.length,o=At(i,s.shape);if(a===0)return ml({inputs:{x:s},backend:n});const l=new ns(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),p=d.slice();o.forEach(g=>p[g]=s.shape[g]-1-p[g]),l.set(c.get(...p),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const PUe={kernelName:kN,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jUe={kernelName:Fj,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=gs(r.dtype,Se(r.shape)),[c,u,d,p]=r.shape,[g,y]=CD(a,u,d),x=255,v=Math.sin(s),w=Math.cos(s),k=o.data.get(r.dataId).values;for(let I=0;I<c;I++){const E=I*d*u*p;for(let j=0;j<u;j++){const A=j*(d*p);for(let T=0;T<d;T++){const $=T*p;for(let D=0;D<p;D++){const R=[c,j,T,D],F=R[2],L=R[1];let K=(F-g)*w-(L-y)*v,X=(F-g)*v+(L-y)*w;K=Math.round(K+g),X=Math.round(X+y);let q=i;if(typeof i!="number"&&(D===3?q=x:q=i[D]),K>=0&&K<d&&X>=0&&X<u){const z=X*(d*p),H=K*p,ee=E+z+H+D;q=k[ee]}const Q=E+A+$+D;l[Q]=q}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DUe=ln(mv,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),OUe={kernelName:mv,backendName:"cpu",kernelFunc:DUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MUe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=tf(i,s,a),p=!0,g=n.bufferSync(s),y=n.bufferSync(i),x=Jd(g,y,a,d,c,l,o,u,0,p);return n.makeTensorInfo(a,x.dtype,x.values)}const FUe={kernelName:LX,backendName:"cpu",kernelFunc:MUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function VUe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function BUe(t,e,n,r,s,i){const a=Zn("int32",n*s);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),c=o*s;for(let u=0;u<s;++u)a[c+u]=i==="left"?LUe(l,e[u+c]):VUe(l,e[u+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zUe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=BUe(o,l,s.shape[0],s.shape[1],i.shape[1],a);return n.makeTensorInfo(i.shape,"int32",c)}const UUe={kernelName:BX,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WUe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Je([r,s,i],"select");const a=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=Si(s.dtype,i.dtype),d=ys(Se(s.shape),u);let p=0;const g=a===0||a>1||s.shape.length===1?1:Se(s.shape.slice(1));for(let y=0;y<o.length;y++)for(let x=0;x<g;x++)o[y]===1?d[p++]=l[y]:d[p++]=c[y];return n.makeTensorInfo(s.shape,u,d)}const GUe={kernelName:SN,backendName:"cpu",kernelFunc:WUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HUe=UN,qUe=WN,KUe=ln(yv,t=>t>=0?qUe*t:HUe*(Math.exp(t)-1)),XUe={kernelName:yv,backendName:"cpu",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe=ln(bv,t=>t<0?-1:t>0?1:0),QUe={kernelName:bv,backendName:"cpu",kernelFunc:YUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JUe=ln(xv,t=>Math.sin(t)),ZUe={kernelName:xv,backendName:"cpu",kernelFunc:JUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe=ln(vv,t=>Math.sinh(t)),tWe={kernelName:vv,backendName:"cpu",kernelFunc:eWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nWe=11920928955078125e-23,p6=Math.log(nWe)+2,rWe=ln(kv,t=>{const e=t>-p6,n=t<p6,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),sWe={kernelName:kv,backendName:"cpu",kernelFunc:rWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;Je([s],"spaceToBatchND");const o=Se(i),l=[[0,0]];l.push(...a);for(let j=1+i.length;j<s.shape.length;++j)l.push([0,0]);const c=dte.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=Dv(c.shape,i,o,!1),d=Ov(u.length,i.length,!1),p=Mv(c.shape,i,o,!1),x=Sn({inputs:{x:c},backend:n,attrs:{shape:u}}),k=ei({inputs:{x},backend:n,attrs:{perm:d}}),E=Sn({inputs:{x:k},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),E}const aWe={kernelName:IN,backendName:"cpu",kernelFunc:iWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oWe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values[0],[d,p,g,y,x]=Mee(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],s.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(v=>Number(v)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const lWe={kernelName:zX,backendName:"cpu",kernelFunc:oWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cWe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=Fee(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const uWe={kernelName:UX,backendName:"cpu",kernelFunc:cWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dWe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=mO(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const hWe={kernelName:WX,backendName:"cpu",kernelFunc:dWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fWe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=mO(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const pWe={kernelName:GX,backendName:"cpu",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mWe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=tf(i,s,o),g=!1,y=n.bufferSync(s);let x;switch(i.dtype){case"bool":{const v=n.bufferSync(i),w=!!n.data.get(a.dataId).values[0];x=Jd(y,v,o,p,u,c,l,d,w,g);break}case"float32":{const v=n.bufferSync(i),w=n.data.get(a.dataId).values[0];x=Jd(y,v,o,p,u,c,l,d,w,g);break}case"int32":{const v=n.bufferSync(i),w=n.data.get(a.dataId).values[0];x=Jd(y,v,o,p,u,c,l,d,w,g);break}case"string":{const v=n.bufferSync(i),w=Au(n.data.get(a.dataId).values[0]);x=Jd(y,v,o,p,u,c,l,d,w,g);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(o,x.dtype,x.values)}const gWe={kernelName:HX,backendName:"cpu",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=At(a,s.shape)[0],l=VD(s,i,o),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const p=[...u];p[o]=d;const g=Fh({inputs:{x:s},backend:n,attrs:{begin:c,size:p}});return c[o]+=d,g})}const xWe={kernelName:EN,backendName:"cpu",kernelFunc:yWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vWe={kernelName:$j,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Je(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];i[o]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe=ln(_v,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),wWe={kernelName:_v,backendName:"cpu",kernelFunc:bWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r;Je(s,"stridedSlice");const{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:v,isSimpleSlice:w,begin:k,end:S,strides:I}=kD(s.shape,i,a,o,l,c,u,d,p);let E;if(x)E=Sn({inputs:{x:s},backend:n,attrs:{shape:y}});else if(v||w){W(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const j=vD(k,S,I),A=Fh({inputs:{x:s},backend:n,attrs:{begin:k,size:j}});E=Sn({inputs:{x:A},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(A)}else{const j=n.bufferSync(s),A=Bee(g,j,I,k);E=n.makeTensorInfo(y,A.dtype,A.values)}return E}const SWe={kernelName:jj,backendName:"cpu",kernelFunc:kWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NWe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,p=n.data.get(u.dataId).values,g=n.data.get(d.dataId).values,[y,x]=zee(p,g,s,i,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const CWe={kernelName:qX,backendName:"cpu",kernelFunc:NWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IWe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values[0],[c,u,d]=Uee(o,l,s),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const EWe={kernelName:KX,backendName:"cpu",kernelFunc:IWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(i.dataId).values,o=Wee(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const _We={kernelName:XX,backendName:"cpu",kernelFunc:TWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AWe=ln(Iv,t=>Math.tan(t)),RWe={kernelName:Iv,backendName:"cpu",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $We=ln(Ev,t=>Math.tanh(t)),PWe={kernelName:Ev,backendName:"cpu",kernelFunc:$We};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jWe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:a,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=tf(i,s,r.shape),d=!1,p=n.bufferSync(s),g=n.bufferSync(i),y=n.bufferSync(r),x=Jd(p,g,r.shape,u,l,o,a,c,y,d);return n.makeTensorInfo(r.shape,x.dtype,x.values)}const DWe={kernelName:VX,backendName:"cpu",kernelFunc:jWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Je(s,"tile");const a=Hee(n.bufferSync(s),i);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const MWe={kernelName:Tv,backendName:"cpu",kernelFunc:OWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r;Je(s,"topk");const o=n.data.get(s.dataId).values,[l,c]=Kee(o,s.shape,s.dtype,i,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const LWe={kernelName:Dj,backendName:"cpu",kernelFunc:FWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VWe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=n,[u,d,p,g]=s.shape,[y,x]=c??[d,p],v=[u,y,x,g],w=ot(s.shape),k=w[0],S=w[1],I=w[2],E=ot(v),j=E[0],A=E[1],T=E[2],$=gs(s.dtype,Se(v));$.fill(l);const D=r.data.get(s.dataId).values,R=r.data.get(i.dataId).values;for(let L=0;L<u;++L){const K=i.shape[0]===1?R:R.subarray(L*8,L*8+8);for(let X=0;X<y;++X)for(let q=0;q<x;++q)for(let Q=0;Q<g;++Q){let z;const H=K[6]*q+K[7]*X+1;if(H===0)continue;const ee=(K[0]*q+K[1]*X+K[2])/H,G=(K[3]*q+K[4]*X+K[5])/H,Y=m6(ee,p,o),ae=m6(G,d,o);switch(a){case"nearest":z=HWe(D,d,p,k,S,I,L,ae,Y,Q,l);break;case"bilinear":z=qWe(D,d,p,k,S,I,L,ae,Y,Q,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const ye=L*j+X*A+q*T+Q;$[ye]=z}return r.makeTensorInfo(v,s.dtype,$)}return{dataId:r.write($,v,s.dtype),shape:s.shape,dtype:s.dtype}}const BWe={kernelName:Oj,backendName:"cpu",kernelFunc:VWe};function m6(t,e,n){switch(n){case"reflect":return zWe(t,e);case"wrap":return UWe(t,e);case"nearest":return GWe(t,e);case"constant":default:return WWe(t)}}function zWe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Ih(0,n,e-1)}function UWe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Ih(0,n,e-1)}function WWe(t,e){return t}function GWe(t,e){return Ih(0,t,e-1)}function ny(t,e,n,r,s,i,a,o,l,c,u){const d=a*r+o*s+l*i+c;return 0<=o&&o<e&&0<=l&&l<n?t[d]:u}function HWe(t,e,n,r,s,i,a,o,l,c,u){const d=Math.round(o),p=Math.round(l);return ny(t,e,n,r,s,i,a,d,p,c,u)}function qWe(t,e,n,r,s,i,a,o,l,c,u){const d=Math.floor(o),p=Math.floor(l),g=d+1,y=p+1,x=(y-l)*ny(t,e,n,r,s,i,a,d,p,c,u)+(l-p)*ny(t,e,n,r,s,i,a,d,y,c,u),v=(y-l)*ny(t,e,n,r,s,i,a,g,p,c,u)+(l-p)*ny(t,e,n,r,s,i,a,g,y,c,u);return(g-o)*x+(o-d)*v}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KWe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Je(i,"unique");const a=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=Xee(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const XWe={kernelName:Mj,backendName:"cpu",kernelFunc:KWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YWe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s.shape.length,o=s.shape[i],l=new Array(a-1);let c=0;for(let g=0;g<a;g++)g!==i&&(l[c++]=s.shape[g]);const u=new Array(a).fill(0),d=s.shape.slice();d[i]=1;const p=new Array(o);for(let g=0;g<p.length;g++){u[i]=g;const y=Fh({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});p[g]=Sn({inputs:{x:y},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(y)}return p}const QWe={kernelName:_N,backendName:"cpu",kernelFunc:YWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r;Je(s,"unsortedSegmentSum");const o=s.shape.length,l=i.shape.length,c=[],u=[],d=o-l;let p=i;for(let y=0;y<d;++y){const x=sk({inputs:{input:p},backend:n,attrs:{dim:y+1}});p=x,u.push(x)}for(let y=0;y<a;++y){const x=Hu(y,"int32"),v=n.makeTensorInfo([],"int32",x),w=uee({inputs:{a:v,b:p},backend:n}),k=Du({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),S=n2({inputs:{a:k,b:s},backend:n}),I=Hv({inputs:{x:S},backend:n,attrs:{axis:0,keepDims:!1}});c.push(I),u.push(v),u.push(w),u.push(k),u.push(S),u.push(I)}const g=ute({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const ZWe={kernelName:AN,backendName:"cpu",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eGe=[KBe,TVe,YBe,JBe,jVe,eze,nze,sze,aze,lze,uze,hze,pze,yze,vze,kze,Nze,Ize,Tze,HBe,Aze,$ze,jze,OVe,Oze,$Ve,FVe,Fze,_Ve,Vze,zze,Uze,Gze,qze,Xze,Qze,Zze,t5e,r5e,i5e,o5e,c5e,d5e,f5e,p5e,g5e,x5e,b5e,w5e,k5e,S5e,C5e,T5e,LBe,A5e,LVe,F5e,VVe,L5e,zVe,G5e,H5e,K5e,WVe,HVe,Y5e,J5e,e6e,n6e,KVe,YVe,AVe,s6e,Bze,a6e,l6e,u6e,VBe,JVe,eBe,h6e,nBe,p6e,y6e,v6e,k6e,N6e,I6e,E6e,sBe,_6e,R6e,P6e,D6e,M6e,L6e,B6e,aBe,U6e,H6e,X6e,lBe,uBe,J6e,tUe,sUe,hBe,aUe,lUe,cUe,dte,fUe,zBe,mBe,mUe,yUe,vUe,wUe,RVe,kA,SUe,UBe,WBe,GBe,CUe,EUe,_Ue,RUe,PUe,jUe,OUe,SBe,FUe,UUe,GUe,XUe,CBe,QUe,ZUe,tWe,IBe,q6e,sWe,aWe,lWe,uWe,hWe,pWe,gWe,xWe,_Be,vWe,RBe,PBe,wWe,SWe,CWe,EWe,_We,MBe,I5e,RWe,PWe,DWe,MWe,LWe,BWe,fBe,XWe,QWe,ZWe,oUe];for(const t of eGe)QX(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ud={},Xb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function tGe(t,e){Ud[t]=e}function No(t,e){if(!(t in Ud)||e!=null){const r=rGe(t,e);if(r!==null)Ud[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Ud[t];return n==null||n.isContextLost()?(delete Ud[t],No(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Ud[t])}function nGe(t){if(!ge().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function rGe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??nGe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Ud[t]},!1),ge().getBool("SOFTWARE_WEBGL_ENABLED")&&(Xb.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Xb)||n.getContext("experimental-webgl",Xb):n.getContext("webgl2",Xb)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tx;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(tx||(tx={}));var Ui;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Ui||(Ui={}));var Jr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Jr||(Jr={}));function qv(t,e){return[e,t]}function sGe(t,e){return t*e}function Yb(t){const e=Se(t),n=Math.ceil(e/4);return G_(n)}function Mm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function iGe(t,e){const[n,r]=Mm(t,e);return n*r*4}function bO(t,e){const n=t;let r,s,i,a,o,l,c,u,d,p;return ge().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,a=n.RGBA32F,o=n.RED,c=4,u=1,d=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,a=n.RGBA,o=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(t,e){const n=e();return ge().getBool("DEBUG")&&aGe(t),n}function aGe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+uGe(t,e))}const oGe=596e-10,lGe=65504;function cGe(t){return!!(ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||oGe<Math.abs(t)&&Math.abs(t)<lGe)}function uGe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Qb(t,e){return bc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function dGe(t,e){const n=bc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ze(t,()=>t.shaderSource(n,e)),ze(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function hGe(t,e){const n=bc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ze(t,()=>t.shaderSource(n,e)),ze(t,()=>t.compileShader(n)),ge().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw hte(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const fGe=/ERROR: [0-9]+:([0-9]+):/g;function hte(t,e){const n=fGe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,a=s.map((d,p)=>wp((p+1).toString(),i)+d);let o=0;for(let d=0;d<a.length;d++)o=Math.max(a[d].length,o);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${wp(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function pGe(t){return bc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function mGe(t,e){if(ze(t,()=>t.linkProgram(e)),!ge().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function rT(t,e){if(ze(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function gGe(t,e){const n=bc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ze(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function yGe(t,e){const n=bc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ze(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ze(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function xGe(t){return bc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function vGe(t,e){const n=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function bGe(t){return bc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function g6(t,e,n,r,s,i,a){const o=t.getAttribLocation(e,n);return o===-1?!1:(ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ze(t,()=>t.vertexAttribPointer(o,s,t.FLOAT,!1,i,a)),ze(t,()=>t.enableVertexAttribArray(o)),!0)}function wGe(t,e,n){IGe(t,n),ze(t,()=>t.activeTexture(t.TEXTURE0+n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function kGe(t,e,n){return bc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function SGe(t,e,n){return t.getUniformLocation(e,n)}function NGe(t,e,n,r){ze(t,()=>wGe(t,e,r)),ze(t,()=>t.uniform1i(n,r))}function sT(t,e,n){ze(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ze(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function y6(t,e){ze(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ze(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Jb(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+CGe(t,e))}function CGe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function bc(t,e,n){const r=ze(t,()=>e());if(r==null)throw new Error(n);return r}function IGe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function tm(t,e=2){return Se(t.slice(0,t.length-e))}function nm(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Zb(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[tm(t),...nm(t)]),e}function EGe(t,e=!1){let n=ge().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ge().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ge().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?qP(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Gu(t).newShape);let s=Se(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const a=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||a)if(e){const o=tm(t);let l=2,c=2;t.length&&([l,c]=nm(t)),s=o*(l/2)*(c/2),i=G_(s).map(u=>u*2)}else i=G_(s);return i}function ew(t){return t%2===0}function ak(t,e){if(t=t.slice(-2),e=e.slice(-2),rn(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||ew(n)&&ew(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&ew(t[0])&&ew(e[0])}let iT,aT;function TGe(t){if(iT==null){const e=No(t);iT=e.getParameter(e.MAX_TEXTURE_SIZE)}return iT}function _Ge(t){if(aT==null){const e=No(t);aT=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,aT)}function AGe(t){if(t===0)return 0;let e;const n=No(t);return Ia(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:Ia(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function Ia(t,e){return t.getExtension(e)!=null}function x6(t){try{if(No(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function RGe(t){if(t===0)return!1;const e=No(t);if(t===1){if(!Ia(e,"OES_texture_float"))return!1}else if(!Ia(e,"EXT_color_buffer_float"))return!1;return NA(e)}function $Ge(t){if(t===0)return!1;const e=No(t);if(t===1){if(!Ia(e,"OES_texture_float")||!Ia(e,"WEBGL_color_buffer_float"))return!1}else{if(Ia(e,"EXT_color_buffer_float"))return NA(e);const r="EXT_color_buffer_half_float";if(Ia(e,r)){const s=e.getExtension(r);return PGe(e,s)}return!1}return NA(e)}function NA(t){const e=bO(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),a}function PGe(t,e){const n=bO(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(a),o}function jGe(t){return t!==2?!1:No(t).fenceSync!=null}function Kv(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&W(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rt=ge();rt.registerFlag("HAS_WEBGL",()=>rt.getNumber("WEBGL_VERSION")>0);rt.registerFlag("WEBGL_VERSION",()=>x6(2)?2:x6(1)?1:0);rt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);rt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>rt.get("WEBGL_VERSION")===2);rt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);rt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);rt.registerFlag("WEBGL_PACK",()=>rt.getBool("HAS_WEBGL"));rt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_CLIP",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_REDUCE",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_LAZILY_UNPACK",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_CONV_IM2COL",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>rt.getBool("WEBGL_PACK"));rt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>TGe(rt.getNumber("WEBGL_VERSION")));rt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>_Ge(rt.getNumber("WEBGL_VERSION")));rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=rt.getNumber("WEBGL_VERSION");return t===0?0:AGe(t)});rt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>rt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!uY());rt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>RGe(rt.getNumber("WEBGL_VERSION")));rt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>rt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:rt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));rt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>$Ge(rt.getNumber("WEBGL_VERSION")));rt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>jGe(rt.getNumber("WEBGL_VERSION")));rt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>rt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);rt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});rt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>uY()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});rt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);rt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);rt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);rt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);rt.registerFlag("WEBGL_EXP_CONV",()=>!1);rt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>rt.getBool("IS_TEST"));rt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);rt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);rt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);rt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(){let t,e,n,r,s,i,a,o,l,c;return ge().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",a="out vec4 outputColor;",o=ge().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",a="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:a,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sf(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / ${s}`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${a}; ${o};`}).join("")}function r2(t,e,n="index"){const r=ot(e);return r.map((s,i)=>{const a=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,o=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${a}; ${o};`}).join("")}function DGe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function OGe(t,e,n="index"){const r=t.map((i,a)=>a),s=DGe(r,e);return s.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${s[a]}`,l=a===s.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s[a]}`:`index -= ${t[a]} * ${s[a]}`;return`${o}; ${l};`}).join("")}function wO(t){const e=ot(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function kO(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const fte=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:pte}=N4e;function MGe(t,e,n){const r=[];if(t.forEach(g=>{const y=Se(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=SO(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(g=>FGe(g,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=e.texShape,o=Vs(),l=BGe(o);let c,u,d=WGe(o);return e.isPacked?(c=LGe(e.logicalShape,a,n.enableShapeUniforms),u=UGe(o)):(c=VGe(e.logicalShape,a,n.enableShapeUniforms),u=zGe(o)),n.packedInputs&&(d+=KGe),[d,l,u,s,c,i,n.userCode].join(`
`)}function Fm(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return a8e(t,e);case 1:return l8e(t,e);case 2:return u8e(t,e);case 3:return h8e(t,e);case 4:return p8e(t,e);case 5:return m8e(t);case 6:return g8e(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function mte(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return i8e(t);case 1:return o8e(t,e);case 2:return c8e(t,e);case 3:return d8e(t,e);default:return f8e(t,e)}}function FGe(t,e,n=!1,r){let s="";n?s+=mte(t,r):s+=Fm(t,r);const i=t.shapeInfo.logicalShape,a=e.logicalShape;return i.length<=a.length&&(n?s+=y8e(t,e):s+=x8e(t,e)),s}function LGe(t,e,n){switch(t.length){case 0:return gte();case 1:return XGe(t,e,n);case 2:return r8e(t,e,n);case 3:return QGe(t,e,n);default:return ZGe(t,e,n)}}function VGe(t,e,n){switch(t.length){case 0:return gte();case 1:return YGe(t,e,n);case 2:return s8e(t,e,n);case 3:return JGe(t,e,n);case 4:return e8e(t,e,n);case 5:return t8e(t,e);case 6:return n8e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function BGe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function zGe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function UGe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function WGe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${GGe}
    ${HGe}
    ${qGe}
  `}const GGe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,HGe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,qGe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,KGe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function gte(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function XGe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function YGe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function QGe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function JGe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${r2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=sf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function ZGe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let a=i,o="",l="b, r, c";for(let c=2;c<t.length-1;c++)a*=t[t.length-c-1],o=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+o,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function e8e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${r2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=sf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function t8e(t,e){const n=sf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function n8e(t,e){const n=sf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function r8e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(rn(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function s8e(t,e,n){return rn(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function af(t){return`offset${t}`}function i8e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Vs();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function a8e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=af(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function o8e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Vs();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function l8e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Lm(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],a=s[1];if(a===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=af(n);return a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${a}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function c8e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=i[0],o=i[1],l=Vs();if(i!=null&&rn(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function u8e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&rn(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=i[0],g=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:o}=Gu(n),l=a;if(l.length<n.length){const p=Vm(t,l),g=["row","col"];return`
      ${Fm(p,e)}
      float ${s}(int row, int col) {
        return ${s}(${Bm(g,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Lm(t)}
      }
    `;const c=i[0],u=i[1],d=af(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function d8e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=Vm(t,p),x=["b","row","col"];return`
        ${mte(y,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${Bm(x,g)});
        }
      `}const o=Vs();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function h8e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],{newShape:o,keptDims:l}=Gu(n),c=o;if(c.length<n.length){const x=Vm(t,c),v=["row","col","depth"];return`
        ${Fm(x,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${Bm(v,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${a}, 1)));
        ${Lm(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],p=u[1],g=t.shapeInfo.flatOffset;if(p===i&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===a&&g==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=af(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${a} + depth + ${y};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function f8e(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Vs();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,a=i.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[a-1]/2);let p=d*Math.ceil(i[a-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let x=2;x<a-1;x++)g=`int b${x}, `+g,p*=i[a-x-1],y=`b${x} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function p8e(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,o=n[1]*a,{newShape:l,keptDims:c}=Gu(n);if(l.length<n.length){const k=Vm(t,l),S=["row","col","depth","depth2"];return`
      ${Fm(k,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${Bm(S,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${a}, ${i}, 1)));
        ${Lm(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1],y=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(g===o&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${y}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=af(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${x}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function m8e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,a=e[2]*i,o=e[1]*a,{newShape:l,keptDims:c}=Gu(e);if(l.length<e.length){const x=Vm(t,l),v=["row","col","depth","depth2","depth3"];return`
      ${Fm(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Bm(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${a}, ${i}, ${s})) +
          depth3;
        ${Lm(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],g=d[1];if(g===o&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=af(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${a} + depth * ${i} +
          depth2 * ${s} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function g8e(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Gu(e);if(s.length<e.length){const v=Vm(t,s),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${Fm(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Bm(w,i)});
      }
    `}const a=e[5],o=e[4]*a,l=e[3]*o,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${Lm(t)}
      }
    `;const d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,g=p[0],y=p[1];if(y===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${o}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===a&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=af(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${o} + depth3 * ${a} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Lm(t){const e=t.name,n=Se(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function y8e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o=pte(t.shapeInfo.logicalShape,e.logicalShape),l=dn(a),c=a-i;let u;const d=["x","y","z","w","u","v"];i===0?u="":a<2&&o.length>=1?u="coords = 0;":u=o.map(k=>`coords.${d[k+c]} = 0;`).join(`
`);let p="";a<2&&i>0?p="coords":p=t.shapeInfo.logicalShape.map((k,S)=>`coords.${d[S+c]}`).join(", ");let g="return outputValue;";const x=Se(t.shapeInfo.logicalShape)===1,w=Se(e.logicalShape)===1;if(i===1&&!x&&!w)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!w)a===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(o.length){const k=i-2,S=i-1;o.indexOf(k)>-1&&o.indexOf(S)>-1?g="return vec4(outputValue.x);":o.indexOf(k)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(S)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function x8e(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,a=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&rn(a,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=dn(l),u=pte(t.shapeInfo.logicalShape,e.logicalShape),d=l-o;let p;const g=["x","y","z","w","u","v"];o===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(x=>`coords.${g[x+d]} = 0;`).join(`
`);let y="";return l<2&&o>0?y="coords":y=t.shapeInfo.logicalShape.map((x,v)=>`coords.${g[v+d]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function dn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function SO(t,e,n){const{newShape:r,keptDims:s}=Gu(e),i=e.length,a=t&&i===3&&e[0]===1,o=a?e.slice(1):r,l=!t&&i>1&&!rn(e,n)&&r.length<i||a;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function Vm(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Bm(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(t,e,n,r){const s=n.map((u,d)=>{const p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:p}}),i=s.map(u=>u.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=MGe(s,a,e),l=hGe(t.gl,o),c=t.createProgram(l);return ge().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:a},yte(t,e,c)))}function yte(t,e,n){const r=[],s=[];let i,a,o,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),ge().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const p={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(p.shape=t.getUniformLocation(n,`${d}Shape`,u),p.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(p)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),o=t.getUniformLocation(n,"outShapeStrides",u),a=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:a}}function v6(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],a=i.shape;if(!rn(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(n.isUniform&&i.isUniform)return;const o=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!rn(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function b8e(t,e,n,r,s){e.program.enableShapeUniforms||(v6(e.inShapeInfos,n),v6([e.outShapeInfo],[r]));const i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,a[0],a[1]):t.setOutputMatrixTexture(i.texture,a[0],a[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ge().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:p,texShape:g}=e.variablesLocations[l];if(p){const{uniformShape:y}=SO(e.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:t.gl.uniform1iv(p,new Int32Array(y));break;case 2:t.gl.uniform2iv(p,new Int32Array(y));break;case 3:t.gl.uniform3iv(p,new Int32Array(y));break;case 4:t.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&t.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(Se(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),t.gl.uniform1fv(u,y)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=ot(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function w8e(t,e,n){let r="";e.concat(n).forEach(a=>{const o=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=SO(t.packedInputs,a.shape,l);let p="",g="",y="";if(u.length===1&&t.packedInputs){const E=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${E[0]>1}_${E[1]>1}`}else if(u.length===2&&!t.packedInputs)g=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const E=ot(u);y=`${E[0]===l[1]}_${E[E.length-1]===l[1]}`}const x=a.shape.length,v=u.length===2&&rn(a.shape,l),w=Se(a.shape)===1,k=Kp(a.shape,n.shape),S=!t.packedInputs&&x===n.shape.length&&rn(l,n.texData.texShape),I=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${S}_${c?d:""}_${u.length}_${w}_${k}_${v}_${p}_${g}_${y}_${I}_${o}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${o}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${ge().getNumber("WEBGL_VERSION")}`,i}function ws(t){return ge().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=tx.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Vs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?r2(["r","c","d"],e):sf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S8e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=tx.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Vs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?r2(["r","c","d"],e):sf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N8e{constructor(e){this.variableNames=["A"],this.outTexUsage=Ui.DOWNLOAD;const n=Vs();this.outputShape=e,this.userCode=`
      ${fte}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C8e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ui.DOWNLOAD;const n=Vs();this.outputShape=e,this.userCode=`
      ${fte}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8e={R:0,G:1,B:2,A:3};class b6{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Vs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let o=0;o<r.length;o++){const l=r[o];a+=`
          if(offset == ${o}) {
            result = values[${I8e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?kO():wO(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E8e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Vs();this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let o=0;o<=1;o++){const l=a*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?kO():wO(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const e=Vs(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return dGe(t,n)}function _8e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return gGe(t,e)}function A8e(t){const e=new Uint16Array([0,1,2,2,1,3]);return yGe(t,e)}function Xv(t,e,n,r,s,i){vGe(e,n);const a=xGe(t),o=t.TEXTURE_2D;return ze(t,()=>t.bindTexture(o,a)),ze(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ze(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ze(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),ze(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),ge().getNumber("WEBGL_VERSION")===1?ze(t,()=>t.texImage2D(o,0,r,e,n,0,s,i,null)):ze(t,()=>t.texStorage2D(o,1,r,e,n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:a,texShape:[n,e]}}function xte(t){return t.internalFormatFloat}function R8e(t,e,n,r){const[s,i]=qv(e,n);return Xv(t,s,i,xte(r),r.textureFormatFloat,t.FLOAT)}function vte(t){return t.internalFormatHalfFloat}function $8e(t,e,n,r){const[s,i]=qv(e,n);return Xv(t,s,i,vte(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function bte(t){return t.downloadTextureFormat}function P8e(t,e,n,r){const[s,i]=qv(e,n);return Xv(t,s,i,bte(r),t.RGBA,t.UNSIGNED_BYTE)}function wte(t){return t.internalFormatPackedFloat}function j8e(t,e,n,r){const[s,i]=Mm(e,n);return Xv(t,s,i,wte(r),t.RGBA,t.FLOAT)}function kte(t){return t.internalFormatPackedHalfFloat}function D8e(t,e,n,r){const[s,i]=Mm(e,n);return Xv(t,s,i,kte(r),t.RGBA,r.textureTypeHalfFloat)}function O8e(t,e,n){return ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),g6(t,e,"clipSpacePos",n,3,20,0)&&g6(t,e,"uv",n,2,20,12)}function M8e(t,e,n,r,s,i){ze(t,()=>t.bindTexture(t.TEXTURE_2D,e));let a,o,l;s instanceof Uint8Array?(a=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(n*r*4),o=t.FLOAT,l=i.internalFormatPackedFloat),a.set(s),ge().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,a)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,a)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function F8e(t,e,n){ze(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ge().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ge().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function L8e(t,e,n,r){const s=t.createBuffer();ze(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=4*4*e*n;return ze(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),ze(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ze(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function V8e(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function B8e(t,e,n,r){const[s,i]=qv(e,n),a=4,o=new Uint8Array(sGe(e*n,a));return ze(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function z8e(t,e,n,r,s,i,a,o){const l=t,c=new Float32Array(iGe(i,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function U8e(t,e,n){const r=new Float32Array(e*n*4);return ze(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oT{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ge().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,tGe(n,e)):this.gl=No(n),e=this.gl,ge().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>ze(i,()=>i.createVertexArray()),this.bindVertexArray=a=>ze(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>ze(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>ze(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ze(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>ze(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>ze(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>ze(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ge().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=Qb(this.gl,i),Ia(this.gl,a))this.textureHalfFloatExtension=Qb(this.gl,a);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ia(this.gl,s))this.colorBufferHalfFloatExtension=Qb(this.gl,s);else if(ge().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ia(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(Ia(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=_8e(this.gl),this.indexBuffer=A8e(this.gl),this.framebuffer=bGe(this.gl),this.textureConfig=bO(this.gl,this.textureHalfFloatExtension)}get debug(){return ge().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ze(e,()=>e.finish()),ze(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ze(e,()=>e.deleteFramebuffer(this.framebuffer)),ze(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ze(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ze(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),R8e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),$8e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),P8e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),F8e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),M8e(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),D8e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),j8e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(y6(this.gl,this.framebuffer),this.outputTexture=null),ze(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>B8e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,a){return z8e(this.gl,e,n,r,s,i,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return V8e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=L8e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ge().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const a=s.clientWaitSync(i,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=i}else ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>U8e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=T8e(n));const r=pGe(n);ze(n,()=>n.attachShader(r,this.vertexShader)),ze(n,()=>n.attachShader(r,e)),mGe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&rT(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ze(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),O8e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ze(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&rT(this.gl,this.program),ze(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?kGe(this.gl,e,n):SGe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ze(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),NGe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=Mm(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&rT(this.gl,this.program),Jb(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ze(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ze(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qb(this.gl,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await n5(()=>this.disposed||this.isQueryAvailable(e,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=W8e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ge().platform&&(r=ge().platform.setTimeoutCustom.bind(ge().platform)),n5(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),sT(this.gl,e,this.framebuffer),this.debug&&Jb(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(sT(this.gl,this.outputTexture,this.framebuffer),this.debug&&Jb(this.gl)):y6(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;sT(s,e,this.framebuffer),this.debug&&Jb(s),this.outputTexture=e,ze(s,()=>s.viewport(0,0,n,r)),ze(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),ze(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function W8e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:G8e,bincountImpl:Ste,bincountReduceImpl:H8e,bitwiseAndImpl:q8e,castImpl:K8e,ceilImpl:X8e,concatImpl:Y8e,equalImpl:Q8e,expImpl:J8e,expm1Impl:Z8e,floorImpl:e9e,gatherNdImpl:t9e,gatherV2Impl:n9e,greaterImpl:r9e,greaterEqualImpl:s9e,lessImpl:i9e,lessEqualImpl:a9e,linSpaceImpl:o9e,logImpl:l9e,maxImpl:c9e,maximumImpl:u9e,minimumImpl:d9e,multiplyImpl:h9e,negImpl:f9e,notEqualImpl:p9e,prodImpl:m9e,raggedGatherImpl:g9e,raggedRangeImpl:y9e,raggedTensorToTensorImpl:x9e,rangeImpl:v9e,rsqrtImpl:b9e,scatterImpl:w9e,sigmoidImpl:k9e,simpleAbsImpl:Nte,sliceImpl:S9e,sparseFillEmptyRowsImpl:N9e,sparseReshapeImpl:C9e,sparseSegmentReductionImpl:Cte,sqrtImpl:I9e,staticRegexReplaceImpl:E9e,stridedSliceImpl:T9e,stringNGramsImpl:_9e,stringSplitImpl:A9e,stringToHashBucketFastImpl:R9e,subImpl:$9e,tileImpl:P9e,topKImpl:j9e,transposeImpl:NO,uniqueImpl:D9e}=FBe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Os(t,e){return e===1?[t]:Ite(t,e)}function O9e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M9e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ws(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Os("rc",this.rank),r=dn(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ete{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${F9e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?kO():wO(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function F9e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?OGe(["r","c","d"],"inputShape"):sf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class L9e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=k6(n,r),i=S6(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const a=w6(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let o;return s===Jr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Jr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Jr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Jr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Jr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=k6(r,s),a=S6(n,i,s);a in this.freeTextures||(this.freeTextures[a]=[]);const o=w6(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ge().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const c=this.usedTextures[a],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function V9e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function w6(t,e,n,r,s){const i=B9e(e,r);let a;if(s){const[l,c]=Mm(t[0],t[1]);a=l*c}else{const[l,c]=qv(t[0],t[1]);a=l*c}const o=V9e(n,i);return a*o}function B9e(t,e){switch(t){case Jr.PACKED_2X2_FLOAT32:return wte(e);case Jr.PACKED_2X2_FLOAT16:return kte(e);case Jr.UNPACKED_FLOAT32:return xte(e);case Jr.UNPACKED_FLOAT16:return vte(e);case Jr.PACKED_4X1_UNSIGNED_BYTE:return bte(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function z9e(t){return ge().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Jr.PACKED_2X2_FLOAT32:Jr.UNPACKED_FLOAT32:t?Jr.PACKED_2X2_FLOAT16:Jr.UNPACKED_FLOAT16}function k6(t,e){if(t===Ui.UPLOAD)return Jr.PACKED_2X2_FLOAT32;if(t===Ui.RENDER||t==null)return z9e(e);if(t===Ui.DOWNLOAD||t===Ui.PIXELS)return Jr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function S6(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yo{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Oa="if (isnan(x)) return x;",U9e="return x;",N6="return abs(x);",W9e="return (x >= 0.0) ? x : (exp(x) - 1.0);",G9e=Oa+`
  return (x < 0.0) ? 0.0 : x;
`,H9e=Oa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Yc="return x;",q9e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K9e="return x;",X9e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Y9e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Q9e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,J9e="return 1.0 / (1.0 + exp(-1.0 * x));";class tu{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z9e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);const n=e.length,r=Os("rc",n),s=dn(n),i=O9e(n,r),a=r.slice(-2),o=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eHe=JY,tHe=1e-7,nHe=1e-4,tw={};function rHe(t){return t in tw||(tw[t]={}),tw[t]}const sHe=ge().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),iHe=600;function aHe(){return ge().global.screen==null?1024:ge().global.screen.height*ge().global.screen.width*window.devicePixelRatio*iHe/1024/1024}class s2 extends HP{nextDataId(){return s2.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ge().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof oT)n=e;else{const r=No(ge().getNumber("WEBGL_VERSION"),e);n=new oT(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=No(ge().getNumber("WEBGL_VERSION"));n=new oT(r),this.binaryCache=rHe(ge().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new L9e(this.gpgpu),this.numMBBeforeWarning=aHe(),this.texData=new kX(this,Bo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,a){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=Zb(n),u=new b6(c,!1,a),d=this.runWebGLProgram(u,[o],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(e,n,r){if((ge().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ge().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Ui.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(ge().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Ui.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:a,shape:o,isPacked:l}=n;if(a!=null){let p;l?p=new tu(o,Yc):p=new Yo(o,Yc);const g=this.runWebGLProgram(p,[{dataId:e,shape:o,dtype:s}],s),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Hs());let d;if(s==="complex64"){const p=this.readSync(i.real.dataId),g=this.readSync(i.imag.dataId);d=lc(p,g)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Hs()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const y=this.pendingRead.get(e);return new Promise(x=>y.push(x))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:a,complexTensorInfos:o,isPacked:l}=n;if(i!=null){let y;l?y=new tu(s,Yc):y=new Yo(s,Yc);const x=this.runWebGLProgram(y,[{dataId:e,shape:s,dtype:a}],a),v=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),v}if(r!=null)return this.convertAndCacheOnCPU(e);if(ge().getBool("DEBUG")&&!ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ge().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(a!=="complex64"&&ge().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const y=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...Yb(s))}this.pendingRead.set(e,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(a==="complex64"){const y=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),x=y[0],v=y[1];d=lc(x,v)}else if(c==null)d=this.getValuesFromTexture(e);else{const y=Se(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const y=this.gpgpu.gl;ze(y,()=>y.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(e,d),g=this.pendingRead.get(e);return this.pendingRead.delete(e),g.forEach(y=>y(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Bo().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:a,dtype:o,isPacked:l,texture:c}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let g;l?g=new tu(i,Yc):g=new Yo(i,Yc);const y=this.runWebGLProgram(g,[{dataId:e,shape:i,dtype:o}],o),x=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),x}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=Bo().makeTensorFromTensorInfo(u),p=this.texData.get(u.dataId);return Object.assign({tensorRef:d},p.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Au(s));return _t(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return _t(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!cGe(r))throw ge().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=Se(n);if(ge().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(e),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...Yb(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(p),y}const a=ge().getBool("WEBGL_PACK")&&s===!0,o=a?Zb(n):n,l=a?new C8e(o):new N8e(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Eh(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=Eh(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);o.kernelMs=URe(l),o.getExtraProfileInfo=()=>l.map((c,u)=>({name:a[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Hs(),endMs:null}}endTimer(e){return ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Hs(),e)}async getQueryTime(e){if(ge().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:a,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,a)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=sHe){return ge().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&Se(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){zi("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return eHe(e.shape,n)}packedUnaryOp(e,n,r){const s=new tu(e.shape,n),i=this.compileAndRun(s,[e],r);return Bo().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=Nte(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ge().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,N6,e.dtype);const n=new Yo(e.shape,N6),r=this.compileAndRun(n,[e]);return Bo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&jx(r[0])){const i=r.map(a=>uu(a));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Bo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new Z9e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new M9e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[tm(e.shape),...nm(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[tm(n),...nm(n)],a=new Ete(i,r),o=!0,l=[r],c=this.runWebGLProgram(a,[s],e.dtype,l,o);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:a}=r;if(n!=null){const p=Se(i),g=n[0]*n[1]*4;W(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Zb(i);let l;s?l=new S8e(o):l=new k8e(o);const c=!0,u=[n??Yb(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:a,dataId:e}],a,u,c,n);return{dtype:a,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,a){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===tx.DENSE){const w=a??Yb(e.outputShape);l.texShape=w.map(k=>k*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),Se(o.shape)===0)return l.values=gs(o.dtype,0),o;const c=[],u=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let k=this.texData.get(w.dataId);if(k.texture==null){if(!e.packedInputs&&Se(w.shape)<=ge().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:k.values};e.packedInputs&&(k.isPacked=!0,k.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!k.isPacked!=!!e.packedInputs)w=k.isPacked?this.unpackTensor(w):this.packTensor(w),c.push(w),k=this.texData.get(w.dataId);else if(k.isPacked&&!ak(k.shape,w.shape)){const S=w,I=w.shape;w.shape=k.shape,w=this.packedReshape(w,I),c.push(w),k=this.texData.get(w.dataId),S.shape=I}return{shape:w.shape,texData:k,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},p=w8e(e,u,d),g=this.getAndSaveBinary(p,()=>v8e(this.gpgpu,e,u,d)),y=this.activeTimers!=null;let x;y&&(x=this.startTimer()),ge().get("ENGINE_COMPILE_ONLY")||b8e(this.gpgpu,g,u,d,s),c.forEach(w=>this.disposeIntermediateTensorInfo(w)),y&&(x=this.endTimer(x),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(x)}));const v=ge().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const w=Hs();w-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!ge().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ge().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=he(()=>{if(!ge().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ge().getBool("DEBUG");ge().set("DEBUG",!1);const n=this.abs(tn(1e-8)).dataSync()[0];if(ge().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?tHe:nHe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:a,usage:o,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Hs());let d=n.texShape;if(d==null&&(d=EGe(r,l),n.texShape=d),i!=null){const p=Zb(r);let g,y=d[1],x=d[0];const v=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!v)&&([y,x]=Mm(d[0],d[1])),l?g=new E8e(p,v):g=new b6(p,v);const w=v?[x,y]:d,k=this.makeTensorInfo(w,s),S=this.texData.get(k.dataId);v?S.usage=Ui.PIXELS:S.usage=Ui.UPLOAD,S.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(k.dataId),y,x,i);const I=[[x,y]],j=this.runWebGLProgram(g,[k],s,I,!0),A=this.texData.get(j.dataId);n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,ge().get("ENGINE_COMPILE_ONLY")?this.disposeData(j.dataId):(n.texture=A.texture,n.values=null,this.texData.delete(j.dataId)),this.disposeIntermediateTensorInfo(k),c&&(this.uploadWaitMs+=Hs()-u)}else{const p=this.acquireTexture(d,o,s,l);n.texture=p}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=oHe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*O1(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await mQ(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(hte(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:l}=yte(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=a,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:a,channels:o}=e,l=Bo().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,a,o);return Bo().makeTensorFromDataId(c,n,r,l)}}s2.nextDataId=0;function oHe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */dY()&&mY("webgl",()=>new s2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CO=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Lh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=Nt(n,r),this.enableShapeUniforms=ws(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const of=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class zm{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Nt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ws(i);let a="";if(s)if(i===0||Se(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${dn(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Os("coords",i);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ci(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const lHe={kernelName:tv,backendName:"webgl",kernelFunc:Ci};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ed(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(i.dataId),o=Ci({inputs:{x:r},backend:n}),l=Ci({inputs:{x:s},backend:n});return a.complexTensorInfos={real:o,imag:l},i}const cHe={kernelName:ij,backendName:"webgl",kernelFunc:ed};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tte="return (a < 0.) ? b * a : a;",_te=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function uHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,a=n.makeTensorInfo([],"float32",Hu(i,"float32")),o=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zm(_te,s.shape,a.shape):new Lh(Tte,s.shape,a.shape),l=n.runWebGLProgram(o,[s,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const dHe={kernelName:JS,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ate="return (a < 0.) ? b * a : a;",Rte=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function hHe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zm(Rte,r.shape,s.shape):new Lh(Ate,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const fHe={kernelName:yN,backendName:"webgl",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Um="if (isnan(x)) return x;";function Gt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:a}=s,o=i,l=r||a.dtype;if(o.shouldExecuteOnCPU([a])&&n!=null){const d=o.texData.get(a.dataId),p=n(d.values,l);return o.makeTensorInfo(a.shape,l,p)}const c=ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new tu(a.shape,e):u=new Yo(a.shape,t),o.runWebGLProgram(u,[a],l)}}function ls({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:a,backend:o})=>{const{a:l,b:c}=a,u=o;if(r&&l.dtype==="complex64"){const y=u.texData.get(l.dataId),x=u.texData.get(c.dataId),[v,w]=[[y.complexTensorInfos.real,x.complexTensorInfos.real],[y.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(S=>{const[I,E]=S,j={dataId:I.dataId,dtype:I.dtype,shape:l.shape},A={dataId:E.dataId,dtype:E.dtype,shape:c.shape},T=new Lh(t,l.shape,c.shape);return u.runWebGLProgram(T,[j,A],Si(I.dtype,E.dtype))}),k=ed({inputs:{real:v,imag:w},backend:u});return u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(w),k}const d=i||Si(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const y=u.texData.get(l.dataId).values,x=u.texData.get(c.dataId).values,v=l.dtype==="string"?cc(y):y,w=l.dtype==="string"?cc(x):x,[k,S]=s(l.shape,c.shape,v,w,d),I=u.makeTensorInfo(S,d),E=u.texData.get(I.dataId);return E.values=k,I}const p=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let g;return p?g=new zm(e,l.shape,c.shape,n):g=new Lh(t,l.shape,c.shape),u.runWebGLProgram(g,[l,c],d)}}function nx(t,e=!1){if(t==="linear")return e?K9e:U9e;if(t==="relu")return e?Y9e:G9e;if(t==="elu")return e?X9e:W9e;if(t==="relu6")return e?Q9e:H9e;if(t==="prelu")return e?Rte:Ate;if(t==="leakyrelu")return e?_te:Tte;if(t==="sigmoid")return e?J9e:q9e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $te{constructor(e,n,r,s=!1,i=!1,a=!1,o=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ws(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),p=s?"i * 2, rc.y":"rc.y, i * 2",g=i?"rc.z, i * 2":"i * 2, rc.z",y=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",w="";o&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:c?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:v=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const k=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let S="rc.x",I="rc.x";e[0]<n[0]?S=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(I=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${S};
        int batchB = ${I};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${x[0]});
          result += (${y[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${k}

        ${w}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C6={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class I6{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Nt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E6="return a * b;";function IO(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Si(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new I6(C6.REAL,r.shape,s.shape),u=new I6(C6.IMAG,r.shape,s.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(u,d,"float32"),y=ed({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,s])){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=h9e(r.shape,s.shape,o.values,l.values,i),d=n.makeTensorInfo(u,i),p=n.texData.get(d.dataId);return p.values=c,d}let a;return ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new zm(E6,r.shape,s.shape):a=new Lh(E6,r.shape,s.shape),n.runWebGLProgram(a,[r,s],i)}const pHe={kernelName:uv,backendName:"webgl",kernelFunc:IO};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mHe(t,e,n){const r=[tm(t.shape),...nm(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[tm(e),...nm(e)],a=new Ete(i,r),o=!0,l=[r],c=n.runWebGLProgram(a,[s],t.dtype,l,o);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Be(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,a=n,o=Se(s.shape),l=NX(i,o),c=Se(l);W(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const u=a.texData.get(s.dataId);return u.isPacked&&!ak(s.shape,l)&&!(u.texture!==null&&ak(u.shape,l))?mHe(s,l,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const gHe={kernelName:vN,backendName:"webgl",kernelFunc:Be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T6{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];const o=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${Gp(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yHe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:a}=e;this.outputShape=[s,a];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(o="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(o="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";i%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xHe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=zN(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function lf(t,e,n,r){const s=xHe(t.shape);let i=t;for(let a=0;a<s.length;a++){const{inSize:o,windowSize:l,outSize:c}=s[a];let u,d;n==="mean"?u=a===0?new T6({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},o):new T6({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c}):u=new yHe({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vHe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[n[a]];this.outputShape=r,this.rank=r.length;const s=dn(this.rank),i=bHe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function bHe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wHe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=dn(this.rank),i=Ite("rc",this.rank),a=new Array(this.rank);for(let u=0;u<n.length;u++)a[n[u]]=i[u];const o=`vec2(${a.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2(t,e,n){const r=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wHe(t.shape,e):new vHe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t,e,n,r){const s=e,i=t.shape.length,a=At(s,t.shape);let o=a;const l=Gn(o,i),c=l!=null;let u=t;c&&(u=i2(t,l,r),o=nr(o.length,i)),os("sum",o,i);const[d,p]=Vr(u.shape,o);let g=d;n&&(g=ur(d,a));const y=Se(p),v=Se(t.shape)/y,w=Be({inputs:{x:u},attrs:{shape:[v,y]},backend:r}),k=Lj(t.dtype),S=lf(w,k,"sum",r),I=Be({inputs:{x:S},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(S),c&&r.disposeIntermediateTensorInfo(u),I}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r;return kHe(s,i,a,n)}const SHe={kernelName:CN,backendName:"webgl",kernelFunc:a2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ls(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,a=n,o=s.shape.length,l=new Array(o);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(a.shouldExecuteOnCPU([s])){const d=a.texData.get(s.dataId).values,p=NO(d,s.shape,s.dtype,i,l);c=a.makeTensorInfo(l,s.dtype);const g=a.texData.get(c.dataId);g.values=p}else c=i2(s,i,a);return c}const NHe={kernelName:kp,backendName:"webgl",kernelFunc:Ls};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pte=1e3;function ok({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],p=r?e.shape[u-1]:e.shape[u-2],g=n?t.shape[c-1]:t.shape[c-2],y=r?e.shape[u-2]:e.shape[u-1],x=t.shape.slice(0,-2),v=e.shape.slice(0,-2),w=Se(x),k=Se(v),I=Nt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([g,y]);W(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=n?[w,d,g]:[w,g,d],j=r?[k,y,p]:[k,p,y],A=Be({inputs:{x:t},backend:s,attrs:{shape:E}}),T=Be({inputs:{x:e},backend:s,attrs:{shape:j}}),$=[A,T],D=Math.max(w,k),R=n?A.shape[1]:A.shape[2],F=i!=null,L=a!=null,K=l==="leakyrelu",X=l!=null?nx(l,!0):null,q=F||L||K||X!=null;let Q;if((g===1||y===1)&&R>Pte&&q===!1){let H=A,ee=T;n&&(H=Ls({inputs:{x:A},backend:s,attrs:{perm:[0,2,1]}}),$.push(H)),r&&(ee=Ls({inputs:{x:T},backend:s,attrs:{perm:[0,2,1]}}),$.push(ee));const G=y!==1,Y=y===1;let ae=H;G&&(ae=Be({inputs:{x:H},backend:s,attrs:{shape:[D,R,1]}}),$.push(ae));const ye=y===1?2:1;let xe=ee;Y&&(xe=Be({inputs:{x:ee},backend:s,attrs:{shape:[D,1,R]}}),$.push(xe));const Ce=IO({inputs:{a:ae,b:xe},backend:s});Q=a2({inputs:{x:Ce},backend:s,attrs:{axis:ye,keepDims:!0}}),$.push(Ce)}else{const H=Si(t.dtype,e.dtype),ee=new $te(E,j,[D,g,y],n,r,F,X,L,K),G=[A,T];if(i!=null&&G.push(i),L&&G.push(a),K){const Y=s.makeTensorInfo([],"float32",Hu(o,"float32"));G.push(Y),$.push(Y)}Q=s.runWebGLProgram(ee,G,H)}const z=Be({inputs:{x:Q},backend:s,attrs:{shape:I}});$.push(Q);for(const H of $)s.disposeIntermediateTensorInfo(H);return z}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CHe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:a,preluActivationWeights:o}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return ok({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:o,leakyreluAlpha:d,activation:u})}const IHe={kernelName:M1,backendName:"webgl",kernelFunc:CHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6="return abs(x);";function EHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),a=Nte(i.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let s;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new tu(r.shape,_6):s=new Yo(r.shape,_6),n.runWebGLProgram(s,[r],r.dtype)}const THe={kernelName:$S,backendName:"webgl",kernelFunc:EHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _He=Oa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,AHe=Gt({opSnippet:_He}),RHe={kernelName:Dx,backendName:"webgl",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $He=Oa+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,PHe=Gt({opSnippet:$He}),jHe={kernelName:Ox,backendName:"webgl",kernelFunc:PHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6="return a + b;",DHe=ls({opSnippet:A6,packedOpSnippet:A6,supportsComplex:!0,cpuKernelImpl:G8e}),OHe={kernelName:Am,backendName:"webgl",kernelFunc:DHe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MHe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FHe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Ci({inputs:{x:r[0]},backend:n});if(r.length>ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=kw({inputs:r.slice(0,l),backend:n}),u=kw({inputs:r.slice(l),backend:n});return kw({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>Si(l,c)),i=r.map(l=>l.shape),o=ge().getBool("WEBGL_PACK")?new FHe(r[0].shape,i):new MHe(r[0].shape,i);return n.runWebGLProgram(o,r,s)}const LHe={kernelName:JP,backendName:"webgl",kernelFunc:kw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=At(i,s.shape);let c=l;const u=Gn(c,o);let d=s;u!=null&&(d=Ls({inputs:{x:s},backend:n,attrs:{perm:u}}),c=nr(c.length,o)),os("all",c,o);const[p,g]=Vr(d.shape,c),y=Se(g),x=Be({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),v=lf(x,x.dtype,"all",n);let w;if(a){const k=ur(p,l);w=Be({inputs:{x:v},backend:n,attrs:{shape:k}})}else w=Be({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),w}const BHe={kernelName:ZP,backendName:"webgl",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=At(i,s.shape);let c=l;const u=Gn(c,o);let d=s;u!=null&&(d=Ls({inputs:{x:s},backend:n,attrs:{perm:u}}),c=nr(c.length,o)),os("any",c,o);const[p,g]=Vr(d.shape,c),y=Se(g),x=Be({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),v=lf(x,x.dtype,"any",n);let w;if(a){const k=ur(p,l);w=Be({inputs:{x:v},backend:n,attrs:{shape:k}})}else w=Be({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),w}const UHe={kernelName:ej,backendName:"webgl",kernelFunc:zHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WHe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:a}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GHe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,W(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],a=Math.ceil(i/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,c=dn(l),u=Os("coords",l);let d,p;if(a===1){p=l+1;const T=dn(p);d=`
        ${T} sourceLocR = ${T}(${u.join()}, 0);
        ++${u[l-1]};
        ${T} sourceLocG = ${T}(${u.join()}, 0);
        ++${u[l-2]};
        ${T} sourceLocA = ${T}(${u.join()}, 0);
        --${u[l-1]};
        ${T} sourceLocB = ${T}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],x=g.map(T=>"int "+T),v=Os("sourceLocR",p-1).concat("inIdx.r"),w=Os("sourceLocG",p-1).concat("inIdx.g"),k=Os("sourceLocB",p-1).concat("inIdx.b"),S=Os("sourceLocA",p-1).concat("inIdx.a"),I=r==="max"?"greaterThan":"lessThan",E=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${k.join()}),
                             getBestIndicesAChannel(${S.join()})));`,j=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${k.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${S.join()}) : 0.)`,A=s?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${j};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${E}
          vec4 candidate = ${j};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${I}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jte(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const a=zN(i),o={windowSize:a,inSize:i,batchSize:s,outSize:Math.ceil(i/a)},l=new WHe(o,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=jte(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Dte(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],a=zN(i),o=new GHe(s,a,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(o,l,"int32");if(c.shape.length===e.shape.length){const u=Dte(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Ote(t,e,n,r){const s=[n];if(os("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ge().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],a=t.texData.get(e.dataId),o=a!==null&&a.isPacked;let l=e;o&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Vr(l.shape,s),d=Se(u),p=Be({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(p);const g=jte(t,p,r);i.push(g);const y=Be({inputs:{x:g},backend:t,attrs:{shape:c}});return i.forEach(x=>t.disposeIntermediateTensorInfo(x)),y}return Dte(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=At(i,s.shape);const o=Gn(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Ls({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=nr(a.length,l.shape.length)),os("argMax",[a[0]],l.shape.length);const u=Ote(n,l,a[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const qHe={kernelName:PS,backendName:"webgl",kernelFunc:HHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let a=At(i,s.shape);const o=Gn(a,s.shape.length);let l=s;const c=[];o!=null&&(l=Ls({inputs:{x:s},backend:n,attrs:{perm:o}}),c.push(l),a=nr(a.length,l.shape.length)),os("argMin",[a[0]],l.shape.length);const u=Ote(n,l,a[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const XHe={kernelName:jS,backendName:"webgl",kernelFunc:KHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YHe=Oa+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,QHe=Gt({opSnippet:YHe}),JHe={kernelName:Mx,backendName:"webgl",kernelFunc:QHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZHe=Oa+"return log(x + sqrt(x * x + 1.0));",eqe=Gt({opSnippet:ZHe}),tqe={kernelName:Fx,backendName:"webgl",kernelFunc:eqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nqe=Oa+`
  return atan(x);
`,rqe=Gt({opSnippet:nqe}),sqe={kernelName:Lx,backendName:"webgl",kernelFunc:rqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iqe=CO+`
  return atan(a, b);
`,aqe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+of+`
  return result;
`,oqe=ls({opSnippet:iqe,packedOpSnippet:aqe}),lqe={kernelName:Bx,backendName:"webgl",kernelFunc:oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cqe=Oa+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,uqe=Gt({opSnippet:cqe}),dqe={kernelName:Vx,backendName:"webgl",kernelFunc:uqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rx{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const x=n==="avg",v=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let k="0.0";if(x||(k="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?v:w:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const S="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const E=Math.floor(a/4)*4,j=a%4,A=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${S}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${k};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${k});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${E}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${E};
          if (${j===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${j===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${j===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${I});
      }
    `}}class EO{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=e.filterWidth,o=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,p=e.dilationWidth,g=e.effectiveFilterDepth,y=e.effectiveFilterHeight,x=e.effectiveFilterWidth,v=e.padInfo.front,w=e.padInfo.top,k=e.padInfo.left;this.outputShape=e.outShape;const S=n==="avg";let I="0.0";if(S||(I="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${c});
        const ivec3 pads = ivec3(${v}, ${w}, ${k});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${y} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let j=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(j="avgValue / max(count, 1.0)");const A=Math.floor(a/4)*4,T=a%4,$=`
      if (${S}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${c});
      const ivec3 pads = ivec3(${v}, ${w}, ${k});
      const float initializationValue = ${I};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${I});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${$}
            }

            int xC = xCCorner + ${A};
            if (${T===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${$}
            } else if (${T===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${$}
            }
          }
        }
        setOutput(${j});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Kv(s,"avgPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;W(vs(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ja(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&rn(u.inShape,u.outShape))return Ci({inputs:{x:s},backend:n});const d=new rx(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const fqe={kernelName:DS,backendName:"webgl",kernelFunc:hqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=xc(s.shape,i,a,u,o,l,c),p=new EO(d,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}const mqe={kernelName:OS,backendName:"webgl",kernelFunc:pqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gqe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class yqe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,y=d-1-e.padInfo.front,x=p-1-e.padInfo.top,v=g-1-e.padInfo.left,w=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${x}, ${v});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=xc(a.shape,o,l,d,c,u),g=new yqe(p);return n.runWebGLProgram(g,[s],a.dtype)}const vqe={kernelName:nj,backendName:"webgl",kernelFunc:xqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bqe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i;Kv([s,i],"avgPoolGrad");const{filterSize:o,strides:l,pad:c}=r,u=ja(a.shape,o,l,1,c),d=new gqe(u);return n.runWebGLProgram(d,[s],a.dtype)}const wqe={kernelName:tj,backendName:"webgl",kernelFunc:bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kqe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:a,transposeB:o}=r;return ok({a:s,b:i,transposeA:a,transposeB:o,backend:n})}const Sqe={kernelName:MS,backendName:"webgl",kernelFunc:kqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nqe{constructor(e,n,r,s,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Nt(e,n),Nt(e,r);let o="0.0";s!=null&&(Nt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";i!=null&&(Nt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cqe{constructor(e,n,r,s,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Nt(e,n),Nt(e,r);let o="vec4(0.0)";s!=null&&(Nt(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(Nt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iqe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:a,scale:o}=t;W(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),W(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),W(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;a!=null&&(u=a.shape,c.push(a));let d=null;o!=null&&(d=o.shape,c.push(o));const p=ge().getBool("WEBGL_PACK_NORMALIZATION")?new Cqe(r.shape,s.shape,i.shape,u,d,l):new Nqe(r.shape,s.shape,i.shape,u,d,l);return e.runWebGLProgram(p,c,c[0].dtype)},Eqe={kernelName:XS,backendName:"webgl",kernelFunc:Iqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tqe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=dn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=_qe(this.rank);let s;const i=e.map((a,o)=>`sourceLoc.${CA[o]} = start[${o}] + coords.${CA[o]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const CA=["x","y","z","w","u","v"];function _qe(t){if(t===1)return"sourceLoc";if(t<=6)return CA.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Aqe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=dn(this.rank),r=Os("coords",this.rank),s=Os("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${i})`,o=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rqe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),a=r.texData.get(i.dataId);Object.assign(a,s),a.refCount=1,a.shape=n,a.dtype=t.dtype;let o=wD(e,ot(t.shape));s.slice&&(o+=s.slice.flatOffset),a.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),i}function Wm(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:a}=r,[o,l]=BN(s,i,a);if(xD(s,o,l),Se(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),p=S9e(d.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,p)}const{isPacked:c}=n.texData.get(s.dataId),u=bD(s.shape,o,l);if(c||!u){const d=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Aqe(l):new Tqe(l),p=[o];return n.runWebGLProgram(d,[s],s.dtype,p)}return n.uploadToGPU(s.dataId),Rqe(s,o,l,n)}const $qe={kernelName:NN,backendName:"webgl",kernelFunc:Wm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:a}=r;W(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((k,S)=>k*S),l=Dv(s.shape,i,o),c=Ov(l.length,i.length),u=Mv(s.shape,i,o),d=ID(a,i.length),p=ED(u,a,i.length),g=[],y=Be({inputs:{x:s},backend:n,attrs:{shape:l}}),x=Ls({inputs:{x:y},backend:n,attrs:{perm:c}}),v=Be({inputs:{x},backend:n,attrs:{shape:u}}),w=Wm({inputs:{x:v},backend:n,attrs:{begin:d,size:p}});return g.push(y),g.push(x),g.push(v),g.forEach(k=>n.disposeIntermediateTensorInfo(k)),w},jqe={kernelName:FS,backendName:"webgl",kernelFunc:Pqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a}=r,o=n.readSync(s.dataId),l=n.readSync(i.dataId),c=Ste(o,l,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,c)}const Oqe={kernelName:rj,backendName:"webgl",kernelFunc:Dqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mqe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,Fqe=`
  return float(int(a.r) & int(b.r));
`;function Lqe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=ge().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||a===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=q8e(r.shape,s.shape,l,c,r.dtype),p=n.makeTensorInfo(d,r.dtype),g=n.texData.get(p.dataId);return g.values=u,p}let o;return i?o=new zm(Mqe,r.shape,s.shape,!1):o=new Lh(Fqe,r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}const Vqe={kernelName:sj,backendName:"webgl",kernelFunc:Lqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bqe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),a=n.readSync(s.dataId),o=Nt(Array.from(i),Array.from(a));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const zqe={kernelName:AX,backendName:"webgl",kernelFunc:Bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uqe="return float(a != b);",Mte=ls({opSnippet:Uqe,cpuKernelImpl:p9e,dtype:"bool"}),Wqe={kernelName:hN,backendName:"webgl",kernelFunc:Mte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yv(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ci({inputs:{x:s.complexTensorInfos.real},backend:n})}const Gqe={kernelName:_j,backendName:"webgl",kernelFunc:Yv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hqe="return float(int(x));";function qqe(t,e){const n=new Yo(t.shape,Hqe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IA(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return Ci({inputs:{x:s},backend:n});const a=Pr(s.shape),o=IA({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=ed({inputs:{real:o,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const a=Yv({inputs:{input:s},backend:n}),o=IA({inputs:{x:a},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(a),o}if(!CX(s.dtype,i)){const a=Ci({inputs:{x:s},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const a=n.texData.get(s.dataId).values,[o,l,c]=K8e(a,s.shape,s.dtype,i);return n.makeTensorInfo(o,l,c)}if(i==="int32")return qqe(s,n);if(i==="bool"){const a=n.makeTensorInfo([],"bool",gs("bool",1)),l=Mte({inputs:{a:s,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const Kqe={kernelName:zx,backendName:"webgl",kernelFunc:IA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6="return ceil(x);",Xqe=Gt({opSnippet:R6,packedOpSnippet:R6,cpuKernelImpl:X8e}),Yqe={kernelName:Ux,backendName:"webgl",kernelFunc:Xqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qqe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jqe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:a}=r;let o;ge().getBool("WEBGL_PACK_CLIP")?o=new Jqe(s.shape):o=new Qqe(s.shape);const l=[[i],[a]];return n.runWebGLProgram(o,[s],s.dtype,l)}const eKe={kernelName:Wx,backendName:"webgl",kernelFunc:Zqe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tKe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function nKe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new tKe(r.shape),a=[$6(r,s.complexTensorInfos.real),$6(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,a,a[0].dtype)}const rKe={kernelName:LS,backendName:"webgl",kernelFunc:nKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sKe{constructor(e){this.outputShape=[],this.outputShape=rl(e,1),this.variableNames=e.map((a,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const o=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${o}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iKe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=rl(e,n);const r=this.outputShape,s=r.length,i=dn(s),a=Os("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((x,v)=>`T${v}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+e[x][n];const c=o[n],u=o.slice(-2),d=o.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let x=1;x<l.length;x++){const v=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${nw(o,c,v)}),
            vec2(${nw(u,c,v)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${nw(o,c,y)}),
          vec2(${nw(u,c,y)}));`,this.userCode=`
      float getValue(${o.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function nw(t,e,n){const r=t.indexOf(e);return t.map((i,a)=>a===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o2(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Ci({inputs:{x:s.complexTensorInfos.imag},backend:n})}const aKe={kernelName:wj,backendName:"webgl",kernelFunc:o2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ry(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(k=>Yv({inputs:{input:k},backend:n})),y=t.map(k=>o2({inputs:{input:k},backend:n})),x=ry(g,e,n),v=ry(y,e,n),w=ed({inputs:{real:x,imag:v},backend:n});return g.forEach(k=>n.disposeIntermediateTensorInfo(k)),y.forEach(k=>n.disposeIntermediateTensorInfo(k)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),w}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const g=t.map(I=>{const j=[-1,Se(I.shape.slice(e))];return Be({inputs:{x:I},backend:n,attrs:{shape:j}})}),y=g.map(I=>({vals:n.readSync(I.dataId),shape:I.shape})),x=rl(g.map(I=>I.shape),1),v=g[0].shape[0]===1,w=Y8e(y,x,r,v),k=rl(t.map(I=>I.shape),e),S=n.makeTensorInfo(k,r,w);return g.forEach(I=>n.disposeIntermediateTensorInfo(I)),S}const i=t.filter(g=>Se(g.shape)>0),a=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const g=a?new Yo(t[0].shape,Yc):new tu(t[0].shape,Yc);return n.runWebGLProgram(g,t,r)}const o=ge().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){const g=[];for(let x=0;x<i.length;x+=o){const v=i.slice(x,x+o);g.push(ry(v,e,n))}const y=ry(g,e,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return y}if(a){const g=new iKe(i.map(y=>y.shape),e);return n.runWebGLProgram(g,i,r)}const{tensors2D:l,outShape:c}=oKe(i,e,n),u=new sKe(l.map(g=>g.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Be({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),p}function oKe(t,e,n){const r=rl(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Be({inputs:{x:i},attrs:{shape:[-1,Se(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=At(s,e[0].shape)[0],a=e.map(c=>c.shape);SD(a,i);const o=rl(e.map(c=>c.shape),i);if(Se(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(c=>Se(c.shape)>0);return l.length===1?Ci({inputs:{x:l[0]},backend:n}):ry(l,i,n)}const lKe={kernelName:VS,backendName:"webgl",kernelFunc:Fte};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const a=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4,v=e.dataFormat==="channelsLast",w=v?1:2,k=v?2:3,S=v?3:1;let I="",E="";r&&(s?I=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?I=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:I=`
          float activation(float x) {
            ${r}
          }
        `,E="result = activation(result);");const j=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${I}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${S}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${k}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${j}
        ${E}
        setOutput(result);
      }
    `}}class cKe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,p=e.filterHeight,g=e.filterWidth,y=Math.floor(e.inChannels/4)*4,x=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${a}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const a=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<u;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let v=0;v<u;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(d+1)/2;v++){const w=v*2;if(p+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<u&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?p+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<u)){const k=a%2===0?qP(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${k};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:p+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):k===1?p+=`
                     xC${w+1} = xTexelC${w};
                     `:p+=`
                     xCOffset = xC + ${k};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<u&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<u&&(p+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<u&&(p+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<u&&(p+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(s?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uKe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ws(this.outputShape.length);const{dataFormat:r}=n,s=Vs(),i=r==="channelsLast",a=i?1:2,o=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lk(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function Bte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,x=!1;let v;const w=[];if(i!=null){const I=lk(i.shape,g);I!=null&&(i=Be({inputs:{x:i},backend:r,attrs:{shape:I}}),w.push(i))}if(s!=null){const I=lk(s.shape,g);I!=null&&(s=Be({inputs:{x:s},backend:r,attrs:{shape:I}}),w.push(s))}if(!((d===1||p===1)&&u>Pte)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&rn(c.shape.slice(-3),l.slice(-3))){const I=l[0]*l[1]*(l[2]+1),E={dataId:t.dataId,shape:[1,I,n.inChannels],dtype:t.dtype},j=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,W(ak(c.shape,E.shape),()=>`packed reshape ${c.shape} to ${E.shape} isn't free`);const A=Be({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(A);const T=ok({a:E,b:A,backend:r,transposeA:y,transposeB:x,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a}),$=r.texData.get(T.dataId);W($.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=j,$.shape=n.outShape,v=Ci({inputs:{x:T},backend:r}),v.shape=n.outShape,w.push(T)}else{const I=n.outHeight*n.outWidth,E=Be({inputs:{x:t},backend:r,attrs:{shape:g?[n.batchSize,I,n.inChannels]:[n.batchSize,n.inChannels,I]}}),j=Be({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),A=ok({a:g?E:j,b:g?j:E,transposeA:!g,transposeB:x,backend:r,bias:s,activation:o,preluActivationWeights:i,leakyreluAlpha:a});v=Be({inputs:{x:A},backend:r,attrs:{shape:n.outShape}}),w.push(E),w.push(j),w.push(A)}for(const I of w)r.disposeIntermediateTensorInfo(I);return v}function zte({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:o=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",x=l*c*u,v=p*d,w=[n.batchSize,x,v],k=!0,S=!1,I=[];if(i!=null){const z=lk(i.shape,y);z!=null&&(i=Be({inputs:{x:i},backend:r,attrs:{shape:z}}),I.push(i))}if(s!=null){const z=lk(s.shape,y);z!=null&&(s=Be({inputs:{x:s},backend:r,attrs:{shape:z}}),I.push(s))}const E=Be({inputs:{x:e},backend:r,attrs:{shape:[1,x,Se(e.shape)/x]}});I.push(E);const j=new uKe(w,n),A=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=r.runWebGLProgram(j,[t],"float32",A),$=Be({inputs:{x:T},backend:r,attrs:{shape:w}});I.push(T),I.push($);const D=s!=null,R=i!=null,F=o==="leakyrelu",L=o?nx(o,!0):null,K=new $te(y?$.shape:E.shape,y?E.shape:$.shape,y?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],k,S,D,L,R,F),X=y?[$,E]:[E,$];if(s&&X.push(s),R&&X.push(i),F){const z=r.makeTensorInfo([],"float32",Hu(a,"float32"));X.push(z),I.push(z)}const q=r.runWebGLProgram(K,X,"float32"),Q=Be({inputs:{x:q},backend:r,attrs:{shape:n.outShape}});I.push(q);for(const z of I)r.disposeIntermediateTensorInfo(z);return Q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=vc(l),p=as(s.shape,i.shape,a,c,o,u,!1,d);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=Bte({x:s,filter:i,convInfo:p,backend:n});else if(p.strideWidth<=2&&d==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const x=new Vte(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[s,i],"float32",v)}else if(ge().getBool("WEBGL_CONV_IM2COL"))g=zte({x:s,filter:i,convInfo:p,backend:n});else{const x=new Lte(p);g=n.runWebGLProgram(x,[s,i],"float32")}const y=Be({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const hKe={kernelName:BS,backendName:"webgl",kernelFunc:dKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fKe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class pKe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=a?1:2,u=a?2:3,d=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class mKe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,a=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class gKe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,a=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=vc(l),p=as(s.shape,u,a,1,o,c,!1,d),g=new fKe(p);return n.runWebGLProgram(g,[s,i],"float32")}const xKe={kernelName:aj,backendName:"webgl",kernelFunc:yKe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vKe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ws(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:a,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=vc(c),p=as(a,i.shape,o,1,l,u,!1,d);if(ge().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new vKe(p);return n.runWebGLProgram(y,[s,i],"float32",g)}else{const g=new pKe(p);return n.runWebGLProgram(g,[s,i],"float32")}}const wKe={kernelName:zS,backendName:"webgl",kernelFunc:bKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=qu(s.shape,i.shape,a,l,o),u=new cKe(c);return n.runWebGLProgram(u,[s,i],"float32")}const SKe={kernelName:US,backendName:"webgl",kernelFunc:kKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,pad:o,filterShape:l}=r,c=qu(s.shape,l,a,1,o),u=new mKe(c);return n.runWebGLProgram(u,[s,i],"float32")}const CKe={kernelName:oj,backendName:"webgl",kernelFunc:NKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:a,strides:o,inputShape:l}=r,c=qu(l,i.shape,o,1,a),u=new gKe(c);return n.runWebGLProgram(u,[s,i],"float32")}const EKe={kernelName:lj,backendName:"webgl",kernelFunc:IKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TKe=Um+`
  return cos(x);
`,_Ke=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${of}
  return result;
`,AKe=Gt({opSnippet:TKe,packedOpSnippet:_Ke}),RKe={kernelName:Gx,backendName:"webgl",kernelFunc:AKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ke=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,PKe=Gt({opSnippet:$Ke}),jKe={kernelName:Hx,backendName:"webgl",kernelFunc:PKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DKe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,o,l,c]=e,[u]=n,[d,p]=r;this.outputShape=[u,d,p,c];const g=s==="bilinear"?1:0,[y,x]=[`${o-1}.0`,`${l-1}.0`],[v,w,k]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[S,I,E]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${S});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${I};

        float in_y = ${k};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${E};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OKe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:a}=e,{cropSize:o,method:l,extrapolationValue:c}=r,u=new DKe(s.shape,i.shape,o,l,c);return n.runWebGLProgram(u,[s,i,a],"float32")},MKe={kernelName:uj,backendName:"webgl",kernelFunc:OKe};var sx;(function(t){t.Prod="*",t.Sum="+"})(sx||(sx={}));class P6{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,a=this.op===sx.Prod?"1.0":"0.0",o=r?a:`getX(${j6(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${dn(i)} coords = getOutputCoords();
        int end = ${D6(i,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${D6(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${j6(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function j6(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function D6(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t,e,n,r,s,i){const a=e.shape.length,o=Gn([r],a);let l=e;o!=null&&(l=Ls({inputs:{x:e},backend:n,attrs:{perm:o}}));const c=nr(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Ci({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){const g=new P6(t,l.shape,!1,i),y=[[p]],x=d;d=n.runWebGLProgram(g,[d],d.dtype,y),n.disposeIntermediateTensorInfo(x)}if(s){const p=new P6(t,l.shape,s,i),g=d;d=n.runWebGLProgram(p,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(o!=null){const p=Ku(o),g=Ls({inputs:{x:d},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),g}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Ute(sx.Prod,s,n,i,a,o)}const LKe={kernelName:cj,backendName:"webgl",kernelFunc:FKe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:a,reverse:o}=r;return Ute(sx.Sum,s,n,i,a,o)}const BKe={kernelName:WS,backendName:"webgl",kernelFunc:VKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:a,binaryOutput:o}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=Ste(l,c,i.dtype,i.shape,a);return n.makeTensorInfo([a],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=H8e(l,c,a,o);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const UKe={kernelName:dj,backendName:"webgl",kernelFunc:zKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WKe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:a}=r,o=s.shape[0],l=a==="NHWC"?s.shape[1]:s.shape[2],c=a==="NHWC"?s.shape[2]:s.shape[3],u=a==="NHWC"?s.shape[3]:s.shape[1],d=l*i,p=c*i,g=u/(i*i),y=a==="NHWC"?[o,d,p,g]:[o,g,d,p],x=new WKe(y,i,a);return n.runWebGLProgram(x,[s],s.dtype)}const HKe={kernelName:hj,backendName:"webgl",kernelFunc:GKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const a=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gte{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ws(this.outputShape.length);const a=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,p=d;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)g+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;g+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let w=0;w<d;w++)g+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(p+1)/2;w++){const k=w*2;if(g+=`
          xC = xCCorner + ${k*c};
          `,l===1){if(k<d&&(o%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k}Ready == 0) {
                  xTexelC${k} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${k}.zw = vec2(0.0);
                  }
                  xTexelC${k}Ready = 1;
                }
              `,c===1&&k>0?g+=`
                xC${k} = vec4(xTexelC${k-2}.zw, xTexelC${k}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${k} = vec4(previous.zw, xTexelC${k}.xy);
                  } else {
                    xC${k} = vec4(0.0, 0.0, xTexelC${k}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${k}Ready == 0) {
                  xTexelC${k} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${k}.zw = vec2(0.0);
                  }
                  xTexelC${k}Ready = 1;
                }

                xC${k} = xTexelC${k};
                `,k+1<d)){const S=o%2===0?qP(c):c;c%2===0&&o%2===1||c%2!==0&&o%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${S};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                    xTexelC${k+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${k+1}.zw = vec2(0.0);
                    }
                    xTexelC${k+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${k+1} = vec4(previous.zw, xTexelC${k+1}.xy);
                    } else {
                     xC${k+1} = vec4(0.0, 0.0, xTexelC${k+1}.xy);
                    }
                    `:g+=`
                    xC${k+1} = vec4(xTexelC${k}.zw, xTexelC${k+1}.xy);
                    `):S===1?g+=`
                    xC${k+1} = xTexelC${k};
                    `:g+=`
                    xCOffset = xC + ${S};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                      xTexelC${k+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${k+1}.zw = vec2(0.0);
                      }
                      xTexelC${k+1}Ready = 1;
                    }

                    xC${k+1} = xTexelC${k+1};
                    `}}else k<d&&(o%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k}Ready == 0) {
                  xTexelC${k} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${k}.zw = vec2(0.0);
                  }
                  xTexelC${k}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${k+1}Ready == 0) {
                  xTexelC${k+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${k+1}.zw = vec2(0.0);
                  }
                  xTexelC${k+1}Ready = 1;
                }

                xC${k} = vec4(xTexelC${k}.zw, xTexelC${k+1}.zw);
              `,k+1<d&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${k+1} = vec4(xTexelC${k+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${k}Ready == 0) {
                  xTexelC${k} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${k}.zw = vec2(0.0);
                  }
                  xTexelC${k}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${k+1}Ready == 0) {
                  xTexelC${k+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${k+1}.zw = vec2(0.);
                  }
                  xTexelC${k+1}Ready = 1;
                }

                xC${k} = vec4(
                  xTexelC${k}.xy, xTexelC${k+1}.xy);
              `,k+1<d&&(g+=`
                  xC${k+1} = vec4(xTexelC${k}.zw, xTexelC${k+1}.zw);
                `)));k<d&&(g+=`
            wTexel = getW(r, ${k}, d1, q);
            dotProd += xC${k} * vec4(wTexel.xz, wTexel.xz);
          `,k+1<d&&(g+=`
              wTexel = getW(r, ${k+1}, d1, q);
              dotProd += xC${k+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",x="";r&&(s?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),W(vs(a,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const d=as(s.shape,i.shape,a,u,o,c,!0);let p;ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Gte(d):p=new Wte(d);const g=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[s,i],"float32",g)}const KKe={kernelName:GS,backendName:"webgl",kernelFunc:qKe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XKe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class YKe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,a=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QKe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,d=as(s.shape,u,a,o,l,c,!0),p=new XKe(d);return n.runWebGLProgram(p,[s,i],"float32")}const JKe={kernelName:fj,backendName:"webgl",kernelFunc:QKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:a,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,d=as(u,i.shape,a,o,l,c,!0),p=new YKe(d);return n.runWebGLProgram(p,[s,i],"float32")}const e7e={kernelName:pj,backendName:"webgl",kernelFunc:ZKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t7e{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=Se(r.shape),a=Be({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new t7e(i),l=n.runWebGLProgram(o,[a],a.dtype),c=Be({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const r7e={kernelName:RX,backendName:"webgl",kernelFunc:n7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s7e{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:a,filterHeight:o,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:p}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${a});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:a,pad:o,dilations:l}=r,c=Av(s.shape,i.shape,a,o,"NHWC",l);let u;const d=new s7e(c);u=n.runWebGLProgram(d,[s,i],"float32");const p=Be({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),p}const a7e={kernelName:HS,backendName:"webgl",kernelFunc:i7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:a,summedDims:o,idDims:l}=DD(s,i.length);MD(a.length,l,i);const{path:c,steps:u}=FD(o,l),d=u.length;let p=null,g=a.length;const y=[];for(let x=0;x<d;++x){for(const v of u[x]){const{permutationIndices:w,expandDims:k}=OD(g,l[v]);let S;LD(w)?S=i[v]:(S=Ls({inputs:{x:i[v]},backend:n,attrs:{perm:w}}),y.push(S));const I=S.shape.slice();for(let E=0;E<k.length;++E)I.splice(k[E],0,1);rn(S.shape,I)||(S=Be({inputs:{x:S},backend:n,attrs:{shape:I}}),y.push(S)),p===null?p=S:(p=IO({inputs:{a:S,b:p},backend:n}),y.push(p))}x<d-1&&(c[x]>=0&&(p=a2({inputs:{x:p},backend:n,attrs:{axis:c[x]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const l7e={kernelName:mj,backendName:"webgl",kernelFunc:o7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e="return (x >= 0.0) ? x : (exp(x) - 1.0);",u7e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,d7e=Gt({opSnippet:c7e,packedOpSnippet:u7e}),h7e={kernelName:Kx,backendName:"webgl",kernelFunc:d7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f7e="return (b >= 0.0) ? a : a * (b + 1.0);",p7e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,m7e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=ge().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new zm(p7e,r.shape,s.shape):new Lh(f7e,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},g7e={kernelName:gj,backendName:"webgl",kernelFunc:m7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y7e=`
  return vec4(equal(a, b));
`,x7e="return float(a == b);",v7e=ls({opSnippet:x7e,packedOpSnippet:y7e,dtype:"bool",cpuKernelImpl:Q8e}),b7e={kernelName:qS,backendName:"webgl",kernelFunc:v7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w7e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${TD};
  float a1 = ${_D};
  float a2 = ${AD};
  float a3 = ${RD};
  float a4 = ${$D};
  float a5 = ${PD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,k7e=Gt({opSnippet:w7e}),S7e={kernelName:Xx,backendName:"webgl",kernelFunc:k7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e=Um+`
  return exp(x);
`,C7e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Hte=Gt({opSnippet:N7e,packedOpSnippet:C7e,cpuKernelImpl:J8e,dtype:"float32"}),I7e={kernelName:Yx,backendName:"webgl",kernelFunc:Hte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EA(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,a=i.shape.length,o=i.shape.slice();let l=s;return s<0&&(W(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),o.splice(l,0,1),Be({inputs:{x:i},backend:r,attrs:{shape:o}})}const E7e={kernelName:KS,backendName:"webgl",kernelFunc:EA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6="return exp(x) - 1.0;",T7e=Gt({opSnippet:O6,packedOpSnippet:O6,cpuKernelImpl:Z8e}),_7e={kernelName:Qx,backendName:"webgl",kernelFunc:T7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M6{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qte(t,e,n){const r=n.texData.get(t.dataId),s=Se(t.shape),i=t.shape[t.shape.length-1],a=s/i,o=Be({inputs:{x:t},backend:n,attrs:{shape:[a,i]}}),l=o.shape,c=new M6("real",l,e),u=new M6("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,d,"float32"),g=n.runWebGLProgram(u,d,"float32"),y=ed({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=Be({inputs:{x:y},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(y),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A7e(t){const{inputs:e,backend:n}=t,{input:r}=e;return qte(r,!1,n)}const R7e={kernelName:yj,backendName:"webgl",kernelFunc:A7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $7e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qv(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Tm(s),i==="string"){const a=Zn(i,Se(r));return a.fill(s),e.makeTensorInfo(r,i,a)}else{const a=new $7e(r,s),o=[[s]];return e.runWebGLProgram(a,[],i,o)}}const P7e={kernelName:xj,backendName:"webgl",kernelFunc:Qv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j7e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D7e={kernelName:vj,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new j7e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F6="return floor(x);",O7e=Gt({opSnippet:F6,packedOpSnippet:F6,cpuKernelImpl:e9e}),M7e={kernelName:Jx,backendName:"webgl",kernelFunc:O7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,L7e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,V7e=ls({opSnippet:F7e,packedOpSnippet:L7e,dtype:"int32"}),B7e={kernelName:Zx,backendName:"webgl",kernelFunc:V7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class z7e{constructor(e){this.variableNames=["A"];const n=Vs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U7e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Vs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W7e={kernelName:s$e,backendName:"webgl",kernelFunc:G7e};let np,lT=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function G7e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,i];if(o||a){const x=ge().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(np==null||x!==lT)&&(lT=x,np=document.createElement("canvas").getContext("2d",{willReadFrequently:lT})),np.canvas.width=l,np.canvas.height=c,np.drawImage(s,0,0,l,c),s=np.canvas}const p=n.makeTensorInfo(u,"int32");n.texData.get(p.dataId).usage=Ui.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),s);const g=ge().getBool("WEBGL_PACK")?new U7e(d):new z7e(d),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,x=vc(u),v=as(s.shape,i.shape,l,d,c,p,!1,x);let w;const k=[],S=a!=null,I=o!=null,E=g==="leakyrelu",j=()=>{const T=[s,i],$=(D,R)=>{if(R==="NCHW"&&D.shape.length===1&&D.shape[0]!==1){const F=Be({inputs:{x:D},backend:n,attrs:{shape:[D.shape[0],1,1]}});return k.push(F),F}return D};if(S&&T.push($(a,u)),I&&T.push($(o,u)),E){const D=n.makeTensorInfo([],"float32",Hu(y,"float32"));T.push(D),k.push(D)}return T};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))w=Bte({x:s,filter:i,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else if(v.strideWidth<=2&&x==="channelsLast"&&ge().getBool("WEBGL_EXP_CONV")){const T=g?nx(g,!0):null,$=new Vte(v,S,T,I,E),D=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],R=j();w=n.runWebGLProgram($,R,"float32",D)}else if(ge().getBool("WEBGL_CONV_IM2COL"))w=zte({x:s,filter:i,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:o,leakyreluAlpha:y});else{const T=g?nx(g,!1):null,$=new Lte(v,S,T,I,E),D=j();w=n.runWebGLProgram($,D,"float32")}const A=Be({inputs:{x:w},backend:n,attrs:{shape:v.outShape}});return k.push(w),k.forEach(T=>n.disposeIntermediateTensorInfo(T)),A}const q7e={kernelName:F1,backendName:"webgl",kernelFunc:H7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:a,preluActivationWeights:o}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:g}=r,y=[];let x=u;x==null&&(x=[1,1]),W(vs(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const v=as(s.shape,i.shape,l,x,c,d,!0),w=ge().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,k=p?nx(p,w):null,S=[s,i],I=a!=null,E=o!=null,j=p==="leakyrelu";if(I&&S.push(a),E&&S.push(o),j){const D=n.makeTensorInfo([],"float32",Hu(g,"float32"));S.push(D),y.push(D)}let A;w?A=new Gte(v,I,k,E,j):A=new Wte(v,I,k,E,j);const T=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],$=n.runWebGLProgram(A,S,"float32",T);return y.forEach(D=>n.disposeIntermediateTensorInfo(D)),$}const X7e={kernelName:YX,backendName:"webgl",kernelFunc:K7e};class Y7e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=dn(r.length);let a=`
    int index;`;for(let o=0;o<this.sliceDim;o++)a+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,a=i[i.length-1],o=Se(r.shape),[l,c,u,d]=yD(r,s),p=Be({inputs:{x:s},backend:n,attrs:{shape:[c,a]}}),g=Be({inputs:{x:r},backend:n,attrs:{shape:[Se(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const w=n.readSync(s.dataId),k=n.bufferSync(r),S=t9e(w,k,r.dtype,c,a,u,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,S.values)}const y=new Y7e(a,d,[c,u],r.shape),x=n.runWebGLProgram(y,[g,p],g.dtype),v=Be({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),v}const J7e={kernelName:$X,backendName:"webgl",kernelFunc:Q7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z7e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=dn(this.rank),s=eXe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function eXe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:a,batchDims:o}=r,l=At(a,s.shape)[0];if(ge().get("DEBUG")){const k=n.readSync(i.dataId),S=s.shape[l];for(let I=0;I<k.length;++I){const E=k[I];W(E<=S-1&&E>=0,()=>`GatherV2: the index value ${E} is not in [0, ${S-1}]`)}}const c=BD(s,i,l,o),u=Se(i.shape),d=[],p=Be({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Be({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(g);const y=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const k=n.bufferSync(g),S=n.bufferSync(p),I=n9e(S,k,y);return d.forEach(E=>n.disposeIntermediateTensorInfo(E)),n.makeTensorInfo(c.outputShape,I.dtype,I.values)}const x=new Z7e(p.shape,y),v=n.runWebGLProgram(x,[p,g],p.dtype);d.push(v);const w=Be({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return d.forEach(k=>n.disposeIntermediateTensorInfo(k)),w}const tXe={kernelName:YS,backendName:"webgl",kernelFunc:Kte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nXe="return float(a > b);",rXe=`
  return vec4(greaterThan(a, b));
`,sXe=ls({opSnippet:nXe,packedOpSnippet:rXe,cpuKernelImpl:r9e,dtype:"bool"}),iXe={kernelName:QS,backendName:"webgl",kernelFunc:sXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aXe="return float(a >= b);",oXe=`
  return vec4(greaterThanEqual(a, b));
`,lXe=ls({opSnippet:aXe,packedOpSnippet:oXe,dtype:"bool",cpuKernelImpl:s9e}),cXe={kernelName:ev,backendName:"webgl",kernelFunc:lXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uXe(t){const{inputs:e,backend:n}=t,{input:r}=e;return qte(r,!0,n)}const dXe={kernelName:bj,backendName:"webgl",kernelFunc:uXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hXe="return float(!isnan(x) && !isinf(x));",fXe=Gt({opSnippet:hXe,dtype:"bool"}),pXe={kernelName:nv,backendName:"webgl",kernelFunc:fXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mXe="return float(isinf(x));",gXe=Gt({opSnippet:mXe,dtype:"bool"}),yXe={kernelName:rv,backendName:"webgl",kernelFunc:gXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xXe="return float(isnan(x));",vXe=Gt({opSnippet:xXe,dtype:"bool"}),bXe={kernelName:sv,backendName:"webgl",kernelFunc:vXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wXe="return float(a < b);",kXe=`
  return vec4(lessThan(a, b));
`,SXe=ls({opSnippet:wXe,packedOpSnippet:kXe,cpuKernelImpl:i9e,dtype:"bool"}),NXe={kernelName:ZS,backendName:"webgl",kernelFunc:SXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CXe="return float(a <= b);",IXe=`
  return vec4(lessThanEqual(a, b));
`,EXe=ls({opSnippet:CXe,packedOpSnippet:IXe,cpuKernelImpl:a9e,dtype:"bool"}),TXe={kernelName:eN,backendName:"webgl",kernelFunc:EXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Xe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,a=o9e(r,s,i);return e.makeTensorInfo([a.length],"float32",a)}const AXe={kernelName:PX,backendName:"webgl",kernelFunc:_Xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RXe=Um+`
  return x < 0.0 ? 0./0. : log(x);
`,$Xe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,PXe=Gt({opSnippet:RXe,packedOpSnippet:$Xe,cpuKernelImpl:l9e}),jXe={kernelName:iv,backendName:"webgl",kernelFunc:PXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe=Um+`
  return log(1.0 + x);
`,OXe=Gt({opSnippet:DXe}),MXe={kernelName:av,backendName:"webgl",kernelFunc:OXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FXe="return float(a >= 1.0 && b >= 1.0);",LXe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,VXe=ls({opSnippet:FXe,packedOpSnippet:LXe,dtype:"bool"}),BXe={kernelName:tN,backendName:"webgl",kernelFunc:VXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zXe="return float(!(x >= 1.0));",UXe=Gt({opSnippet:zXe}),WXe={kernelName:nN,backendName:"webgl",kernelFunc:UXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GXe="return float(a >= 1.0 || b >= 1.0);",HXe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,qXe=ls({opSnippet:GXe,packedOpSnippet:HXe,dtype:"bool"}),KXe={kernelName:rN,backendName:"webgl",kernelFunc:qXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XXe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YXe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,o=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QXe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:a,alpha:o,beta:l}=r,c=ge().getBool("WEBGL_PACK_NORMALIZATION")?new YXe(s.shape,i,a,o,l):new XXe(s.shape,i,a,o,l);return n.runWebGLProgram(c,[s],s.dtype)},JXe={kernelName:sN,backendName:"webgl",kernelFunc:QXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZXe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eYe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:a}=e,{depthRadius:o,bias:l,alpha:c,beta:u}=r,d=new ZXe(s.shape,o,l,c,u);return n.runWebGLProgram(d,[s,i,a],s.dtype)},tYe={kernelName:kj,backendName:"webgl",kernelFunc:eYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nYe(t,e,n,r){const s=Se(e),a=Se(t.shape)/s,o=Be({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=lf(o,t.dtype,"max",r),c=Be({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:a}=r,o=s.shape.length,l=At(i,s.shape);let c=l;const u=Gn(c,o),d=u!=null,p=n.shouldExecuteOnCPU([s]);let g=s;if(d){if(p){const S=n.texData.get(g.dataId).values,I=new Array(o);for(let A=0;A<I.length;A++)I[A]=s.shape[u[A]];const E=NO(S,s.shape,s.dtype,u,I);g=n.makeTensorInfo(I,s.dtype);const j=n.texData.get(g.dataId);j.values=E}else g=i2(s,u,n);c=nr(c.length,o)}os("max",c,o);const[y,x]=Vr(g.shape,c);let v=y;a&&(v=ur(y,l));let w;if(p){const S=n.texData.get(g.dataId).values,I=c9e(S,Se(x),v,s.dtype);w=n.makeTensorInfo(v,s.dtype);const E=n.texData.get(w.dataId);E.values=I}else w=nYe(g,x,v,n);return d&&n.disposeIntermediateTensorInfo(g),w}const rYe={kernelName:iN,backendName:"webgl",kernelFunc:Xte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sYe=CO+`
  return max(a, b);
`,iYe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+of+`
  return result;
`,aYe=ls({opSnippet:sYe,packedOpSnippet:iYe,cpuKernelImpl:u9e}),oYe={kernelName:ov,backendName:"webgl",kernelFunc:aYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Kv(s,"maxPool");const{filterSize:i,strides:a,pad:o,dimRoundingMode:l}=r,c=1;W(vs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=ja(s.shape,i,a,c,o,l);if(u.filterWidth===1&&u.filterHeight===1&&rn(u.inShape,u.outShape))return Ci({inputs:{x:s},backend:n});const d=new rx(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const cYe={kernelName:aN,backendName:"webgl",kernelFunc:lYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:a,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=xc(s.shape,i,a,u,o,c,l),p=new EO(d,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}const dYe={kernelName:oN,backendName:"webgl",kernelFunc:uYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hYe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,a=e.effectiveFilterWidth,o=i-1-e.padInfo.top,l=a-1-e.padInfo.left,c=i*a-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class fYe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,a=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,p=c-1-e.padInfo.top,g=u-1-e.padInfo.left,y=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pYe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,a=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],p=xc(a.shape,o,l,d,c,u),g=new EO(p,"max",!0),y=n.runWebGLProgram(g,[a],a.dtype),x=new fYe(p),v=n.runWebGLProgram(x,[s,y],a.dtype);return n.disposeIntermediateTensorInfo(y),v}const mYe={kernelName:Nj,backendName:"webgl",kernelFunc:pYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:a}=e,o=i;Kv([i,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,p=ja(o.shape,l,c,1,u,d),g=!0,y=new rx(p,"max",g),x=n.runWebGLProgram(y,[o],o.dtype),v=new hYe(p),w=n.runWebGLProgram(v,[s,x],o.dtype);return n.disposeIntermediateTensorInfo(x),w}const yYe={kernelName:Sj,backendName:"webgl",kernelFunc:gYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xYe(t,e,n,r){let s=new rx(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new rx(n,"max",!0,!0,e);const a=r.runWebGLProgram(s,[t],"float32");return[i,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vYe={kernelName:jX,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:a,includeBatchInIndex:o}=e,l=n;W(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];W(vs(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=ja(r.shape,s,i,c,a),[d,p]=xYe(r,o,u,l);return[d,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bYe(t,e,n,r){const s=Se(e),a=Se(t.shape)/s,o=Be({inputs:{x:t},attrs:{shape:[a,s]},backend:r}),l=lf(o,"float32","mean",r),c=Be({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wYe={kernelName:lN,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,a=n,o=r.shape.length,l=At(i,r.shape);let c=l;const u=Gn(c,o),d=u!=null,p=a.shouldExecuteOnCPU([r]),g=[];let y=r;if(d){if(p){const I=a.texData.get(y.dataId).values,E=new Array(o);for(let T=0;T<E.length;T++)E[T]=r.shape[u[T]];const j=NO(I,r.shape,r.dtype,u,E);y=a.makeTensorInfo(E,r.dtype);const A=a.texData.get(y.dataId);A.values=j}else y=i2(r,u,a);g.push(y),c=nr(c.length,o)}os("sum",c,o);const[x,v]=Vr(y.shape,c);let w=x;s&&(w=ur(x,l));const k=bYe(y,v,w,a);for(const S of g)a.disposeIntermediateTensorInfo(S);return k}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=At(i,s.shape);let c=l;const u=Gn(c,o);let d=s;u!=null&&(d=Ls({inputs:{x:s},backend:n,attrs:{perm:u}}),c=nr(c.length,s.shape.length)),os("min",c,o);const[p,g]=Vr(d.shape,c),y=Se(g),x=Be({inputs:{x:d},backend:n,attrs:{shape:[-1,y]}}),v=lf(x,x.dtype,"min",n);let w;if(a){const k=ur(p,l);w=Be({inputs:{x:v},backend:n,attrs:{shape:k}})}else w=Be({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),u!=null&&n.disposeIntermediateTensorInfo(d),w}const SYe={kernelName:cN,backendName:"webgl",kernelFunc:kYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NYe=CO+`
  return min(a, b);
`,CYe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+of+`
  return result;
`,IYe=ls({opSnippet:NYe,packedOpSnippet:CYe,cpuKernelImpl:d9e}),EYe={kernelName:lv,backendName:"webgl",kernelFunc:IYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TYe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=dn(s),a=n.map(u=>u[0]).join(","),o=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ye{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,x)=>y[0]+e[x]+y[1]);const s=e.length,i=dn(s),a=n.map(y=>y[0]).join(","),o=n.map((y,x)=>y[0]+e[x]).join(","),l=Os("rc",s),c=Os("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(s===1){const y=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const y=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${i} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[s-1]} += 1;
          if(${u}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AYe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,a=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _Ye(r.shape,s,i):new TYe(r.shape,s,i);return e.runWebGLProgram(a,[r],r.dtype)},RYe={kernelName:uN,backendName:"webgl",kernelFunc:AYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ye=`if (b == 0.0) return NAN;
  return mod(a, b);`,PYe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+of+`
  return result;
`,jYe=ls({opSnippet:$Ye,packedOpSnippet:PYe}),DYe={kernelName:cv,backendName:"webgl",kernelFunc:jYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OYe{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MYe=`
if (a == b) {
  return 1.0;
};
return a / b;`,FYe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Yte=ls({opSnippet:MYe,packedOpSnippet:FYe,checkOutOfBounds:!0}),LYe={kernelName:qx,backendName:"webgl",kernelFunc:Yte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L6="return a - b;",Qte=ls({opSnippet:L6,packedOpSnippet:L6,supportsComplex:!0,cpuKernelImpl:$9e}),VYe={kernelName:Cv,backendName:"webgl",kernelFunc:Qte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,a=At([i],s.shape),o=Xte({inputs:{x:s},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=ur(o.shape,a),c=Be({inputs:{x:o},backend:n,attrs:{shape:l}}),u=Qte({inputs:{a:s,b:c},backend:n}),d=Hte({inputs:{x:u},backend:n}),p=a2({inputs:{x:d},backend:n,attrs:{axis:a,keepDims:!1}}),g=Be({inputs:{x:p},backend:n,attrs:{shape:l}}),y=Yte({inputs:{a:d,b:g},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const BYe={kernelName:TN,backendName:"webgl",kernelFunc:Jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zYe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:a,normalized:o}=r,l=o?s:Jte({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new OYe(c,u,i),p=[[a]],g=n.runWebGLProgram(d,[l],"int32",p);return o||n.disposeIntermediateTensorInfo(l),g}const UYe={kernelName:DX,backendName:"webgl",kernelFunc:zYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WYe=Oa+`
  return -x;
`,GYe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function HYe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[a,o]=f9e(i.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}let s;return ge().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new tu(r.shape,GYe):s=new Yo(r.shape,WYe),n.runWebGLProgram(s,[r],r.dtype)}const qYe={kernelName:dN,backendName:"webgl",kernelFunc:HYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KYe=hD;function XYe(t){zi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=KYe(c,u,a,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const YYe={kernelName:Cj,backendName:"webgl",kernelFunc:XYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QYe=fD;function JYe(t){zi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:p,validOutputs:g}=QYe(u,d,a,o,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const ZYe={kernelName:Ij,backendName:"webgl",kernelFunc:JYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eQe=pD;function tQe(t){zi("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:a,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),p=a,g=o,y=l,x=c,{selectedIndices:v,selectedScores:w}=eQe(u,d,p,g,y,x);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const nQe={kernelName:Ej,backendName:"webgl",kernelFunc:tQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rQe{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:a,onValue:o,offValue:l}=r,c=Se(s.shape),u=new rQe(c,a,o,l),d=Be({inputs:{x:s},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const g=[...s.shape,a],y=Be({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},iQe={kernelName:pN,backendName:"webgl",kernelFunc:sQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Yv({inputs:{input:r},backend:n}),i=ck({inputs:{x:s},backend:n}),a=o2({inputs:{input:r},backend:n}),o=ck({inputs:{x:a},backend:n}),l=ed({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return Qv({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const aQe={kernelName:RN,backendName:"webgl",kernelFunc:ck};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zte(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Yv({inputs:{input:r},backend:n}),i=Zte({inputs:{x:s},backend:n}),a=o2({inputs:{input:r},backend:n}),o=ck({inputs:{x:a},backend:n}),l=ed({inputs:{real:i,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),l}else return Qv({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const oQe={kernelName:fN,backendName:"webgl",kernelFunc:Zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return EA({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,a=e[0].dtype;e.forEach(u=>{KP(i,u.shape,"All tensors passed to stack must have matching shapes"),W(a===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(u=>{const d=EA({inputs:{input:u},backend:n,attrs:{dim:s}});return o.push(d),d}),c=Fte({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const cQe={kernelName:mN,backendName:"webgl",kernelFunc:lQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uQe{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=dn(s),a=n.map(c=>c[0]).join(","),o=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${a});
      ${i} end = ${i}(${o});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dQe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,v)=>x[0]+e[v]+x[1]);const s=e.length,i=dn(s),a=n.map(x=>x[0]).join(","),o=n.map((x,v)=>x[0]+e[v]).join(","),l=Os("rc",s),c=Os("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],g=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let x=0,v=s===1?2:4;x<v;x++)y+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${d});
        }
      `;y+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${a});
      const ${i} end = ${i}(${o});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ene=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:a}=r;if(Se(s.shape)===0){const c=i.map((u,d)=>u[0]+s.shape[d]+u[1]);return Qv({backend:n,attrs:{shape:c,value:a,dtype:s.dtype}})}const o=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dQe(s.shape,i,a):new uQe(s.shape,i,a),l=[[a]];return n.runWebGLProgram(o,[s],s.dtype,l)},hQe={kernelName:gN,backendName:"webgl",kernelFunc:ene};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fQe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,pQe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+of+`
  return result;
`,mQe=ls({opSnippet:fQe,packedOpSnippet:pQe}),gQe={kernelName:dv,backendName:"webgl",kernelFunc:mQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:a}=r,o=s.shape.length,l=[],c=At(i,s.shape);let u=c;const d=Gn(u,o);let p=s;d!=null&&(p=Ls({inputs:{x:s},backend:n,attrs:{perm:d}}),u=nr(u.length,o),l.push(p)),os("prod",u,o);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:x,outShape:v,outDtype:w}=m9e(p.shape,p.dtype,y,u);g=n.makeTensorInfo(v,w,x)}else{const[y,x]=Vr(p.shape,u),v=Se(x),w=Be({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),k=Lj(s.dtype),S=lf(w,k,"prod",n);g=Be({inputs:{x:S},backend:n,attrs:{shape:y}}),l.push(w),l.push(S)}if(a){l.push(g);const y=ur(g.shape,c);g=Be({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const xQe={kernelName:xN,backendName:"webgl",kernelFunc:yQe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:a}=e,{outputRaggedRank:o}=r,l=s.map(w=>n.readSync(w.dataId)),c=s.map(w=>w.shape),u=n.readSync(i.dataId),d=n.readSync(a.dataId),[p,g,y]=g9e(l,c,u,i.shape,i.dtype,d,a.shape,o),x=p.map(w=>n.makeTensorInfo([w.length],"int32",w)),v=n.makeTensorInfo(y,i.dtype,g);return x.concat([v])}const bQe={kernelName:OX,backendName:"webgl",kernelFunc:vQe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=y9e(a,r.shape,r.dtype,o,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([u.length],r.dtype,u);return[d,p]}const kQe={kernelName:MX,backendName:"webgl",kernelFunc:wQe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:a,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(a.dataId),p=o.map(v=>n.readSync(v.dataId)),g=o.map(v=>v.shape),[y,x]=x9e(c,s.shape,u,i.shape,i.dtype,d,a.shape,p,g,l);return n.makeTensorInfo(y,i.dtype,x)}const NQe={kernelName:FX,backendName:"webgl",kernelFunc:SQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tne=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:a}=n,o=v9e(r,s,i,a);return e.makeTensorInfo([o.length],a,o)},CQe={kernelName:Tj,backendName:"webgl",kernelFunc:tne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IQe="return 1.0 / x;",EQe=Gt({opSnippet:IQe}),TQe={kernelName:hv,backendName:"webgl",kernelFunc:EQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Qe=Oa+`
  return (x < 0.0) ? 0.0 : x;
`,AQe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RQe=Gt({opSnippet:_Qe,packedOpSnippet:AQe}),$Qe={kernelName:fv,backendName:"webgl",kernelFunc:RQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PQe=Oa+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,jQe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DQe=Gt({opSnippet:PQe,packedOpSnippet:jQe}),OQe={kernelName:pv,backendName:"webgl",kernelFunc:DQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;i?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;i?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new FQe(s.shape,l,c,i,a):new MQe(s.shape,l,c,i,a);return n.runWebGLProgram(u,[s],"float32")}const VQe={kernelName:wN,backendName:"webgl",kernelFunc:LQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BQe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],p=1/u,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new BQe(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const UQe={kernelName:Rj,backendName:"webgl",kernelFunc:zQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;i?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GQe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,o,l,c]=e;this.outputShape=[a,n,r,c];const u=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;i?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:a,size:o}=r,[l,c]=o,u=ge().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new GQe(s.shape,l,c,i,a):new WQe(s.shape,l,c,i,a);return n.runWebGLProgram(u,[s],s.dtype)}const qQe={kernelName:bN,backendName:"webgl",kernelFunc:HQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KQe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,a,o]=e,l=[r&&a>1?s-1:s,r&&o>1?i-1:i],c=[r&&a>1?a-1:a,r&&o>1?o-1:o],u=l[0]/c[0],d=l[1]/c[1],p=1/u,g=1/d,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XQe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:a}=r,o=new KQe(i.shape,s.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const YQe={kernelName:Aj,backendName:"webgl",kernelFunc:XQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QQe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,i=e.map((o,l)=>s(l)).join(","),a=dn(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JQe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Os("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=dn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${a}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function u(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function d(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const x=e.map((k,S)=>g(S,y)),v=x.join(","),w=x.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${w}))`}function g(y,x){return n.indexOf(y)!==-1&&e[y]!==1?`${e[y]} - ${x[y]} - 1`:`${x[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,a=s.shape.length,o=At(i,s.shape);if(a===0)return Ci({inputs:{x:s},backend:n});const l=ge().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JQe(s.shape,o):new QQe(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}const eJe={kernelName:kN,backendName:"webgl",kernelFunc:ZQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tJe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJe={kernelName:Fj,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:a}=e,o=n,l=new tJe(r.shape,i),[c,u]=CD(a,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rJe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,sJe=Gt({opSnippet:rJe}),iJe={kernelName:mv,backendName:"webgl",kernelFunc:sJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJe="return inversesqrt(x);",oJe=Gt({opSnippet:aJe,cpuKernelImpl:b9e}),lJe={kernelName:gv,backendName:"webgl",kernelFunc:oJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TO{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=dn(i.length),u=dn(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const v=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cJe{constructor(e,n,r,s,i,a,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=dn(i.length),u=dn(a.length);let d="";r===1?d="i":r===2&&(d="i, j");const p=`getIndices(${d})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const v=`getDefaultValue(${x})`,w=n>1?"strides[j]":"strides",k=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${k};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:a}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=tf(i,s,a),p=[d/c,c];if(d===0)return n.makeTensorInfo(a,s.dtype);const g=Be({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),y=Be({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;ge().getBool("WEBGL_PACK")?v=new cJe(l,o,g.shape.length,y.shape.length,u,p):v=new TO(l,o,g.shape.length,y.shape.length,u,p);const w=n.runWebGLProgram(v,[y,g,x],y.dtype),k=Be({inputs:{x:w},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),k}const dJe={kernelName:LX,backendName:"webgl",kernelFunc:uJe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hJe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=ge().getNumber("WEBGL_VERSION")===2?i:a,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:a}=r,o=new hJe(s.shape[0],s.shape[1],i.shape[1],a),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,i],"int32",l)}const pJe={kernelName:BX,backendName:"webgl",kernelFunc:fJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mJe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${o[u]}`),u<e&&l.push(`${o[u]}`);s=l.join(),i=c.join()}const a=dn(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,a=new mJe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(a,[r,s,i],Si(s.dtype,i.dtype))}const yJe={kernelName:SN,backendName:"webgl",kernelFunc:gJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${UN};
  float scale = ${WN};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,vJe=Gt({opSnippet:xJe}),bJe={kernelName:yv,backendName:"webgl",kernelFunc:vJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJe=Um+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,kJe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SJe=Gt({opSnippet:wJe,packedOpSnippet:kJe,cpuKernelImpl:k9e}),NJe={kernelName:wv,backendName:"webgl",kernelFunc:SJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CJe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,IJe=Gt({opSnippet:CJe}),EJe={kernelName:bv,backendName:"webgl",kernelFunc:IJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJe=Um+`
  return sin(x);
`,_Je=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${of}
  return result;
`,AJe=Gt({opSnippet:TJe,packedOpSnippet:_Je}),RJe={kernelName:xv,backendName:"webgl",kernelFunc:AJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Je=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,PJe=Gt({opSnippet:$Je}),jJe={kernelName:vv,backendName:"webgl",kernelFunc:PJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,OJe=Gt({opSnippet:DJe}),MJe={kernelName:kv,backendName:"webgl",kernelFunc:OJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:a}=r;W(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=i.reduce((w,k)=>w*k),l=[[0,0]];l.push(...a);for(let w=1+i.length;w<s.shape.length;++w)l.push([0,0]);const c=[],u=ene({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=Dv(u.shape,i,o,!1),p=Ov(d.length,i.length,!1),g=Mv(u.shape,i,o,!1),y=Be({inputs:{x:u},backend:n,attrs:{shape:d}}),x=Ls({inputs:{x:y},backend:n,attrs:{perm:p}}),v=Be({inputs:{x},backend:n,attrs:{shape:g}});return c.push(u),c.push(y),c.push(x),c.forEach(w=>n.disposeIntermediateTensorInfo(w)),v},LJe={kernelName:IN,backendName:"webgl",kernelFunc:FJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:a}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(a.dataId)[0],[d,p,g,y,x]=N9e(o,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(p,r.dtype,d),n.makeTensorInfo([p[0]],s.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(v=>Number(v)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const BJe={kernelName:zX,backendName:"webgl",kernelFunc:VJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const a=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=C9e(o,r.shape,r.dtype,a,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const UJe={kernelName:UX,backendName:"webgl",kernelFunc:zJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Cte(a,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const GJe={kernelName:WX,backendName:"webgl",kernelFunc:WJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const a=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Cte(a,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}const qJe={kernelName:GX,backendName:"webgl",kernelFunc:HJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KJe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:a}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=tf(i,s,o),g=!1;if(i.dtype==="string"){const w=n.bufferSync(s),k=n.bufferSync(i),S=Au(n.readSync(a.dataId)[0]),I=w9e(w,k,o,p,u,c,l,d,S,g);return n.makeTensorInfo(o,I.dtype,I.values)}const y=new TO(c,l,s.shape.length,i.shape.length,d,[p,1],g),x=n.runWebGLProgram(y,[i,s,a],i.dtype),v=Be({inputs:{x},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(x),v}const XJe={kernelName:HX,backendName:"webgl",kernelFunc:KJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:a}=r,o=At(a,s.shape)[0],l=VD(s,i,o),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(p=>{const g=[...d];g[o]=p;const y=Wm({inputs:{x:s},backend:n,attrs:{begin:u,size:g}});return u[o]+=p,y})}const QJe={kernelName:EN,backendName:"webgl",kernelFunc:YJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6="return sqrt(x);",JJe=Gt({opSnippet:V6,packedOpSnippet:V6,cpuKernelImpl:I9e}),ZJe={kernelName:Sv,backendName:"webgl",kernelFunc:JJe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eZe="return x * x;",tZe=Gt({opSnippet:eZe}),nZe={kernelName:$j,backendName:"webgl",kernelFunc:tZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B6="return (a - b) * (a - b);",rZe=ls({opSnippet:B6,packedOpSnippet:B6}),sZe={kernelName:Nv,backendName:"webgl",kernelFunc:rZe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),a=cc(i),o=E9e(a,"string",r);return n.makeTensorInfo(s.shape,"string",o)}const aZe={kernelName:Pj,backendName:"webgl",kernelFunc:iZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oZe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Oa+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Yo(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const lZe={kernelName:_v,backendName:"webgl",kernelFunc:oZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cZe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=dn(r.length),a=dn(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:a,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:v,isSimpleSlice:w,begin:k,end:S,strides:I}=kD(s.shape,i,a,o,l,c,u,d,p);let E;if(x)E=Be({inputs:{x:s},backend:n,attrs:{shape:y}});else if(v||w){W(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const A=vD(k,S,I),T=Wm({inputs:{x:s},backend:n,attrs:{begin:k,size:A}});E=Be({inputs:{x:T},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(T)}else if(n.shouldExecuteOnCPU([s])){const T=n.readSync(s.dataId),$=_t(s.shape,s.dtype,T),D=T9e(g,$,I,k);E=n.makeTensorInfo(y,s.dtype,D.values)}else{const T=new cZe(k,I,g);E=n.runWebGLProgram(T,[s],s.dtype)}const j=Be({inputs:{x:E},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(E),j}const dZe={kernelName:jj,backendName:"webgl",kernelFunc:uZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:a,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,p=n.readSync(u.dataId),g=n.readSync(d.dataId),[y,x]=_9e(p,g,s,i,a,o,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(d.shape,"int32",x)]}const fZe={kernelName:qX,backendName:"webgl",kernelFunc:hZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:a}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const o=n.readSync(i.dataId),l=n.readSync(a.dataId)[0],[c,u,d]=A9e(o,l,s),p=u.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const mZe={kernelName:KX,backendName:"webgl",kernelFunc:pZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(i.dataId),o=R9e(a,s);return n.makeTensorInfo(i.shape,"int32",o)}const yZe={kernelName:XX,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xZe="return tan(x);",vZe=Gt({opSnippet:xZe}),bZe={kernelName:Iv,backendName:"webgl",kernelFunc:vZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,kZe=Gt({opSnippet:wZe}),SZe={kernelName:Ev,backendName:"webgl",kernelFunc:kZe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NZe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:a}=e,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=tf(a,i,s.shape),p=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const g=Be({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),y=Be({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),x=Be({inputs:{x:s},backend:n,attrs:{shape:p}}),v=new TO(l,o,g.shape.length,y.shape.length,u,p,!1,!0),w=n.runWebGLProgram(v,[y,g,x],x.dtype),k=Be({inputs:{x:w},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),k}const CZe={kernelName:VX,backendName:"webgl",kernelFunc:NZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IZe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let a=0;a<r.length;a++)r[a]=e[a]*n[a];this.outputShape=r,this.rank=r.length;const s=dn(this.rank),i=EZe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function EZe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(p=>Au(p)):l,u=_t(s.shape,s.dtype,c),d=P9e(u,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const a=new IZe(s.shape,i);return n.runWebGLProgram(a,[s],s.dtype)}const TZe={kernelName:Tv,backendName:"webgl",kernelFunc:nne};class _Ze{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class AZe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function z6(t){let e=1;for(;e<t;)e*=2;return e}function RZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:a}=r,o=ge().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ge().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<o||i>l){const D=n.readSync(s.dataId),[R,F]=j9e(D,c,s.dtype,i,a);return[n.makeTensorInfo(R.shape,R.dtype,R.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,Qv({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),p=d!==null&&d.isPacked,g=p?n.unpackTensor(s):s,x=Se(c)/u,v=Be({inputs:{x:g},attrs:{shape:[x,u]},backend:n});p&&Pd(n,g);const w=z6(i),k=z6(u);let S=null;const I=()=>S===null?[v,v]:[v,S],E=(D,R,F)=>{const L=I(),K=new _Ze(F),q=[[u],[S===null?1:0],[Number.NEGATIVE_INFINITY],[D],[R]],Q=S;S=n.runWebGLProgram(K,L,"int32",q),Pd(n,Q)};for(let D=1;D<w;D*=2){const R=D*2;for(let F=D;F>=1;F/=2)E(R,F,[x,k])}for(let D=k;D>w;D/=2){const R=I(),F=new AZe([x,D/2]),K=[[u],[S===null?1:0],[w]],X=S;S=n.runWebGLProgram(F,R,"int32",K),Pd(n,X);const q=w/2,Q=q*2;for(let z=q;z>=1;z/=2)E(Q,z,S.shape)}let j=S;S=Wm({inputs:{x:S},backend:n,attrs:{begin:0,size:[x,i]}}),Pd(n,j);let A=Kte({inputs:{x:v,indices:S},backend:n,attrs:{axis:1,batchDims:1}});Pd(n,v);const T=c.slice(0,-1);T.push(i),j=S,S=Be({inputs:{x:S},attrs:{shape:T},backend:n}),Pd(n,j);const $=A;return A=Be({inputs:{x:A},attrs:{shape:T},backend:n}),Pd(n,$),[A,S]}const $Ze={kernelName:Dj,backendName:"webgl",kernelFunc:RZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PZe{constructor(e,n,r,s,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:a,fillMode:o,fillValue:l,outputShape:c}=r,[u,d,p,g]=s.shape,[y,x]=c??[d,p],v=[u,y,x,g],w=new PZe(d,p,a,o,l,v);return n.runWebGLProgram(w,[s,i],"float32")}const DZe={kernelName:Oj,backendName:"webgl",kernelFunc:jZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OZe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Kv(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=D9e(a,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}const MZe={kernelName:Mj,backendName:"webgl",kernelFunc:OZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const a=s,o=a.shape.length,l=s.shape[i],c=new Array(o-1);let u=0;for(let x=0;x<o;x++)x!==i&&(c[u++]=a.shape[x]);const d=[],p=new Array(o).fill(0),g=a.shape.slice();g[i]=1;const y=new Array(l);for(let x=0;x<y.length;x++){p[i]=x;const v=Wm({inputs:{x:a},backend:n,attrs:{begin:p,size:g}}),w=Be({inputs:{x:v},backend:n,attrs:{shape:c}});y[x]=w,d.push(v)}return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const LZe={kernelName:_N,backendName:"webgl",kernelFunc:FZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VZe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,a=e.numSegments,o=a*Math.ceil(i/r);this.outputShape=[s,o];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";i%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let y="";i%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:a}=r,o=s.shape.length,l=[];let c=0;const u=Gn([c],o);let d=s;u!=null&&(d=Ls({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=nr(1,o)[0]);const p=FQ(d.shape,c,a),g=Se([d.shape[c]]),y=Be({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}});l.push(y);const x=Lj(s.dtype),v=(I,E,j,A,T)=>{const $=I.shape[0],D=I.shape[1],R=MQ(D,T),F={windowSize:R,inSize:D,batchSize:$,numSegments:T},L=new VZe(F,E),K=n.compileAndRun(L,[I,j],A);if(l.push(K),K.shape[1]===T)return K;const X=tne({backend:n,attrs:{start:0,stop:T,step:1,dtype:"float32"}}),q=nne({inputs:{x:X},backend:n,attrs:{reps:[D/R]}});return l.push(X),l.push(q),v(K,E,q,A,T)},w=v(y,"unsortedSegmentSum",i,x,a),k=Be({inputs:{x:w},backend:n,attrs:{shape:p}});let S=k;if(u!=null){l.push(k);const I=Ku(u);S=Ls({inputs:{x:S},backend:n,attrs:{perm:I}})}return l.forEach(I=>n.disposeIntermediateTensorInfo(I)),S}const zZe={kernelName:AN,backendName:"webgl",kernelFunc:BZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UZe=[IHe,THe,RHe,jHe,OHe,LHe,BHe,UHe,qHe,XHe,JHe,tqe,sqe,lqe,dqe,fqe,mqe,vqe,wqe,Sqe,Eqe,jqe,Oqe,Vqe,zqe,Kqe,Yqe,eKe,cHe,rKe,lKe,hKe,xKe,wKe,SKe,CKe,EKe,RKe,jKe,MKe,LKe,BKe,UKe,HKe,KKe,JKe,e7e,r7e,a7e,l7e,h7e,g7e,b7e,S7e,I7e,E7e,_7e,R7e,P7e,D7e,M7e,B7e,W7e,q7e,X7e,J7e,tXe,iXe,cXe,lHe,dXe,aKe,pXe,yXe,bXe,dHe,NXe,TXe,AXe,jXe,MXe,BXe,WXe,KXe,JXe,tYe,rYe,oYe,cYe,dYe,mYe,yYe,vYe,wYe,SYe,EYe,RYe,DYe,UYe,pHe,qYe,YYe,ZYe,nQe,Wqe,iQe,oQe,cQe,hQe,gQe,fHe,xQe,bQe,kQe,NQe,CQe,Gqe,LYe,TQe,$Qe,OQe,gHe,VQe,UQe,qQe,YQe,eJe,nJe,iJe,lJe,dJe,pJe,yJe,bJe,NJe,EJe,RJe,jJe,$qe,BYe,MJe,LJe,BJe,UJe,GJe,qJe,XJe,QJe,ZJe,nZe,sZe,aZe,lZe,dZe,fZe,mZe,yZe,VYe,SHe,bZe,SZe,CZe,TZe,$Ze,DZe,NHe,MZe,LZe,zZe,aQe];for(const t of UZe)QX(t);const cT=(t,e)=>t<=35&&e<=50?"Baik":t<=75&&e<=100?"Sedang":"Buruk",WZe=async(t,e)=>{if(console.log("Starting AI model training and prediction..."),t.length<24)return console.warn("Insufficient data for training. Skipping TF.js prediction."),{air_quality:{next_hour:{pm25:0,gas_ppm:0,humidity:0,temperature:0,aq_status:"Baik",confidence:0},next_6_hours:{pm25:0,gas_ppm:0,humidity:0,temperature:0,aq_status:"Baik",confidence:0},next_24_hours:{pm25:0,gas_ppm:0,humidity:0,temperature:0,aq_status:"Baik",confidence:0}},plant_health:{next_watering:"N/A",growth_prediction:"Memerlukan Perhatian",recommended_actions:[],moisture_forecast:[]},environmental:{weather_trend:"Menurun",pollution_sources:[],recommendations:[]}};const n=t.filter(l=>l.timestamp&&l.dust_pm25!==void 0&&l.gas_ppm!==void 0).sort((l,c)=>c.timestamp.seconds-l.timestamp.seconds).slice(0,48).reverse(),r=n.map(l=>l.dust_pm25),s=n.map(l=>l.gas_ppm),i=n.map(l=>l.humidity),a=n.map(l=>l.temperature),o=async(l,c=100,u=!0)=>{const d=aVe();d.add(NVe({units:1,inputShape:[1]})),d.compile({loss:"meanSquaredError",optimizer:Vd.adam(.01)});const p=Np(l.map((y,x)=>[x+1])),g=Np(l.map(y=>[y]));return await d.fit(p,g,{epochs:c}),d};try{const l=await o(r),c=await o(s),u=await o(i),d=await o(a),p=(S,I)=>{const E=n.length,j=S.predict(Np([E+I],[1,1]));return Math.round(j.dataSync()[0])},g={pm25:p(l,1),gas_ppm:p(c,1),humidity:p(u,1),temperature:p(d,1)},y={pm25:p(l,6),gas_ppm:p(c,6),humidity:p(u,6),temperature:p(d,6)},x={pm25:p(l,24),gas_ppm:p(c,24),humidity:p(u,24),temperature:p(d,24)},v=e.reduce((S,I)=>S+(I.moisture_percent||0),0)/e.length||0,w=e.reduce((S,I)=>S+(I.temperature||0),0)/e.length||0;return{air_quality:{next_hour:{...g,aq_status:cT(g.pm25,g.gas_ppm),confidence:95-Math.round(Math.random()*5)},next_6_hours:{...y,aq_status:cT(y.pm25,y.gas_ppm),confidence:80-Math.round(Math.random()*10)},next_24_hours:{...x,aq_status:cT(x.pm25,x.gas_ppm),confidence:70-Math.round(Math.random()*10)}},plant_health:{next_watering:new Date(Date.now()+(2+Math.random()*2)*24*60*60*1e3).toLocaleDateString("id-ID"),growth_prediction:v>60&&w<35?"Optimal":"Memerlukan Perhatian",recommended_actions:[v<40?"Tingkatkan penyiraman":"Pertahankan jadwal penyiraman",w>30?"Berikan naungan tambahan":"Kondisi suhu optimal",g.pm25>50?"Pasang filter udara":"Kualitas udara mendukung pertumbuhan"],moisture_forecast:Array.from({length:7},(S,I)=>Math.max(30,Math.min(90,v+(Math.random()-.5)*20)))},environmental:{weather_trend:x.pm25<g.pm25?"Membaik":"Menurun",pollution_sources:[...g.gas_ppm>80?["Kendaraan bermotor"]:[],...g.pm25>60?["Aktivitas industri"]:[],...g.humidity<40?["Debu jalan"]:[]],recommendations:["Pantau kualitas udara secara berkala",g.pm25>50?"Aktifkan sistem filtrasi udara":"Buka jendela untuk sirkulasi udara",g.humidity<50?"Gunakan humidifier":"Kondisi kelembaban optimal"]}}}catch(l){throw console.error("Error during TensorFlow.js prediction:",l),l}},GZe=(t=[],e=[])=>{const[n,r]=_.useState(null),[s,i]=_.useState(!0),[a,o]=_.useState(null),[l,c]=_.useState(null);return _.useEffect(()=>{let u=!0;const d=async()=>{if(!t||t.length===0){i(!1);return}i(!0),o(null);try{const g=await WZe(t,e);u&&(r(g),c(new Date))}catch(g){u&&(o("Gagal membuat prediksi. Silakan coba refresh."),console.error(g))}finally{u&&i(!1)}};d();const p=setInterval(d,3600*1e3);return()=>{u=!1,clearInterval(p)}},[t,e]),{predictions:n,loading:s,error:a,lastUpdated:l}},HZe=t=>t<=50?{level:"Baik",color:"text-green-500",bgColor:"bg-green-500/10",recommendations:"aiGood"}:t<=100?{level:"Sedang",color:"text-yellow-500",bgColor:"bg-yellow-500/10",recommendations:"aiModerate"}:t<=150?{level:"Tidak Sehat untuk Sensitif",color:"text-orange-500",bgColor:"bg-orange-500/10",recommendations:"aiUnhealthy"}:{level:"Tidak Sehat",color:"text-red-500",bgColor:"bg-red-500/10",recommendations:"aiVeryUnhealthy"},qZe={aiGood:[" Kondisi udara sangat baik! Ini adalah waktu yang tepat untuk aktivitas outdoor."," Robot GREENOVA merekomendasikan untuk meningkatkan ventilasi dan melakukan olahraga ringan di luar ruangan."," Manfaatkan waktu ini untuk menanam lebih banyak tanaman dan membuka jendela untuk sirkulasi udara alami."," Pertahankan kondisi ini dengan mengurangi penggunaan kendaraan dan mendukung program hijau."],aiModerate:[" Kualitas udara sedang. Grup sensitif sebaiknya mengurangi aktivitas outdoor yang intens."," Robot GREENOVA menyarankan untuk mengaktifkan sistem filtrasi udara dalam ruangan."," Perbanyak tanaman indoor dan pastikan ventilasi rumah berfungsi optimal."," Gunakan transportasi umum atau kendaraan listrik untuk mengurangi emisi tambahan."],aiUnhealthy:[" Udara tidak sehat untuk grup sensitif! Batasi aktivitas outdoor dan gunakan masker N95."," Robot GREENOVA merekomendasikan untuk tetap di dalam ruangan dan menggunakan air purifier."," Aktifkan semua sistem pembersih udara alami dan tutup jendela sementara."," Hindari penggunaan kendaraan pribadi dan dukung program pembersihan udara kota."],aiVeryUnhealthy:[" Kualitas udara sangat buruk! Hindari semua aktivitas outdoor dan gunakan perlindungan maksimal."," Robot GREENOVA menyarankan untuk mengaktifkan mode darurat pembersih udara dan tetap di dalam ruangan."," Grup berisiko tinggi harus segera mencari tempat dengan udara bersih atau fasilitas medis."," Laporkan kondisi ini ke pihak berwenang dan dukung tindakan darurat pembersihan udara."]},KZe=[{icon:fu,title:"Polusi Udara Meningkat",description:"Kualitas udara di kota-kota besar Indonesia semakin memburuk akibat emisi kendaraan dan industri. PM2.5 mencapai level berbahaya bagi kesehatan."},{icon:yy,title:"Ruang Hijau Berkurang",description:"Urbanisasi yang cepat mengurangi ruang hijau kota. Kita perlu solusi cerdas untuk menciptakan oasis hijau di tengah kota."},{icon:Zr,title:"Konsumsi Air Berlebihan",description:"Sistem irigasi konvensional membuang 40% air. Teknologi pintar dapat mengoptimalkan penggunaan air untuk pertanian urban."},{icon:fo,title:"Kurangnya Monitoring Real-time",description:"Pemantauan lingkungan masih manual dan tidak real-time, sehingga sulit mengambil tindakan pencegahan yang tepat waktu."}],XZe=[{icon:Ki,title:"Pembersih Udara Aktif",description:"Memfilter polutan dan partikel berbahaya dari udara sekitar menggunakan sistem filtrasi canggih."},{icon:wn,title:"Perawat Lingkungan Otomatis",description:"Melakukan penyiraman, pemupukan, dan perawatan tanaman secara otomatis berdasarkan data sensor."},{icon:fo,title:"Monitor Lingkungan Interaktif",description:"Memberikan informasi real-time tentang kualitas udara, suhu, kelembaban, dan kondisi tanaman."}],YZe=({isVisible:t,onClose:e})=>t?h.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-primary text-white px-6 py-4 rounded-lg shadow-lg border border-primary/20 animate-in slide-in-from-top-2 duration-300",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Sw,{className:"h-5 w-5 animate-bounce"}),h.jsx("span",{className:"text-sm font-medium",children:"Scroll ke bagian bawah untuk melihat kualitas udara dan info selanjutnya"}),h.jsx("button",{onClick:e,className:"ml-2 text-white/80 hover:text-white transition-colors",children:h.jsx(Zd,{className:"h-4 w-4"})})]})}):null;function U6({onNavigate:t}){const{airReadings:e,robots:n,loading:r}=yl(),[s,i]=sn.useState(!1);sn.useEffect(()=>{const A=()=>{const D=window.scrollY<100;i(D)},T=setTimeout(()=>{i(!0)},2e3);return window.addEventListener("scroll",A),()=>{window.removeEventListener("scroll",A),clearTimeout(T)}},[]);const a=e[0],o=a?.dust_pm25?Math.round(a.dust_pm25*2.5+a.gas_ppm*.5):0,l=HZe(o),c=qZe[l.recommendations],[u,d]=sn.useState(0),[p,g]=sn.useState(!1),y=c[u],{value:x,loading:v,error:w}=GZe(e.slice(0,50).reverse(),"aq_number");if(r)return h.jsx("div",{className:"flex items-center justify-center h-screen w-full",children:h.jsx("p",{className:"text-muted-foreground",children:"Memuat data..."})});const k=a?.dust_pm25||0,S=a?.gas_ppm||0,I=a?.temperature||0,E=a?.humidity||0,j=n.length;return h.jsxs("div",{className:"space-y-16",children:[h.jsx(YZe,{isVisible:s,onClose:()=>i(!1)}),h.jsxs("section",{id:"home",className:"text-center space-y-8 py-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs(Ft,{className:"px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white border-0 mb-4",children:[h.jsx(hk,{className:"h-4 w-4 mr-2"}),"Teknologi Lingkungan Bersih & Hijau"]}),h.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold leading-tight",children:["Menumbuhkan"," ",h.jsx("span",{className:"bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"Udara Bersih"}),h.jsx("br",{}),"di Daerah Anda"]}),h.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-4xl mx-auto leading-relaxed",children:"GREENOVA AI menghadirkan robot pintar yang menggabungkan teknologi AI, IoT, dan computer vision untuk menciptakan lingkungan yang lebih bersih dan sehat melalui pertanian urban yang berkelanjutan."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[h.jsxs(Le,{size:"lg",className:"text-lg px-8 py-4",onClick:()=>t("air-quality"),children:[h.jsx(fu,{className:"h-5 w-5 mr-2"}),"Lihat Kualitas Udara Sekitar",h.jsx(G4,{className:"h-5 w-5 ml-2"})]}),h.jsxs(Le,{variant:"outline",size:"lg",className:"text-lg px-8 py-4",onClick:()=>window.open("https://www.youtube.com/watch?v=placeholder-video-id","_blank"),children:[h.jsx(wn,{className:"h-5 w-5 mr-2"}),"Demo Robot",h.jsx(uT,{className:"h-4 w-4 ml-2"})]})]})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto mt-16",children:[{icon:fu,number:"40%",label:"Pengurangan Polutan"},{icon:Zr,number:"60%",label:"Penghematan Air"},{icon:yy,number:`${Math.floor(k*2)}+`,label:"Tanaman Terpantau"},{icon:xy,number:`${j}`,label:"Robot Online"}].map((A,T)=>h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-3",children:h.jsx(A.icon,{className:"h-6 w-6 text-primary"})}),h.jsx("div",{className:"text-2xl font-bold",children:A.number}),h.jsx("p",{className:"text-sm text-muted-foreground",children:A.label})]},T))})]}),h.jsx("section",{id:"air-quality-real-time",className:"relative",children:h.jsx(De,{className:`border-2 ${l.bgColor} border-current`,children:h.jsxs(Oe,{className:"p-8",children:[h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-9",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-full ${l.bgColor} flex items-center justify-center`,children:o<=50?h.jsx(En,{className:`h-6 w-6 ${l.color}`}):o<=100?h.jsx(hh,{className:`h-6 w-6 ${l.color}`}):h.jsx(ts,{className:`h-6 w-6 ${l.color}`})}),h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-1",children:"Kualitas Udara Real-time"}),h.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[h.jsxs("span",{children:["Update: ",a?new Date(a.timestamp.seconds*1e3).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):"N/A"]}),h.jsx("span",{children:""}),h.jsx("span",{children:"Kota Surabaya"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[h.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[h.jsxs("div",{className:"text-lg font-bold",children:[k>0?k.toFixed(1):"N/A"," g/m"]}),h.jsx("div",{className:"text-xs text-muted-foreground",children:"PM2.5"})]}),h.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[h.jsxs("div",{className:"text-lg font-bold",children:[S>0?S.toFixed(1):"N/A"," ppm"]}),h.jsx("div",{className:"text-xs text-muted-foreground",children:"Gas"})]}),h.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[h.jsxs("div",{className:"text-lg font-bold",children:[I>0?I:"N/A","C"]}),h.jsx("div",{className:"text-xs text-muted-foreground",children:"Suhu"})]}),h.jsxs("div",{className:"text-center p-3 bg-background/50 rounded-lg",children:[h.jsxs("div",{className:"text-lg font-bold",children:[E>0?E:"N/A","%"]}),h.jsx("div",{className:"text-xs text-muted-foreground",children:"Kelembaban"})]})]}),h.jsxs(Iw,{className:`${l.bgColor} border-current`,children:[h.jsx(wn,{className:`h-4 w-4 ${l.color}`}),h.jsxs(Ew,{className:"leading-relaxed text-sm",children:[h.jsx("strong",{className:l.color,children:"AI GREENOVA Merekomendasikan:"})," ",y,c.length>1&&h.jsx("div",{className:"mt-3",children:p?h.jsxs("div",{className:"space-y-2",children:[c.slice(1).map((A,T)=>h.jsx("div",{className:"text-sm p-2 bg-background/30 rounded",children:A},T)),h.jsx(Le,{variant:"outline",size:"sm",onClick:()=>g(!1),className:"text-sm",children:"Less"})]}):h.jsx(Le,{variant:"outline",size:"sm",onClick:()=>g(!0),className:"text-sm",children:"More"})})]})]})]})]})}),h.jsxs("div",{className:"lg:col-span-3 flex flex-col items-center justify-center space-y-3",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:`text-4xl md:text-5xl font-bold ${l.color}`,children:o}),h.jsx("div",{className:"text-base text-muted-foreground",children:"AQI"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:`text-lg font-semibold ${l.color}`,children:l.level}),h.jsx("div",{className:"text-sm text-muted-foreground",children:"Status"})]})]})]}),h.jsxs("div",{className:"mt-4 space-y-3",children:[h.jsxs(De,{className:"p-3 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ro,{className:"h-4 w-4 text-primary"}),h.jsx("span",{className:"font-medium text-sm",children:"Prediksi AQI 1 jam ke depan:"})]}),h.jsx("div",{children:v?h.jsx(bse,{className:"h-4 w-4 animate-spin text-primary"}):w?h.jsx("span",{className:"text-red-500 text-sm",children:"N/A"}):h.jsx("span",{className:"text-lg font-bold text-primary",children:x||"N/A"})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsxs(Le,{onClick:()=>t("air-quality"),className:"text-sm",size:"sm",children:[h.jsx(fo,{className:"h-4 w-4 mr-2"}),"Lihat Detail Analisis"]}),h.jsxs(Le,{variant:"outline",onClick:()=>{sessionStorage.setItem("autoMessage",`Berdasarkan kondisi udara saat ini dengan AQI ${o} (${l.level}), PM2.5: ${k} g/m, Gas: ${S} ppm, suhu: ${I}C, dan kelembaban: ${E}%, apa saran terbaik yang bisa diberikan untuk memperbaiki kualitas udara dan menciptakan lingkungan yang lebih sehat?`),t("ask-greenova")},className:"text-sm",size:"sm",children:[h.jsx(wn,{className:"h-4 w-4 mr-2"}),"Tanya AI untuk Saran"]})]})]})]})})}),h.jsxs("section",{className:"space-y-12",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Why this is important for us?"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Indonesia menghadapi tantangan lingkungan yang serius. Teknologi GREENOVA AI hadir sebagai solusi inovatif untuk menciptakan masa depan yang lebih berkelanjutan."})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:KZe.map((A,T)=>h.jsx(De,{className:"p-6 hover:shadow-xl transition-all duration-300 hover:-translate-y-2",children:h.jsx(Oe,{className:"space-y-4",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-50 dark:bg-red-950/20",children:h.jsx(A.icon,{className:"h-6 w-6 text-red-500"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold mb-2",children:A.title}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:A.description})]})]})})},T))})]}),h.jsxs("section",{id:"solution",className:"bg-gradient-to-br from-primary/5 to-secondary/5 rounded-3xl p-8 md:p-12 space-y-12",children:[h.jsxs("div",{className:"text-center space-y-4",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"GREENOVA: Our Solution"}),h.jsx(Ft,{className:"px-4 py-2 bg-gradient-to-r from-primary to-secondary text-white text-lg",children:"3-in-1 Solution"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[h.jsx("div",{className:"space-y-8",children:XZe.map((A,T)=>h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-white dark:bg-gray-800 shadow-lg",children:h.jsx(A.icon,{className:"h-6 w-6 text-primary"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold mb-2",children:A.title}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:A.description})]})]},T))}),h.jsxs("div",{className:"relative",children:[h.jsx(De,{className:"p-8 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border-2 border-primary/20",children:h.jsxs(Oe,{className:"text-center space-y-6",children:[h.jsxs("div",{className:"relative w-48 h-48 mx-auto bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center shadow-2xl",children:[h.jsx(wn,{className:"h-24 w-24 text-white"}),h.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-green-400 rounded-full animate-pulse flex items-center justify-center",children:h.jsx(En,{className:"h-4 w-4 text-white"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Robot GREENOVA AI"}),h.jsx("p",{className:"text-muted-foreground",children:"Dilengkapi ESP32-CAM & Teachable Machine"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fo,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Status: Online"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ep,{className:"h-4 w-4 text-blue-500"}),h.jsxs("span",{children:["Battery: ",n[0]?.battery||85,"%"]})]})]})]})}),h.jsx("div",{className:"absolute -top-4 -left-4 w-16 h-16 bg-primary/20 rounded-full animate-bounce"}),h.jsx("div",{className:"absolute -bottom-4 -right-4 w-12 h-12 bg-secondary/20 rounded-full animate-pulse"})]})]}),h.jsxs("div",{className:"text-center space-y-6 pt-8 border-t border-primary/20",children:[h.jsx("h3",{className:"text-2xl font-semibold",children:"Penasaran gimana cara kerjanya?"}),h.jsxs(Le,{size:"lg",className:"text-lg px-8 py-4",onClick:()=>t("how-it-works"),children:[h.jsx(fk,{className:"h-5 w-5 mr-2"}),"Intip cara kerjanya di sini...",h.jsx(G4,{className:"h-5 w-5 ml-2"})]})]})]}),h.jsxs("section",{className:"space-y-8",children:[h.jsx("div",{className:"text-center",children:h.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Mengapa Memilih GREENOVA AI?"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{icon:sie,title:"Teknologi Terdepan",description:"Menggunakan AI, IoT, dan Computer Vision terbaru untuk hasil optimal"},{icon:Ki,title:"Ramah Lingkungan",description:"Mengurangi penggunaan air hingga 60% dan meningkatkan kualitas udara"},{icon:fo,title:"Monitoring 24/7",description:"Pemantauan real-time dengan notifikasi otomatis untuk kondisi kritis"}].map((A,T)=>h.jsx(De,{className:"p-6 text-center hover:shadow-lg transition-shadow",children:h.jsxs(Oe,{className:"space-y-4",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10",children:h.jsx(A.icon,{className:"h-8 w-8 text-primary"})}),h.jsx("h3",{className:"font-semibold",children:A.title}),h.jsx("p",{className:"text-muted-foreground leading-relaxed",children:A.description})]})},T))})]}),h.jsxs("section",{id:"collaboration",className:"bg-gradient-to-r from-primary to-secondary text-white rounded-3xl p-8 md:p-12 text-center space-y-8",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold",children:"Mari Berkolaborasi"}),h.jsx("h3",{className:"text-2xl md:text-3xl font-semibold opacity-90",children:"Untuk Indonesia yang lebih bersih"}),h.jsx("p",{className:"text-lg md:text-xl opacity-90 max-w-3xl mx-auto leading-relaxed",children:"Bergabunglah dengan gerakan teknologi hijau Indonesia. Bersama-sama kita dapat menciptakan lingkungan yang lebih bersih dan sehat untuk generasi masa depan melalui inovasi teknologi pertanian berkelanjutan."})]}),h.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:h.jsxs(Le,{size:"lg",variant:"secondary",className:"text-primary font-semibold px-8 py-4",onClick:()=>{document.getElementById("contact-section")?.scrollIntoView({behavior:"smooth"}),setTimeout(()=>t("about"),500)},children:[h.jsx(pp,{className:"h-5 w-5 mr-2"}),"Hubungi Kami"]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[h.jsxs(Le,{variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 py-6",onClick:()=>t("about"),children:[h.jsx(xy,{className:"h-5 w-5 mr-2"}),"Tentang Kami"]}),h.jsxs(Le,{variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 py-6",onClick:()=>{t("support"),setTimeout(()=>{document.getElementById("collaboration-section")?.scrollIntoView({behavior:"smooth"})},500)},children:[h.jsx(mk,{className:"h-5 w-5 mr-2"}),"Kolaborasi"]}),h.jsxs(Le,{variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20 py-6",onClick:()=>t("support"),children:[h.jsx(pp,{className:"h-5 w-5 mr-2"}),"Donasi"]})]})]})]})}function QZe(){const[t,e]=_.useState("home"),[n,r]=_.useState(!1),[s,i]=_.useState(null),[a,o]=_.useState(!0),[l,c]=_.useState(null),{robots:u,stations:d,loading:p}=yl(),[g,y]=_.useState(""),[x,v]=_.useState("");sn.useEffect(()=>{p||(o(!1),u.length>0&&!g&&y(u[0].robot_id),d.length>0&&!x&&v(d[0].station_id))},[p,u,d]);const w=F=>{try{e(F)}catch(L){c(L)}},k=()=>{e("home")},S=F=>{e("ask-greenova"),F&&sessionStorage.setItem("autoMessage",F)},I=F=>{r(!0),i(F),e("admin-dashboard")},E=F=>{i(F)},j=()=>{r(!1),i(null),e("home")},A=()=>{e("login")},T=F=>{y(F)},$=F=>{v(F)};if(a)return h.jsx(dRe,{});const D=()=>{if(!n||!s)return null;let F;switch(t){case"admin-dashboard":F=g?h.jsx(Kz,{selectedRobotId:g,onRobotSelect:T}):null;break;case"admin-station-dashboard":F=x?h.jsx(LRe,{selectedStationId:x,onStationSelect:$}):null;break;case"admin-history":F=g?h.jsx(lAe,{selectedRobotId:g,onRobotSelect:T}):null;break;case"admin-settings":F=g?h.jsx(cRe,{selectedRobotId:g,onRobotSelect:T}):null;break;default:F=g?h.jsx(Kz,{selectedRobotId:g,onRobotSelect:T}):null;break}return h.jsx(vhe,{currentPage:t,onPageChange:e,onLogout:j,userInfo:s,onUserUpdate:E,selectedRobotId:g,onRobotSelect:T,selectedStationId:x,onStationSelect:$,children:F})},R=()=>{try{if(t==="login")return h.jsx(kae,{onLogin:I,onBack:k,onNavigate:w});if(n&&t.startsWith("admin-"))return D();switch(t){case"home":return h.jsx(U6,{onNavigate:w});case"ask-greenova":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(Q_e,{})]});case"air-quality":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(eAe,{})]});case"plants-quality":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(fRe,{})]});case"how-it-works":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(tAe,{})]});case"education":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(DAe,{})]});case"about":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(WAe,{onNavigate:w})]});case"support":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Rd,{onClick:k}),h.jsx(GAe,{})]});default:return h.jsx(U6,{onNavigate:w})}}catch(F){return c(F),null}};return h.jsx(hRe,{error:l,children:h.jsx("div",{className:"min-h-screen bg-background text-foreground",children:t==="login"||n&&t.startsWith("admin-")?R():h.jsxs(h.Fragment,{children:[h.jsx(cae,{currentPage:t,onPageChange:e,onLogin:A,children:R()}),h.jsx(uRe,{onClick:S})]})})})}pre.createRoot(document.getElementById("root")).render(h.jsx(QZe,{}));
